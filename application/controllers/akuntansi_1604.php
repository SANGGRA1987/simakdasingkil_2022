<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');


class Akuntansi extends CI_Controller
{

    function __contruct()
    {
        parent::__construct();

    }

	function bukubesar_kasda(){
	
        $data['page_title']= 'CETAK BUKU BESAR';
        $this->template->set('title', 'BUKU BESAR');   
        $this->template->load('template','akuntansi/bukubesar_kasda',$data); 		
	}
	
	function rekening_kasda() {
        $lccr    = $this->input->post('q');
		$kd_skpd = $this->input->post('kd_skpd');

        $sql = " SELECT DISTINCT kd_rek5,nm_rek5 FROM trdrka_pend where kd_skpd='$kd_skpd' AND kd_rek5 like '$lccr%' group by kd_skpd,kd_rek5,nm_rek5";
 
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
           
            $result[] = array(
                        'id' => $ii,        
                        'kd_rek5' => $resulte['kd_rek5'],  
                        'nm_rek5' => $resulte['nm_rek5'],                   
                        );
                        $ii++;
        }
           
        echo json_encode($result);
	} 
    
    function rekening_akt() {
        $lccr = $this->input->post('q');
        $kdskpd = $this->input->post('kdskpd');
//        $sql = " SELECT kd_rek5,nm_rek5 FROM ms_rek5 where kd_rek5 like '$lccr%' limit 20";
        $sql = " SELECT DISTINCT isnull(kd_rek5,'') kd_rek5 , isnull(nm_rek5,'') nm_rek5 FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
				 where kd_skpd='$kdskpd' and (upper(kd_rek5) like upper('%$lccr%') or upper(nm_rek5) like upper('%$lccr%')) group by kd_rek5,nm_rek5 order by kd_rek5";
 
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
           
            $result[] = array(
                        'id' => $ii,        
                        'kd_rek5' => $resulte['kd_rek5'],  
                        'nm_rek5' => $resulte['nm_rek5'],                   
                        );
                        $ii++;
        }
           
        echo json_encode($result);
	}
	
	
	function cetakbb_kasda($dcetak='',$ttd='',$skpd='',$rek5='',$dcetak2='', $jenis=''){ //ANgoez
        $thn_ang = $this->session->userdata('pcThang');
			$cRet ='<TABLE style="border-collapse:collapse;font-family:Arial" width="100%">
					<TR>
						<TD align="center" ><B>BUKU BESAR </B></TD>
					</TR>
					</TABLE>';

			$cRet .='<TABLE style="border-collapse:collapse;font-family:Arial"  width="100%">
					 <TR>
						<TD align="left" width="20%" >SKPD</TD>
						<TD align="left" width="80%" >: '.$skpd.' '.$this->tukd_model->get_nama($skpd,'nm_skpd','ms_skpd','kd_skpd').'</TD>
					 </TR>
					 <TR>
						<TD align="left" width="20%" >Rekening</TD>
						<TD align="left" width="80%" >: '.$rek5.' '.$this->tukd_model->get_nama($rek5,'nm_rek5','ms_rek5','kd_rek5').'</TD>
					 </TR>
					 <TR>
						<TD align="left" width="20%" >Periode</TD>
						<TD align="left" width="80%" >: '.$this->tukd_model->tanggal_format_indonesia($dcetak).' s/d '.$this->tukd_model->tanggal_format_indonesia($dcetak2).'</TD>
					 </TR>
					 </TABLE>';

			$cRet .='<TABLE style="border-collapse:collapse;font-family:Arial;font-size:12px" width="100%" align="center" border="1" cellspacing="0" cellpadding="4">
					 <THEAD>
					 <TR>
						<TD width="15%"  bgcolor="#CCCCCC" align="center" >TANGGAL</TD>
						<TD width="10%" bgcolor="#CCCCCC" align="center" >NO BUKTI</TD>
						<TD width="25%" bgcolor="#CCCCCC" align="center" >URAIAN</TD>
						<TD width="5%" bgcolor="#CCCCCC" align="center" >REF</TD>
						<TD width="15%" bgcolor="#CCCCCC" align="center" >DEBET</TD>
						<TD width="15%" bgcolor="#CCCCCC" align="center" >KREDIT</TD>
						<TD width="15%" bgcolor="#CCCCCC" align="center" >SALDO</TD>
					 </TR>
					 </THEAD>';
			$saldo_awal=0;
			$cRet .='<TR>
					<TD width="15%" align="left" ></TD>
					<TD width="10%" align="right" ></TD>
					<TD width="25%" align="left" >SALDO AWAL</TD>
					<TD width="5%" align="left" ></TD>
					<TD width="15%" align="right" ></TD>
					<TD width="15%" align="right" ></TD>
					<TD width="15%" align="right" >'.number_format($saldo_awal,"2",",",".").'</TD>
					
				 </TR>';
			$jumlah=0;	
			//isi
			$sql = "select a.tgl_kas,a.no_kas,keterangan,0 as debet, rupiah as kredit from trhkasin_ppkd a INNER JOIN trdkasin_ppkd b ON a.kd_skpd=b.kd_skpd AND a.no_sts=b.no_sts where a.kd_skpd='$skpd' and b.kd_rek5='$rek5' and a.tgl_kas between '$dcetak' AND '$dcetak2'";
			
			$hasil = $this->db->query($sql);
			foreach ($hasil->result() as $rows)
                {  
                    $tgl_kas    = $rows->tgl_kas;                    
                    $no_kas     = $rows->no_kas;
                    $keterangan = $rows->keterangan;
                    $debet      = $rows->debet;
					$kredit     = $rows->kredit;
					$jumlah		= $jumlah+$kredit;
					$saldo_awal = $saldo_awal+$kredit;
			
			
			$cRet .='<TR>
						<TD align="left" >'.$this->tukd_model->tanggal_format_indonesia($tgl_kas).'</TD>
						<TD align="left" >'.$no_kas.'</TD>
						<TD align="left" >'.$keterangan.'</TD>
						<TD align="center" ></TD>
						<TD  align="right" >'.number_format($debet,"2",",",".").'</TD>
						<TD  align="right" >'.number_format($kredit,"2",",",".").'</TD>
						<TD  align="right" >'.number_format($saldo_awal,"2",",",".").'</TD>
					 </TR>';
				}	
				$cRet .='<TR>
					<TD width="15%" align="left" ></TD>
					<TD width="10%" align="right" ></TD>
					<TD width="25%" align="left" >JUMLAH</TD>
					<TD width="5%" align="left" ></TD>
					<TD  align="right" >'.number_format($jumlah,"2",",",".").'</TD>
					<TD  align="right" >'.number_format(0,"2",",",".").'</TD>
					<TD  align="right" >'.number_format(0,"2",",",".").'</TD>
					
				 </TR>';
				$cRet .='</TABLE>';				 
				
			$jenis='1';

			//$data['prev']= 'BUKU BESAR';
			if($jenis == 1){
			echo '<title> Buku Besar </title>';
			echo $cRet;
			}
			if($jenis ==2){
            $this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
			}
	}


	
    function rekal()
    {
        $data['page_title'] = 'REKAL TRANSAKSI';
        $this->template->set('title', 'REKAL TRANSAKSI');
        $this->template->load('template', 'akuntansi/rekal', $data);
    }
    
    function neraca_saldo()
    {
        $data['page_title']= 'Neraca Saldo';
        $this->template->set('title', 'Neraca Saldo');   
        $this->template->load('template','akuntansi/neracasaldo',$data) ; 
    }

    function proses_rekal()
    {
		$skpd     = $this->session->userdata('kdskpd');
	
		$this->db->query("recall");
	    echo '1';
    }

    function mapping()
    {
        $data['page_title'] = 'MAPPING REALISASI';
        $this->template->set('title', 'MAPPING REALISASI');
        $this->template->load('template', 'akuntansi/mapping', $data);
    }
    
    
	
    function proses_mapping()
    {
		$user     = $this->session->userdata('pcNama');
		$skpd     = $this->session->userdata('kdskpd');
		$thn	  = $this->session->userdata('pcThang');
		
		$this->db->query("jurnal_brewok_ppkd '$skpd','$user',$thn");

		echo '1';	
	}
	
/*	function proses_mapping_skpd()
    {
		$user     = $this->session->userdata('pcNama');
		$skpd     = $this->session->userdata('kdskpd');
		$thn	  = $this->session->userdata('pcThang');
		
		$this->db->query("jurnal_brewok_skpd '$user',$thn");

		echo '1';	
	}
	
	function proses_konsol()
    {
		$user     = $this->session->userdata('pcNama');
		$skpd     = $this->session->userdata('kdskpd');
		$thn	  = $this->session->userdata('pcThang');
		
		$this->db->query("transfer_lk '$thn'");

		echo '1';	
	}
*/	
	function proses_restore_unit(){
		$dir = $this->input->post('dir');
        $simakda = $this->input->post('simakda');
        $siadinda = $this->input->post('siadinda');
        $nama = $this->input->post('nama');
		
		$sql = " 
			BACKUP DATABASE [$simakda]
				TO
				  DISK = N'$dir:/backupskpd_otomatis.bak'
				WITH
				  NOFORMAT, NOINIT, SKIP,
				  STATS = 5;
				  
			USE master 
			ALTER DATABASE $siadinda
			SET SINGLE_USER
			WITH ROLLBACK IMMEDIATE;

			RESTORE DATABASE [$siadinda]
			FROM
			  DISK = N'$dir:/$nama'
			WITH
			  NOUNLOAD,  REPLACE,  STATS = 10
			ALTER DATABASE $siadinda
			SET MULTI_USER";
		$asg = $this->db->query($sql);
		echo '1';			
       
    }
	
	function proses_transfer_unit(){
        $user	  = $this->session->userdata('pcNama');
        $dir 	  = $this->input->post('dir');
        $simakda  = $this->input->post('simakda');
        $siadinda = $this->input->post('siadinda');
        $nama 	  = $this->input->post('nama');
        $skpd 	  = $this->input->post('skpd');
		$sql = "transfer_konsolidasi '$skpd'";
        $asg = $this->db->query($sql);
		echo '1';	
	}
	
	
	
	/* {
        $this->db->query(" delete from realisasi_anggaran  where left(kd_rek5,1) in('4','5','6')  ");

        $sql = " select * from trdrka order by kd_skpd,kd_kegiatan,kd_rek5 ";
        $query1 = $this->db->query($sql);
        $ii = 0;
        foreach ($query1->result_array() as $res)
        {

            $in = 0;
            $out = 0;
            $cp = 0;
            $real_in = 0;
            $real_out = 0;

            $kd_skpd = $res['kd_skpd'];
            $kd_kegiatan = $res['kd_kegiatan'];
            $kd_rek5 = $res['kd_rek5'];
            $anggaran = $res['nilai_ubah'];

            $gt = substr($kd_kegiatan, 5, strlen($kd_kegiatan) - 5);

            //get_nama($kode,$hasil,$tabel,$field)
            $nm_skpd = $this->tukd_model->get_nama($kd_skpd, 'nm_skpd', 'ms_skpd', 'kd_skpd');
            //$nm_kegiatan=$this->tukd_model->get_nama($gt,'nm_kegiatan','m_giat','kd_kegiatan');
            $nm_rek5 = $this->tukd_model->get_nama($kd_rek5, 'nm_rek5', 'ms_rek5', 'kd_rek5');
            //$nm_skpd="";
            $nm_kegiatan = "";
            //$nm_rek5	="";


           

            //hitung pengeluaran / kas out
            $query2 = $this->db->query(" SELECT SUM(a.debet) AS debet FROM trdju a INNER JOIN trhju b ON a.no_voucher = b.no_voucher WHERE b.kd_skpd='$kd_skpd' AND a.kd_kegiatan='$kd_kegiatan' AND a.kd_rek5='$kd_rek5' ");
            foreach ($query2->result_array() as $res2)
            {
                $debet = $res2['debet'];

            }
            $query3 = $this->db->query(" SELECT SUM(a.kredit) AS kredit FROM trdju a INNER JOIN trhju b ON a.no_voucher = b.no_voucher WHERE b.kd_skpd='$kd_skpd' AND a.kd_kegiatan='$kd_kegiatan' AND a.kd_rek5='$kd_rek5' ");
            foreach ($query3->result_array() as $res3)
            {
                $kredit = $res3['kredit'];

            }
          
            $real_in = $kredit  - $debet;
            $real_out = $debet - $kredit ;
          

            if (((substr($kd_rek5, 0, 1) == '4') or (substr($kd_rek5, 0, 2) == '61')))
            {
                $this->db->query(" insert into realisasi_anggaran(kd_skpd,kd_kegiatan,kd_rek5,anggaran,real_spj,nm_skpd,nm_kegiatan,nm_rek5) values('$kd_skpd','$kd_kegiatan','$kd_rek5',$anggaran,$real_in,'$nm_skpd','$nm_kegiatan','$nm_rek5') ");
            } else
            {
                $this->db->query(" insert into realisasi_anggaran(kd_skpd,kd_kegiatan,kd_rek5,anggaran,real_spj,nm_skpd,nm_kegiatan,nm_rek5) values('$kd_skpd','$kd_kegiatan','$kd_rek5',$anggaran,$real_out,'$nm_skpd','$nm_kegiatan','$nm_rek5') ");
            }
        }

        $this->db->query(" delete from realisasi_anggaran where left(kd_rek5,1) in('7','8','9') ");

        $sql3 = " SELECT  a.kd_skpd AS kd_skpd,b.kd_rek5 AS kd_rek5 FROM trdju b INNER JOIN trhju a ON a.no_voucher=b.no_voucher WHERE LEFT(b.kd_rek5,1) IN('7','8','9') 
                  GROUP BY a.kd_skpd,b.kd_rek5  ORDER BY a.kd_skpd";
        $query5 = $this->db->query($sql3);
        //$ii = 0;
        foreach ($query5->result_array() as $res1)
        {
            //echo 'sdsdsd';
            //hitung pengeluaran / kas out
            $kd_skpd = $res1['kd_skpd'];
            $kd_rek5 = $res1['kd_rek5'];
            $query6 = $this->db->query(" SELECT SUM(a.debet) AS debet FROM trdju a INNER JOIN trhju b ON a.no_voucher = b.no_voucher WHERE b.kd_skpd='$kd_skpd' AND a.kd_rek5='$kd_rek5' ");
            foreach ($query6->result_array() as $res6)
            {
                $debet = $res6['debet'];

            }
            $query7 = $this->db->query(" SELECT SUM(a.kredit) AS kredit FROM trdju a INNER JOIN trhju b ON a.no_voucher = b.no_voucher WHERE b.kd_skpd='$kd_skpd'  AND a.kd_rek5='$kd_rek5' ");

            foreach ($query7->result_array() as $res7)
            {
                //echo 'dsdsd';
                $kredit = $res7['kredit'];

            }

            
            if (substr($kd_rek5, 0, 2) == '71' || substr($kd_rek5, 0, 1) == '8')
            {
                $real = $kredit  - $debet ;
            } else
            {
                $real = $debet - $kredit;
                //$real_ppkd=$debet_ppkd- $kredit_ppkd;
            }
            $this->db->query(" insert into realisasi_anggaran(kd_skpd,kd_rek5,real_spj) values('$kd_skpd','$kd_rek5','$real') ");
            //$this->db->query(" insert into realisasi_ppkd(kd_skpd,kd_rek5,real_spj) values('$kd_skpd','$kd_rek5','$real_ppkd') ");
        }


    
        ///realisasi_laporan
        $this->db->query(" delete from realisasi  where left(kd_rek5,1) in('4','5','6')  ");

        $sql = " select * from trdrka order by kd_skpd,kd_kegiatan,kd_rek5 ";
        $query1 = $this->db->query($sql);
        $ii = 0;
        foreach ($query1->result_array() as $res)
        {

            $in = 0;
            $out = 0;
            $cp = 0;
            $real_in = 0;
            $real_out = 0;

            $kd_skpd = $res['kd_skpd'];
            $kd_kegiatan = $res['kd_kegiatan'];
            $kd_rek5 = $res['kd_rek5'];
            $rek64= $this->tukd_model->get_nama($kd_rek5,'kd_rek64','ms_rek5','kd_rek5');
            $anggaran = $res['nilai_ubah'];

            $gt = substr($kd_kegiatan, 5, strlen($kd_kegiatan) - 5);

            //get_nama($kode,$hasil,$tabel,$field)
            $nm_skpd = $this->tukd_model->get_nama($kd_skpd, 'nm_skpd', 'ms_skpd', 'kd_skpd');
            //$nm_kegiatan=$this->tukd_model->get_nama($gt,'nm_kegiatan','m_giat','kd_kegiatan');
            $nm_rek5 = $this->tukd_model->get_nama($rek64, 'nm_rek64', 'ms_rek5', 'kd_rek64');
            //$nm_skpd="";
            $nm_kegiatan = "";
            //$nm_rek5	="";


           

            //hitung pengeluaran / kas out
            $query2 = $this->db->query(" SELECT SUM(a.debet) AS debet FROM trdju_pkd a INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher WHERE b.kd_skpd='$kd_skpd' AND a.kd_kegiatan='$kd_kegiatan' AND a.kd_rek5='$rek64' ");
            foreach ($query2->result_array() as $res2)
            {
                $debet = $res2['debet'];

            }
            $query3 = $this->db->query(" SELECT SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher WHERE b.kd_skpd='$kd_skpd' AND a.kd_kegiatan='$kd_kegiatan' AND a.kd_rek5='$rek64' ");
            foreach ($query3->result_array() as $res3)
            {
                $kredit = $res3['kredit'];

            }
          
            $real_in = $kredit  - $debet;
            $real_out = $debet - $kredit ;
          

            if (((substr($kd_rek5, 0, 1) == '4') or (substr($kd_rek5, 0, 2) == '61')))
            {
                $this->db->query(" insert into realisasi(kd_skpd,kd_kegiatan,kd_rek5,anggaran,real_spj,nm_skpd,nm_kegiatan,nm_rek5) values('$kd_skpd','$kd_kegiatan','$rek64',$anggaran,$real_in,'$nm_skpd','$nm_kegiatan','$nm_rek5') ");
            } else
            {
                $this->db->query(" insert into realisasi(kd_skpd,kd_kegiatan,kd_rek5,anggaran,real_spj,nm_skpd,nm_kegiatan,nm_rek5) values('$kd_skpd','$kd_kegiatan','$rek64',$anggaran,$real_out,'$nm_skpd','$nm_kegiatan','$nm_rek5') ");
            }
        }

        $this->db->query(" delete from realisasi where left(kd_rek5,1) in('7','8','9') ");

        $sql3 = " SELECT  a.kd_skpd AS kd_skpd,b.kd_rek5 AS kd_rek5 FROM trdju_pkd b INNER JOIN trhju_pkd a ON a.no_voucher=b.no_voucher WHERE LEFT(b.kd_rek5,1) IN('7','8','9') 
                  GROUP BY a.kd_skpd,b.kd_rek5  ORDER BY a.kd_skpd";
        $query5 = $this->db->query($sql3);
        //$ii = 0;
        foreach ($query5->result_array() as $res1)
        {
            //echo 'sdsdsd';
            //hitung pengeluaran / kas out
            $kd_skpd = $res1['kd_skpd'];
            $kd_rek5 = $res1['kd_rek5'];
            $query6 = $this->db->query(" SELECT SUM(a.debet) AS debet FROM trdju_pkd a INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher WHERE b.kd_skpd='$kd_skpd' AND a.kd_rek5='$kd_rek5' ");
            foreach ($query6->result_array() as $res6)
            {
                $debet = $res6['debet'];

            }
            $query7 = $this->db->query(" SELECT SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher WHERE b.kd_skpd='$kd_skpd'  AND a.kd_rek5='$kd_rek5' ");

            foreach ($query7->result_array() as $res7)
            {
                //echo 'dsdsd';
                $kredit = $res7['kredit'];

            }

            
            if (substr($kd_rek5, 0, 2) == '71' || substr($kd_rek5, 0, 1) == '8')
            {
                $real = $kredit  - $debet ;
            } else
            {
                $real = $debet - $kredit;
                //$real_ppkd=$debet_ppkd- $kredit_ppkd;
            }
            $this->db->query(" insert into realisasi(kd_skpd,kd_rek5,real_spj) values('$kd_skpd','$kd_rek5','$real') ");
            //$this->db->query(" insert into realisasi_ppkd(kd_skpd,kd_rek5,real_spj) values('$kd_skpd','$kd_rek5','$real_ppkd') ");
        }

        echo '1';
    }

 */
    
	function skpd_unit() {
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_skpd,nm_skpd FROM simakdatransfer_2015.dbo.ms_skpd where upper(kd_skpd) like upper('%$lccr%') or upper(nm_skpd) like upper('%$lccr%') order by kd_skpd ";
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
           
            $result[] = array(
                        'id' => $ii,        
                        'kd_skpd' => $resulte['kd_skpd'],  
                        'nm_skpd' => $resulte['nm_skpd']
                        );
                        $ii++;
        }
           
        echo json_encode($result);
    	    $query1->free_result();
	}
    
	
	
	function bukubesar()
    {

        $data['page_title'] = 'CETAK BUKU BESAR';
        $this->template->set('title', 'BUKU BESAR');
        $this->template->load('template', 'akuntansi/bukubesar', $data);

    }
    
    
//baru
 function skpd()
    {
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_skpd,nm_skpd FROM ms_skpd where upper(kd_skpd) like upper('%$lccr%') or upper(nm_skpd) like upper('%$lccr%') ";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {

            $result[] = array('id' => $ii, 'kd_skpd' => $resulte['kd_skpd'], 'nm_skpd' => $resulte['nm_skpd'], );
            $ii++;
        }

        echo json_encode($result);
    }


    function rekening() {
        $lccr = $this->input->post('q');
//        $sql = " SELECT kd_rek5,nm_rek5 FROM ms_rek5 where kd_rek5 like '$lccr%' limit 20";
        $sql = " SELECT DISTINCT isnull(kd_rek5,'') kd_rek5 , isnull(nm_rek5,'') nm_rek5 FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
				 where kd_skpd='1.03.01.01' and (upper(kd_rek5) like upper('%$lccr%') or upper(nm_rek5) like upper('%$lccr%')) group by kd_rek5,nm_rek5 order by kd_rek5";
 
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
           
            $result[] = array(
                        'id' => $ii,        
                        'kd_rek5' => $resulte['kd_rek5'],  
                        'nm_rek5' => $resulte['nm_rek5'],                   
                        );
                        $ii++;
        }
           
        echo json_encode($result);
	}      

	function cetakbb($dcetak='',$ttd='',$skpd='',$rek5='',$dcetak2='', $jenis=''){ //ANgoez
        $thn_ang = $this->session->userdata('pcThang');
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" ><B>BUKU BESAR </B></TD>
					</TR>
					</TABLE>';

			$cRet .='<TABLE width="100%">
					 <TR>
						<TD align="left" width="20%" >SKPD</TD>
						<TD align="left" width="80%" >: '.$skpd.' '.$this->tukd_model->get_nama($skpd,'nm_skpd','ms_skpd','kd_skpd').'</TD>
					 </TR>
					 <TR>
						<TD align="left" width="20%" >Rekening</TD>
						<TD align="left" width="80%" >: '.$rek5.' '.$this->tukd_model->get_nama($rek5,'nm_rek64','ms_rek5','kd_rek64').'</TD>
					 </TR>
					 <TR>
						<TD align="left" width="20%" >Periode</TD>
						<TD align="left" width="80%" >: '.$this->tukd_model->tanggal_format_indonesia($dcetak).' s/d '.$this->tukd_model->tanggal_format_indonesia($dcetak2).'</TD>
					 </TR>
					 </TABLE>';

			$cRet .='<TABLE style="border-collapse:collapse;" width="100%" align="center" border="1" cellspacing="0" cellpadding="4">
					 <THEAD>
					 <TR>
						<TD width="15%"  bgcolor="#CCCCCC" align="center" >TANGGAL</TD>
						<TD width="35%" bgcolor="#CCCCCC" align="center" >URAIAN</TD>
						<TD width="5%" bgcolor="#CCCCCC" align="center" >REF</TD>
						<TD width="15%" bgcolor="#CCCCCC" align="center" >DEBET</TD>
						<TD width="15%" bgcolor="#CCCCCC" align="center" >KREDIT</TD>
						<TD width="15%" bgcolor="#CCCCCC" align="center" >SALDO</TD>
					 </TR>
					 </THEAD>';
	if ((substr($rek5,0,1)=='9') or (substr($rek5,0,1)=='8') or ($rek5=='3110101')){
		$csql3 = "SELECT sum(a.debet) as debet,sum(a.kredit) as kredit FROM trdju_pkd a LEFT JOIN trhju_pkd b ON a.no_voucher=b.no_voucher AND a.kd_unit=b.kd_skpd WHERE a.kd_rek5='$rek5' AND left(b.kd_skpd,7)=left('$skpd',7) and b.tgl_voucher < '$dcetak'   AND YEAR(b.tgl_voucher)='$thn_ang'";
		} else {
         $csql3 = "SELECT sum(a.debet) as debet,sum(a.kredit) as kredit FROM trdju_pkd a LEFT JOIN trhju_pkd b ON a.no_voucher=b.no_voucher AND a.kd_unit=b.kd_skpd WHERE a.kd_rek5='$rek5' AND left(b.kd_skpd,7)=left('$skpd',7) and b.tgl_voucher < '$dcetak'   ";
		}
         
         $hasil = $this->db->query($csql3);
         $trh4 = $hasil->row(); 
         $awaldebet = $trh4->debet;
         $awalkredit = $trh4->kredit;
                    if ((substr($rek5,0,1)=='9') or (substr($rek5,0,1)=='5') or (substr($rek5,0,2)=='62') or (substr($rek5,0,2)=='72') or (substr($rek5,0,1)=='1')){					
						$saldo=$awaldebet-$awalkredit;
					}else{
						$saldo=$awalkredit-$awaldebet;
					} 
                    if($saldo<0){
					$a='(';
					$b=')';
					} else{
					$a='';
					$b='';	
					}
                    $cRet .='<TR>
								<TD width="15%" align="left" ></TD>
								<TD width="35%" align="left" >saldo awal</TD>
								<TD width="5%" align="left" ></TD>
								<TD width="15%" align="right" ></TD>
								<TD width="15%" align="right" ></TD>
								<TD width="15%" align="right" >'.$a.''.number_format($saldo,"2",",",".").''.$b.'</TD>
							 </TR>';	      
                
				$idx=1;
				
				$query = $this->db->query("SELECT a.kd_rek5,a.debet,a.kredit,b.tgl_voucher,b.ket,b.no_voucher FROM trdju_pkd a LEFT JOIN trhju_pkd b ON a.no_voucher=b.no_voucher AND a.kd_unit=b.kd_skpd WHERE a.kd_rek5='$rek5' AND left(b.kd_skpd,7)=left('$skpd',7) AND b.tgl_voucher>='$dcetak' AND b.tgl_voucher<='$dcetak2'  ORDER BY b.tgl_voucher, 
										   case when left('$rek5',1) in (1,5,6,9) then kredit-debet else debet-kredit end");  
				//$query = $this->db->query("SELECT a.kd_rek5,a.debet,a.kredit,b.tgl_voucher,b.ket,b.no_voucher FROM trdju_pkd a LEFT JOIN trhju_pkd b ON a.no_voucher=b.no_voucher WHERE a.kd_rek5='$rek5' AND b.kd_skpd='$skpd' and b.tgl_voucher>='$dcetak' and b.tgl_voucher<='$dcetak2' and a.pos='1' ORDER by b.tgl_voucher, convert(b.no_voucher,unsigned)");  
				if ($query->num_rows() > 0){
				$jdebet=0;
				$jkredit=0;
				foreach($query->result_array() as $res){
										
					$tgl_voucher=$res['tgl_voucher'];
					$ket=$res['ket'];
					$ref=$res['no_voucher'];
					$debet=$res['debet'];
					$kredit=$res['kredit'];
					$idx++;
					if($debet<0){
						$debet1=$debet*-1;
						$c='(';
						$d=')';
						}else{
						$c='';
						$d='';	
						$debet1=$debet;
						}
					if($kredit<0){
						$kredit1=$kredit*-1;
						$e='(';
						$f=')';
						}else{
						$e='';
						$f='';	
						$kredit1=$kredit;
						}	
					$saldo=$saldo;
					if ((substr($rek5,0,1)=='9') or (substr($rek5,0,1)=='5') or (substr($rek5,0,2)=='62') or (substr($rek5,0,2)=='72') or (substr($rek5,0,1)=='1')){					
						$saldo=$saldo+$debet-$kredit;
						
					}else{
						$saldo=$saldo+$kredit-$debet;
						
					}
					if($saldo<0){
						$saldo1=$saldo*-1;
						$i='(';
						$j=')';
						}else{
						$saldo1=$saldo;
						$i='';
						$j='';	
						}
					$cRet .='<TR>
								<TD width="15%" align="left" >'.$this->tukd_model->tanggal_format_indonesia($tgl_voucher).'</TD>
								<TD width="35%" align="left" >'.$ket.'</TD>
								<TD width="5%" align="left" >'.$ref.'</TD>
								<TD width="15%" align="right" >'.$c.''.number_format($debet1,"2",",",".").''.$d.'</TD>
								<TD width="15%" align="right" >'.$e.''.number_format($kredit1,"2",",",".").''.$f.'</TD>
								<TD width="15%" align="right" >'.$i.''.number_format($saldo1,"2",",",".").''.$j.'</TD>
							 </TR>';
							 
					$jdebet=$jdebet+$debet;
					$jkredit = $jkredit + $kredit;
	
				}
				if($jdebet<0){
						$jdebet1=$jdebet*-1;
						$k='(';
						$l=')';
						}else{
						$jdebet1=$jdebet;
						$k='';
						$l='';	
						}
				if($jkredit<0){
						$jkredit1=$jkredit*-1;
						$m='(';
						$n=')';
						}else{
						$jkredit1=$jkredit;
						$m='';
						$n='';	
						}
				
				$cRet .='<TR>
					<TD width="15%" align="left" ></TD>
					<TD width="35%" align="left" >JUMLAH</TD>
					<TD width="5%" align="left" ></TD>
					<TD width="15%" align="right" >'.$k.''.number_format($jdebet1,"2",",",".").''.$l.'</TD>
					<TD width="15%" align="right" >'.$m.''.number_format($jkredit1,"2",",",".").''.$n.'</TD>
					<TD width="15%" align="right" >'.$i.''.number_format($saldo1,"2",",",".").''.$j.'</TD>
				 </TR>';
				$cRet .='</TABLE>';				 
				} else{
				
				$cRet .='</TABLE>';
				}
			$jenis='1';

			//$data['prev']= 'BUKU BESAR';
			if($jenis == 1){
			echo '<title> Buku Besar </title>';
			echo $cRet;
			}
			if($jenis ==2){
            $this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
			}
	}

    /*
    function cetakbb($dcetak='',$ttd='',$skpd='',$rek5='',$dcetak2=''){

    $cRet ='<TABLE width="100%">
    <TR>
    <TD align="center" >BUKU BESAR </TD>
    </TR>
    </TABLE>';

    $cRet .='<TABLE width="100%">
    <TR>
    <TD align="left" width="100" >SKPD</TD>
    <TD align="left" width="100" >: '.$skpd.' '.$this->tukd_model->get_nama($skpd,'nm_skpd','ms_skpd','kd_skpd').'</TD>
    </TR>
    <TR>
    <TD align="left" width="100" >Rekening</TD>
    <TD align="left" width="100" >: '.$rek5.' '.$this->tukd_model->get_nama($rek5,'nm_rek5','ms_rek5','kd_rek5').'</TD>
    </TR>
    <TR>
    <TD align="left" width="100" >Periode</TD>
    <TD align="left" width="100" >: '.$this->tukd_model->tanggal_format_indonesia($dcetak).' s/d '.$this->tukd_model->tanggal_format_indonesia($dcetak2).'</TD>
    </TR>
    </TABLE>';

    $cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" >
    <TR>
    <TD width="90" align="center" >TANGGAL</TD>
    <TD width="350" align="center" >URAIAN</TD>
    <TD width="80" align="center" >REF</TD>
    <TD width="100" align="center" >DEBET</TD>
    <TD width="100" align="center" >KREDIT</TD>
    <TD width="120" align="center" >SALDO</TD>
    </TR>';
    

    $idx=1;
    $query = $this->db->query("SELECT a.kd_rek5,a.nilai,b.tgl_kas,b.ket,b.no_kas FROM trdkasout_pkd a LEFT JOIN trhkasout_pkd b ON a.no_kas=b.no_kas WHERE a.kd_rek5='$rek5' AND b.kd_skpd='$skpd' and b.tgl_kas>='$dcetak' and b.tgl_kas<='$dcetak2' ");  
    foreach($query->result_array() as $res){
    
    $cetak[$idx][1]=$res['tgl_kas'];
    $cetak[$idx][2]=$res['ket'];
    $cetak[$idx][3]=$res['no_kas'];
    $cetak[$idx][4]=$res['nilai'];
    $cetak[$idx][5]=0;
    $idx++;

    }

    $query = $this->db->query(" SELECT b.tgl_sts,b.keterangan,a.no_sts,a.rupiah AS nilai FROM trdkasin_pkd a LEFT JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE a.kd_rek5='$rek5' AND b.kd_skpd='$skpd' AND b.tgl_sts>='$dcetak' and b.tgl_sts<='$dcetak2' ");  
    foreach($query->result_array() as $res){

    $cetak[$idx][1]=$res['tgl_sts'];
    $cetak[$idx][2]=$res['keterangan'];
    $cetak[$idx][3]=$res['no_sts'];
    $cetak[$idx][4]=0;
    $cetak[$idx][5]=$res['nilai'];
    $idx++;

    }

    asort($cetak);
    $i=0;
    $saldo=0;
    $jdebet=0;
    $jkredit=0;
    foreach ($cetak as $key => $val) {
    $i++;
    if ((substr($rek5,0,1)=='5') or (substr($rek5,0,2)=='62')){					
    $saldo=$saldo+$cetak[$key][4]-$cetak[$key][5];
    }else{
    $saldo=$saldo+$cetak[$key][5]-$cetak[$key][4];
    }

    $cRet .='<TR>
    <TD width="90" align="left" >'.$this->tukd_model->rev_date($cetak[$key][1]).'</TD>
    <TD width="350" align="left" >'.$cetak[$key][2].'</TD>
    <TD width="80" align="left" >'.$cetak[$key][3].'</TD>
    <TD width="100" align="right" >'.number_format($cetak[$key][4]).'</TD>
    <TD width="100" align="right" >'.number_format($cetak[$key][5]).'</TD>
    <TD width="120" align="right" >'.number_format($saldo).'</TD>
    </TR>';					
    $jdebet=$jdebet+$cetak[$key][4];
    $jkredit=$jkredit+$cetak[$key][5];
    }

    $cRet .='<TR>
    <TD width="90" align="left" ></TD>
    <TD width="350" align="left" >JUMLAH</TD>
    <TD width="80" align="left" ></TD>
    <TD width="100" align="right" >'.number_format($jdebet).'</TD>
    <TD width="100" align="right" >'.number_format($jkredit).'</TD>
    <TD width="120" align="right" ></TD>
    </TR>';					

    $cRet .='</TABLE>';

    $data['prev']= 'BUKU BESAR';
    $this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
    
    }
    */

    function jukeluar()
    {
        $data['page_title'] = 'JURNAL PENGELUARAN';
        $this->template->set('title', 'JURNAL PENGELUARAN');
        $this->template->load('template', 'akuntansi/jukeluar', $data);
    }

    function jumasuk()
    {
        $data['page_title'] = 'JURNAL PENERIMAAN';
        $this->template->set('title', 'JURNAL PENERIMAAN');
        $this->template->load('template', 'akuntansi/jumasuk', $data);
    }


    function ctk_jukeluar($dcetak = '', $ttd = '', $skpd = '', $dcetak2 = '')
    {

        $cRet = '<TABLE width="100%">
					<TR>
						<TD align="center" >JURNAL PENGELUARAN</TD>
					</TR>
					</TABLE>';

        $cRet .= '<TABLE width="100%">
					 <TR>
						<TD align="left" width="100" >SKPD</TD>
						<TD align="left" width="100" >: ' . $skpd . ' ' . $this->tukd_model->
            get_nama($skpd, 'nm_skpd', 'ms_skpd', 'kd_skpd') . '</TD>
					 </TR>
					 <TR>
						<TD  align="left" width="100" >PERIODE</TD>
						<TD align="left" width="100" >: ' . $this->tukd_model->
            tanggal_format_indonesia($dcetak) . ' s/d ' . $this->tukd_model->
            tanggal_format_indonesia($dcetak2) . '</TD>
					 </TR>
					 </TABLE>';

        $cRet .= '<TABLE border="1" cellspacing="0" cellpadding="0" >
					 <TR>
						<TD width="90" align="center" rowspan="2" >TANGGAL</TD>
						<TD width="200" align="center" colspan="2" >NOMOR</TD>
						<TD width="100" align="center" rowspan="2" >KODE REKENING</TD>
						<TD width="200" align="center" rowspan="2" >URAIAN</TD>
						<TD width="80" align="center"  rowspan="2" >REF</TD>
						<TD width="100" align="center" rowspan="2" >JUMLAH</TD>
						<TD width="100" align="center" rowspan="2" >AKUMULASI</TD>
					 </TR>';

        $cRet .= '<TR>
						<TD width="100" align="center" >No.Bukti</TD>
						<TD width="100" align="center" >Bukti Lain</TD>
					 </TR>';

        $idx = 1;
        $saldo = 0;
        $tbukti = '';
        $tgl = '';
        $query = $this->db->query(" SELECT a.kd_rek5,a.nilai,a.nm_rek5,b.tgl_kas,b.ket,b.no_kas FROM trdkasout_pkd a LEFT JOIN trhkasout_pkd b ON a.no_kas=b.no_kas WHERE b.kd_skpd='$skpd' and b.tgl_kas>='$dcetak' and b.tgl_kas<='$dcetak2' order by b.tgl_kas ");
        foreach ($query->result_array() as $res)
        {
            if ($tbukti != $res['no_kas'])
            {
                $nokas = $res['no_kas'];
            } else
            {
                $nokas = '';
            }
            if ($tgl != $res['tgl_kas'])
            {
                $tanggal = $res['tgl_kas'];
            } else
            {
                $tanggal = '';
            }
            $saldo = $saldo + $res['nilai'];
            $cRet .= '<TR>
								<TD  align="left" >' . $this->tukd_model->rev_date($res['tgl_kas']) .
                '</TD>
								<TD  align="left" >' . $nokas . '</TD>
								<TD  align="left" ></TD>
								<TD  align="center" >' . $res['kd_rek5'] . '</TD>
								<TD  align="left" >' . $res['nm_rek5'] . '</TD>
								<TD  align="left" ></TD>
								<TD  align="right" >' . number_format($res['nilai']) . '</TD>
								<TD  align="right" >' . number_format($saldo) . '</TD>
							 </TR>';
            $idx++;
            $tbukti = $res['no_kas'];
            $tgl = $res['tgl_kas'];
        }


        $cRet .= '</TABLE>';

        $data['prev'] = 'JURNAL PENGELUARAN';
        $this->tukd_model->_mpdf('', $cRet, 5, 5, 10, '0');

    }


    function ctk_jumasuk($dcetak = '', $ttd = '', $skpd = '', $dcetak2 = '')
    {

        $cRet = '<TABLE width="100%">
					<TR>
						<TD align="center" >JURNAL PENERIMAAN</TD>
					</TR>
					</TABLE>';

        $cRet .= '<TABLE width="100%">
					 <TR>
						<TD align="left" width="100" >SKPD</TD>
						<TD align="left" width="100" >: ' . $skpd . ' ' . $this->tukd_model->
            get_nama($skpd, 'nm_skpd', 'ms_skpd', 'kd_skpd') . '</TD>
					 </TR>
					 <TR>
						<TD  align="left" width="100" >PERIODE</TD>
						<TD align="left" width="100" >: ' . $this->tukd_model->
            tanggal_format_indonesia($dcetak) . ' s/d ' . $this->tukd_model->
            tanggal_format_indonesia($dcetak2) . '</TD>
					 </TR>
					 </TABLE>';

        $cRet .= '<TABLE border="1" cellspacing="0" cellpadding="0" >
					 <TR>
						<TD width="90" align="center" rowspan="2" >TANGGAL</TD>
						<TD width="200" align="center" colspan="2" >NOMOR</TD>
						<TD width="100" align="center" rowspan="2" >KODE REKENING</TD>
						<TD width="200" align="center" rowspan="2" >URAIAN</TD>
						<TD width="80" align="center"  rowspan="2" >REF</TD>
						<TD width="100" align="center" rowspan="2" >JUMLAH</TD>
						<TD width="100" align="center" rowspan="2" >AKUMULASI</TD>
					 </TR>';

        $cRet .= '<TR>
						<TD width="100" align="center" >No.Bukti</TD>
						<TD width="100" align="center" >Bukti Lain</TD>
					 </TR>';

        $idx = 1;
        $saldo = 0;
        $tbukti = '';
        $query = $this->db->query(" SELECT a.kd_rek5,a.rupiah AS nilai,c.nm_rek5,b.tgl_sts,b.no_sts as no_kas FROM trdkasin_pkd a LEFT JOIN trhkasin_pkd b ON a.no_sts=b.no_sts LEFT JOIN ms_rek5 c ON a.kd_rek5=c.kd_rek5 WHERE  b.kd_skpd='$skpd' and b.tgl_sts>='$dcetak' and b.tgl_sts<='$dcetak2' ");
        foreach ($query->result_array() as $res)
        {
            if ($tbukti != $res['no_kas'])
            {
                $nokas = $res['no_kas'];
            } else
            {
                $nokas = '';
            }
            $saldo = $saldo + $res['nilai'];
            $cRet .= '<TR>
								<TD  align="left" >' . $this->tukd_model->rev_date($res['tgl_sts']) .
                '</TD>
								<TD  align="left" >' . $nokas . '</TD>
								<TD  align="left" ></TD>
								<TD  align="center" >' . $res['kd_rek5'] . '</TD>
								<TD  align="left" >' . $res['nm_rek5'] . '</TD>
								<TD  align="left" ></TD>
								<TD  align="right" >' . number_format($res['nilai']) . '</TD>
								<TD  align="right" >' . number_format($saldo) . '</TD>
							 </TR>';
            $idx++;
            $tbukti = $res['no_kas'];
        }


        $cRet .= '</TABLE>';

        $data['prev'] = 'JURNAL PENERIMAAN';
        $this->tukd_model->_mpdf('', $cRet, 5, 5, 10, '0');

    }

    function jumum()
    {
        $data['page_title'] = 'INPUT JURNAL UMUM';
        $this->template->set('title', 'INPUT JURNAL UMUM');
        $this->template->load('template', 'akuntansi/jumum', $data);
    }

    function jumum_ppkd()
    {
        $data['page_title'] = 'INPUT JURNAL UMUM';
        $this->template->set('title', 'INPUT JURNAL UMUM');
        $this->template->load('template', 'akuntansi/jumum_ppkd', $data);
    }

    function load_ju()
    {
        $result = array();
        $row = array();
        $page = isset($_POST['page']) ? intval($_POST['page']) : 1;
        $rows = isset($_POST['rows']) ? intval($_POST['rows']) : 10;
        $offset = ($page - 1) * $rows;
        $kriteria = $this->input->post('cari');
        $where = "where tabel='1'";
        if ($kriteria <> '')
        {
            $where = "where tabel='1' and (upper(no_voucher) like upper('%$kriteria%') or tgl_voucher like '%$kriteria%' or upper(ket) like upper('%$kriteria%')) ";
        }

        $sql = "SELECT count(*) as total from trhju_pkd $where";
        $query1 = $this->db->query($sql);
        $total = $query1->row();
        $result["total"] = $total->total;
        $query1->free_result();

        $sql = " select * from trhju_pkd $where order by tgl_voucher,no_voucher,kd_skpd limit $offset,$rows";
        $query1 = $this->db->query($sql);
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {
            $row[] = array('no_voucher' => $resulte['no_voucher'], 'tgl_voucher' => $resulte['tgl_voucher'],
                'kd_skpd' => $resulte['kd_skpd'], 'nm_skpd' => $resulte['nm_skpd'], 'ket' =>
                trim($resulte['ket']), 'total_d' => $resulte['total_d'], 'total_k' => $resulte['total_k']);
            $ii++;
        }
        $result["rows"] = $row;
        echo json_encode($result);
        $query1->free_result();
    }

     function load_ju_ppkd()
    {
        $skpdd = $this->session->userdata('kdskpd');
        $result = array();
        $row = array();
        $page = isset($_POST['page']) ? intval($_POST['page']) : 1;
        $rows = isset($_POST['rows']) ? intval($_POST['rows']) : 10;
        $offset = ($page - 1) * $rows;
        $kriteria = $this->input->post('cari');
        $where = "where tabel='1' and kd_skpd='$skpdd'";
        if ($kriteria <> '')
        {
            $where = "where tabel='1' and (upper(no_voucher) like upper('%$kriteria%') or tgl_voucher like '%$kriteria%' or upper(ket) like upper('%$kriteria%')) ";
        }

        $sql = "SELECT count(*) as total from trhju_pkd $where";
        $query1 = $this->db->query($sql);
        $total = $query1->row();
        $result["total"] = $total->total;
        $query1->free_result();

        $sql = " select top $rows * from trhju_pkd $where and no_voucher not in (select top $offset no_voucher from trhju_pkd $where order by tgl_voucher,no_voucher,kd_skpd) order by tgl_voucher,no_voucher,kd_skpd ";
        $query1 = $this->db->query($sql);
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {
            $row[] = array('no_voucher' => $resulte['no_voucher'], 'tgl_voucher' => $resulte['tgl_voucher'],
                'kd_skpd' => $resulte['kd_skpd'], 'nm_skpd' => $resulte['nm_skpd'], 'ket' =>
                trim($resulte['ket']), 'total_d' => $resulte['total_d'], 'total_k' => $resulte['total_k'], 'kreev' => $resulte['reev']);
            $ii++;
        }
        $result["rows"] = $row;
        echo json_encode($result);
        $query1->free_result();
    }

    function load_dju()
    {
        $nomor = $this->input->post('no');
        $sql = "SELECT a.no_voucher,b.kd_kegiatan,b.nm_kegiatan,b.kd_rek5,IF(rk='D',b.nm_rek5,CONCAT(SPACE(4),b.nm_rek5)) AS nm_rek5,b.debet,b.kredit,b.rk,b.jns,b.pos FROM trhju_pkd a INNER JOIN trdju_pkd b ON a.no_voucher=b.no_voucher WHERE a.no_voucher='$nomor'";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {
            $result[] = array('no_voucher' => $resulte['no_voucher'], 'kd_kegiatan' => $resulte['kd_kegiatan'],
                'nm_kegiatan' => $resulte['nm_kegiatan'], 'kd_rek5' => $resulte['kd_rek5'],
                'nm_rek5' => $resulte['nm_rek5'], 'debet' => $resulte['debet'], 'kredit' => $resulte['kredit'],
                'rk' => $resulte['rk'], 'jns' => $resulte['jns'], 'post' => $resulte['pos']);
            $ii++;
        }
        echo json_encode($result);
        $query1->free_result();
    }

    function load_dju_ppkd()
    {
        $nomor = $this->input->post('no');
        $kdskpd = $this->session->userdata('kdskpd');
        $sql = "SELECT a.no_voucher,b.kd_kegiatan,b.nm_kegiatan,b.kd_rek5,b.nm_rek5,b.debet,b.kredit,b.rk,b.jns,b.pos FROM trhju_pkd a INNER JOIN trdju_pkd b ON a.no_voucher=b.no_voucher WHERE a.no_voucher='$nomor' and a.kd_skpd='$kdskpd'";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {
            $result[] = array('no_voucher' => $resulte['no_voucher'],                
                'kd_kegiatan' => $resulte['kd_kegiatan'],
                'nm_kegiatan' => $resulte['nm_kegiatan'], 'kd_rek5' => $resulte['kd_rek5'],
                'nm_rek5' => $resulte['nm_rek5'], 'debet' => $resulte['debet'], 'kredit' => $resulte['kredit'],
                'rk' => $resulte['rk'], 'jns' => $resulte['jns'], 'post' => $resulte['pos']);
            $ii++;
        }
        echo json_encode($result);
        $query1->free_result();
    }
   

    function load_ju_trskpd()
    {
        $jenis = $this->input->post('jenis');
        $prog = $this->input->post('prog');
        $len = strlen($jenis);
        $giat = $this->input->post('giat');
        $cskpd = $this->input->post('kd');

        $jns_beban = '';
        $cgiat = '';
        if ($jenis != '')
        {
            if($jenis=='6'){$jenis='5';}
            if($jenis=='7'){$jenis='6';}
            
            $jns_beban = "and b.jns_kegiatan='$jenis'";
        }
        
        if ($giat != '')
        {
            $cgiat = " and a.kd_kegiatan not in ($giat) ";
        }
        $lccr = $this->input->post('q');
        $sql = "SELECT a.kd_kegiatan,b.nm_kegiatan,left(a.kd_kegiatan,18) as kd_program,(select nm_program from m_prog where kd_program=left(a.kd_kegiatan,18)) as nm_program,sum(a.nilai_ubah) as total FROM trdrka a 
INNER JOIN m_giat b ON a.kd_kegiatan=b.kd_kegiatan
WHERE LEFT(a.kd_skpd,7)= LEFT('$cskpd',7) $jns_beban $cgiat AND (UPPER(a.kd_kegiatan) LIKE UPPER('%$lccr%') OR UPPER(b.nm_kegiatan) LIKE UPPER('%$lccr%'))
GROUP BY a.kd_kegiatan,b.nm_kegiatan,left(a.kd_kegiatan,18)";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {

            $result[] = array('id' => $ii,
                'kd_kegiatan' => $resulte['kd_kegiatan'],
                'nm_kegiatan' => $resulte['nm_kegiatan'], 'kd_program' => $resulte['kd_program'],
                'nm_program' => $resulte['nm_program'], 'total' => $resulte['total']);
            $ii++;
        }

        echo json_encode($result);
        $query1->free_result();
    }

   function load_ju_rek()
    {
        //$jenis = $this->uri->segment(3);
        $jenis = $this->input->post('jenis');
        $len = strlen($jenis);
        $giat = $this->input->post('giat');
        $kode = $this->input->post('kd');
        $rek = $this->input->post('rek');
        $lccr = $this->input->post('q');


        if ($rek != '')
        {
            //if($jenis == '7' || $jenis == '8'  ||  $jenis == '9'){
            //$notIn = " and kd_rek4 not in ($rek) " ;
            //}else{
            $notIn = " and a.kd_rek5 not in ($rek) ";
            //}
        } else
        {
            $notIn = "";
        }
        //echo $jenis;

        if ($jenis == '4' || $jenis == '5' || $jenis == '6' || $jenis == '7')
        {
            $sql = "SELECT (select kd_rek64 from ms_rek5 where kd_rek5=a.kd_rek5) as kd_rek5,a.nm_rek5 FROM trdrka a WHERE a.kd_kegiatan= '$giat' AND kd_skpd = '$kode' $notIn order by kd_rek5";
        } else
        {
            //if ($jenis == '7' || $jenis == '8'  ||  $jenis == '9'){

            //$sql = "SELECT  kd_rek5,nm_rek4 as nm_rek5 FROM ms_rek4 where left(kd_rek4,$len)='$jenis' $notIn";
            //}else{

            $sql = "SELECT kd_rek64 as kd_rek5,a.nm_rek5 FROM ms_rek5 a where left(a.kd_rek5,$len)='$jenis' $notIn order by kd_rek5";
            //}
        }
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {
            $result[] = array('kd_rek5' => $resulte['kd_rek5'], 'nm_rek5' => $resulte['nm_rek5']);
            $ii++;
        }
        echo json_encode($result);
        $query1->free_result();
    }

    function simpan_ju()
    {
        $tabel = $this->input->post('tabel');
        $nomor = $this->input->post('no');
        $tgl = $this->input->post('tgl');
        $skpd = $this->input->post('skpd');
        $nmskpd = $this->input->post('nmskpd');
        $ket = $this->input->post('ket');
        $total_d = $this->input->post('total_d');
        $total_k = $this->input->post('total_k');
        $csql = $this->input->post('sql');

        $usernm = $this->session->userdata('pcNama');
        $update = date('y-m-d H:i:s');
        $msg = array();

        if ($tabel == 'trhju_pkd')
        {
            $sql = "delete from trhju_pkd where kd_skpd='$skpd' and no_voucher='$nomor'";
            $asg = $this->db->query($sql);
            if ($asg)
            {
                $sql = "insert into trhju_pkd(no_voucher,tgl_voucher,ket,username,tgl_update,kd_skpd,nm_skpd,total_d,total_k,tabel) 
                        values('$nomor','$tgl','$ket','$usernm','$update','$skpd','$nmskpd','$total_d','$total_k','1')";
                $asg = $this->db->query($sql);
                if (!($asg))
                {
                    $msg = array('pesan' => '0');
                    echo json_encode($msg);
                    exit();
                } else
                {
                    $msg = array('pesan' => '1');
                    echo json_encode($msg);
                }
            } else
            {
                $msg = array('pesan' => '0');
                echo json_encode($msg);
                exit();
            }

        } else
            if ($tabel == 'trdju_pkd')
            {

                // Simpan Detail //
                $sql = "delete from trdju_pkd where no_voucher='$nomor'";
                $asg = $this->db->query($sql);
                if (!($asg))
                {
                    $msg = array('pesan' => '0');
                    echo json_encode($msg);
                    exit();
                } else
                {
                    $sql = "insert into trdju_pkd(no_voucher,kd_kegiatan,nm_kegiatan,kd_rek5,nm_rek5,debet,kredit,rk,jns,pos,urut)";

                    $asg = $this->db->query($sql . $csql);
                    if (!($asg))
                    {
                        $msg = array('pesan' => '0');
                        echo json_encode($msg);
                        exit();
                    } else
                    {
                        $msg = array('pesan' => '1');
                        echo json_encode($msg);
                    }
                }
            }
    }

    function simpan_ju_ppkd()
    {
        $tabel = $this->input->post('tabel');
        $nomor = $this->input->post('no');
        $tgl = $this->input->post('tgl');
        $skpd = $this->input->post('skpd');
        $nmskpd = $this->input->post('nmskpd');
        $ket = $this->input->post('ket');
        $total_d = $this->input->post('total_d');
        $total_k = $this->input->post('total_k');
        $csql = $this->input->post('sql');
        $creev = $this->input->post('reev');
        
        $usernm = $this->session->userdata('pcNama');
        $update = date('y-m-d H:i:s');
        $msg = array();

        if ($tabel == 'trhju_pkd')
        {
            $sql = "delete from trhju_pkd where kd_skpd='$skpd' and no_voucher='$nomor' ";
            $asg = $this->db->query($sql);
            if ($asg)
            {
                $sql = "insert into trhju_pkd(no_voucher,tgl_voucher,ket,username,tgl_update,kd_skpd,nm_skpd,total_d,total_k,tabel,reev) 
                        values('$nomor','$tgl','$ket','$usernm','$tgl','$skpd','$nmskpd','$total_d','$total_k','1','$creev')";
                $asg = $this->db->query($sql);
                if (!($asg))
                {
                    $msg = array('pesan' => '0');
                    echo json_encode($msg);
                    exit();
                } else
                {
                    $msg = array('pesan' => '1');
                    echo json_encode($msg);
                }
            } else
            {
                $msg = array('pesan' => '0');
                echo json_encode($msg);
                exit();
            }

        } else
            if ($tabel == 'trdju_pkd')
            {

                // Simpan Detail //
                $sql = "delete from trdju_pkd where no_voucher='$nomor'";
                $asg = $this->db->query($sql);
                if (!($asg))
                {
                    $msg = array('pesan' => '0');
                    echo json_encode($msg);
                    exit();
                } else
                {
                    $sql = "insert into trdju_pkd(no_voucher,kd_kegiatan,nm_kegiatan,kd_rek5,nm_rek5,debet,kredit,rk,jns,pos,urut,kd_unit)";
                    $asg = $this->db->query($sql . $csql);
                    
                    $asg = $this->db->query("UPDATE
    trdju_pkd
SET
    trdju_pkd.map_real = ms_rek5.kd_rek5
FROM
    trdju_pkd 
    INNER JOIN ms_rek5 
        ON trdju_pkd.kd_rek5 = ms_rek5.kd_rek64
WHERE
	trdju_pkd.kd_unit = '4.02.01.00'");
                    
                    if (!($asg))
                    {
                        $msg = array('pesan' => '0');
                        echo json_encode($msg);
                        exit();
                    } else
                    {
                        $msg = array('pesan' => '1');
                        echo json_encode($msg);
                    }
                }
            }
    }

    function hapus_ju()
    {
        $nomor = $this->input->post('no');
        $msg = array();
        $sql = "delete from trdju_pkd where no_voucher='$nomor'";
        $asg = $this->db->query($sql);
        if ($asg)
        {
            $sql = "delete from trhju_pkd where no_voucher='$nomor'";
            $asg = $this->db->query($sql);
            if (!($asg))
            {
                $msg = array('pesan' => '0');
                echo json_encode($msg);
                exit();
            }
        } else
        {
            $msg = array('pesan' => '0');
            echo json_encode($msg);
            exit();
        }
        $msg = array('pesan' => '1');
        echo json_encode($msg);
    }

    function hapus_ju_ppkd()
    {
        $nomor = $this->input->post('no');
        $msg = array();
        $sql = "delete from trdju_pkd where no_voucher='$nomor'";
        $asg = $this->db->query($sql);
        if ($asg)
        {
            $sql = "delete from trhju_pkd where no_voucher='$nomor'";
            $asg = $this->db->query($sql);
            if (!($asg))
            {
                $msg = array('pesan' => '0');
                echo json_encode($msg);
                exit();
            }
        } else
        {
            $msg = array('pesan' => '0');
            echo json_encode($msg);
            exit();
        }
        $msg = array('pesan' => '1');
        echo json_encode($msg);
    }


    function penjabaran()
    {
        $data['page_title'] = 'REALISASI';
        $this->template->set('title', 'REALISASI');
        $this->template->load('template', 'akuntansi/penjabaran', $data);
    }
    function cetak_perkada_real($ctk = '', $skpd = '', $awal = '', $akhir = '')
    {

        $cetak = $ctk;
        $id = $skpd;
        $date_awal = $awal;
        $date_akhir = $akhir;
        if ($cetak == 2)
        {
            $tgl_awal = $this->tukd_model->tanggal_format_indonesia($date_awal);
            $tgl_akhir = $this->tukd_model->tanggal_format_indonesia($date_akhir);
        }
        $sqldns = "SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
        $sqlskpd = $this->db->query($sqldns);
        foreach ($sqlskpd->result() as $rowdns)
        {

            $kd_urusan = $rowdns->kd_u;
            $nm_urusan = $rowdns->nm_u;
            $kd_skpd = $rowdns->kd_sk;
            $nm_skpd = $rowdns->nm_sk;
        }

        $sqlsc = "SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
        $sqlsclient = $this->db->query($sqlsc);
        foreach ($sqlsclient->result() as $rowsc)
        {

            $tgl = $rowsc->tgl_rka;
            $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
            $kab = $rowsc->kab_kota;
            $daerah = $rowsc->daerah;
            $thn = $rowsc->thn_ang;
        }


        $cRet = '';
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>$kab</strong></td>
                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>RINCIAN LAPORAN REALISASI ANGGARAN MENURUT URUSAN PEMERINTAHAN DAERAH,ORGANISASI<br/>PENDAPATAN,BELANJA DAN PEMBIAYAAN </strong></td>
                    </tr>
                    
                    <tr>
                         <td align=\"center\"><strong>TAHUN ANGARAN $thn</strong></td>
                    </tr>

                  </table>";
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"left\" border=\"0\">
                    <tr>
                        <td width=\"20%\">Urusan Organisasi </td>
                        <td width=\"80%\">:$kd_urusan - $nm_urusan</td>
                    </tr>
                    <tr>
                        <td>Organisasi</td>
                        <td>:$kd_skpd - $nm_skpd</td>
                    </tr>";
        if ($cetak == 2)
        {
            $cRet .= "<TR>                        
						<TD  align=\"left\" width=\"20%\" >PERIODE</TD>
						<TD align=\"left\" width=\"80%\" >:$tgl_awal s/d $tgl_akhir </TD>                      
					 </TR>";
        }
        $cRet .= "</table>";

        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\"><b>Kode Rekening</b></td>                            
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"26%\" align=\"center\"><b>Uraian</b></td>                            
                            <td colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"28%\" align=\"center\"><b>Jumlah (Rp.)</b></td>
                            <td colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"16%\" align=\"center\"><b>Bertambah/ (berkurang)</b></td>
                            <td  rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"13%\" align=\"center\"><b>Dasar Hukum</b></td>                            
                            </tr>
                        <tr>
 		                     <td width=\"13%\" bgcolor=\"#CCCCCC\" align=\"center\">Anggaran </td>
                             <td width=\"13%\" bgcolor=\"#CCCCCC\" align=\"center\">Realisasi</td>
                             <td width=\"13%\" bgcolor=\"#CCCCCC\" align=\"center\">Jumlah</td>
                             <td width=\"3%\" bgcolor=\"#CCCCCC\" align=\"center\">%</td>
                             
                        </tr>    
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>  
                            <td style=\"border-top: none;\"></td>
                                                                                   
                         </tr>
                     </tfoot>
                    
                     
                        <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"26%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"3%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"14%\">&nbsp;</td>
                            </tr>
                        ";
        if ($cetak == 1)
        {
            $sqltp = "SELECT SUM(a.nilai) AS totp,SUM(a.nilai_ubah) AS totp_u, 
                        (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,1)='4' AND a.kd_skpd='$id') AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,1)='4' AND d.kd_skpd='$id') AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,1)='4' AND f.kd_skpd='$id') AS kredit FROM trdrka a
                         WHERE LEFT(kd_rek5,1)='4' AND kd_skpd='$id'";
        }
        if ($cetak == 2)
        {
            $sqltp = "SELECT SUM(a.nilai) AS totp,SUM(a.nilai_ubah) AS totp_u, 
                        (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,1)='4' AND a.kd_skpd='$id' AND b.tgl_sts>='$date_awal' AND b.tgl_sts<='$date_akhir') AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,1)='4' AND d.kd_skpd='$id' AND  d.tgl_voucher>='$date_awal' AND d.tgl_voucher<='$date_akhir') AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,1)='4' AND f.kd_skpd='$id' AND  f.tgl_voucher>='$date_awal' AND f.tgl_voucher<='$date_akhir') AS kredit FROM trdrka a
                         WHERE LEFT(kd_rek5,1)='4' AND kd_skpd='$id'";
        }

        $sqlp = $this->db->query($sqltp);
        foreach ($sqlp->result() as $rowp)
        {
            $angp = number_format($rowp->totp_u, "2", ".", ",");
            $angaranp = $rowp->totp_u;
            $penp = $rowp->cp;
            $debetp = $rowp->debet;
            $kreditp = $rowp->kredit;
            $realp = ($penp + $kreditp) - $debetp;
            $nrealp = number_format($realp, "2", ".", ",");
            $real_sp = $realp - $angaranp;
            if ($real_sp < 0)
            {
                $x1 = "(";
                $real_sp = $real_sp * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihp = number_format($real_sp, "2", ".", ",");
            $per1p = ($real_sp != 0) ? ($real_sp / $rowp->totp_u) * 100 : 0;
            $persen1p = number_format($per1p);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Pendapatan Daerah</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$angp</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nrealp</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$pend_selisihp$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen1p</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        }
        if ($cetak == 1)
        {
            $sql_p = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek2 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE  h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'3' AS nu FROM trdrka a INNER JOIN ms_rek2 b 
                        ON LEFT(a.kd_rek5,2)=b.kd_rek2 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,24)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,25)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                        ON LEFT(a.kd_rek5,5)=b.kd_rek4 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,27)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan)AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'6' AS nu FROM trdrka a                     
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu ";
        }
        if ($cetak == 2)
        {
            $sql_p = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE  h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'3' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,24)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,25)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir')AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                        ON LEFT(a.kd_rek5,5)=b.kd_rek4 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,27)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir')AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir')AS kredit,'6' AS nu FROM trdrka a                     
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu ";
        }
        $pend = $this->db->query($sql_p);
        //$query = $this->skpd_model->getAllc();

        foreach ($pend->result() as $row)
        {
            $kode = $row->kd_rek;
            $nama = $row->nm_rek;
            $ang = number_format($row->nilai_u, "2", ".", ",");
            $angaran = $row->nilai_u;
            $pen = $row->cp;
            $debet = $row->debet;
            $kredit = $row->kredit;
            $real = ($pen + $kredit) - $debet;
            $nreal = number_format($real, "2", ".", ",");
            $real_s = $real - $angaran;
            if ($real_s < 0)
            {
                $x1 = "(";
                $real_s = $real_s * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih = number_format($real_s, "2", ".", ",");
            $per1 = ($real_s != 0) ? ($real_s / $row->nilai_u) * 100 : 0;
            $persen1 = number_format($per1);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$pend_selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen1</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"left\"></td>
                                     </tr>
                                     ";


        }

        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";


        if ($cetak == 1)
        {
            $sqltb = "SELECT SUM(a.nilai) AS totb,SUM(a.nilai_ubah) AS totb_u, 
            (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,1)='5' AND a.kd_skpd='$id' ) AS cp,
            (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,1)='5' AND d.kd_skpd='$id' ) AS debet,
            (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,1)='5' AND f.kd_skpd='$id' ) AS kredit FROM trdrka a
            WHERE LEFT(kd_rek5,1)='5' AND kd_skpd='$id'";
        }
        if ($cetak == 2)
        {
            $sqltb = "SELECT SUM(a.nilai) AS totb,SUM(a.nilai_ubah) AS totb_u, 
            (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,1)='5' AND a.kd_skpd='$id' AND b.tgl_sts>='$date_awal' AND b.tgl_sts<='$date_akhir') AS cp,
            (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,1)='5' AND d.kd_skpd='$id' AND  d.tgl_voucher>='$date_awal' AND d.tgl_voucher<='$date_akhir') AS debet,
            (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,1)='5' AND f.kd_skpd='$id' AND  f.tgl_voucher>='$date_awal' AND f.tgl_voucher<='$date_akhir') AS kredit FROM trdrka a
            WHERE LEFT(kd_rek5,1)='5' AND kd_skpd='$id'";
        }
        $sqlb = $this->db->query($sqltb);
        foreach ($sqlb->result() as $rowb_5)
        {
            $ang_5 = number_format($rowb_5->totb_u, "2", ".", ",");
            $angaran_5 = $rowb_5->totb_u;
            $in_5 = $rowb_5->cp;
            $debet_5 = $rowb_5->debet;
            $kredit_5 = $rowb_5->kredit;
            $real_5 = $debet_5 - ($in_5 + $kredit_5);
            $nreal_5 = number_format($real_5, "2", ".", ",");
            $real_s_5 = $real_5 - $angaran_5;
            if ($real_s_5 < 0)
            {
                $x1 = "(";
                $real_s_5 = $real_s_5 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_5 = number_format($real_s_5, "2", ".", ",");
            $per_5 = ($real_s_5 != 0) ? ($real_s_5 / $rowb_5->totb_u) * 100 : 0;
            $persen_5 = number_format($per_5);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Belanja Daerah</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_5$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_5</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";


        }
        if ($cetak == 1)
        {
            $sqltbtl = "SELECT SUM(a.nilai) AS totb,SUM(a.nilai_ubah) AS totb_u, 
                            (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='51' AND a.kd_skpd='$id' ) AS cp,
                            (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='51' AND d.kd_skpd='$id' ) AS debet,
                            (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='51' AND f.kd_skpd='$id' ) AS kredit FROM trdrka a
                            WHERE LEFT(kd_rek5,2)='51' AND kd_skpd='$id'";
        }
        if ($cetak == 2)
        {
            $sqltbtl = "SELECT SUM(a.nilai) AS totb,SUM(a.nilai_ubah) AS totb_u, 
                            (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='51' AND a.kd_skpd='$id' AND b.tgl_sts>='$date_awal' AND b.tgl_sts<='$date_akhir') AS cp,
                            (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='51' AND d.kd_skpd='$id' AND  d.tgl_voucher>='$date_awal' AND d.tgl_voucher<='$date_akhir') AS debet,
                            (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='51' AND f.kd_skpd='$id' AND  f.tgl_voucher>='$date_awal' AND f.tgl_voucher<='$date_akhir') AS kredit FROM trdrka a
                            WHERE LEFT(kd_rek5,2)='51' AND kd_skpd='$id'";
        }
        $sqlbtl = $this->db->query($sqltbtl);
        foreach ($sqlbtl->result() as $rowbtl)
        {
            $ang_51 = number_format($rowbtl->totb_u, "2", ".", ",");
            $angaran_51 = $rowbtl->totb_u;
            $in_51 = $rowbtl->cp;
            $debet_51 = $rowbtl->debet;
            $kredit_51 = $rowbtl->kredit;
            $real_51 = $debet_51 - ($in_51 + $kredit_51);
            $nreal_51 = number_format($real_51, "2", ".", ",");
            $real_s_51 = $real_51 - $angaran_51;
            if ($real_s_51 < 0)
            {
                $x1 = "(";
                $real_s_51 = $real_s_51 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_51 = number_format($real_s_51, "2", ".", ",");
            $per_51 = ($real_s_51 != 0) ? ($real_s_51 / $rowbtl->totb_u) * 100 : 0;
            $persen_51 = number_format($per_51);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Belanja Tidak Langsung</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_51</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_51</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_51$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_51</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        }


        if ($cetak == 1)
        {
            $sql_btl = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='51' GROUP BY SUBSTR(a.no_trdrka,12,25)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                        ON LEFT(a.kd_rek5,5)=b.kd_rek4 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='51' GROUP BY SUBSTR(a.no_trdrka,12,27)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'6' AS nu FROM trdrka a                     
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='51' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu";
        }
        if ($cetak == 2)
        {
            $sql_btl = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='51' GROUP BY SUBSTR(a.no_trdrka,12,25)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir')AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                        ON LEFT(a.kd_rek5,5)=b.kd_rek4 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='51' GROUP BY SUBSTR(a.no_trdrka,12,27)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir')AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir')AS kredit,'6' AS nu FROM trdrka a                     
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='51' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu";
        }
        $btl = $this->db->query($sql_btl);

        foreach ($btl->result() as $row_btl)
        {
            $kode = $row_btl->kd_rek;
            $nama = $row_btl->nm_rek;
            $ang_511 = number_format($row_btl->nilai_u, "2", ".", ",");
            $angaran_511 = $row_btl->nilai_u;
            $in_511 = $row_btl->cp;
            $debet_511 = $row_btl->debet;
            $kredit_511 = $row_btl->kredit;
            $real_511 = $debet_511 - ($in_511 + $kredit_511);
            $nreal_511 = number_format($real_511, "2", ".", ",");
            $real_s_511 = $real_511 - $angaran_511;
            if ($real_s_511 < 0)
            {
                $x1 = "(";
                $real_s_511 = $real_s_511 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_511 = number_format($real_s_511, "2", ".", ",");
            $per_511 = ($real_s_5 != 0) ? ($real_s_511 / $row_btl->nilai_u) * 100 : 0;
            $persen_511 = number_format($per_511);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_511</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_511</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_511$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_511</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"left\"></td>
                                     </tr>
                                     ";


        }
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";

        if ($cetak == 1)
        {
            $sqltbl = "SELECT SUM(a.nilai) AS totbl,SUM(a.nilai_ubah) AS totbl_u, 
                        (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='52' AND a.kd_skpd='$id') AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='52' AND d.kd_skpd='$id') AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='52' AND f.kd_skpd='$id') AS kredit FROM trdrka a
                        WHERE LEFT(kd_rek5,2)='52' AND kd_skpd='$id'";
        }
        if ($cetak == 2)
        {
            $sqltbl = "SELECT SUM(a.nilai) AS totbl,SUM(a.nilai_ubah) AS totbl_u, 
                        (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='52' AND a.kd_skpd='$id' AND b.tgl_sts>='$date_awal' AND b.tgl_sts<='$date_akhir') AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='52' AND d.kd_skpd='$id' AND  d.tgl_voucher>='$date_awal' AND d.tgl_voucher<='$date_akhir') AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='52' AND f.kd_skpd='$id' AND  f.tgl_voucher>='$date_awal' AND f.tgl_voucher<='$date_akhir') AS kredit FROM trdrka a
                        WHERE LEFT(kd_rek5,2)='52' AND kd_skpd='$id'";
        }
        $sqlbl = $this->db->query($sqltbl);
        foreach ($sqlbl->result() as $rowbl)
        {
            $ang_52 = number_format($rowbl->totbl_u, "2", ".", ",");
            $angaran_52 = $rowbl->totbl_u;
            $in_52 = $rowbl->cp;
            $debet_52 = $rowbl->debet;
            $kredit_52 = $rowbl->kredit;
            $real_52 = $debet_52 - ($in_52 + $kredit_52);
            $nreal_52 = number_format($real_52, "2", ".", ",");
            $real_s_52 = $real_52 - $angaran_52;
            if ($real_s_52 < 0)
            {
                $x1 = "(";
                $real_s_52 = $real_s_52 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_52 = number_format($real_s_51, "2", ".", ",");
            $per_52 = ($real_s_5 != 0) ? ($real_s_51 / $rowbl->totbl_u) * 100 : 0;
            $persen_52 = number_format($per_52);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Belanja Langsung</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_52</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_52</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_52$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_52</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        }
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";


        if ($cetak == 1)
        {
            $sql_bl = "SELECT * FROM (SELECT a.kd_program AS kd_rek, c.nm_program AS nm_rek,(SELECT SUM(nilai) FROM trdrka WHERE LEFT(kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program) AS nilai,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program) AS nilai_u,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd g INNER JOIN trhkasin_pkd h ON g.no_sts = h.no_sts WHERE h.kd_skpd='$id' AND LEFT(h.kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program ) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd i  INNER JOIN trhju_pkd j ON i.no_voucher = j.no_voucher  WHERE j.kd_skpd='$id' AND LEFT(i.kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program ) AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd k  INNER JOIN trhju_pkd l ON k.no_voucher = l.no_voucher WHERE l.kd_skpd='$id' AND LEFT(k.kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program ) AS kredit,'1' AS nu FROM trskpd a INNER JOIN m_prog c ON a.kd_program1=c.kd_program
                        LEFT JOIN trdrka b ON a.kd_program=LEFT(b.kd_kegiatan,(LENGTH(a.kd_program))) WHERE a.kd_skpd='$id' AND RIGHT(a.kd_program,2) <>'00' GROUP BY a.kd_program,c.nm_program 
                        UNION ALL
                        SELECT a.kd_kegiatan AS kd_rek,c.nm_kegiatan AS nm_rek,SUM(b.nilai)AS nilai,SUM(b.nilai_ubah)AS nilai_u,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd g INNER JOIN trhkasin_pkd h ON g.no_sts = h.no_sts WHERE h.kd_skpd='$id' AND h.kd_kegiatan = a.kd_kegiatan ) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd i  INNER JOIN trhju_pkd j ON i.no_voucher = j.no_voucher  WHERE j.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan ) AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd k  INNER JOIN trhju_pkd l ON k.no_voucher = l.no_voucher WHERE l.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan ) AS kredit,'2' AS nu FROM trskpd a INNER JOIN m_giat c ON a.kd_kegiatan1=c.kd_kegiatan
                        LEFT JOIN trdrka b ON a.kd_kegiatan=b.kd_kegiatan WHERE a.kd_skpd='$id' AND RIGHT(a.kd_program,2) <>'00' GROUP BY a.kd_kegiatan,c.nm_kegiatan
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'3' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3   
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,24)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3                   
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,25)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                        ON LEFT(a.kd_rek5,5)=b.kd_rek4                      
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,27)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'6' AS nu FROM trdrka a                     
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu";
        }
        if ($cetak == 2)
        {
            $sql_bl = "SELECT * FROM (SELECT a.kd_program AS kd_rek, c.nm_program AS nm_rek,(SELECT SUM(nilai) FROM trdrka WHERE LEFT(kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program) AS nilai,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program) AS nilai_u,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd g INNER JOIN trhkasin_pkd h ON g.no_sts = h.no_sts WHERE h.kd_skpd='$id' AND LEFT(h.kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program AND h.tgl_sts>='$date_awal' AND h.tgl_sts<='$date_akhir') AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd i  INNER JOIN trhju_pkd j ON i.no_voucher = j.no_voucher  WHERE j.kd_skpd='$id' AND LEFT(i.kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program AND j.tgl_voucher>='$date_awal' AND j.tgl_voucher<='$date_akhir') AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd k  INNER JOIN trhju_pkd l ON k.no_voucher = l.no_voucher WHERE l.kd_skpd='$id' AND LEFT(k.kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program AND l.tgl_voucher>='$date_awal' AND l.tgl_voucher<='2$date_akhir') AS kredit,'1' AS nu FROM trskpd a INNER JOIN m_prog c ON a.kd_program1=c.kd_program
                        LEFT JOIN trdrka b ON a.kd_program=LEFT(b.kd_kegiatan,(LENGTH(a.kd_program))) WHERE a.kd_skpd='$id' AND RIGHT(a.kd_program,2) <>'00' GROUP BY a.kd_program,c.nm_program 
                        UNION ALL
                        SELECT a.kd_kegiatan AS kd_rek,c.nm_kegiatan AS nm_rek,SUM(b.nilai)AS nilai,SUM(b.nilai_ubah)AS nilai_u,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd g INNER JOIN trhkasin_pkd h ON g.no_sts = h.no_sts WHERE h.kd_skpd='$id' AND h.kd_kegiatan = a.kd_kegiatan AND h.tgl_sts>='2012-11-01' AND h.tgl_sts <='$date_akhir') AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd i  INNER JOIN trhju_pkd j ON i.no_voucher = j.no_voucher  WHERE j.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan AND j.tgl_voucher>='$date_awal' AND j.tgl_voucher<='$date_akhir') AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd k  INNER JOIN trhju_pkd l ON k.no_voucher = l.no_voucher WHERE l.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan AND l.tgl_voucher>='$date_awal' AND l.tgl_voucher<='$date_akhir') AS kredit,'2' AS nu FROM trskpd a INNER JOIN m_giat c ON a.kd_kegiatan1=c.kd_kegiatan
                        LEFT JOIN trdrka b ON a.kd_kegiatan=b.kd_kegiatan WHERE a.kd_skpd='$id' AND RIGHT(a.kd_program,2) <>'00' GROUP BY a.kd_kegiatan,c.nm_kegiatan
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'3' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3   
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,24)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='2012-11-01' AND d.tgl_sts<='$date_akhir' )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3                   
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,25)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir')AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                        ON LEFT(a.kd_rek5,5)=b.kd_rek4                      
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,27)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir')AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir')AS kredit,'6' AS nu FROM trdrka a                     
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu";
        }
        $bl = $this->db->query($sql_bl);
        foreach ($bl->result() as $row_bl)
        {
            $kode = $row_bl->kd_rek;
            $nama = $row_bl->nm_rek;
            $ang_522 = number_format($row_bl->nilai_u, "2", ".", ",");
            $angaran_522 = $row_bl->nilai_u;
            $in_522 = $row_bl->cp;
            $debet_522 = $row_bl->debet;
            $kredit_522 = $row_bl->kredit;
            $real_522 = $debet_522 - ($in_522 + $kredit_522);
            $nreal_522 = number_format($real_522, "2", ".", ",");
            $real_s_522 = $real_522 - $angaran_522;
            if ($real_s_522 < 0)
            {
                $x1 = "(";
                $real_s_522 = $real_s_522 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_522 = number_format($real_s_522, "2", ".", ",");
            $per_522 = ($real_s_522 != 0) ? ($real_s_522 / $row_bl->nilai_u) * 100 : 0;
            $persen_522 = number_format($per_522);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_522</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_522</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_522$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_522</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"left\"></td>
                                     </tr>
                                     ";


        }
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";


        $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Belanja Daerah</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_5$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_5</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        if($id=='1.20.05.01')
        {
                if ($cetak == 1)
                {
                    $sqltpm = "SELECT SUM(IFNULL(a.nilai,0)) AS totbl,SUM(a.nilai_ubah) AS totbl_u, 
                                (SELECT SUM(IFNULL(rupiah,0)) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='61' AND a.kd_skpd='$id' ) AS cp,
                                (SELECT SUM(IFNULL(debet,0)) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='61' AND d.kd_skpd='$id' ) AS debet,
                                (SELECT SUM(IFNULL(kredit,0)) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='61' AND f.kd_skpd='$id' ) AS kredit FROM trdrka a
                                WHERE LEFT(kd_rek5,2)='61' AND kd_skpd='$id'";
                }
                if ($cetak == 2)
                {
                    $sqltpm = "SELECT SUM(IFNULL(a.nilai,0)) AS totbl,SUM(a.nilai_ubah) AS totbl_u, 
                                (SELECT SUM(IFNULL(rupiah,0)) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='61' AND a.kd_skpd='$id' AND b.tgl_sts>='$date_awal' AND b.tgl_sts<='$date_akhir') AS cp,
                                (SELECT SUM(IFNULL(debet,0)) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='61' AND d.kd_skpd='$id' AND  d.tgl_voucher>='$date_awal' AND d.tgl_voucher<='$date_akhir') AS debet,
                                (SELECT SUM(IFNULL(kredit,0)) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='61' AND f.kd_skpd='$id' AND  f.tgl_voucher>='$date_awal' AND f.tgl_voucher<='$date_akhir') AS kredit FROM trdrka a
                                WHERE LEFT(kd_rek5,2)='61' AND kd_skpd='$id'";
                }
                $sqlpm = $this->db->query($sqltpm);
                foreach ($sqlpm->result() as $rowpm)
                {
                    $ang_61 = number_format($rowpm->totbl_u, "2", ".", ",");
                    $angaran_61 = $rowpm->totbl_u;
                    $in_61 = $rowpm->cp;
                    $debet_61 = $rowpm->debet;
                    $kredit_61 = $rowpm->kredit;
                    $real_61 = $debet_61 - ($in_61 + $kredit_61);
                    $nreal_61 = number_format($real_61, "2", ".", ",");
                    $real_s_61 = $real_61 - $angaran_61;
                    if ($real_s_61 < 0)
                    {
                        $x1 = "(";
                        $real_s_61 = $real_s_61 * -1;
                        $y1 = ")";
                    } else
                    {
                        $x1 = "";
                        $y1 = "";
                    }
                    $selisih_61 = number_format($real_s_61, "2", ".", ",");
                    $per_61 = ($real_s_61 != 0) ? ($real_s_61 / $rowpm->totbl_u) * 100 : 0;
                    $persen_61 = number_format($per_61);
                    //
                    //                    $cRet    .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Pembiayaan Masuk</td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_61</td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_61</td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_61$y1</td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_61</td>
                    //                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                    //                                     </tr>";
                }
        
        
                if ($cetak == 1)
                {
                    $sqlpm = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek2 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek2 b 
                                ON LEFT(a.kd_rek5,2)=b.kd_rek2 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,24)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                                ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,25)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                                ON LEFT(a.kd_rek5,5)=b.kd_rek4 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,27)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'6' AS nu FROM trdrka a                     
                                WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu";
                }
                if ($cetak == 2)
                {
                    $sqlpm = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek2 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='<strong>$date_awal</strong>' AND g.tgl_voucher<='$date_akhir' )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek2 b 
                                ON LEFT(a.kd_rek5,2)=b.kd_rek2 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,24)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='2012-10-01' AND d.tgl_sts<='$date_akhir' )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                                ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,25)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir')AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                                ON LEFT(a.kd_rek5,5)=b.kd_rek4 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,27)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir')AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir')AS kredit,'6' AS nu FROM trdrka a                     
                                WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu";
                }
                $sql611 = $this->db->query($sqlpm);
                foreach ($sql611->result() as $row_61)
                {
                    $kd = $row_61->kd_rek;
                    $nm = $row_61->nm_rek;
                    $ang_611 = number_format($row_61->nilai_u, "2", ".", ",");
                    $angaran_611 = $row_61->nilai_u;
                    $in_611 = $row_61->cp;
                    $debet_611 = $row_61->debet;
                    $kredit_611 = $row_61->kredit;
                    $real_611 = $debet_611 - ($in_611 + $kredit_611);
                    $nreal_611 = number_format($real_611, "2", ".", ",");
                    $real_s_611 = $real_611 - $angaran_611;
                    if ($real_s_611 < 0)
                    {
                        $x1 = "(";
                        $real_s_611 = $real_s_611 * -1;
                        $y1 = ")";
                    } else
                    {
                        $x1 = "";
                        $y1 = "";
                    }
                    $selisih_611 = number_format($real_s_611, "2", ".", ",");
                    $per_611 = ($real_s_611 != 0) ? ($real_s_611 / $row_61->nilai_u) * 100 : 0;
                    $persen_611 = number_format($per_611);
        
                    $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"15%\" align=\"left\">$kd</td>                                     
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"26%\">$nm</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$ang_611</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$nreal_611</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$x1$selisih_611$y1</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"3%\" align=\"right\">$persen_611</td>
                                             <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             </tr>";
                }
                $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                             <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             </tr>";
                if ($cetak == 1)
                {
                    $sqltpk = "SELECT SUM(IFNULL(a.nilai,0)) AS totbl,SUM(a.nilai_ubah) AS totbl_u, 
                                (SELECT SUM(IFNULL(rupiah,0)) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='62' AND a.kd_skpd='$id' ) AS cp,
                                (SELECT SUM(IFNULL(debet,0)) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='62' AND d.kd_skpd='$id' ) AS debet,
                                (SELECT SUM(IFNULL(kredit,0)) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='62' AND f.kd_skpd='$id' ) AS kredit FROM trdrka a
                                WHERE LEFT(kd_rek5,2)='62' AND kd_skpd='$id' ";
                }
                if ($cetak == 2)
                {
                    $sqltpk = "SELECT SUM(IFNULL(a.nilai,0)) AS totbl,SUM(a.nilai_ubah) AS totbl_u, 
                                (SELECT SUM(IFNULL(rupiah,0)) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='62' AND a.kd_skpd='$id' AND b.tgl_sts>='$date_awal' AND b.tgl_sts<='$date_akhir') AS cp,
                                (SELECT SUM(IFNULL(debet,0)) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='62' AND d.kd_skpd='$id' AND  d.tgl_voucher>='$date_awal' AND d.tgl_voucher<='$date_akhir') AS debet,
                                (SELECT SUM(IFNULL(kredit,0)) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='62' AND f.kd_skpd='$id' AND  f.tgl_voucher>='$date_awal' AND f.tgl_voucher<='$date_akhir') AS kredit FROM trdrka a
                                WHERE LEFT(kd_rek5,2)='62' AND kd_skpd='$id' ";
                }
                $sqlpk = $this->db->query($sqltpk);
                foreach ($sqlpk->result() as $rowpk)
                {
                    $ang_62 = number_format($rowpk->totbl_u, "2", ".", ",");
                    $angaran_62 = $rowpk->totbl_u;
                    //echo($angaran_62);
                    $in_62 = $rowpk->cp;
                    $debet_62 = $rowpk->debet;
                    $kredit_62 = $rowpk->kredit;
                    $real_62 = $debet_62 - ($in_62 + $kredit_62);
                    $nreal_62 = number_format($real_62, "2", ".", ",");
                    $real_s_62 = $real_62 - $angaran_62;
                    if ($real_s_62 < 0)
                    {
                        $x1 = "(";
                        $real_s_62 = $real_s_62 * -1;
                        $y1 = ")";
                    } else
                    {
                        $x1 = "";
                        $y1 = "";
                    }
                    $selisih_62 = number_format($real_s_62, "2", ".", ",");
                    $per_62 = ($real_s_62 != 0) ? ($real_s_62 / $rowpk->totbl_u) * 100 : 0;
                    $persen_62 = number_format($per_62);
        
                    //                    $cRet    .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Pembiayaan Keluar</td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_62</td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_62</td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_62$y1</td>
                    //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_62</td>
                    //                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                    //                                     </tr>";
                }
                if ($cetak == 1)
                {
                    $sqlpk = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek2 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek2 b 
                                ON LEFT(a.kd_rek5,2)=b.kd_rek2 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,24)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                                ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,25)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                                ON LEFT(a.kd_rek5,5)=b.kd_rek4 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,27)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'6' AS nu FROM trdrka a                     
                                WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu";
                }
                if ($cetak == 2)
                {
                    $sqlpk = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek2 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='<strong>$date_awal</strong>' AND g.tgl_voucher<='$date_akhir' )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek2 b 
                                ON LEFT(a.kd_rek5,2)=b.kd_rek2 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,24)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='2012-10-01' AND d.tgl_sts<='$date_akhir' )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                                ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,25)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,27) AS kd_rek,b.nm_rek4 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir' )AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,5)= LEFT(a.kd_rek5,5) AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir')AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,5)= LEFT(a.kd_rek5,5) AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir' )AS kredit,'5' AS nu FROM trdrka a INNER JOIN ms_rek4 b 
                                ON LEFT(a.kd_rek5,5)=b.kd_rek4 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,27)
                                UNION ALL
                                SELECT SUBSTR(a.no_trdrka,12,29) AS kd_rek,a.nm_rek5 ,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                                (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND c.kd_rek5= a.kd_rek5 AND d.kd_kegiatan = a.kd_kegiatan AND d.tgl_sts>='$date_awal' AND d.tgl_sts<='$date_akhir')AS cp,
                                (SELECT SUM(e.debet) FROM trdju_pkd e INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND e.kd_rek5= a.kd_rek5 AND e.kd_kegiatan = a.kd_kegiatan AND g.tgl_voucher>='$date_awal' AND g.tgl_voucher<='$date_akhir' )AS debet,
                                (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND f.kd_rek5= a.kd_rek5 AND f.kd_kegiatan = a.kd_kegiatan AND h.tgl_voucher>='$date_awal' AND h.tgl_voucher<='$date_akhir')AS kredit,'6' AS nu FROM trdrka a                     
                                WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,29),a.nm_rek5 ) a ORDER BY kd_rek,nu";
                }
                $sql62 = $this->db->query($sqlpk);
                foreach ($sql62->result() as $row_62)
                {
                    $kd = $row_62->kd_rek;
                    $nm = $row_62->nm_rek;
                    $ang_622 = number_format($row_62->nilai_u, "2", ".", ",");
                    $angaran_622 = $row_62->nilai_u;
                    $in_622 = $row_62->cp;
                    $debet_622 = $row_62->debet;
                    $kredit_622 = $row_62->kredit;
                    $real_622 = $debet_622 - ($in_622 + $kredit_622);
                    $nreal_622 = number_format($real_622, "2", ".", ",");
                    $real_s_622 = $real_622 - $angaran_622;
                    if ($real_s_622 < 0)
                    {
                        $x1 = "(";
                        $real_s_622 = $real_s_622 * -1;
                        $y1 = ")";
                    } else
                    {
                        $x1 = "";
                        $y1 = "";
                    }
                    $selisih_622 = number_format($real_s_622, "2", ".", ",");
                    $per_622 = ($real_s_611 != 0) ? ($real_s_622 / $row_62->nilai_u) * 100 : 0;
                    $persen_622 = number_format($per_622);
        
                    $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"15%\" align=\"left\">$kd</td>                                     
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"26%\">$nm</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$ang_622</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$nreal_622</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$x1$selisih_622$y1</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"3%\" align=\"right\">$persen_622</td>
                                             <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             </tr>";
                }
                $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                             <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             </tr>";
        
                $netto = $angaran_61 - $angaran_62;
                $net = number_format($netto, "2", ",", ".");
                $netto_r = $real_61 - $real_62;
                $net_r = number_format($netto_r, "2", ",", ".");
                $netto_s = $netto_r - $netto;
                if ($netto_s < 0)
                {
                    $x1 = "(";
                    $netto_s = $netto_s * -1;
                    $y1 = ")";
                } else
                {
                    $x1 = "";
                    $y1 = "";
                }
                $netto_selisih = number_format($netto_s, "2", ",", ".");
                $perpnet = ($netto_s != 0) ? ($netto_s / $netto) * 100 : 0;
                $persennet = number_format($perpnet);
        
        
                $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>
                                            <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Pembiayaan Netto</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$net</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$net_r</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$netto_selisih$y1</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persennet</td>
                                             <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                             </tr>";
        
                $silpa = ($angaranp + $angaran_61) - ($angaran_5 + $angaran_62);
                if ($silpa < 0)
                {
                    $a = "(";
                    $silpa = $silpa * -1;
                    $b = ")";
                } else
                {
                    $a = "";
                    $b = "";
                }
                $silp = number_format($silpa, "2", ",", ".");
                $silpa_real = ($realp + $real_61) - ($real_5 + $real_62);
                if ($silpa_real < 0)
                {
                    $c = "(";
                    $silpa_real = $silpa_real * -1;
                    $d = ")";
                } else
                {
                    $c = "";
                    $d = "";
                }
                $silp_real = number_format($silpa_real, "2", ",", ".");
                $silpa_s = $silpa_real - $silpa;
                if ($silpa_s < 0)
                {
                    $x = "(";
                    $silpa_s = $silpa_s * -1;
                    $y = ")";
                } else
                {
                    $x = "";
                    $y = "";
                }
                $silpa_selisih = number_format($silpa_s, "2", ",", ".");
                $persil = ($silpa_s != 0) ? ($silpa_s / $silpa) * 100 : 0;
                $persensilpa = number_format($persil);
            
                $cRet    .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>
                                                    <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">SILPA</td>
                                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$a$silp$b</td>
                                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$c$silp_real$d</td>
                                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x$silpa_selisih$y</td>
                                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persensilpa</td>
                                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                  
                                                   </tr>";
        }else{
            $silpa = $angaranp  - $angaran_5 ;
        if ($silpa < 0)
        {
            $a = "(";
            $silpa = $silpa * -1;
            $b = ")";
        } else
        {
            $a = "";
            $b = "";
        }
        $silp = number_format($silpa, "2", ",", ".");
        $silpa_real = $realp  - $real_5;
        if ($silpa_real < 0)
        {
            $c = "(";
            $silpa_real = $silpa_real * -1;
            $d = ")";
        } else
        {
            $c = "";
            $d = "";
        }
        $silp_real = number_format($silpa_real, "2", ",", ".");
        $silpa_s = $silpa_real - $silpa;
        if ($silpa_s < 0)
        {
            $x = "(";
            $silpa_s = $silpa_s * -1;
            $y = ")";
        } else
        {
            $x = "";
            $y = "";
        }
        $silpa_selisih = number_format($silpa_s, "2", ",", ".");
        $persil = ($silpa_s != 0) ? ($silpa_s / $silpa) * 100 : 0;
        $persensilpa = number_format($persil);
    
        $cRet    .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>
                                            <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">SILPA</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$a$silp$b</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$c$silp_real$d</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x$silpa_selisih$y</td>
                                             <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persensilpa</td>
                                             <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
          
                                           </tr>";
            
        }                                   
        $cRet .= " </table>";
        $data['prev'] = $cRet;
        echo ("$cRet");
        // $this->template->set('title', 'CETAK RINCIAN REALISASI');
        //        $this->tukd_model->_mpdf('',$cRet,10,10,10,1);


    }

    function lampiran_I()
    {
        $data['page_title'] = 'REALISASI';
        $this->template->set('title', 'REALISASI');
        $this->template->load('template', 'akuntansi/perda_real_1', $data);
    }
    
	function lampiran_I_smstr()
    {
        $data['page_title']= 'LAPORAN SEMESTER SKPD';
        $this->template->set('title', 'LAPORAN SEMESTER SKPD');   
        //$this->template->load('template','akuntansi/perda_real_smstr',$data) ; 
        $this->template->load('template','akuntansi/cetak_semester',$data); 
    }
	
	function lampiran_I_smstr_ppkd()
    {
        $data['page_title']= 'LAPORAN SEMESTER PPKD';
        $this->template->set('title', 'LAPORAN SEMESTER PPKD');   
        //$this->template->load('template','akuntansi/perda_real_smstr',$data) ; 
        $this->template->load('template','akuntansi/cetak_semester_ppkd',$data) ; 
    }
	
	function cetak_semester($cbulan="", $pilih=1){
	$id  = $this->session->userdata('kdskpd');
    $thn = $this->session->userdata('pcThang');
	$cbulan==6 ? $smstr = "SEMESTER I" : $smstr="SEMESTER II";
	$sqlanggaran1="select case when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_ubah) then 2 
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_sempurna) and $cbulan<month(tgl_dpa_ubah) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan>=month(tgl_dpa_sempurna) then 1 
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=0 and status_ubah=0 and $cbulan>=month(tgl_dpa) then 1
					   else 1 end as anggaran from trhrka where kd_skpd='$id'";
    $sqlanggaran=$this->db->query($sqlanggaran1);
	foreach ($sqlanggaran->result() as $rowttd)
        {
            $anggaran=$rowttd->anggaran;
        }

	$ag_tox=$anggaran;
	 
	 

    //function cetak_lra(){
        $sql41="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1)='4' and kd_skpd<>'$id' ";
                    $query41 = $this->db->query($sql41);
                    $jmlp = $query41->row();
                    $jmlpendapatan = $jmlp->nilai;
                    $jmlangpendapatan = $jmlp->anggaran;
                    $jmlangpendapatan1= number_format($jmlp->anggaran,"2",",",".");
                    $jmlpendapatan1= number_format($jmlp->nilai,"2",",",".");
                    
					$real_pend = $jmlangpendapatan - $jmlpendapatan;
                    if ($real_pend < 0){
                    	$x001="("; $real_pendx=$real_pend*-1; $y001=")";}
                    else {
                    	$x001=""; $real_pendx=$real_pend; $y001="";}
                    $selisihpend = number_format($real_pendx,"2",",",".");
                    if ($jmlpendapatan==0){
                        $tmp001=1;
                    }else{
                        $tmp001=$jmlpendapatan;
                    }
					
                    $per001     = ($jmlangpendapatan!=0)?($jmlpendapatan / $jmlangpendapatan ) * 100:0; 
                    $persen001  = number_format($per001,"2",",",".");
					
        $sql51="SELECT SUM(anggaran) as angaran,SUM(real_spj)as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1)='5' and kd_skpd<>'$id' ";
                    $query51 = $this->db->query($sql51);
                    $jmlb = $query51->row();
                    $jmlangbelanja = $jmlb->angaran;
                    $jmlbelanja = $jmlb->nilai;
                    $jmlbelanja1= number_format($jmlb->nilai,"2",",",".");
                    $jmlangbelanja1= number_format($jmlb->angaran,"2",",",".");
					
					$real_belanja = $jmlangbelanja - $jmlbelanja;
                    if ($real_belanja < 0){
                    	$x002="("; $real_belanjax=$real_belanja*-1; $y002=")";}
                    else {
                    	$x002=""; $real_belanjax=$real_belanja; $y002="";}
                    $selisihbelanja = number_format($real_belanjax,"2",",",".");
                    if ($jmlbelanja==0){
                        $tmp002=1;
                    }else{
                        $tmp002=$jmlbelanja;
                    }
					
                    $per002     = ($jmlangbelanja!=0)?($jmlbelanja / $jmlangbelanja ) * 100:0; 
                    $persen002  = number_format($per002,"2",",",".");
					
        $sql523="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,3)='523' and kd_skpd<>'$id' ";
                    $query523 = $this->db->query($sql523);
                    $jmlbm = $query523->row();
                    $jmlbmbelanja = $jmlbm->nilai;
                    $jmlangbmbelanja = $jmlbm->anggaran;
                    $jmlbmbelanja1= number_format($jmlbmbelanja,"2",",",".");
                    $jmlangbmbelanja1= number_format($jmlangbmbelanja,"2",",",".");
        $sql61="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='61' and kd_skpd<>'$id' ";
                    $query61 = $this->db->query($sql61);
                    $jmlpm = $query61->row();
                    $jmlpmasuk = $jmlpm->nilai;
                    $jmlangpmasuk = $jmlpm->anggaran;
        $sql62="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='62' and kd_skpd<>'$id' ";
                    $query62 = $this->db->query($sql62);
                    $jmlpk = $query62->row();
                    $jmlpkeluar = $jmlpk->nilai;
                    $jmlangpkeluar = $jmlpk->anggaran;
        $surplus =  $jmlpendapatan- $jmlbelanja;
        $angsurplus = $jmlangpendapatan- $jmlangbelanja;        
        if ($surplus < 0){
                    	$x="("; $surplusx=$surplus*-1; $y=")";
                        }else {
                    	$x=""; $surplusx=$surplus; $y="";
                        }
        if ($angsurplus < 0){
                    	$e="("; $angsurplusx=$angsurplus*-1; $f=")";
                        }else {
                    	$e=""; $angsurplusx=$angsurplus; $f="";
                        }
        $surplus1= number_format($surplusx,"2",",",".");
        $angsurplus1= number_format($angsurplusx,"2",",",".");
		
		$real_surplus = $angsurplus - $surplus;
                    if ($real_surplus < 0){
                    	$x003="("; $real_surplusx=$real_surplus*-1; $y003=")";}
                    else {
                    	$x003=""; $real_surplusx=$real_surplus; $y003="";}
        $selisihsurplus = number_format($real_surplusx,"2",",",".");
                    if ($surplus==0){
                        $tmp003=1;
                    }else{
                        $tmp003=$surplus;
                    }
					
                    $per003     = ($angsurplus!=0)?($surplus / $angsurplus ) * 100:0; 
                    $persen003  = number_format($per003,"2",",",".");
		
        $biaya_net =  $jmlpmasuk- $jmlpkeluar;
        $angbiaya_net =  $jmlangpmasuk- $jmlangpkeluar;        
        if ($biaya_net < 0){
                    	$a="("; $biaya_netx=$biaya_net*-1; $b=")";
                        }else {
                    	$a=""; $biaya_netx=$biaya_net; $b="";
                        }
        if ($angbiaya_net < 0){
                    	$g="("; $angbiaya_netx=$angbiaya_net*-1; $h=")";
                        }else {
                    	$g=""; $angbiaya_netx=$angbiaya_net; $h="";
                        }
        $biaya_net1 =   number_format($biaya_netx,"2",",",".");
        $angbiaya_net1 =   number_format($angbiaya_netx,"2",",",".");
        $silpa= ($jmlpendapatan+$jmlpmasuk)-($jmlbelanja+$jmlpkeluar);
        $angsilpa= ($jmlangpendapatan+$jmlangpmasuk)-($jmlangbelanja+$jmlangpkeluar);                
        if ($silpa < 0){
                    	$c="("; $silpax=$silpa*-1; $d=")";
                        }else {
                    	$c=""; $silpax=$silpa; $d="";
                        }
        if ($angsilpa < 0){
                    	$i="("; $angsilpax=$angsilpa*-1; $j=")";
                        }else {
                    	$i=""; $angsilpax=$angsilpa; $j="";
                        }
        $silpa1 =number_format($silpax,"2",",","."); 
        $angsilpa1 =number_format($angsilpax,"2",",",".");
       $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
		$nm_skpd	= strtoupper ($nmskpd);
        $jk=$this->rka_model->combo_skpd();
       
        $cRet='';
        
	 $modtahun= $thn%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>				
                    <tr>
                         <td align=\"center\"><strong>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $smstr $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>ANGGARAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>REALISASI</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>LEBIH</br>(KURANG)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";
               
                   $sql4="SELECT a.seq,a.nor,a.uraian,isnull(a.kode_1,'-') as kode_1,isnull(a.kode_2,'-') as kode_2,isnull(a.kode_3,'-') as kode_3,thn_m1 AS lalu FROM map_lra_skpd a 
				   GROUP BY a.seq,a.nor,a.uraian,isnull(a.kode_1,'-'),isnull(a.kode_2,'-'),isnull(a.kode_3,'-'),thn_m1 ORDER BY a.seq";
                // isnull(a.kode_1,\"'-'\")
                $query4 = $this->db->query($sql4);
                $no     = 0;                                  
               
                foreach ($query4->result() as $row4)
                {
                    
                    $nama      = $row4->uraian;   
                    $real_lalu = number_format($row4->lalu,"2",",",".");
                    $n         = $row4->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$n2         = $row4->kode_2;
					$n2		   = ($n2=="-"?"'-'":$n2);
					$n3         = $row4->kode_3;
					$n3		   = ($n3=="-"?"'-'":$n3);

//                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $bulan,$ag_tox) b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (".$n.") ";
                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) b WHERE kd_skpd<>'$id' and (left(b.kd_rek5,3) in ($n) or left(b.kd_rek5,5) in ($n2) or left(b.kd_rek5,7) in ($n3))";
//					                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM realisasi b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (\"'.$n.'\") ";
                    $query5 = $this->db->query($sql5);
                    $trh    = $query5->row();
                    $nil    = $trh->nilai;
                    $angnil = $trh->anggaran;
                    
                    $real_s = $trh->anggaran - $trh->nilai;
                    if ($real_s < 0){
                    	$x1="("; $real_sx=$real_s*-1; $y1=")";}
                    else {
                    	$x1=""; $real_sx=$real_s; $y1="";}
                    $selisih = number_format($real_sx,"2",",",".");
                    if ($trh->nilai==0){
                        $tmp=1;
                    }else{
                        $tmp=$trh->nilai;
                    }
                    $nilai    = number_format($trh->nilai,"2",",",".");
                    $angnilai = number_format($trh->anggaran,"2",",",".");
                    $per1     = ($angnil!=0)?($nil / $angnil ) * 100:0; 
                    $persen1  = number_format($per1,"2",",",".");
                    $no       = $no + 1;
                    switch ($row4->seq) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;					
					case 35:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 40:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x001$selisihpend$y001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen001</td>
                                 </tr>";
                        break;
					case 45:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 50:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td	 style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 55:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 75:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 120:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x002$selisihbelanja$y002</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen002</td>
                                 </tr>";
                        break;
					case 125:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 130:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$e$angsurplus1$f</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x$surplus1$y</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x003$selisihsurplus$y003</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen003</td>
                                 </tr>";
                        break;
                   
                    default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                }
                }
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LAPORAN SEMESTER SKPD Keseluruhan / $smstr");
        $this->template->set('title', 'LAPORAN SEMESTER SKPD Keseluruhan / $smstr');        
        switch($pilih) {       
        case 1;
			echo ("<title>$smstr SKPD</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
    }
    
	
	function cetak_semester_ppkd($cbulan="", $pilih=1){
	$kd_skpd  = $this->session->userdata('kdskpd');
    $thn = $this->session->userdata('pcThang');
	$cbulan==6 ? $smstr= "SEMESTER I" : $smstr="SEMESTER II";
	$sqlanggaran1="select case when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_ubah) then 2 
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_sempurna) and $cbulan<month(tgl_dpa_ubah) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan>=month(tgl_dpa_sempurna) then 1 
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=0 and status_ubah=0 and $cbulan>=month(tgl_dpa) then 1
					   else 1 end as anggaran from trhrka where kd_skpd='$kd_skpd'";
    $sqlanggaran=$this->db->query($sqlanggaran1);
	foreach ($sqlanggaran->result() as $rowttd)
        {
            $anggaran=$rowttd->anggaran;
        }

	$ag_tox=$anggaran;
	 
	 

    //function cetak_lra(){
        $sql41="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1)='4' and kd_skpd='$kd_skpd' ";
                    $query41 = $this->db->query($sql41);
                    $jmlp = $query41->row();
                    $jmlpendapatan = $jmlp->nilai;
                    $jmlangpendapatan = $jmlp->anggaran;
                    $jmlangpendapatan1= number_format($jmlp->anggaran,"2",",",".");
                    $jmlpendapatan1= number_format($jmlp->nilai,"2",",",".");
                    
					$real_pend = $jmlangpendapatan - $jmlpendapatan;
                    if ($real_pend < 0){
                    	$x001="("; $real_pendx=$real_pend*-1; $y001=")";}
                    else {
                    	$x001=""; $real_pendx=$real_pend; $y001="";}
                    $selisihpend = number_format($real_pendx,"2",",",".");
                    if ($jmlpendapatan==0){
                        $tmp001=1;
                    }else{
                        $tmp001=$jmlpendapatan;
                    }
					
                    $per001     = ($jmlangpendapatan!=0)?($jmlpendapatan / $jmlangpendapatan ) * 100:0; 
                    $persen001  = number_format($per001,"2",",",".");
					
        $sql51="SELECT SUM(anggaran) as angaran,SUM(real_spj)as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1)='5' and kd_skpd='$kd_skpd' ";
                    $query51 = $this->db->query($sql51);
                    $jmlb = $query51->row();
                    $jmlangbelanja = $jmlb->angaran;
                    $jmlbelanja = $jmlb->nilai;
                    $jmlbelanja1= number_format($jmlb->nilai,"2",",",".");
                    $jmlangbelanja1= number_format($jmlb->angaran,"2",",",".");
					
					$real_belanja = $jmlangbelanja - $jmlbelanja;
                    if ($real_belanja < 0){
                    	$x002="("; $real_belanjax=$real_belanja*-1; $y002=")";}
                    else {
                    	$x002=""; $real_belanjax=$real_belanja; $y002="";}
                    $selisihbelanja = number_format($real_belanjax,"2",",",".");
                    if ($jmlbelanja==0){
                        $tmp002=1;
                    }else{
                        $tmp002=$jmlbelanja;
                    }
					
                    $per002     = ($jmlangbelanja!=0)?($jmlbelanja / $jmlangbelanja ) * 100:0; 
                    $persen002  = number_format($per002,"2",",",".");
					
        $sql523="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,3)='523' and kd_skpd='$kd_skpd' ";
                    $query523 = $this->db->query($sql523);
                    $jmlbm = $query523->row();
                    $jmlbmbelanja = $jmlbm->nilai;
                    $jmlangbmbelanja = $jmlbm->anggaran;
                    $jmlbmbelanja1= number_format($jmlbmbelanja,"2",",",".");
                    $jmlangbmbelanja1= number_format($jmlangbmbelanja,"2",",",".");
        $sql61="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='61' and kd_skpd='$kd_skpd' ";
                    $query61 = $this->db->query($sql61);
                    $jmlpm = $query61->row();
                    $jmlpmasuk = $jmlpm->nilai;
                    $jmlangpmasuk = $jmlpm->anggaran;
        $sql62="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='62' and kd_skpd='$kd_skpd' ";
                    $query62 = $this->db->query($sql62);
                    $jmlpk = $query62->row();
                    $jmlpkeluar = $jmlpk->nilai;
                    $jmlangpkeluar = $jmlpk->anggaran;
        $surplus =  $jmlpendapatan- $jmlbelanja;
        $angsurplus = $jmlangpendapatan- $jmlangbelanja;        
        if ($surplus < 0){
                    	$x="("; $surplusx=$surplus*-1; $y=")";
                        }else {
                    	$x=""; $surplusx=$surplus; $y="";
                        }
        if ($angsurplus < 0){
                    	$e="("; $angsurplusx=$angsurplus*-1; $f=")";
                        }else {
                    	$e=""; $angsurplusx=$angsurplus; $f="";
                        }
        $surplus1= number_format($surplusx,"2",",",".");
        $angsurplus1= number_format($angsurplusx,"2",",",".");
		
		$real_surplus = $angsurplus - $surplus;
                    if ($real_surplus < 0){
                    	$x003="("; $real_surplusx=$real_surplus*-1; $y003=")";}
                    else {
                    	$x003=""; $real_surplusx=$real_surplus; $y003="";}
        $selisihsurplus = number_format($real_surplusx,"2",",",".");
                    if ($surplus==0){
                        $tmp003=1;
                    }else{
                        $tmp003=$surplus;
                    }
					
                    $per003     = ($angsurplus!=0)?($surplus / $angsurplus ) * 100:0; 
                    $persen003  = number_format($per003,"2",",",".");
		
        $biaya_net =  $jmlpmasuk- $jmlpkeluar;
        $angbiaya_net =  $jmlangpmasuk- $jmlangpkeluar;        
        if ($biaya_net < 0){
                    	$a="("; $biaya_netx=$biaya_net*-1; $b=")";
                        }else {
                    	$a=""; $biaya_netx=$biaya_net; $b="";
                        }
        if ($angbiaya_net < 0){
                    	$g="("; $angbiaya_netx=$angbiaya_net*-1; $h=")";
                        }else {
                    	$g=""; $angbiaya_netx=$angbiaya_net; $h="";
                        }
        $biaya_net1 =   number_format($biaya_netx,"2",",",".");
        $angbiaya_net1 =   number_format($angbiaya_netx,"2",",",".");
        $silpa= ($jmlpendapatan+$jmlpmasuk)-($jmlbelanja+$jmlpkeluar);
        $angsilpa= ($jmlangpendapatan+$jmlangpmasuk)-($jmlangbelanja+$jmlangpkeluar);                
        if ($silpa < 0){
                    	$c="("; $silpax=$silpa*-1; $d=")";
                        }else {
                    	$c=""; $silpax=$silpa; $d="";
                        }
        if ($angsilpa < 0){
                    	$i="("; $angsilpax=$angsilpa*-1; $j=")";
                        }else {
                    	$i=""; $angsilpax=$angsilpa; $j="";
                        }
        $silpa1 =number_format($silpax,"2",",","."); 
        $angsilpa1 =number_format($angsilpax,"2",",",".");
       $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
		$nm_skpd	= strtoupper ($nmskpd);
        $jk=$this->rka_model->combo_skpd();
       
        $cRet='';
        
	 $modtahun= $thn%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>					
                    <tr>
                         <td align=\"center\"><strong>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $smstr $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>ANGGARAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>REALISASI</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>LEBIH</br>(KURANG)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";
               
                   $sql4="SELECT a.seq,a.nor,a.uraian,isnull(a.kode_1,'-') as kode_1,isnull(a.kode_2,'-') as kode_2,isnull(a.kode_3,'-') as kode_3,thn_m1 AS lalu FROM map_lra_skpd a 
				   GROUP BY a.seq,a.nor,a.uraian,isnull(a.kode_1,'-'),isnull(a.kode_2,'-'),isnull(a.kode_3,'-'),thn_m1 ORDER BY a.seq";
                // isnull(a.kode_1,\"'-'\")
                $query4 = $this->db->query($sql4);
                $no     = 0;                                  
               
                foreach ($query4->result() as $row4)
                {
                    
                    $nama      = $row4->uraian;   
                    $real_lalu = number_format($row4->lalu,"2",",",".");
                    $n         = $row4->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$n2         = $row4->kode_2;
					$n2		   = ($n2=="-"?"'-'":$n2);
					$n3         = $row4->kode_3;
					$n3		   = ($n3=="-"?"'-'":$n3);

//                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $bulan,$ag_tox) b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (".$n.") ";
                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) b WHERE kd_skpd='$kd_skpd' and (left(b.kd_rek5,3) in ($n) or left(b.kd_rek5,5) in ($n2) or left(b.kd_rek5,7) in ($n3))";
//					                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM realisasi b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (\"'.$n.'\") ";
                    $query5 = $this->db->query($sql5);
                    $trh    = $query5->row();
                    $nil    = $trh->nilai;
                    $angnil = $trh->anggaran;
                    
                    $real_s = $trh->anggaran - $trh->nilai;
                    if ($real_s < 0){
                    	$x1="("; $real_sx=$real_s*-1; $y1=")";}
                    else {
                    	$x1=""; $real_sx=$real_s; $y1="";}
                    $selisih = number_format($real_sx,"2",",",".");
                    if ($trh->nilai==0){
                        $tmp=1;
                    }else{
                        $tmp=$trh->nilai;
                    }
                    $nilai    = number_format($trh->nilai,"2",",",".");
                    $angnilai = number_format($trh->anggaran,"2",",",".");
                    $per1     = ($angnil!=0)?($nil / $angnil ) * 100:0; 
                    $persen1  = number_format($per1,"2",",",".");
                    $no       = $no + 1;
                    switch ($row4->seq) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;					
					case 35:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 40:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x001$selisihpend$y001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen001</td>
                                 </tr>";
                        break;
					case 45:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 50:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td	 style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 55:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 75:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 120:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x002$selisihbelanja$y002</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen002</td>
                                 </tr>";
                        break;
					case 125:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 130:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$e$angsurplus1$f</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x$surplus1$y</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x003$selisihsurplus$y003</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen003</td>
                                 </tr>";
                        break;
                   
                    default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                }
                }
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LAPORAN SEMESTER $kd_skpd / $smstr");
        $this->template->set('title', 'LAPORAN SEMESTER $kd_skpd / $smstr');        
        switch($pilih) {       
        case 1;
			echo ("<title>$smstr UNIT</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
    }
    
	
	
	function cetak_semester_unit($cbulan="", $kd_skpd="", $pilih=1){
	$id  = $this->session->userdata('kdskpd');
    $thn = $this->session->userdata('pcThang');
	$cbulan==6 ? $smstr= "SEMESTER I" : $smstr="SEMESTER II";
	$sqlanggaran1="select case when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_ubah) then 2 
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_sempurna) and $cbulan<month(tgl_dpa_ubah) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan>=month(tgl_dpa_sempurna) then 1 
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=0 and status_ubah=0 and $cbulan>=month(tgl_dpa) then 1
					   else 1 end as anggaran from trhrka where kd_skpd='$kd_skpd'";
    $sqlanggaran=$this->db->query($sqlanggaran1);
	foreach ($sqlanggaran->result() as $rowttd)
        {
            $anggaran=$rowttd->anggaran;
        }

	$ag_tox=$anggaran;
	 
	 

    //function cetak_lra(){
        $sql41="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1)='4' and kd_skpd='$kd_skpd' ";
                    $query41 = $this->db->query($sql41);
                    $jmlp = $query41->row();
                    $jmlpendapatan = $jmlp->nilai;
                    $jmlangpendapatan = $jmlp->anggaran;
                    $jmlangpendapatan1= number_format($jmlp->anggaran,"2",",",".");
                    $jmlpendapatan1= number_format($jmlp->nilai,"2",",",".");
                    
					$real_pend = $jmlangpendapatan - $jmlpendapatan;
                    if ($real_pend < 0){
                    	$x001="("; $real_pendx=$real_pend*-1; $y001=")";}
                    else {
                    	$x001=""; $real_pendx=$real_pend; $y001="";}
                    $selisihpend = number_format($real_pendx,"2",",",".");
                    if ($jmlpendapatan==0){
                        $tmp001=1;
                    }else{
                        $tmp001=$jmlpendapatan;
                    }
					
                    $per001     = ($jmlangpendapatan!=0)?($jmlpendapatan / $jmlangpendapatan ) * 100:0; 
                    $persen001  = number_format($per001,"2",",",".");
					
        $sql51="SELECT SUM(anggaran) as angaran,SUM(real_spj)as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1)='5' and kd_skpd='$kd_skpd' ";
                    $query51 = $this->db->query($sql51);
                    $jmlb = $query51->row();
                    $jmlangbelanja = $jmlb->angaran;
                    $jmlbelanja = $jmlb->nilai;
                    $jmlbelanja1= number_format($jmlb->nilai,"2",",",".");
                    $jmlangbelanja1= number_format($jmlb->angaran,"2",",",".");
					
					$real_belanja = $jmlangbelanja - $jmlbelanja;
                    if ($real_belanja < 0){
                    	$x002="("; $real_belanjax=$real_belanja*-1; $y002=")";}
                    else {
                    	$x002=""; $real_belanjax=$real_belanja; $y002="";}
                    $selisihbelanja = number_format($real_belanjax,"2",",",".");
                    if ($jmlbelanja==0){
                        $tmp002=1;
                    }else{
                        $tmp002=$jmlbelanja;
                    }
					
                    $per002     = ($jmlangbelanja!=0)?($jmlbelanja / $jmlangbelanja ) * 100:0; 
                    $persen002  = number_format($per002,"2",",",".");
					
        $sql523="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,3)='523' and kd_skpd='$kd_skpd' ";
                    $query523 = $this->db->query($sql523);
                    $jmlbm = $query523->row();
                    $jmlbmbelanja = $jmlbm->nilai;
                    $jmlangbmbelanja = $jmlbm->anggaran;
                    $jmlbmbelanja1= number_format($jmlbmbelanja,"2",",",".");
                    $jmlangbmbelanja1= number_format($jmlangbmbelanja,"2",",",".");
        $sql61="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='61' and kd_skpd='$kd_skpd' ";
                    $query61 = $this->db->query($sql61);
                    $jmlpm = $query61->row();
                    $jmlpmasuk = $jmlpm->nilai;
                    $jmlangpmasuk = $jmlpm->anggaran;
        $sql62="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='62' and kd_skpd='$kd_skpd' ";
                    $query62 = $this->db->query($sql62);
                    $jmlpk = $query62->row();
                    $jmlpkeluar = $jmlpk->nilai;
                    $jmlangpkeluar = $jmlpk->anggaran;
        $surplus =  $jmlpendapatan- $jmlbelanja;
        $angsurplus = $jmlangpendapatan- $jmlangbelanja;        
        if ($surplus < 0){
                    	$x="("; $surplusx=$surplus*-1; $y=")";
                        }else {
                    	$x=""; $surplusx=$surplus; $y="";
                        }
        if ($angsurplus < 0){
                    	$e="("; $angsurplusx=$angsurplus*-1; $f=")";
                        }else {
                    	$e=""; $angsurplusx=$angsurplus; $f="";
                        }
        $surplus1= number_format($surplusx,"2",",",".");
        $angsurplus1= number_format($angsurplusx,"2",",",".");
		
		$real_surplus = $angsurplus - $surplus;
                    if ($real_surplus < 0){
                    	$x003="("; $real_surplusx=$real_surplus*-1; $y003=")";}
                    else {
                    	$x003=""; $real_surplusx=$real_surplus; $y003="";}
        $selisihsurplus = number_format($real_surplusx,"2",",",".");
                    if ($surplus==0){
                        $tmp003=1;
                    }else{
                        $tmp003=$surplus;
                    }
					
                    $per003     = ($angsurplus!=0)?($surplus / $angsurplus ) * 100:0; 
                    $persen003  = number_format($per003,"2",",",".");
		
        $biaya_net =  $jmlpmasuk- $jmlpkeluar;
        $angbiaya_net =  $jmlangpmasuk- $jmlangpkeluar;        
        if ($biaya_net < 0){
                    	$a="("; $biaya_netx=$biaya_net*-1; $b=")";
                        }else {
                    	$a=""; $biaya_netx=$biaya_net; $b="";
                        }
        if ($angbiaya_net < 0){
                    	$g="("; $angbiaya_netx=$angbiaya_net*-1; $h=")";
                        }else {
                    	$g=""; $angbiaya_netx=$angbiaya_net; $h="";
                        }
        $biaya_net1 =   number_format($biaya_netx,"2",",",".");
        $angbiaya_net1 =   number_format($angbiaya_netx,"2",",",".");
        $silpa= ($jmlpendapatan+$jmlpmasuk)-($jmlbelanja+$jmlpkeluar);
        $angsilpa= ($jmlangpendapatan+$jmlangpmasuk)-($jmlangbelanja+$jmlangpkeluar);                
        if ($silpa < 0){
                    	$c="("; $silpax=$silpa*-1; $d=")";
                        }else {
                    	$c=""; $silpax=$silpa; $d="";
                        }
        if ($angsilpa < 0){
                    	$i="("; $angsilpax=$angsilpa*-1; $j=")";
                        }else {
                    	$i=""; $angsilpax=$angsilpa; $j="";
                        }
        $silpa1 =number_format($silpax,"2",",","."); 
        $angsilpa1 =number_format($angsilpax,"2",",",".");
       $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
		$nm_skpd	= strtoupper ($nmskpd);
        $jk=$this->rka_model->combo_skpd();
       
        $cRet='';
        
	 $modtahun= $thn%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>					
                    <tr>
                         <td align=\"center\"><strong>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $smstr $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>ANGGARAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>REALISASI</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>LEBIH</br>(KURANG)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";
               
                   $sql4="SELECT a.seq,a.nor,a.uraian,isnull(a.kode_1,'-') as kode_1,isnull(a.kode_2,'-') as kode_2,isnull(a.kode_3,'-') as kode_3,thn_m1 AS lalu FROM map_lra_skpd a 
				   GROUP BY a.seq,a.nor,a.uraian,isnull(a.kode_1,'-'),isnull(a.kode_2,'-'),isnull(a.kode_3,'-'),thn_m1 ORDER BY a.seq";
                // isnull(a.kode_1,\"'-'\")
                $query4 = $this->db->query($sql4);
                $no     = 0;                                  
               
                foreach ($query4->result() as $row4)
                {
                    
                    $nama      = $row4->uraian;   
                    $real_lalu = number_format($row4->lalu,"2",",",".");
                    $n         = $row4->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$n2         = $row4->kode_2;
					$n2		   = ($n2=="-"?"'-'":$n2);
					$n3         = $row4->kode_3;
					$n3		   = ($n3=="-"?"'-'":$n3);

//                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $bulan,$ag_tox) b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (".$n.") ";
                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) b WHERE kd_skpd='$kd_skpd' and (left(b.kd_rek5,3) in ($n) or left(b.kd_rek5,5) in ($n2) or left(b.kd_rek5,7) in ($n3))";
//					                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM realisasi b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (\"'.$n.'\") ";
                    $query5 = $this->db->query($sql5);
                    $trh    = $query5->row();
                    $nil    = $trh->nilai;
                    $angnil = $trh->anggaran;
                    
                    $real_s = $trh->anggaran - $trh->nilai;
                    if ($real_s < 0){
                    	$x1="("; $real_sx=$real_s*-1; $y1=")";}
                    else {
                    	$x1=""; $real_sx=$real_s; $y1="";}
                    $selisih = number_format($real_sx,"2",",",".");
                    if ($trh->nilai==0){
                        $tmp=1;
                    }else{
                        $tmp=$trh->nilai;
                    }
                    $nilai    = number_format($trh->nilai,"2",",",".");
                    $angnilai = number_format($trh->anggaran,"2",",",".");
                    $per1     = ($angnil!=0)?($nil / $angnil ) * 100:0; 
                    $persen1  = number_format($per1,"2",",",".");
                    $no       = $no + 1;
                    switch ($row4->seq) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;					
					case 35:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 40:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x001$selisihpend$y001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen001</td>
                                 </tr>";
                        break;
					case 45:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 50:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td	 style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 55:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 75:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 120:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x002$selisihbelanja$y002</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen002</td>
                                 </tr>";
                        break;
					case 125:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 130:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$e$angsurplus1$f</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x$surplus1$y</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x003$selisihsurplus$y003</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen003</td>
                                 </tr>";
                        break;
                   
                    default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                }
                }
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LAPORAN SEMESTER $kd_skpd / $smstr");
        $this->template->set('title', 'LAPORAN SEMESTER $kd_skpd / $smstr');        
        switch($pilih) {       
        case 1;
			echo ("<title>$smstr UNIT</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
    }
    
	
    function cetak_perda1_real($lap = '', $ctk = '', $skpd = '')
    {
        $id = $skpd;
        $cetak = $ctk;
        $laporan = $lap;

        if ($laporan <> '2')
        {
            $sts = '';
            $jurnal = '';
        } else
        {
            $sts = "AND MONTH(d.tgl_sts)<='12'";
            $jurnal = "AND MONTH(d.tgl_voucher)<='12'";

        }
        $sqldns = "SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
        $sqlskpd = $this->db->query($sqldns);
        foreach ($sqlskpd->result() as $rowdns)
        {
            $kd_urusan = $rowdns->kd_u;
            $nm_urusan = $rowdns->nm_u;
            $kd_skpd = $rowdns->kd_sk;
            $nm_skpd = $rowdns->nm_sk;
        }

        $sqlttd1 = "SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PA'";
        $sqlttd = $this->db->query($sqlttd1);
        foreach ($sqlttd->result() as $rowttd)
        {
            $nip = $rowttd->nip;
            $nama = $rowttd->nm;
            $jabatan = $rowttd->jab;
        }

        $sqlsc = "SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
        $sqlsclient = $this->db->query($sqlsc);
        foreach ($sqlsclient->result() as $rowsc)
        {

            $tgl = $rowsc->tgl_rka;
            $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
            $kab = $rowsc->kab_kota;
            $daerah = $rowsc->daerah;
            $thn = $rowsc->thn_ang;
        }

        $jk = $this->rka_model->combo_skpd();

        $cRet = '';

        if ($cetak == '2')
        {
            $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td rowspan=\"3\" align=\"left\" width=\"55%\"><strong></strong></td>
                         <td rowspan=\"3\" valign =\"top\" align=\"left\" width=\"15%\"><strong><h5>LAMPIRAN I  :</h6></strong></td>
                         <td colspan=\"2\" align=\"left\" width=\"30%\"><strong><h5>PERATURAN DAERAH</strong></h5></td>
                    </tr>
                    <tr> 
                         <td align=\"left\" width=\"10%\"><h5>NOMOR</h5></td><td width=\"20%\" align=\"left\" ><h5>:</h5></td>
                    </tr>
                    <tr>
                        <td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"10%\"><h5>TANGGAL</h5></td><td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"20%\"><h5>:</h5></td>
                    </tr>                                     
                   
                  </table>";
        }

        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>$kab</strong></td>                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>RINGKASAN REALISASI APBD </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>TAHUN ANGARAN $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";
        if ($cetak == '2')
        {
            $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"left\" border=\"0\">
                        <tr>
                            <td width=\"20%\">Urusan Organisasi </td>
                            <td width=\"80%\">: $kd_urusan - $nm_urusan</td>
                        </tr>
                        <tr>
                            <td>Organisasi</td>
                            <td>: $kd_skpd - $nm_skpd </td>
                        </tr>
                    
                    </table>";
        }

        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\"><b>NOMOR URUT</b></td>                            
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\" colspan=\"2\" ><b>JUMLAH (Rp.)</b></td>
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>LEBIH</br>(KURANG)</b></td>
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        <tr >
                             <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>Anggaran</b></td>
                             <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>Realisasi</b></td>                             
                        </tr>  
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                        </tr>";


        if ($cetak == '1')
        {
            $sql4 = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,1)= a.kd_rek1 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='4'  GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,2)= a.kd_rek2 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,1)='4'  GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,3)= a.kd_rek3 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,1)='4'  GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }
        if ($cetak == '2')
        {
            $sql4 = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(kd_rek5,1)= a.kd_rek1 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='4' AND b.kd_skpd='$id' GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM  trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,1)='4' AND b.kd_skpd='$id' GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,1)='4' AND b.kd_skpd='$id' GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }

        $query4 = $this->db->query($sql4);
        //$query = $this->skpd_model->getAllc();

        foreach ($query4->result() as $row4)
        {
            $kode = $row4->rek;
            $nama = $row4->nm_rek;
            $ang = number_format($row4->nilai, "2", ".", ",");
            $angaran = $row4->nilai;
            $pen = $row4->cp;
            $debet = $row4->debet;
            $kredit = $row4->kredit;
            $real = ($pen + $kredit) - $debet;
            $nreal = number_format($real, "2", ".", ",");
            $real_s = $real - $angaran;
            if ($real_s < 0)
            {
                $x1 = "(";
                $real_s = $real_s * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih = number_format($real_s, "2", ".", ",");
            $per1 = ($real != 0) ? ($real / $row4->nilai) * 100 : 0;
            $persen1 = number_format($per1, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$ang</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nreal</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$pend_selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1</td>
                                 </tr>";
        }
        if ($cetak == '1')
        {
            $sqltp = "SELECT SUM(nilai) AS totp,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE LEFT(c.kd_rek5,1)='4' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,1)='4' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,1)='4' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,1)='4' ";
        }
        if ($cetak == '2')
        {
            $sqltp = "SELECT SUM(nilai) AS totp,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='4' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='4' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='4' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,1)='4' AND kd_skpd='$id'";
        }
        $sqlp = $this->db->query($sqltp);
        foreach ($sqlp->result() as $rowp)
        {
            $angp = number_format($rowp->totp, "2", ".", ",");
            $angaranp = $rowp->totp;
            $penp = $rowp->cp;
            $debetp = $rowp->debet;
            $kreditp = $rowp->kredit;
            $realp = ($penp + $kreditp) - $debetp;
            $nrealp = number_format($realp, "2", ".", ",");
            $real_sp = $realp - $angaranp;
            if ($real_sp < 0)
            {
                $x1 = "(";
                $real_sp = $real_sp * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihp = number_format($real_sp, "2", ".", ",");
            $per1p = ($realp != 0) ? ($realp / $rowp->totp) * 100 : 0;
            $persen1p = number_format($per1p, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Jumlah Pendapatan</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angp</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nrealp</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$pend_selisihp$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1p</td>
                                 </tr>";
        }

        if ($cetak == '1')
        {
            $sql5 = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,1)= a.kd_rek1 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='5'  GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,2)= a.kd_rek2 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,1)='5'  GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,3)= a.kd_rek3 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,1)='5'  GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }
        if ($cetak == '2')
        {
            $sql5 = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(kd_rek5,1)= a.kd_rek1 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='5' AND b.kd_skpd='$id' GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM  trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,1)='5' AND b.kd_skpd='$id' GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,1)='5' AND b.kd_skpd='$id' GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }


        $query5 = $this->db->query($sql5);
        //$query = $this->skpd_model->getAllc();

        foreach ($query5->result() as $row5)
        {
            $kode5 = $row5->rek;
            $nama5 = $row5->nm_rek;
            $ang5 = number_format($row5->nilai, "2", ".", ",");
            $angaran5 = $row5->nilai;
            $pen5 = $row5->cp;
            $debet5 = $row5->debet;
            $kredit5 = $row5->kredit;
            $real5 = $debet5 - ($pen5 + $kredit5);
            $nreal5 = number_format($real5, "2", ".", ",");
            $real_s5 = $real5 - $angaran5;
            if ($real_s5 < 0)
            {
                $x1 = "(";
                $real_s5 = $real_s5 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih5 = number_format($real_s5, "2", ".", ",");
            $per15 = ($real5 != 0) ? ($real5 / $row5->nilai) * 100 : 0;
            $persen15 = number_format($per15, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\">$kode5</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$ang5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nreal5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$pend_selisih5$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen15</td>
                                     
                                 </tr>";
        }

        if ($cetak == '1')
        {
            $sqltb = "SELECT SUM(nilai) AS totb,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE LEFT(c.kd_rek5,1)='5' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,1)='5' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,1)='5' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,1)='5' ";
        }
        if ($cetak == '2')
        {
            $sqltb = "SELECT SUM(nilai) AS totb,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='5' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='5' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='5' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,1)='5' AND kd_skpd='$id'";
        }
        $sqlb = $this->db->query($sqltb);
        foreach ($sqlb->result() as $rowb)
        {
            $angb = number_format($rowb->totb, "2", ".", ",");
            $angaranb = $rowb->totb;
            $penb = $rowb->cp;
            $debetb = $rowb->debet;
            $kreditb = $rowb->kredit;
            $realb = $debetb - ($penb + $kreditb);
            $nrealb = number_format($realb, "2", ".", ",");
            $real_sb = $realb - $angaranb;
            if ($real_sb < 0)
            {
                $x1 = "(";
                $real_sb = $real_sb * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihb = number_format($real_sb, "2", ".", ",");
            $per1b = ($realb != 0) ? ($realb / $rowb->totb) * 100 : 0;
            $persen1b = number_format($per1b, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Jumlah Belanja</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angb</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nrealb</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$pend_selisihb$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1b</td>
                                 </tr>";
        }

        $suplus = $angaranp - $angaranb;

        if ($suplus < 0)
        {
            $s = "(";
            $suplus = $suplus * -1;
            $d = ")";
        } else
        {
            $s = "";
            $d = "";
        }
        $surp = number_format($suplus, 2, ',', '.');
        $suplusr = $realp - $realb;

        if ($suplusr < 0)
        {
            $j = "(";
            $suplusr = $suplusr * -1;
            $k = ")";
        } else
        {
            $j = "";
            $k = "";
        }
        $surpr = number_format($suplusr, 2, ',', '.');

        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Surplus/Defisit</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$s$surp$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$j$surpr$k</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                </tr>";
        if ($cetak == '1')
        {
            $sqlpm = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,1)= a.kd_rek1 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='6'  GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,2)= a.kd_rek2 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,2)='61'  GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,3)= a.kd_rek3 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,2)='61'  GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }
        if ($cetak == '2')
        {
            $sqlpm = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(kd_rek5,1)= a.kd_rek1 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='6' AND b.kd_skpd='$id' GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM  trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,2)='61' AND b.kd_skpd='$id' GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,2)='61' AND b.kd_skpd='$id' GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }
        $query61 = $this->db->query($sqlpm);

        foreach ($query61->result() as $row61)
        {
            $kode61 = $row61->rek;
            $nama61 = $row61->nm_rek;
            $ang61 = number_format($row61->nilai, "2", ".", ",");
            $angaran61 = $row61->nilai;
            //echo($angaran61);
            $pen61 = $row61->cp;
            $debet61 = $row61->debet;
            $kredit61 = $row61->kredit;
            $real61 = ($pen61 + $kredit61) - $debet61;
            $nreal61 = number_format($real61, "2", ".", ",");
            $real_s61 = $real61 - $angaran61;
            if ($real_s61 < 0)
            {
                $x1 = "(";
                $real_s61 = $real_s61 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih61 = number_format($real_s61, "2", ".", ",");
            $per161 = ($real61 != 0) ? ($real61 / $row61->nilai) * 100 : 0;
            $persen161 = number_format($per161, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\">$kode61</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama61</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$ang61</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nreal61</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$pend_selisih61$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen161</td>
                                 </tr>";
        }

        if ($cetak == '1')
        {
            $sqltpm = "SELECT SUM(nilai) AS totpm,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE LEFT(c.kd_rek5,2)='61' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,2)='61' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,2)='61' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,2)='61' ";
        }
        if ($cetak == '2')
        {
            $sqltpm = "SELECT SUM(nilai) AS totpm,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='61' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='61' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='61' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,2)='61' AND kd_skpd='$id'";
        }
        $sqlpmasuk = $this->db->query($sqltpm);
        foreach ($sqlpmasuk->result() as $rowpm)
        {
            $angpm = number_format($rowpm->totpm, "2", ".", ",");
            $angaranpm = $rowpm->totpm;
            $penpm = $rowpm->cp;
            $debetpm = $rowpm->debet;
            $kreditpm = $rowpm->kredit;
            $realpm = ($penpm + $kreditpm) - $debetpm;
            $nrealpm = number_format($realpm, "2", ".", ",");
            $real_spm = $realpm - $angaranpm;
            if ($real_spm < 0)
            {
                $x1 = "(";
                $real_spm = $real_spm * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihpm = number_format($real_spm, "2", ".", ",");
            $per1pm = ($realpm != 0) ? ($realpm / $rowpm->totpm) * 100 : 0;
            $persen1pm = number_format($per1pm, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Jumlah Pembiayaan masuk</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angpm</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nrealpm</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$pend_selisihpm$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1pm</td>
                                 </tr>";
        }
        if ($cetak == '1')
        {
            $sqlpk = "SELECT * FROM(SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,2)= a.kd_rek2 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,2)='62'  GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,3)= a.kd_rek3 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,2)='62'  GROUP BY a.kd_rek3,a.lra, a.nm_rek3) a ORDER BY kd_rek";
        }
        if ($cetak == '2')
        {
            $sqlpk = "SELECT * FROM(SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM  trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,2)='62' AND b.kd_skpd='$id' GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,2)='62' AND b.kd_skpd='$id' GROUP BY a.kd_rek3,a.lra, a.nm_rek3) a ORDER BY kd_rek";
        }
        $query62 = $this->db->query($sqlpk);

        foreach ($query62->result() as $row62)
        {
            $kode62 = $row62->rek;
            $nama62 = $row62->nm_rek;
            $ang62 = number_format($row62->nilai, "2", ".", ",");
            $angaran62 = $row62->nilai;
            $pen62 = $row62->cp;
            $debet62 = $row62->debet;
            $kredit62 = $row62->kredit;
            $real62 = $debet62 - ($pen62 + $kredit62);
            $nreal62 = number_format($real62, "2", ".", ",");
            $real_s62 = $real62 - $angaran62;
            if ($real_s62 < 0)
            {
                $x1 = "(";
                $real_s62 = $real_s62 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih62 = number_format($real_s62, "2", ".", ",");
            $per162 = ($real62 != 0) ? ($real62 / $row62->nilai) * 100 : 0;
            $persen162 = number_format($per162, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\">$kode62</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama62</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$ang62</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nreal62</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$pend_selisih62$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen162</td>
                                 </tr>";
        }

        if ($cetak == '1')
        {
            $sqltpk = "SELECT SUM(nilai) AS totpk,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE LEFT(c.kd_rek5,2)='62' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,2)='62' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,2)='62' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,2)='62' ";
        }
        if ($cetak == '2')
        {
            $sqltpk = "SELECT SUM(nilai) AS totpk,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='62' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='62' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='62' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,2)='62' AND kd_skpd='$id'";
        }
        $sqlpkeluar = $this->db->query($sqltpk);
        foreach ($sqlpkeluar->result() as $rowpk)
        {
            $angpk = number_format($rowpk->totpk, "2", ".", ",");
            $angaranpk = $rowpk->totpk;
            $penpk = $rowpk->cp;
            $debetpk = $rowpk->debet;
            $kreditpk = $rowpk->kredit;
            $realpk = ($penpk + $kreditpk) - $debetpk;
            $nrealpk = number_format($realpm, "2", ".", ",");
            $real_spk = $realpk - $angaranpk;
            if ($real_spk < 0)
            {
                $x1 = "(";
                $real_spk = $real_spk * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihpk = number_format($real_spk, "2", ".", ",");
            $per1pk = ($realpk != 0) ? ($realpk / $rowpk->totpk) * 100 : 0;
            $persen1pk = number_format($per1pk, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Jumlah Pembiayaan Keluar</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angpk</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nrealpk</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$pend_selisihpk$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1pk</td>
                                 </tr>";
        }
        //echo($angaran62);
        $netto = $angaranpm - $angaranpk;
        $net = number_format($netto, 2, ',', '.');
        if ($netto < 0)
        {
            $x4 = "(";
            $netto = $netto * -1;
            $y4 = ")";
        } else
        {
            $x4 = "";
            $y4 = "";
        }

        $nettor = $realpm - $realpk;
        $netr = number_format($nettor, 2, ',', '.');
        if ($nettor < 0)
        {
            $x5 = "(";
            $nettor = $nettor * -1;
            $y5 = ")";
        } else
        {
            $x5 = "";
            $y5 = "";
        }

        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Pembiayaan Netto</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x4$net$y4</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x5$netr$y5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                </tr>";
        $silpa = ($angaranp + $angaranpm) - ($angaranpk + $angaranb);
        if ($silpa < 0)
        {
            $c = "(";
            $silpa = $silpa * -1;
            $d = ")";
        } else
        {
            $c = "";
            $d = "";
        }
        $silp = number_format($silpa, 2, ',', '.');
        $silpar = ($realp + $realpm) - ($realb + $realpk);
        if ($silpar < 0)
        {
            $c1 = "(";
            $silpar = $silpar * -1;
            $d1 = ")";
        } else
        {
            $c1 = "";
            $d1 = "";
        }
        $silpr = number_format($silpar, 2, ',', '.');

        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">SILPA</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$silp$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$silpr$d1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                </tr>";

        $cRet .= "</table>";
        $data['prev'] = $cRet;
        $data['sikap'] = 'preview';


        $this->template->set('title', 'CETAK PERDA REALISASI SEMESTER LAMPIRAN I');
        $this->tukd_model->_mpdf('', $cRet, 10, 10, 10, '0');
    }

    function cetak_perda1_semester($lap = '', $ctk = '', $skpd = '')
    {
        $id = $skpd;
        $cetak = $ctk;
        $laporan = $lap;

        if ($laporan <> '2')
        {
            $sts = '';
            $jurnal = '';
        } else
        {
            $sts = "AND MONTH(d.tgl_sts)<='6'";
            $jurnal = "AND MONTH(d.tgl_voucher)<='6'";

        }
        $sqldns = "SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
        $sqlskpd = $this->db->query($sqldns);
        foreach ($sqlskpd->result() as $rowdns)
        {
            $kd_urusan = $rowdns->kd_u;
            $nm_urusan = $rowdns->nm_u;
            $kd_skpd = $rowdns->kd_sk;
            $nm_skpd = $rowdns->nm_sk;
        }

        $sqlttd1 = "SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PA'";
        $sqlttd = $this->db->query($sqlttd1);
        foreach ($sqlttd->result() as $rowttd)
        {
            $nip = $rowttd->nip;
            $nama = $rowttd->nm;
            $jabatan = $rowttd->jab;
        }

        $sqlsc = "SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
        $sqlsclient = $this->db->query($sqlsc);
        foreach ($sqlsclient->result() as $rowsc)
        {

            $tgl = $rowsc->tgl_rka;
            $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
            $kab = $rowsc->kab_kota;
            $daerah = $rowsc->daerah;
            $thn = $rowsc->thn_ang;
        }

        $jk = $this->rka_model->combo_skpd();

        $cRet = '';

        if ($cetak == '2')
        {
            $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td rowspan=\"3\" align=\"left\" width=\"55%\"><strong></strong></td>
                         <td rowspan=\"3\" valign =\"top\" align=\"left\" width=\"15%\"><strong><h5>LAMPIRAN I  :</h6></strong></td>
                         <td colspan=\"2\" align=\"left\" width=\"30%\"><strong><h5>PERATURAN DAERAH</strong></h5></td>
                    </tr>
                    <tr> 
                         <td align=\"left\" width=\"10%\"><h5>NOMOR</h5></td><td width=\"20%\" align=\"left\" ><h5>:</h5></td>
                    </tr>
                    <tr>
                        <td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"10%\"><h5>TANGGAL</h5></td><td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"20%\"><h5>:</h5></td>
                    </tr>                                     
                   
                  </table>";
        }

        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>$kab</strong></td>                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>RINGKASAN REALISASI APBD SEMESTER I </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>TAHUN ANGARAN $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";
        if ($cetak == '2')
        {
            $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"left\" border=\"0\">
                        <tr>
                            <td width=\"20%\">Urusan Organisasi </td>
                            <td width=\"80%\">: $kd_urusan - $nm_urusan</td>
                        </tr>
                        <tr>
                            <td>Organisasi</td>
                            <td>: $kd_skpd - $nm_skpd </td>
                        </tr>
                    
                    </table>";
        }

        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\"><b>NOMOR URUT</b></td>                            
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\" colspan=\"2\" ><b>JUMLAH (Rp.)</b></td>
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>PROGNOSIS</b></td>
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        <tr >
                             <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>Anggaran</b></td>
                             <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>Realisasi</b></td>                             
                        </tr>  
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                        </tr>";


        if ($cetak == '1')
        {
            $sql4 = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,1)= a.kd_rek1 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='4'  GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,2)= a.kd_rek2 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,1)='4'  GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,3)= a.kd_rek3 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,1)='4'  GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }
        if ($cetak == '2')
        {
            $sql4 = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(kd_rek5,1)= a.kd_rek1 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='4' AND b.kd_skpd='$id' GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM  trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,1)='4' AND b.kd_skpd='$id' GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,1)='4' AND b.kd_skpd='$id' GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }

        $query4 = $this->db->query($sql4);
        //$query = $this->skpd_model->getAllc();

        foreach ($query4->result() as $row4)
        {
            $kode = $row4->rek;
            $nama = $row4->nm_rek;
            $ang = number_format($row4->nilai, "2", ".", ",");
            $angaran = $row4->nilai;
            $pen = $row4->cp;
            $debet = $row4->debet;
            $kredit = $row4->kredit;
            $real = ($pen + $kredit) - $debet;
            $nreal = number_format($real, "2", ".", ",");
            $real_s = $real - $angaran;
            if ($real_s < 0)
            {
                $x1 = "(";
                $real_s = $real_s * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih = number_format($real_s, "2", ".", ",");
            $per1 = ($real != 0) ? ($real / $row4->nilai) * 100 : 0;
            $persen1 = number_format($per1, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$ang</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nreal</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$pend_selisih</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1</td>
                                 </tr>";
        }
        if ($cetak == '1')
        {
            $sqltp = "SELECT SUM(nilai) AS totp,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE LEFT(c.kd_rek5,1)='4' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,1)='4' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,1)='4' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,1)='4' ";
        }
        if ($cetak == '2')
        {
            $sqltp = "SELECT SUM(nilai) AS totp,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='4' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='4' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='4' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,1)='4' AND kd_skpd='$id'";
        }
        $sqlp = $this->db->query($sqltp);
        foreach ($sqlp->result() as $rowp)
        {
            $angp = number_format($rowp->totp, "2", ".", ",");
            $angaranp = $rowp->totp;
            $penp = $rowp->cp;
            $debetp = $rowp->debet;
            $kreditp = $rowp->kredit;
            $realp = ($penp + $kreditp) - $debetp;
            $nrealp = number_format($realp, "2", ".", ",");
            $real_sp = $realp - $angaranp;
            if ($real_sp < 0)
            {
                $x1 = "(";
                $real_sp = $real_sp * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihp = number_format($real_sp, "2", ".", ",");
            $per1p = ($realp != 0) ? ($realp / $rowp->totp) * 100 : 0;
            $persen1p = number_format($per1p, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Jumlah Pendapatan</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angp</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nrealp</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$pend_selisihp</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1p</td>
                                 </tr>";
        }

        if ($cetak == '1')
        {
            $sql5 = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,1)= a.kd_rek1 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='5'  GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,2)= a.kd_rek2 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,1)='5'  GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,3)= a.kd_rek3 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,1)='5'  GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }
        if ($cetak == '2')
        {
            $sql5 = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(kd_rek5,1)= a.kd_rek1 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='5' AND b.kd_skpd='$id' GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM  trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,1)='5' AND b.kd_skpd='$id' GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,1)='5' AND b.kd_skpd='$id' GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }


        $query5 = $this->db->query($sql5);
        //$query = $this->skpd_model->getAllc();

        foreach ($query5->result() as $row5)
        {
            $kode5 = $row5->rek;
            $nama5 = $row5->nm_rek;
            $ang5 = number_format($row5->nilai, "2", ".", ",");
            $angaran5 = $row5->nilai;
            $pen5 = $row5->cp;
            $debet5 = $row5->debet;
            $kredit5 = $row5->kredit;
            $real5 = $debet5 - ($pen5 + $kredit5);
            $nreal5 = number_format($real5, "2", ".", ",");
            $real_s5 = $real5 - $angaran5;
            if ($real_s5 < 0)
            {
                $x1 = "(";
                $real_s5 = $real_s5 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih5 = number_format($real_s5, "2", ".", ",");
            $per15 = ($real5 != 0) ? ($real5 / $row5->nilai) * 100 : 0;
            $persen15 = number_format($per15, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\">$kode5</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$ang5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nreal5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$pend_selisih5$</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen15</td>
                                     
                                 </tr>";
        }

        if ($cetak == '1')
        {
            $sqltb = "SELECT SUM(nilai) AS totb,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE LEFT(c.kd_rek5,1)='5' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,1)='5' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,1)='5' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,1)='5' ";
        }
        if ($cetak == '2')
        {
            $sqltb = "SELECT SUM(nilai) AS totb,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='5' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='5' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)='5' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,1)='5' AND kd_skpd='$id'";
        }
        $sqlb = $this->db->query($sqltb);
        foreach ($sqlb->result() as $rowb)
        {
            $angb = number_format($rowb->totb, "2", ".", ",");
            $angaranb = $rowb->totb;
            $penb = $rowb->cp;
            $debetb = $rowb->debet;
            $kreditb = $rowb->kredit;
            $realb = $debetb - ($penb + $kreditb);
            $nrealb = number_format($realb, "2", ".", ",");
            $real_sb = $realb - $angaranb;
            if ($real_sb < 0)
            {
                $x1 = "(";
                $real_sb = $real_sb * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihb = number_format($real_sb, "2", ".", ",");
            $per1b = ($realb != 0) ? ($realb / $rowb->totb) * 100 : 0;
            $persen1b = number_format($per1b, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Jumlah Belanja</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angb</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nrealb</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$pend_selisihb</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1b</td>
                                 </tr>";
        }

        $suplus = $angaranp - $angaranb;

        if ($suplus < 0)
        {
            $s = "(";
            $suplus = $suplus * -1;
            $d = ")";
        } else
        {
            $s = "";
            $d = "";
        }
        $surp = number_format($suplus, 2, ',', '.');
        $suplusr = $realp - $realb;

        if ($suplusr < 0)
        {
            $j = "(";
            $suplusr = $suplusr * -1;
            $k = ")";
        } else
        {
            $j = "";
            $k = "";
        }
        $surpr = number_format($suplusr, 2, ',', '.');

        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Surplus/Defisit</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$s$surp$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$j$surpr$k</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                </tr>";
        if ($cetak == '1')
        {
            $sqlpm = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,1)= a.kd_rek1 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='6'  GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,2)= a.kd_rek2 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,2)='61'  GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,3)= a.kd_rek3 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,2)='61'  GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }
        if ($cetak == '2')
        {
            $sqlpm = "SELECT * FROM(SELECT a.kd_rek1 AS kd_rek,a.lra AS rek, a.nm_rek1 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(kd_rek5,1)= a.kd_rek1 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,1)=a.kd_rek1 $jurnal)AS kredit FROM ms_rek1 a INNER JOIN trdrka b
                        ON a.kd_rek1=LEFT(b.kd_rek5,(LENGTH(a.kd_rek1))) WHERE LEFT(a.kd_rek1,1)='6' AND b.kd_skpd='$id' GROUP BY a.kd_rek1,a.lra, a.nm_rek1
                        UNION ALL 
                        SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM  trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,2)='61' AND b.kd_skpd='$id' GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,2)='61' AND b.kd_skpd='$id' GROUP BY a.kd_rek3,a.lra, a.nm_rek3)a ORDER BY kd_rek";
        }
        $query61 = $this->db->query($sqlpm);

        foreach ($query61->result() as $row61)
        {
            $kode61 = $row61->rek;
            $nama61 = $row61->nm_rek;
            $ang61 = number_format($row61->nilai, "2", ".", ",");
            $angaran61 = $row61->nilai;
            //echo($angaran61);
            $pen61 = $row61->cp;
            $debet61 = $row61->debet;
            $kredit61 = $row61->kredit;
            $real61 = ($pen61 + $kredit61) - $debet61;
            $nreal61 = number_format($real61, "2", ".", ",");
            $real_s61 = $real61 - $angaran61;
            if ($real_s61 < 0)
            {
                $x1 = "(";
                $real_s61 = $real_s61 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih61 = number_format($real_s61, "2", ".", ",");
            $per161 = ($real61 != 0) ? ($real61 / $row61->nilai) * 100 : 0;
            $persen161 = number_format($per161, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\">$kode61</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama61</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$ang61</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nreal61</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$pend_selisih61</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen161</td>
                                 </tr>";
        }

        if ($cetak == '1')
        {
            $sqltpm = "SELECT SUM(nilai) AS totpm,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE LEFT(c.kd_rek5,2)='61' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,2)='61' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,2)='61' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,2)='61' ";
        }
        if ($cetak == '2')
        {
            $sqltpm = "SELECT SUM(nilai) AS totpm,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='61' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='61' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='61' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,2)='61' AND kd_skpd='$id'";
        }
        $sqlpmasuk = $this->db->query($sqltpm);
        foreach ($sqlpmasuk->result() as $rowpm)
        {
            $angpm = number_format($rowpm->totpm, "2", ".", ",");
            $angaranpm = $rowpm->totpm;
            $penpm = $rowpm->cp;
            $debetpm = $rowpm->debet;
            $kreditpm = $rowpm->kredit;
            $realpm = ($penpm + $kreditpm) - $debetpm;
            $nrealpm = number_format($realpm, "2", ".", ",");
            $real_spm = $realpm - $angaranpm;
            if ($real_spm < 0)
            {
                $x1 = "(";
                $real_spm = $real_spm * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihpm = number_format($real_spm, "2", ".", ",");
            $per1pm = ($realpm != 0) ? ($realpm / $rowpm->totpm) * 100 : 0;
            $persen1pm = number_format($per1pm, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Jumlah Pembiayaan masuk</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angpm</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nrealpm</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$pend_selisihpm</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1pm</td>
                                 </tr>";
        }
        if ($cetak == '1')
        {
            $sqlpk = "SELECT * FROM(SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,2)= a.kd_rek2 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,2)='62'  GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE  LEFT(c.kd_rek5,3)= a.kd_rek3 $sts) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE  LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,2)='62'  GROUP BY a.kd_rek3,a.lra, a.nm_rek3) a ORDER BY kd_rek";
        }
        if ($cetak == '2')
        {
            $sqlpk = "SELECT * FROM(SELECT a.kd_rek2 AS kd_rek,a.lra AS rek,a.nm_rek2 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM  trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)=a.kd_rek2 $jurnal)AS kredit FROM ms_rek2 a INNER JOIN trdrka b
                        ON a.kd_rek2=LEFT(b.kd_rek5,(LENGTH(a.kd_rek2))) WHERE LEFT(a.kd_rek2,2)='62' AND b.kd_skpd='$id' GROUP BY a.kd_rek2,a.lra,a.nm_rek2 
                        UNION ALL 
                        SELECT a.kd_rek3 AS kd_rek,a.lra AS rek,a.nm_rek3 AS nm_rek ,SUM(b.nilai) AS nilai,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $sts)AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher  WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,3)=a.kd_rek3 $jurnal)AS kredit FROM ms_rek3 a INNER JOIN trdrka b
                        ON a.kd_rek3=LEFT(b.kd_rek5,(LENGTH(a.kd_rek3))) WHERE LEFT(a.kd_rek3,2)='62' AND b.kd_skpd='$id' GROUP BY a.kd_rek3,a.lra, a.nm_rek3) a ORDER BY kd_rek";
        }
        $query62 = $this->db->query($sqlpk);

        foreach ($query62->result() as $row62)
        {
            $kode62 = $row62->rek;
            $nama62 = $row62->nm_rek;
            $ang62 = number_format($row62->nilai, "2", ".", ",");
            $angaran62 = $row62->nilai;
            $pen62 = $row62->cp;
            $debet62 = $row62->debet;
            $kredit62 = $row62->kredit;
            $real62 = $debet62 - ($pen62 + $kredit62);
            $nreal62 = number_format($real62, "2", ".", ",");
            $real_s62 = $real62 - $angaran62;
            if ($real_s62 < 0)
            {
                $x1 = "(";
                $real_s62 = $real_s62 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih62 = number_format($real_s62, "2", ".", ",");
            $per162 = ($real62 != 0) ? ($real62 / $row62->nilai) * 100 : 0;
            $persen162 = number_format($per162, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\">$kode62</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama62</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$ang62</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nreal62</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$pend_selisih62</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen162</td>
                                 </tr>";
        }

        if ($cetak == '1')
        {
            $sqltpk = "SELECT SUM(nilai) AS totpk,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE LEFT(c.kd_rek5,2)='62' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,2)='62' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE  LEFT(c.kd_rek5,2)='62' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,2)='62' ";
        }
        if ($cetak == '2')
        {
            $sqltpk = "SELECT SUM(nilai) AS totpk,(SELECT SUM(rupiah)FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts=d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='62' $sts)AS cp,
                        (SELECT SUM(debet)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='62' $jurnal)AS debet,
                        (SELECT SUM(kredit)FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,2)='62' $jurnal)AS kredit  
                        FROM trdrka WHERE LEFT(kd_rek5,2)='62' AND kd_skpd='$id'";
        }
        $sqlpkeluar = $this->db->query($sqltpk);
        foreach ($sqlpkeluar->result() as $rowpk)
        {
            $angpk = number_format($rowpk->totpk, "2", ".", ",");
            $angaranpk = $rowpk->totpk;
            $penpk = $rowpk->cp;
            $debetpk = $rowpk->debet;
            $kreditpk = $rowpk->kredit;
            $realpk = ($penpk + $kreditpk) - $debetpk;
            $nrealpk = number_format($realpm, "2", ".", ",");
            $real_spk = $realpk - $angaranpk;
            if ($real_spk < 0)
            {
                $x1 = "(";
                $real_spk = $real_spk * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihpk = number_format($real_spk, "2", ".", ",");
            $per1pk = ($realpk != 0) ? ($realpk / $rowpk->totpk) * 100 : 0;
            $persen1pk = number_format($per1pk, "2", ".", ",");

            $cRet .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Jumlah Pembiayaan Keluar</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angpk</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nrealpk</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$pend_selisihpk</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1pk</td>
                                 </tr>";
        }
        //echo($angaran62);
        $netto = $angaranpm - $angaranpk;
        $net = number_format($netto, 2, ',', '.');
        if ($netto < 0)
        {
            $x4 = "(";
            $netto = $netto * -1;
            $y4 = ")";
        } else
        {
            $x4 = "";
            $y4 = "";
        }

        $nettor = $realpm - $realpk;
        $netr = number_format($nettor, 2, ',', '.');
        if ($nettor < 0)
        {
            $x5 = "(";
            $nettor = $nettor * -1;
            $y5 = ")";
        } else
        {
            $x5 = "";
            $y5 = "";
        }

        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">Pembiayaan Netto</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x4$net$y4</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x5$netr$y5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                </tr>";
        $silpa = ($angaranp + $angaranpm) - ($angaranpk + $angaranb);
        if ($silpa < 0)
        {
            $c = "(";
            $silpa = $silpa * -1;
            $d = ")";
        } else
        {
            $c = "";
            $d = "";
        }
        $silp = number_format($silpa, 2, ',', '.');
        $silpar = ($realp + $realpm) - ($realb + $realpk);
        if ($silpar < 0)
        {
            $c1 = "(";
            $silpar = $silpar * -1;
            $d1 = ")";
        } else
        {
            $c1 = "";
            $d1 = "";
        }
        $silpr = number_format($silpar, 2, ',', '.');

        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">SILPA</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$silp$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$silpr$d1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                </tr>";

        $cRet .= "</table>";
        $data['prev'] = $cRet;
        $data['sikap'] = 'preview';


        $this->template->set('title', 'CETAK PERDA REALISASI SEMESTER LAMPIRAN I');
        $this->tukd_model->_mpdf('', $cRet, 10, 10, 10, '0');
        //$this->template->load('template','anggaran/rka/perkadaII',$data);
    }

	
	function cetak_lra_ppkd($cetak=''){
	 $bulan= $_REQUEST['tgl1'];
	 $bttd= $_REQUEST['tgl_ttd'];
     $c_ttd= $_REQUEST['c_ttd'];
	 $ag_tox=2;
	 
	 $id  = $this->session->userdata('kdskpd');
     $thn = $this->session->userdata('pcThang');
	//echo $id;
    //function cetak_lra(){
        $sql41="SELECT SUM(nilai_ang) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_keg4($bulan,$ag_tox) WHERE left(kd_rek5,1)='4' and kd_skpd='$id' ";
                    $query41 = $this->db->query($sql41);
                    $jmlp = $query41->row();
                    $jmlpendapatan = $jmlp->nilai;
                    $jmlangpendapatan = $jmlp->anggaran;
                    $jmlangpendapatan1= number_format($jmlp->anggaran,"2",",",".");
                    $jmlpendapatan1= number_format($jmlp->nilai,"2",",",".");
                    
					$real_pend = $jmlangpendapatan - $jmlpendapatan;
                    if ($real_pend < 0){
                    	$x001="("; $real_pendx=$real_pend*-1; $y001=")";}
                    else {
                    	$x001=""; $real_pendx=$real_pend; $y001="";}
                    $selisihpend = number_format($real_pendx,"2",",",".");
                    if ($jmlpendapatan==0){
                        $tmp001=1;
                    }else{
                        $tmp001=$jmlpendapatan;
                    }
					
                    $per001     = ($jmlangpendapatan!=0)?($jmlpendapatan / $jmlangpendapatan ) * 100:0; 
                    $persen001  = number_format($per001,"2",",",".");
					
        $sql51="SELECT SUM(nilai_ang) as angaran,SUM(real_spj)as nilai FROM data_realisasi_keg4($bulan,$ag_tox) WHERE left(kd_rek5,1) in ('5') and kd_skpd='$id' ";
                    $query51 = $this->db->query($sql51);
                    $jmlb = $query51->row();
                    $jmlangbelanja = $jmlb->angaran;
                    $jmlbelanja = $jmlb->nilai;
                    $jmlbelanja1= number_format($jmlb->nilai,"2",",",".");
                    $jmlangbelanja1= number_format($jmlb->angaran,"2",",",".");
					
					$real_belanja = $jmlangbelanja - $jmlbelanja;
                    if ($real_belanja < 0){
                    	$x002="("; $real_belanjax=$real_belanja*-1; $y002=")";}
                    else {
                    	$x002=""; $real_belanjax=$real_belanja; $y002="";}
                    $selisihbelanja = number_format($real_belanjax,"2",",",".");
                    if ($jmlbelanja==0){
                        $tmp002=1;
                    }else{
                        $tmp002=$jmlbelanja;
                    }
					
                    $per002     = ($jmlangbelanja!=0)?($jmlbelanja / $jmlangbelanja ) * 100:0; 
                    $persen002  = number_format($per002,"2",",",".");
					
        $sql523="SELECT SUM(nilai_ang) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_keg4($bulan,$ag_tox) WHERE left(kd_rek5,3)='523' and kd_skpd='$id' ";
                    $query523 = $this->db->query($sql523);
                    $jmlbm = $query523->row();
                    $jmlbmbelanja = $jmlbm->nilai;
                    $jmlangbmbelanja = $jmlbm->anggaran;
                    $jmlbmbelanja1= number_format($jmlbmbelanja,"2",",",".");
                    $jmlangbmbelanja1= number_format($jmlangbmbelanja,"2",",",".");
        $sql61="SELECT SUM(nilai_ang) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_keg4($bulan,$ag_tox) WHERE left(kd_rek5,2)='71' and kd_skpd='$id' ";
                    $query61 = $this->db->query($sql61);
                    $jmlpm = $query61->row();
                    $jmlpmasuk = $jmlpm->nilai;
                    $jmlangpmasuk = $jmlpm->anggaran;
        $sql62="SELECT SUM(nilai_ang) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_keg4($bulan,$ag_tox) WHERE left(kd_rek5,2)='72' and kd_skpd='$id' ";
                    $query62 = $this->db->query($sql62);
                    $jmlpk = $query62->row();
                    $jmlpkeluar = $jmlpk->nilai;
                    $jmlangpkeluar = $jmlpk->anggaran;
        $surplus =  $jmlpendapatan- $jmlbelanja;
        $angsurplus = $jmlangpendapatan- $jmlangbelanja;        
        if ($surplus < 0){
                    	$x="("; $surplusx=$surplus*-1; $y=")";
                        }else {
                    	$x=""; $surplusx=$surplus; $y="";
                        }
        if ($angsurplus < 0){
                    	$e="("; $angsurplusx=$angsurplus*-1; $f=")";
                        }else {
                    	$e=""; $angsurplusx=$angsurplus; $f="";
                        }
        $surplus1= number_format($surplusx,"2",",",".");
        $angsurplus1= number_format($angsurplusx,"2",",",".");
		
		$real_surplus = $angsurplus - $surplus;
                    if ($real_surplus < 0){
                    	$x003="("; $real_surplusx=$real_surplus*-1; $y003=")";}
                    else {
                    	$x003=""; $real_surplusx=$real_surplus; $y003="";}
        $selisihsurplus = number_format($real_surplusx,"2",",",".");
                    if ($surplus==0){
                        $tmp003=1;
                    }else{
                        $tmp003=$surplus;
                    }
					
                    $per003     = ($angsurplus!=0)?($surplus / $angsurplus ) * 100:0; 
                    $persen003  = number_format($per003,"2",",",".");
		
        $biaya_net = $jmlpmasuk- $jmlpkeluar;
        $angbiaya_net =  $jmlangpmasuk- $jmlangpkeluar;        
        if ($biaya_net < 0){
                    	$a="("; $biaya_netx=$biaya_net*-1; $b=")";
                        }else {
                    	$a=""; $biaya_netx=$biaya_net; $b="";
                        }
        if ($angbiaya_net < 0){
                    	$g="("; $angbiaya_netx=$angbiaya_net*-1; $h=")";
                        }else {
                    	$g=""; $angbiaya_netx=$angbiaya_net; $h="";
                        }
        $biaya_net1 =   number_format($biaya_netx,"2",",",".");
        $angbiaya_net1 =   number_format($angbiaya_netx,"2",",",".");
        $silpa= ($jmlpendapatan+$jmlpmasuk)-($jmlbelanja+$jmlpkeluar);
        $angsilpa= ($jmlangpendapatan+$jmlangpmasuk)-($jmlangbelanja+$jmlangpkeluar);                
        if ($silpa < 0){
                    	$c="("; $silpax=$silpa*-1; $d=")";
                        }else {
                    	$c=""; $silpax=$silpa; $d="";
                        }
        if ($angsilpa < 0){
                    	$i="("; $angsilpax=$angsilpa*-1; $j=")";
                        }else {
                    	$i=""; $angsilpax=$angsilpa; $j="";
                        }
        $silpa1 =number_format($silpax,"2",",","."); 
        $angsilpa1 =number_format($angsilpax,"2",",",".");

		$selisih_biaya = $angbiaya_net- $biaya_net;		
		if ($selisih_biaya < 0){
                    	$xy="("; $selisih_biayax=$selisih_biaya*-1; $yx=")";
                        }else {
                    	$xy=""; $selisih_biayax=$selisih_biaya; $yx="";
                        }
		$selisih_biaya1 = number_format($selisih_biayax,"2",",",".");
                    
                    $per004     = ($angbiaya_net!=0)?($biaya_net / $angbiaya_net ) * 100:0; 
                    $persen004  = number_format($per004,"2",",",".");
		
		$selisih_silpa = $angsilpa - $silpa;		
		if ($selisih_silpa < 0){
                    	$az="("; $selisih_silpax=$selisih_silpa*-1; $za=")";
                        }else {
                    	$az=""; $selisih_silpax=$selisih_silpa; $za="";
                        }
						
		$selisih_silpa1 = number_format($selisih_silpax,"2",",",".");
                    $per005     = ($angsilpa!=0)?($silpa / $angsilpa) * 100:0; 
                    $persen005  = number_format($per005,"2",",",".");
		
		$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
		
		$nm_skpd	= strtoupper ($nmskpd);
        $jk=$this->rka_model->combo_skpd();
       
        $cRet='';
        
	 $modtahun= $thn%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>					
                    <tr>
                         <td align=\"center\"><strong>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$bulan] $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td colspan =\"6\" bgcolor=\"#CCCCCC\" width=\"60%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>ANGGARAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>REALISASI</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>LEBIH</br>(KURANG)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td colspan =\"6\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td colspan =\"6\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"50%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                        </tr>";
       
                   $sql4="SELECT a.bold,a.nor,a.uraian,isnull(a.kode_1,'-') as kode_1,thn_m1 AS lalu FROM map_lra_ppkd_kab a 
				   GROUP BY a.bold,a.nor,a.uraian,isnull(a.kode_1,'-'),thn_m1 ORDER BY a.nor";
                // isnull(a.kode_1,\"'-'\")
                $query4 = $this->db->query($sql4);
                $no     = 0;                                  
               
                foreach ($query4->result() as $row4)
                {
                    
                    $nama      = $row4->uraian;   
                    $real_lalu = number_format($row4->lalu,"2",",",".");
                    $n         = $row4->kode_1;
					$n		   = ($n=="-"?"'-'":$n);   
       

					$sql = "SELECT SUM(nilai_ang) as anggaran, SUM(real_spj) as nilai FROM data_realisasi_keg4($bulan,$ag_tox) WHERE kd_skpd='$id' and (LEFT(kd_rek5,1) IN ($n) or LEFT(kd_rek5,2) IN ($n) or LEFT(kd_rek5,3) IN ($n) or LEFT(kd_rek5,5) IN($n))";
                  
               $query5 = $this->db->query($sql);
                    $trh    = $query5->row();
                    $nil    = $trh->nilai;
                    $angnil = $trh->anggaran;
                    
                    $real_s = $trh->anggaran - $trh->nilai;
                    if ($real_s < 0){
                    	$x1="("; $real_sx=$real_s*-1; $y1=")";}
                    else {
                    	$x1=""; $real_sx=$real_s; $y1="";}
                    $selisih = number_format($real_sx,"2",",",".");
                    if ($trh->nilai==0){
                        $tmp=1;
                    }else{
                        $tmp=$trh->nilai;
                    }
                    $nilai    = number_format($trh->nilai,"2",",",".");
                    $angnilai = number_format($trh->anggaran,"2",",",".");
                    $per1     = ($angnil!=0)?($nil / $angnil ) * 100:0; 
                    $persen1  = number_format($per1,"2",",",".");
                    $no       = $no + 1;
                    switch ($row4->bold) {
                    case 0:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$angnilai<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$x1$selisih$y1<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen1<b></td>
                                 </tr>";
                        break;
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$angnilai<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$x1$selisih$y1<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen1<b></td>
                                 </tr>";
                        break;	
					
					case 7:
                         $cRet    .= "<tr>
									 <tr>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$e$angsurplus1$f<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$x$surplus1$y<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$x003$selisihsurplus$y003<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen003<b></td>
                                 </tr>";
                        break;
					
					case 8:
                         $cRet    .= "<tr>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$g$angbiaya_net1$h<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$a$biaya_net1$b<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$xy$selisih_biaya1$yx<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen004<b></td>
                                 </tr>";                                
                        break;	
				
					case 9:
                         $cRet    .= "<tr>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"50%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$i$angsilpa1$j<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$c$silpa1$d<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$az$selisih_silpa1$za<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen005<b></td>
                                 </tr>";
				}
                }
        $cRet .=       " </table><br/>";
        
        $sqlsc="SELECT nama,jabatan FROM ms_ttd where nip='$c_ttd' and kode='bud'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowttd)
                {
                    $nama_ttd=$rowttd->nama;
                    $jab_ttd     = $rowttd->jabatan;
                } 
        
        $cRet .="
                     <table colspan=\"10\" style=\"border-collapse:collapse;font-family: Bookman Old Style;  font-size:11px\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"1\">
                     <tr>
                                <td width=\"100%\" align=\"center\">
                                <table width=\"100%\" border=\"0\" align=\"center\">
                                <tr>
                                <td width=\"70%\" align=\"center\" >&nbsp;
                                </td>
                                <td width=\"30%\" align=\"center\" >Sanggau, ".$this->tanggal_format_indonesia($bttd)."<br/> $jab_ttd,                 
                                <br>
                                <p>&nbsp;</p>                                
                                <br>
                                <br>
                                <br>
                                <br>$nama_ttd
                                </td></tr></table>
                                </td>
                             </tr></table>";
        
        
        
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = 'LAPORAN REALISASI ANGGARAN';
        $this->template->set('title', 'CETAK LAPORAN REALISASI ANGGARAN');        
        
      
    switch ($cetak){
				case 0;
				echo ("<title>LRA $bulan</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'P');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
    }
    
	function cetak_lra_lo_unit($cbulan="", $kd_skpd="", $pilih=1){
        //$id = $skpd;
        $cetak='2';//$ctk; 
        $id     = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $thn_ang_1= $thn_ang-1;  
        //$laporan=$lap; 
       
       // if ($cetak == '1') {
//           $skpd = '';
//           $skpd1 = '';           
//       } else {             
           $skpd = "AND kd_skpd='$id'";
           $skpd1 = "AND b.kd_skpd='$id'"; 
       //}  

       $y123=")";
	   $x123="(";       
	    $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $nmskpd     = $rowsc->nm_skpd;
                } 
		$nm_skpd = strtoupper($nmskpd);		
	   // INSERT DATA
	   
       $sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$kd_skpd'";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
     
// created by henri_tb
			
		$sqllo1="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('81','82','83') and month(b.tgl_voucher)<=$cbulan and b.kd_skpd='$kd_skpd'";
                    $querylo1= $this->db->query($sqllo1);
                    $penlo = $querylo1->row();
                    $pen_lo = $penlo->nilai;
                    $pen_lo1= number_format($penlo->nilai,"2",",",".");
        
		$sqllo2="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83') and b.kd_skpd='$kd_skpd'";
                    $querylo2= $this->db->query($sqllo2);
                    $penlo2 = $querylo2->row();
                    $pen_lo_lalu = $penlo2->nilai;
                    $pen_lo_lalu1= number_format($penlo2->nilai,"2",",",".");
		
		$sqllo3="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('91','92') and month(b.tgl_voucher)<=$cbulan and b.kd_skpd='$kd_skpd'";
                    $querylo3= $this->db->query($sqllo3);
                    $bello = $querylo3->row();
                    $bel_lo = $bello->nilai;
                    $bel_lo1= number_format($bello->nilai,"2",",",".");
        
		$sqllo4="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92') and b.kd_skpd='$kd_skpd'";
                    $querylo4= $this->db->query($sqllo4);
                    $bello2 = $querylo4->row();
                    $bel_lo_lalu = $bello2->nilai;
                    $bel_lo_lalu1= number_format($bello2->nilai,"2",",",".");		

					$surplus_lo = $pen_lo - $bel_lo;
                    if ($surplus_lo < 0){
                    	$lo1="("; $surplus_lox=$surplus_lo*-1; $lo2=")";}
                    else {
                    	$lo1=""; $surplus_lox=$surplus_lo; $lo2="";}		
                    $surplus_lo1 = number_format($surplus_lox,"2",",",".");
                    
					$surplus_lo_lalu = $pen_lo_lalu - $bel_lo_lalu;
                    if ($surplus_lo_lalu < 0){
                    	$lo3="("; $surplus_lo_lalux=$surplus_lo_lalu*-1; $lo4=")";}
                    else {
                    	$lo3=""; $surplus_lo_lalux=$surplus_lo_lalu; $lo4="";}						
                    $surplus_lo_lalu1 = number_format($surplus_lo_lalux,"2",",",".");

					$selisih_surplus_lo = $surplus_lo - $surplus_lo_lalu;
                    if ($selisih_surplus_lo < 0){
                    	$lo5="("; $selisih_surplus_lox=$selisih_surplus_lo*-1; $lo6=")";}
                    else {
                    	$lo5=""; $selisih_surplus_lox=$selisih_surplus_lo; $lo6="";}
                    $selisih_surplus_lo1 = number_format($selisih_surplus_lox,"2",",",".");
                    
					if( $surplus_lo_lalu=='' or $surplus_lo_lalu==0){
					$persen2 = '0,00';
					}else{
					$persen2 = ($surplus_lo/$surplus_lo_lalu)*100;
					$persen2 = number_format($persen2,"2",",",".");
					}
					
		$sqllo5="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('81','82','83','84') and month(b.tgl_voucher)<=$cbulan and b.kd_skpd='$kd_skpd'";
                    $querylo5= $this->db->query($sqllo5);
                    $penlo3 = $querylo5->row();
                    $pen_lo3 = $penlo3->nilai;
                    $pen_lo31= number_format($penlo3->nilai,"2",",",".");
        
		$sqllo6="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83','84') and b.kd_skpd='$kd_skpd'";
                    $querylo6= $this->db->query($sqllo6);
                    $penlo4 = $querylo6->row();
                    $pen_lo_lalu4 = $penlo4->nilai;
                    $pen_lo_lalu41= number_format($penlo4->nilai,"2",",",".");
		
		$sqllo7="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('91','92','93') and month(b.tgl_voucher)<=$cbulan and b.kd_skpd='$kd_skpd'";
                    $querylo7= $this->db->query($sqllo7);
                    $bello5 = $querylo7->row();
                    $bel_lo5 = $bello5->nilai;
                    $bel_lo51= number_format($bello5->nilai,"2",",",".");
		
		$sqllo8="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92','93') and b.kd_skpd='$kd_skpd'";
                    $querylo8= $this->db->query($sqllo8);
                    $bello6 = $querylo8->row();
                    $bel_lo_lalu6 = $bello6->nilai;
                    $bel_lo_lalu61= number_format($bello6->nilai,"2",",",".");		

					$surplus_lo2 = $pen_lo3 - $bel_lo5;
                    if ($surplus_lo2 < 0){
                    	$lo7="("; $surplus_lo2x=$surplus_lo2*-1; $lo8=")";}
                    else {
                    	$lo7=""; $surplus_lo2x=$surplus_lo2; $lo8="";}		
                    $surplus_lo21 = number_format($surplus_lo2x,"2",",",".");
                    
					$surplus_lo_lalu2 = $pen_lo_lalu4 - $bel_lo_lalu6;
                    if ($surplus_lo_lalu2 < 0){
                    	$lo9="("; $surplus_lo_lalu2x=$surplus_lo_lalu2*-1; $lo10=")";}
                    else {
                    	$lo9=""; $surplus_lo_lalu2x=$surplus_lo_lalu2; $lo10="";}						
                    $surplus_lo_lalu21 = number_format($surplus_lo_lalu2x,"2",",",".");

					$selisih_surplus_lo2 = $surplus_lo2 - $surplus_lo_lalu2;
                    if ($selisih_surplus_lo2 < 0){
                    	$lo11="("; $selisih_surplus_lo2x=$selisih_surplus_lo2*-1; $lo12=")";}
                    else {
                    	$lo11=""; $selisih_surplus_lo2x=$selisih_surplus_lo2; $lo12="";}
                    $selisih_surplus_lo21 = number_format($selisih_surplus_lo2x,"2",",",".");
                    
					if( $surplus_lo_lalu2=='' or $surplus_lo_lalu2==0){
					$persen3 = '0,00';
					}else{
					$persen3 = ($surplus_lo2/$surplus_lo_lalu2)*100;
					$persen3 = number_format($persen3,"2",",",".");
					}
		
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('8') and month(b.tgl_voucher)<=$cbulan and b.kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('9') and month(b.tgl_voucher)<=$cbulan and b.kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3x=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $surplus_lo3x=$surplus_lo3; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3x,"2",",",".");
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3x=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $surplus_lo_lalu3x=$surplus_lo_lalu3; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3x,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3x=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $selisih_surplus_lo3x=$selisih_surplus_lo3; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3x,"2",",",".");
                    
					if( $surplus_lo_lalu3=='' or $surplus_lo_lalu3==0){
					$persen4 = '0,00';
					}else{
					$persen4 = ($surplus_lo3/$surplus_lo_lalu3)*100;
					$persen4 = number_format($persen4,"2",",",".");
					}
	 
	 $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
        $cRet='';
        
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong> $nm_skpd</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN OPERASIONAL </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>&nbsp</strong></td>
                    </tr>
                  </table>";        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>Kenaikan</br>(Penurunan)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";

        $sqlmaplo="SELECT seq, nor, uraian, isnull(kode_1,'-') as kode_1, isnull(cetak,'debet-debet') as cetak FROM map_lo_skpd 
				   GROUP BY seq, nor, uraian, isnull(kode_1,'-'), isnull(cetak,'debet-debet') ORDER BY seq";
				   
                $querymaplo = $this->db->query($sqlmaplo);
                $no     = 0;                                  
               
                foreach ($querymaplo->result() as $loquery)
                {
                    
                    $nama      = $loquery->uraian;   
                    $n         = $loquery->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$normal    = $loquery->cetak;
					
		$quelo01   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang and month(b.tgl_voucher)<=$cbulan and b.kd_skpd='$kd_skpd'";
                    $quelo02 = $this->db->query($quelo01);
                    $quelo03 = $quelo02->row();
                    $nil     = $quelo03->nilai;
                    $nilai    = number_format($quelo03->nilai,"2",",",".");
					
		$quelo04   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang_1 and b.kd_skpd='$kd_skpd'";
                    $quelo05 = $this->db->query($quelo04);
                    $quelo06 = $quelo05->row();
                    $nil_lalu     = $quelo06->nilai;
                    $nilai_lalu    = number_format($quelo06->nilai,"2",",",".");
					
                    $real_nilai = $nil - $nil_lalu;
                    if ($real_nilai < 0){
                    	$lo0="("; $real_nilaix=$real_nilai*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai; $lo00="";}
                    $real_nilai1 = number_format($real_nilaix,"2",",",".");
                    
					if( $nil_lalu=='' or $nil_lalu==0){
					$persen1 = '0,00';
					}else{
					$persen1 = ($nil/$nil_lalu)*100;
					$persen1 = number_format($persen1,"2",",",".");
					}
                    $no       = $no + 1;
                    switch ($loquery->seq) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 30:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;
					case 45:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 50:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 55:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 105:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;	
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;
					case 120:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 125:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo13$surplus_lo31$lo14</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo15$surplus_lo_lalu31$lo16</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo17$selisih_surplus_lo31$lo18</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen4</td>
                                 </tr>";
                        break;	
					default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
               
				}
                              
                    
                }
				
		$cRet .=       " </table>";
        
        	$sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PA'";
            $sqlttd=$this->db->query($sqlttd1);
            foreach ($sqlttd->result() as $rowttd)
			
                {
                    $nip=$rowttd->nip;                    
                    $oioi= $rowttd->nm;
                    $jabatan = $rowttd->jab;
                }	
            
            $sqlttd12="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PPK'";
            $sqlttd2=$this->db->query($sqlttd12);
            foreach ($sqlttd2->result() as $rowttd)
			
                {
                    $nip2=$rowttd->nip;                    
                    $oioi2= $rowttd->nm;
                    $jabatan2 = $rowttd->jab;
                }	

            
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> Mengetahui,</td>
		 <td align=\"center\" width=\"50%\"> Sanggau, ".$this->tukd_model->tanggal_format_indonesia($bttd)." </td>
		 </tr>		
		 <tr>
		 <td align=\"center\" width=\"50%\"> $jabatan </td>
		 <td align=\"center\" width=\"50%\"> $jabatan2 </td>
		 </tr>	
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		  <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> $oioi</td>
		 <td align=\"center\" width=\"50%\"> $oioi2 </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> NIP :$nip</td>
		 <td align=\"center\" width=\"50%\"> NIP :$nip2 </td>
		 </tr>
         </table>
		 ";	

        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LO UNIT $kd_skpd / $cbulan");
        $this->template->set('title', ("LO UNIT $kd_skpd / $cbulan"));        
        switch($pilih) {       
        case 1;
			echo ("<title>LO UNIT $cbulan</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
        
                 
    }
    
	
	function cetak_lra_lo($cbulan="", $pilih=1){
        //$id = $skpd;
        $cetak='2';//$ctk;
        $id     = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $thn_ang_1= $thn_ang-1;  
        //$laporan=$lap; 
       
       // if ($cetak == '1') {
//           $skpd = '';
//           $skpd1 = '';           
//       } else {             
           $skpd = "AND kd_skpd='$id'";
           $skpd1 = "AND b.kd_skpd='$id'"; 
       //}  

       $y123=")";
	   $x123="(";       
	    $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $nmskpd     = $rowsc->nm_skpd;
                } 
		$nm_skpd = strtoupper($nmskpd);		
	   // INSERT DATA
	   
       $sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
     
// created by henri_tb
			
		$sqllo1="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('81','82','83') and month(b.tgl_voucher)<=$cbulan and kd_skpd<>'$id'";
                    $querylo1= $this->db->query($sqllo1);
                    $penlo = $querylo1->row();
                    $pen_lo = $penlo->nilai;
                    $pen_lo1= number_format($penlo->nilai,"2",",",".");
        
		$sqllo2="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83') and kd_skpd<>'$id'";
                    $querylo2= $this->db->query($sqllo2);
                    $penlo2 = $querylo2->row();
                    $pen_lo_lalu = $penlo2->nilai;
                    $pen_lo_lalu1= number_format($penlo2->nilai,"2",",",".");
		
		$sqllo3="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('91','92') and month(b.tgl_voucher)<=$cbulan and kd_skpd<>'$id'";
                    $querylo3= $this->db->query($sqllo3);
                    $bello = $querylo3->row();
                    $bel_lo = $bello->nilai;
                    $bel_lo1= number_format($bello->nilai,"2",",",".");
        
		$sqllo4="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92') and kd_skpd<>'$id'";
                    $querylo4= $this->db->query($sqllo4);
                    $bello2 = $querylo4->row();
                    $bel_lo_lalu = $bello2->nilai;
                    $bel_lo_lalu1= number_format($bello2->nilai,"2",",",".");		

					$surplus_lo = $pen_lo - $bel_lo;
                    if ($surplus_lo < 0){
                    	$lo1="("; $surplus_lox=$surplus_lo*-1; $lo2=")";}
                    else {
                    	$lo1=""; $surplus_lox=$surplus_lo; $lo2="";}		
                    $surplus_lo1 = number_format($surplus_lox,"2",",",".");
                    
					$surplus_lo_lalu = $pen_lo_lalu - $bel_lo_lalu;
                    if ($surplus_lo_lalu < 0){
                    	$lo3="("; $surplus_lo_lalux=$surplus_lo_lalu*-1; $lo4=")";}
                    else {
                    	$lo3=""; $surplus_lo_lalux=$surplus_lo_lalu; $lo4="";}						
                    $surplus_lo_lalu1 = number_format($surplus_lo_lalux,"2",",",".");

					$selisih_surplus_lo = $surplus_lo - $surplus_lo_lalu;
                    if ($selisih_surplus_lo < 0){
                    	$lo5="("; $selisih_surplus_lox=$selisih_surplus_lo*-1; $lo6=")";}
                    else {
                    	$lo5=""; $selisih_surplus_lox=$selisih_surplus_lo; $lo6="";}
                    $selisih_surplus_lo1 = number_format($selisih_surplus_lox,"2",",",".");
                    
					if( $surplus_lo_lalu=='' or $surplus_lo_lalu==0){
					$persen2 = '0,00';
					}else{
					$persen2 = ($surplus_lo/$surplus_lo_lalu)*100;
					$persen2 = number_format($persen2,"2",",",".");
					}
					
		$sqllo5="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('81','82','83','84') and month(b.tgl_voucher)<=$cbulan and kd_skpd<>'$id'";
                    $querylo5= $this->db->query($sqllo5);
                    $penlo3 = $querylo5->row();
                    $pen_lo3 = $penlo3->nilai;
                    $pen_lo31= number_format($penlo3->nilai,"2",",",".");
        
		$sqllo6="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83','84') and kd_skpd<>'$id'";
                    $querylo6= $this->db->query($sqllo6);
                    $penlo4 = $querylo6->row();
                    $pen_lo_lalu4 = $penlo4->nilai;
                    $pen_lo_lalu41= number_format($penlo4->nilai,"2",",",".");
		
		$sqllo7="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('91','92','93') and month(b.tgl_voucher)<=$cbulan and kd_skpd<>'$id'";
                    $querylo7= $this->db->query($sqllo7);
                    $bello5 = $querylo7->row();
                    $bel_lo5 = $bello5->nilai;
                    $bel_lo51= number_format($bello5->nilai,"2",",",".");
		
		$sqllo8="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92','93') and kd_skpd<>'$id'";
                    $querylo8= $this->db->query($sqllo8);
                    $bello6 = $querylo8->row();
                    $bel_lo_lalu6 = $bello6->nilai;
                    $bel_lo_lalu61= number_format($bello6->nilai,"2",",",".");		

					$surplus_lo2 = $pen_lo3 - $bel_lo5;
                    if ($surplus_lo2 < 0){
                    	$lo7="("; $surplus_lo2x=$surplus_lo2*-1; $lo8=")";}
                    else {
                    	$lo7=""; $surplus_lo2x=$surplus_lo2; $lo8="";}		
                    $surplus_lo21 = number_format($surplus_lo2x,"2",",",".");
                    
					$surplus_lo_lalu2 = $pen_lo_lalu4 - $bel_lo_lalu6;
                    if ($surplus_lo_lalu2 < 0){
                    	$lo9="("; $surplus_lo_lalu2x=$surplus_lo_lalu2*-1; $lo10=")";}
                    else {
                    	$lo9=""; $surplus_lo_lalu2x=$surplus_lo_lalu2; $lo10="";}						
                    $surplus_lo_lalu21 = number_format($surplus_lo_lalu2x,"2",",",".");

					$selisih_surplus_lo2 = $surplus_lo2 - $surplus_lo_lalu2;
                    if ($selisih_surplus_lo2 < 0){
                    	$lo11="("; $selisih_surplus_lo2x=$selisih_surplus_lo2*-1; $lo12=")";}
                    else {
                    	$lo11=""; $selisih_surplus_lo2x=$selisih_surplus_lo2; $lo12="";}
                    $selisih_surplus_lo21 = number_format($selisih_surplus_lo2x,"2",",",".");
                    
					if( $surplus_lo_lalu2=='' or $surplus_lo_lalu2==0){
					$persen3 = '0,00';
					}else{
					$persen3 = ($surplus_lo2/$surplus_lo_lalu2)*100;
					$persen3 = number_format($persen3,"2",",",".");
					}
		
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('8') and month(b.tgl_voucher)<=$cbulan and kd_skpd<>'$id'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('9') and month(b.tgl_voucher)<=$cbulan and kd_skpd<>'$id'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3x=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $surplus_lo3x=$surplus_lo3; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3x,"2",",",".");
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3x=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $surplus_lo_lalu3x=$surplus_lo_lalu3; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3x,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3x=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $selisih_surplus_lo3x=$selisih_surplus_lo3; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3x,"2",",",".");
                    
					if( $surplus_lo_lalu3=='' or $surplus_lo_lalu3==0){
					$persen4 = '0,00';
					}else{
					$persen4 = ($surplus_lo3/$surplus_lo_lalu3)*100;
					$persen4 = number_format($persen4,"2",",",".");
					}
	 
	 $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
        $cRet='';
        
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN OPERASIONAL </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>&nbsp</strong></td>
                    </tr>
                  </table>";   
     
		$cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>Kenaikan</br>(Penurunan)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";

        $sqlmaplo="SELECT seq, nor, uraian, isnull(kode_1,'-') as kode_1, isnull(cetak,'debet-debet') as cetak FROM map_lo_skpd 
				   GROUP BY seq, nor, uraian, isnull(kode_1,'-'), isnull(cetak,'debet-debet') ORDER BY seq";
				   
                $querymaplo = $this->db->query($sqlmaplo);
                $no     = 0;                                  
               
                foreach ($querymaplo->result() as $loquery)
                {
                    
                    $nama      = $loquery->uraian;   
                    $n         = $loquery->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$normal    = $loquery->cetak;
					
		$quelo01   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang and month(b.tgl_voucher)<=$cbulan and kd_skpd<>'$id'";
                    $quelo02 = $this->db->query($quelo01);
                    $quelo03 = $quelo02->row();
                    $nil     = $quelo03->nilai;
                    $nilai    = number_format($quelo03->nilai,"2",",",".");
					
		$quelo04   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";
                    $quelo05 = $this->db->query($quelo04);
                    $quelo06 = $quelo05->row();
                    $nil_lalu     = $quelo06->nilai;
                    $nilai_lalu    = number_format($quelo06->nilai,"2",",",".");
					
                    $real_nilai = $nil - $nil_lalu;
                    if ($real_nilai < 0){
                    	$lo0="("; $real_nilaix=$real_nilai*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai; $lo00="";}
                    $real_nilai1 = number_format($real_nilaix,"2",",",".");
                    
					if( $nil_lalu=='' or $nil_lalu==0){
					$persen1 = '0,00';
					}else{
					$persen1 = ($nil/$nil_lalu)*100;
					$persen1 = number_format($persen1,"2",",",".");
					}
                    $no       = $no + 1;
                    switch ($loquery->seq) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 30:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;
					case 45:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 50:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 55:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 105:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;	
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;
					case 120:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 125:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo13$surplus_lo31$lo14</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo15$surplus_lo_lalu31$lo16</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo17$selisih_surplus_lo31$lo18</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen4</td>
                                 </tr>";
                        break;	
					default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
               
				}
                              
                    
                }
				
       // $cRet         .= "</table>";
//        $data['prev']  = $cRet;
//        $data['sikap'] = 'preview';
//        
//        
//        
//        $this->template->set('title', 'LAPORAN OPERASIONAL'); 
//        $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
        //$this->template->load('template','anggaran/rka/perkadaII',$data); 
        
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LO SKPD Keseluruhan / $cbulan");
        $this->template->set('title', 'LO SKPD Keseluruhan / $cbulan');        
        switch($pilih) {       
        case 1;
			echo ("<title>LO SKPD $cbulan</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
        
                 
    }
    
	
	
	function cetak_lra_lo_ppkd($pilih=''){
        //$id = $skpd;
        $cetak='2';//$ctk;
        $cbulan= $_REQUEST['tgl1'];
		$bttd= $_REQUEST['tgl_ttd'];
        $btcd_ttd= $_REQUEST['cd_ttd'];
		$id     = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $thn_ang_1= $thn_ang-1;  
        //$laporan=$lap; 
       // if ($cetak == '1') {
//           $skpd = '';
//           $skpd1 = '';           
//       } else {             
           $skpd = "AND kd_skpd='$id'";
           $skpd1 = "AND b.kd_skpd='$id'"; 
       //}  

       $y123=")";
	   $x123="(";       
	    $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $nmskpd     = $rowsc->nm_skpd;
                } 
		$nm_skpd = strtoupper($nmskpd);		
	   // INSERT DATA
	   
       $sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
     
// created by henri_tb
			
		$sqllo1="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('81','82','83') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo1= $this->db->query($sqllo1);
                    $penlo = $querylo1->row();
                    $pen_lo = $penlo->nilai;
                    $pen_lo1= number_format($penlo->nilai,"2",",",".");
        
		$sqllo2="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo2= $this->db->query($sqllo2);
                    $penlo2 = $querylo2->row();
                    $pen_lo_lalu = $penlo2->nilai;
                    $pen_lo_lalu1= number_format($penlo2->nilai,"2",",",".");
		
		$sqllo3="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('91','92') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo3= $this->db->query($sqllo3);
                    $bello = $querylo3->row();
                    $bel_lo = $bello->nilai;
                    $bel_lo1= number_format($bello->nilai,"2",",",".");
        
		$sqllo4="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo4= $this->db->query($sqllo4);
                    $bello2 = $querylo4->row();
                    $bel_lo_lalu = $bello2->nilai;
                    $bel_lo_lalu1= number_format($bello2->nilai,"2",",",".");		

					
					
		$sqllo5="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('84') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo5= $this->db->query($sqllo5);
                    $penlo3 = $querylo5->row();
                    $pen_lo3 = $penlo3->nilai;
                    $pen_lo31= number_format($penlo3->nilai,"2",",",".");
        
		$sqllo6="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('84') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo6= $this->db->query($sqllo6);
                    $penlo4 = $querylo6->row();
                    $pen_lo_lalu4 = $penlo4->nilai;
                    $pen_lo_lalu41= number_format($penlo4->nilai,"2",",",".");
		
		$sqllo7="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('93') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo7= $this->db->query($sqllo7);
                    $bello5 = $querylo7->row();
                    $bel_lo5 = $bello5->nilai;
                    $bel_lo51= number_format($bello5->nilai,"2",",",".");
		
		$sqllo8="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('93') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo8= $this->db->query($sqllo8);
                    $bello6 = $querylo8->row();
                    $bel_lo_lalu6 = $bello6->nilai;
                    $bel_lo_lalu61= number_format($bello6->nilai,"2",",",".");		

					
		
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('8') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('9') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					
					
					
		$sqllo13="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('85') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo13= $this->db->query($sqllo13);
                    $penlo11 = $querylo13->row();
                    $pen_lo11 = $penlo11->nilai;
                    $pen_lo111= number_format($penlo11->nilai,"2",",",".");
        
		$sqllo14="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('85') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo14= $this->db->query($sqllo14);
                    $penlo12 = $querylo14->row();
                    $pen_lo_lalu12 = $penlo12->nilai;
                    $pen_lo_lalu121= number_format($penlo12->nilai,"2",",",".");
		
		$sqllo15="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('94') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo15= $this->db->query($sqllo15);
                    $bello13 = $querylo15->row();
                    $bel_lo13 = $bello13->nilai;
                    $bel_lo131= number_format($bello13->nilai,"2",",",".");
		
		$sqllo16="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('94') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo16= $this->db->query($sqllo16);
                    $bello14 = $querylo16->row();
                    $bel_lo_lalu14 = $bello14->nilai;
                    $bel_lo_lalu141= number_format($bello14->nilai,"2",",",".");			
					
					$surplus_lo = $pen_lo - $bel_lo;
					$surplus_lo_lalu = $pen_lo_lalu - $bel_lo_lalu;
					$selisih_surplus_lo = $surplus_lo - $surplus_lo_lalu;

					
					$surplus_lo2 = $pen_lo3 - $bel_lo5;
					$surplus_lo_lalu2 = $pen_lo_lalu4 - $bel_lo_lalu6;
					$selisih_surplus_lo2 = $surplus_lo2 - $surplus_lo_lalu2;
					
					
					$surplus_lo3 = $pen_lo7 - $bel_lo9;
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;

					
					$surplus_lo4 = $pen_lo11 - $bel_lo13;
					$surplus_lo_lalu4 = $pen_lo_lalu12 - $bel_lo_lalu14;
					$selisih_surplus_lo4 = $surplus_lo4 - $surplus_lo_lalu4;
					
					$surplus_lo5 = $surplus_lo + $surplus_lo2;
					$surplus_lo_lalu5 = $surplus_lo_lalu + $surplus_lo_lalu2;
					$selisih_surplus_lo5 = $surplus_lo5 - $surplus_lo_lalu5;
					
					$surplus_lo6 = $surplus_lo5 - $surplus_lo4;
					$surplus_lo_lalu6 = $surplus_lo_lalu5 - $surplus_lo_lalu4;
					$selisih_surplus_lo6 = $surplus_lo6 - $surplus_lo_lalu6;
					
					if ($surplus_lo < 0){
                    	$lo1="("; $surplus_lox=$surplus_lo*-1; $lo2=")";}
                    else {
                    	$lo1=""; $surplus_lox=$surplus_lo; $lo2="";}		
                    $surplus_lo1 = number_format($surplus_lox,"2",",",".");
                    
                    if ($surplus_lo_lalu < 0){
                    	$lo3="("; $surplus_lo_lalux=$surplus_lo_lalu*-1; $lo4=")";}
                    else {
                    	$lo3=""; $surplus_lo_lalux=$surplus_lo_lalu; $lo4="";}						
                    $surplus_lo_lalu1 = number_format($surplus_lo_lalux,"2",",",".");

                    if ($selisih_surplus_lo < 0){
                    	$lo5="("; $selisih_surplus_lox=$selisih_surplus_lo*-1; $lo6=")";}
                    else {
                    	$lo5=""; $selisih_surplus_lox=$selisih_surplus_lo; $lo6="";}
                    $selisih_surplus_lo1 = number_format($selisih_surplus_lox,"2",",",".");
                    
					if( $surplus_lo_lalu=='' or $surplus_lo_lalu==0){
					$persen2 = '0,00';
					}else{
					$persen2 = ($surplus_lo/$surplus_lo_lalu)*100;
					$persen2 = number_format($persen2,"2",",",".");
					}
					
                    if ($surplus_lo2 < 0){
                    	$lo7="("; $surplus_lo2x=$surplus_lo2*-1; $lo8=")";}
                    else {
                    	$lo7=""; $surplus_lo2x=$surplus_lo2; $lo8="";}		
                    $surplus_lo21 = number_format($surplus_lo2x,"2",",",".");
                    
                    if ($surplus_lo_lalu2 < 0){
                    	$lo9="("; $surplus_lo_lalu2x=$surplus_lo_lalu2*-1; $lo10=")";}
                    else {
                    	$lo9=""; $surplus_lo_lalu2x=$surplus_lo_lalu2; $lo10="";}						
                    $surplus_lo_lalu21 = number_format($surplus_lo_lalu2x,"2",",",".");

                    if ($selisih_surplus_lo2 < 0){
                    	$lo11="("; $selisih_surplus_lo2x=$selisih_surplus_lo2*-1; $lo12=")";}
                    else {
                    	$lo11=""; $selisih_surplus_lo2x=$selisih_surplus_lo2; $lo12="";}
                    $selisih_surplus_lo21 = number_format($selisih_surplus_lo2x,"2",",",".");
                    
					if( $surplus_lo_lalu2=='' or $surplus_lo_lalu2==0){
					$persen3 = '0,00';
					}else{
					$persen3 = ($surplus_lo2/$surplus_lo_lalu2)*100;
					$persen3 = number_format($persen3,"2",",",".");
					}
					
                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3x=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $surplus_lo3x=$surplus_lo3; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3x,"2",",",".");
                    
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3x=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $surplus_lo_lalu3x=$surplus_lo_lalu3; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3x,"2",",",".");

                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3x=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $selisih_surplus_lo3x=$selisih_surplus_lo3; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3x,"2",",",".");
                    
					if( $surplus_lo_lalu3=='' or $surplus_lo_lalu3==0){
					$persen4 = '0,00';
					}else{
					$persen4 = ($surplus_lo3/$surplus_lo_lalu3)*100;
					$persen4 = number_format($persen4,"2",",",".");
					}
					
					if ($surplus_lo4 < 0){
                    	$lo19="("; $surplus_lo4x=$surplus_lo4*-1; $lo20=")";}
                    else {
                    	$lo19=""; $surplus_lo4x=$surplus_lo4; $lo20="";}		
                    $surplus_lo41 = number_format($surplus_lo4x,"2",",",".");
					
					if ($surplus_lo_lalu4 < 0){
                    	$lo21="("; $surplus_lo_lalu4x=$surplus_lo_lalu4*-1; $lo22=")";}
                    else {
                    	$lo21=""; $surplus_lo_lalu4x=$surplus_lo_lalu4; $lo22="";}						
                    $surplus_lo_lalu41 = number_format($surplus_lo_lalu4x,"2",",",".");

                    if ($selisih_surplus_lo4 < 0){
                    	$lo23="("; $selisih_surplus_lo4x=$selisih_surplus_lo4*-1; $lo24=")";}
                    else {
                    	$lo23=""; $selisih_surplus_lo4x=$selisih_surplus_lo4; $lo24="";}
                    $selisih_surplus_lo41 = number_format($selisih_surplus_lo4x,"2",",",".");
                    
					if( $surplus_lo_lalu4=='' or $surplus_lo_lalu4==0){
					$persen5 = '0,00';
					}else{
					$persen5 = ($surplus_lo4/$surplus_lo_lalu4)*100;
					$persen5 = number_format($persen5,"2",",",".");
					}
					
					if ($surplus_lo5 < 0){
                    	$lo25="("; $surplus_lo5x=$surplus_lo5*-1; $lo26=")";}
                    else {
                    	$lo25=""; $surplus_lo5x=$surplus_lo5; $lo26="";}		
                    $surplus_lo51 = number_format($surplus_lo5x,"2",",",".");
					
					if ($surplus_lo_lalu5 < 0){
                    	$lo27="("; $surplus_lo_lalu5x=$surplus_lo_lalu5*-1; $lo28=")";}
                    else {
                    	$lo27=""; $surplus_lo_lalu5x=$surplus_lo_lalu5; $lo28="";}						
                    $surplus_lo_lalu51 = number_format($surplus_lo_lalu5x,"2",",",".");

                    if ($selisih_surplus_lo5 < 0){
                    	$lo29="("; $selisih_surplus_lo5x=$selisih_surplus_lo5*-1; $lo30=")";}
                    else {
                    	$lo29=""; $selisih_surplus_lo5x=$selisih_surplus_lo5; $lo30="";}
                    $selisih_surplus_lo51 = number_format($selisih_surplus_lo5x,"2",",",".");
                    
					if( $surplus_lo_lalu5=='' or $surplus_lo_lalu5==0){
					$persen6 = '0,00';
					}else{
					$persen6 = ($surplus_lo5/$surplus_lo_lalu5)*100;
					$persen6 = number_format($persen6,"2",",",".");
					}
					
					if ($surplus_lo6 < 0){
                    	$lo31="("; $surplus_lo6x=$surplus_lo6*-1; $lo32=")";}
                    else {
                    	$lo31=""; $surplus_lo6x=$surplus_lo6; $lo32="";}		
                    $surplus_lo61 = number_format($surplus_lo6x,"2",",",".");
					
					if ($surplus_lo_lalu6 < 0){
                    	$lo33="("; $surplus_lo_lalu6x=$surplus_lo_lalu6*-1; $lo34=")";}
                    else {
                    	$lo33=""; $surplus_lo_lalu6x=$surplus_lo_lalu6; $lo34="";}						
                    $surplus_lo_lalu61 = number_format($surplus_lo_lalu6x,"2",",",".");

                    if ($selisih_surplus_lo6 < 0){
                    	$lo35="("; $selisih_surplus_lo6x=$selisih_surplus_lo6*-1; $lo36=")";}
                    else {
                    	$lo35=""; $selisih_surplus_lo6x=$selisih_surplus_lo6; $lo36="";}
                    $selisih_surplus_lo61 = number_format($selisih_surplus_lo6x,"2",",",".");
                    
					if( $surplus_lo_lalu6=='' or $surplus_lo_lalu6==0){
					$persen7 = '0,00';
					}else{
					$persen7 = ($surplus_lo6/$surplus_lo_lalu6)*100;
					$persen7 = number_format($persen7,"2",",",".");
					}
					
	 $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
        $cRet='';
        
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong> $nm_skpd</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN OPERASIONAL </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";   
     
		$cRet .= "<table style=\"border-collapse:collapse;\" font-size:11px; width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td colspan =\"6\" bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"25%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"25%\" align=\"center\"><b>$thn_ang_1</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"17%\" align=\"center\" ><b>Kenaikan</br> (Penurunan)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"8%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td colspan =\"6\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td colspan =\"6\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"25%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"25%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"17%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"18%\">&nbsp;</td>
                        </tr>";

        $sqlmaplo="SELECT seq, nor, uraian, bold, kode,isnull(kode_1,'-') as kode_1, (case when SUBSTRING(kode_1, 2, 1)='8' then 'kredit-debet' else 'debet-kredit' end) as cetak  FROM map_lo_ppkd_kab 
				   GROUP BY seq, nor, uraian, bold,kode,isnull(kode_1,'-'),SUBSTRING(kode_1, 2, 1) ORDER BY seq";
				   
                $querymaplo = $this->db->query($sqlmaplo);
                $no     = 0;                                  
               
                foreach ($querymaplo->result() as $loquery)
                {
                    
                    $nama      = $loquery->uraian;   
                    $n         = $loquery->kode_1;
					$n		   = ($n=="-"?"'-'":$n);					
                    $normal    = $loquery->cetak;
					$bold      = $loquery->bold;                    
					$kode      = $loquery->kode;
					
		$quelo01   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE (left(kd_rek5,1) in ($n) or left(kd_rek5,2) in ($n) or left(kd_rek5,3) in ($n) or left(kd_rek5,5) in ($n)) and year(tgl_voucher)=$thn_ang and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $quelo02 = $this->db->query($quelo01);
                    $quelo03 = $quelo02->row();
                    $nil     = $quelo03->nilai;
                    $nilai    = number_format($quelo03->nilai,"2",",",".");
					
		$quelo04   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE ( left(kd_rek5,1) in ($n) or left(kd_rek5,2) in ($n) or left(kd_rek5,3) in ($n) or left(kd_rek5,5) in ($n)) and year(tgl_voucher)=$thn_ang_1 and left(b.kd_skpd,7)=left('$id',7)";
                    $quelo05 = $this->db->query($quelo04);
                    $quelo06 = $quelo05->row();
                    $nil_lalu     = $quelo06->nilai;
                    $nilai_lalu    = number_format($quelo06->nilai,"2",",",".");
					
                    $real_nilai = $nil - $nil_lalu;
                    if ($real_nilai < 0){
                    	$lo0="("; $real_nilaix=$real_nilai*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai; $lo00="";}
                    $real_nilai1 = number_format($real_nilaix,"2",",",".");
                    
					if( $nil_lalu=='' or $nil_lalu==0){
					$persen1 = '0,00';
					}else{
					$persen1 = ($nil/$nil_lalu)*100;
					$persen1 = number_format($persen1,"2",",",".");
					}
                    $no       = $no + 1;
                    switch ($loquery->bold) {
                    case 0:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai_lalu<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo0$real_nilai1$lo00<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen1<b></td>
                                 </tr>";
                        break;
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai_lalu<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo0$real_nilai1$lo00<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen1<b></td>
                                 </tr>";
                        break;	
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo1$surplus_lo1$lo2<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo3$surplus_lo_lalu1$lo4<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo5$selisih_surplus_lo1$lo6<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen2<b></td>
                                 </tr>";
                        break;	
					case 8:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo7$surplus_lo21$lo8<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo9$surplus_lo_lalu21$lo10<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo11$selisih_surplus_lo21$lo12<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen3<b></td>
                                 </tr>";
                        break;
					case 9:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo25$surplus_lo51$lo26<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo27$surplus_lo_lalu51$lo28<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo29$selisih_surplus_lo51$lo30<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen5<b></td>
                                 </tr>";
                        break;	
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo19$surplus_lo41$lo20<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo21$surplus_lo_lalu41$lo22<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo23$selisih_surplus_lo41$lo24<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen5<b></td>
                                 </tr>";
                        break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"20%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo13$surplus_lo31$lo14<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo15$surplus_lo_lalu31$lo16<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo17$selisih_surplus_lo31$lo18<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen4<b></td>
                                 </tr>";
                        break;	
				}
                              
                    
                }

			$cRet .=       " </table>";
        
        	$sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where nip='$btcd_ttd' and kode='BUD'";
            $sqlttd=$this->db->query($sqlttd1);
            foreach ($sqlttd->result() as $rowttd)
			
                {
                    $nip=$rowttd->nip;                    
                    $oioi= $rowttd->nm;
                    $jabatan = $rowttd->jab;
                }	
            /*
            $sqlttd12="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PPK'";
            $sqlttd2=$this->db->query($sqlttd12);
            foreach ($sqlttd2->result() as $rowttd)
			
                {
                    $nip2=$rowttd->nip;                    
                    $oioi2= $rowttd->nm;
                    $jabatan2 = $rowttd->jab;
                }	
            */
            
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> </td>
		 <td align=\"center\" width=\"50%\"> Sanggau, ".$this->tukd_model->tanggal_format_indonesia($bttd)." </td>
		 </tr>		
		 <tr>
		 <td align=\"center\" width=\"50%\">  </td>
		 <td align=\"center\" width=\"50%\"> $jabatan </td>
		 </tr>	
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		  <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> </td>
		 <td align=\"center\" width=\"50%\"> $oioi </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> </td>
		 <td align=\"center\" width=\"50%\"> NIP :$nip </td>
		 </tr>
         </table>
		 ";	
				     
       $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LO PPKD $id / $cbulan");
        $this->template->set('title', 'LO PPKD $id / $cbulan');        
          switch ($pilih){
				case 1;
				echo ("<title>LO PPKD $cbulan</title>");
				echo $cRet;
				break;
				case 2;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'P');
				break;
				case 3;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}  
                 
    }
    
	function rpt_neraca_obyek($cbulan="", $pilih=1){
	        $id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
			
			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
			$modtahun= $thn_ang%4;
	 
			if ($modtahun = 0){
				$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
					else {
				$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
			 
			$arraybulan=explode(".",$nilaibulan);
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\" bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE kd_skpd<>'$id' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
					
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, bold, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_skpd_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7) and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal=='D'){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7) and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal=='D'){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
					}
				
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA SKPD $id / $cbulan");
        $this->template->set('title', ("NERACA SKPD $id / $cbulan"));  
         switch ($pilih)
        {
            case 1;
				echo ("<title>NERACA SKPD $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}
	
	function rpt_neraca_unit_obyek($cbulan="", $kd_skpd="", $pilih=1){
	        $id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
			
			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
			$modtahun= $thn_ang%4;
	 
			if ($modtahun = 0){
				$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
					else {
				$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
			 
			$arraybulan=explode(".",$nilaibulan);
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\" bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE b.kd_skpd='$kd_skpd' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
					
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, bold, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_skpd_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal=='D'){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal=='D'){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
					}
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA UNIT $kd_skpd / $cbulan");
        $this->template->set('title', ("NERACA UNIT $kd_skpd / $cbulan"));  
         switch ($pilih)
        {
            case 1;
				echo ("<title>NERACA UNIT $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	function rpt_neraca_awal_obyek($cbulan="", $pilih=1){
	        $id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
			
			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
			$modtahun= $thn_ang%4;
	 
			if ($modtahun = 0){
				$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
					else {
				$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
			 
			$arraybulan=explode(".",$nilaibulan);
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA AWAL</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER 1 JANUARI $thn_ang</strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\" bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>JUMLAH</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE kd_skpd<>'$id' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
					
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, bold, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_skpd_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7) and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal=='D'){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7) and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal=='D'){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
					}
				
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA SKPD $id / $cbulan");
        $this->template->set('title', ("NERACA SKPD $id / $cbulan"));  
         switch ($pilih)
        {
            case 1;
				echo ("<title>NERACA SKPD $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	function rpt_neraca_awal_unit_obyek($cbulan="", $kd_skpd="", $pilih=1){
	        $id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
			
			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
			$modtahun= $thn_ang%4;
	 
			if ($modtahun = 0){
				$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
					else {
				$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
			 
			$arraybulan=explode(".",$nilaibulan);
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA AWAL</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER 1 JANUARI $thn_ang</strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\" bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>JUMLAH</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE b.kd_skpd='$kd_skpd' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
					
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, bold, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_skpd_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal=='D'){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal=='D'){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
					}
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA UNIT $kd_skpd / $cbulan");
        $this->template->set('title', ("NERACA UNIT $kd_skpd / $cbulan"));  
         switch ($pilih)
        {
            case 1;
				echo ("<title>NERACA UNIT $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	
	function rpt_neraca_awal($cbulan="", $pilih=1){
	        $id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
			
			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
			$modtahun= $thn_ang%4;
	 
			if ($modtahun = 0){
				$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
					else {
				$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
			 
			$arraybulan=explode(".",$nilaibulan);
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA AWAL</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER 1 JANUARI $thn_ang </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>JUMLAH</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE kd_skpd<>'$id' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
					
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_skpd ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal=='D'){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal=='D'){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 65:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 170:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 320:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 340:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 370:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 375:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 378:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 380:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 410:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 415:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 420:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 460:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 465:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;
					case 470:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min009$rk_ppkd_lalu1$min010</td>
                                 </tr>";
						break;		 
					case 475:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 485:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;	
					default:	
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					}
				
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA AWAL SKPD Keseluruhan / $cbulan");
        $this->template->set('title', 'NERACA AWAL SKPD Keseluruhan / $cbulan');  
         switch ($pilih)
        {
            case 1;
				echo ("<title>NERACA AWAL SKPD $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	
	function rpt_neraca_awal_unit($cbulan="", $kd_skpd="", $pilih=1){
	        $id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
			
			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
			$modtahun= $thn_ang%4;
	 
			if ($modtahun = 0){
				$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
					else {
				$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
			 
			$arraybulan=explode(".",$nilaibulan);
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA AWAL</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER 1 JANUARI $thn_ang</strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>JUMLAH</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE b.kd_skpd='$kd_skpd' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
					
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_skpd ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal=='D'){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal=='D'){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 65:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 170:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 320:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 340:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 370:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 375:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 378:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 380:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 410:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 415:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 420:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 460:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 465:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;
					case 470:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min009$rk_ppkd_lalu1$min010</td>
                                 </tr>";
						break;		 
					case 475:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 485:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;	
					default:	
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					}
				
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA AWAL UNIT $kd_skpd / $cbulan");
        $this->template->set('title', 'NERACA AWAL UNIT $kd_skpd / $cbulan');  
         switch ($pilih)
        {
            case 1;
				echo ("<title>NERACA AWAL UNIT $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	
	
	function cetak_lra_unit($cbulan="", $kd_skpd="", $pilih=1){
	$id  = $this->session->userdata('kdskpd');
    $thn = $this->session->userdata('pcThang');
	$sqlanggaran1="select case when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_ubah) then 2 
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_sempurna) and $cbulan<month(tgl_dpa_ubah) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan>=month(tgl_dpa_sempurna) then 1 
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=0 and status_ubah=0 and $cbulan>=month(tgl_dpa) then 1
					   else 1 end as anggaran from trhrka where kd_skpd='$kd_skpd'";
    $sqlanggaran=$this->db->query($sqlanggaran1);
	foreach ($sqlanggaran->result() as $rowttd)
        {
            $anggaran=$rowttd->anggaran;
        }

	$ag_tox=$anggaran;
	 
	 

    //function cetak_lra(){
        $sql41="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1)='4' and kd_skpd='$kd_skpd' ";
                    $query41 = $this->db->query($sql41);
                    $jmlp = $query41->row();
                    $jmlpendapatan = $jmlp->nilai;
                    $jmlangpendapatan = $jmlp->anggaran;
                    $jmlangpendapatan1= number_format($jmlp->anggaran,"2",",",".");
                    $jmlpendapatan1= number_format($jmlp->nilai,"2",",",".");
                    
					$real_pend = $jmlangpendapatan - $jmlpendapatan;
                    if ($real_pend < 0){
                    	$x001="("; $real_pendx=$real_pend*-1; $y001=")";}
                    else {
                    	$x001=""; $real_pendx=$real_pend; $y001="";}
                    $selisihpend = number_format($real_pendx,"2",",",".");
                    if ($jmlpendapatan==0){
                        $tmp001=1;
                    }else{
                        $tmp001=$jmlpendapatan;
                    }
					
                    $per001     = ($jmlangpendapatan!=0)?($jmlpendapatan / $jmlangpendapatan ) * 100:0; 
                    $persen001  = number_format($per001,"2",",",".");
					
        $sql51="SELECT SUM(anggaran) as angaran,SUM(real_spj)as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1) in ('5','6') and kd_skpd='$kd_skpd' ";
                    $query51 = $this->db->query($sql51);
                    $jmlb = $query51->row();
                    $jmlangbelanja = $jmlb->angaran;
                    $jmlbelanja = $jmlb->nilai;
                    $jmlbelanja1= number_format($jmlb->nilai,"2",",",".");
                    $jmlangbelanja1= number_format($jmlb->angaran,"2",",",".");
					
					$real_belanja = $jmlangbelanja - $jmlbelanja;
                    if ($real_belanja < 0){
                    	$x002="("; $real_belanjax=$real_belanja*-1; $y002=")";}
                    else {
                    	$x002=""; $real_belanjax=$real_belanja; $y002="";}
                    $selisihbelanja = number_format($real_belanjax,"2",",",".");
                    if ($jmlbelanja==0){
                        $tmp002=1;
                    }else{
                        $tmp002=$jmlbelanja;
                    }
					
                    $per002     = ($jmlangbelanja!=0)?($jmlbelanja / $jmlangbelanja ) * 100:0; 
                    $persen002  = number_format($per002,"2",",",".");
					
        $sql523="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,3)='523' and kd_skpd='$kd_skpd' ";
                    $query523 = $this->db->query($sql523);
                    $jmlbm = $query523->row();
                    $jmlbmbelanja = $jmlbm->nilai;
                    $jmlangbmbelanja = $jmlbm->anggaran;
                    $jmlbmbelanja1= number_format($jmlbmbelanja,"2",",",".");
                    $jmlangbmbelanja1= number_format($jmlangbmbelanja,"2",",",".");
        $sql61="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='71' and kd_skpd='$kd_skpd' ";
                    $query61 = $this->db->query($sql61);
                    $jmlpm = $query61->row();
                    $jmlpmasuk = $jmlpm->nilai;
                    $jmlangpmasuk = $jmlpm->anggaran;
        $sql62="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='72' and kd_skpd='$kd_skpd' ";
                    $query62 = $this->db->query($sql62);
                    $jmlpk = $query62->row();
                    $jmlpkeluar = $jmlpk->nilai;
                    $jmlangpkeluar = $jmlpk->anggaran;
        $surplus =  $jmlpendapatan- $jmlbelanja;
        $angsurplus = $jmlangpendapatan- $jmlangbelanja;        
        if ($surplus < 0){
                    	$x="("; $surplusx=$surplus*-1; $y=")";
                        }else {
                    	$x=""; $surplusx=$surplus; $y="";
                        }
        if ($angsurplus < 0){
                    	$e="("; $angsurplusx=$angsurplus*-1; $f=")";
                        }else {
                    	$e=""; $angsurplusx=$angsurplus; $f="";
                        }
        $surplus1= number_format($surplusx,"2",",",".");
        $angsurplus1= number_format($angsurplusx,"2",",",".");
		
		$real_surplus = $angsurplus - $surplus;
                    if ($real_surplus < 0){
                    	$x003="("; $real_surplusx=$real_surplus*-1; $y003=")";}
                    else {
                    	$x003=""; $real_surplusx=$real_surplus; $y003="";}
        $selisihsurplus = number_format($real_surplusx,"2",",",".");
                    if ($surplus==0){
                        $tmp003=1;
                    }else{
                        $tmp003=$surplus;
                    }
					
                    $per003     = ($angsurplus!=0)?($surplus / $angsurplus ) * 100:0; 
                    $persen003  = number_format($per003,"2",",",".");
		
        $biaya_net =  $jmlpmasuk- $jmlpkeluar;
        $angbiaya_net =  $jmlangpmasuk- $jmlangpkeluar;        
        if ($biaya_net < 0){
                    	$a="("; $biaya_netx=$biaya_net*-1; $b=")";
                        }else {
                    	$a=""; $biaya_netx=$biaya_net; $b="";
                        }
        if ($angbiaya_net < 0){
                    	$g="("; $angbiaya_netx=$angbiaya_net*-1; $h=")";
                        }else {
                    	$g=""; $angbiaya_netx=$angbiaya_net; $h="";
                        }
        $biaya_net1 =   number_format($biaya_netx,"2",",",".");
        $angbiaya_net1 =   number_format($angbiaya_netx,"2",",",".");
        $silpa= ($jmlpendapatan+$jmlpmasuk)-($jmlbelanja+$jmlpkeluar);
        $angsilpa= ($jmlangpendapatan+$jmlangpmasuk)-($jmlangbelanja+$jmlangpkeluar);                
        if ($silpa < 0){
                    	$c="("; $silpax=$silpa*-1; $d=")";
                        }else {
                    	$c=""; $silpax=$silpa; $d="";
                        }
        if ($angsilpa < 0){
                    	$i="("; $angsilpax=$angsilpa*-1; $j=")";
                        }else {
                    	$i=""; $angsilpax=$angsilpa; $j="";
                        }
        $silpa1 =number_format($silpax,"2",",","."); 
        $angsilpa1 =number_format($angsilpax,"2",",",".");
       $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
		$nm_skpd	= strtoupper ($nmskpd);
        $jk=$this->rka_model->combo_skpd();
       
        $cRet='';
        
	 $modtahun= $thn%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>					
                    <tr>
                         <td align=\"center\"><strong>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>ANGGARAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>REALISASI</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>LEBIH</br>(KURANG)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";
               
                   $sql4="SELECT a.seq,a.nor,a.uraian,isnull(a.kode_1,'-') as kode_1,isnull(a.kode_2,'-') as kode_2,isnull(a.kode_3,'-') as kode_3,thn_m1 AS lalu FROM map_lra_skpd a 
				   GROUP BY a.seq,a.nor,a.uraian,isnull(a.kode_1,'-'),isnull(a.kode_2,'-'),isnull(a.kode_3,'-'),thn_m1 ORDER BY a.seq";
                // isnull(a.kode_1,\"'-'\")
                $query4 = $this->db->query($sql4);
                $no     = 0;                                  
               
                foreach ($query4->result() as $row4)
                {
                    
                    $nama      = $row4->uraian;   
                    $real_lalu = number_format($row4->lalu,"2",",",".");
                    $n         = $row4->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$n2         = $row4->kode_2;
					$n2		   = ($n2=="-"?"'-'":$n2);
					$n3         = $row4->kode_3;
					$n3		   = ($n3=="-"?"'-'":$n3);

//                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $bulan,$ag_tox) b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (".$n.") ";
                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) b WHERE kd_skpd='$kd_skpd' and (left(b.kd_rek5,3) in ($n) or left(b.kd_rek5,5) in ($n2) or left(b.kd_rek5,7) in ($n3))";
//					                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM realisasi b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (\"'.$n.'\") ";
                    $query5 = $this->db->query($sql5);
                    $trh    = $query5->row();
                    $nil    = $trh->nilai;
                    $angnil = $trh->anggaran;
                    
                    $real_s = $trh->anggaran - $trh->nilai;
                    if ($real_s < 0){
                    	$x1="("; $real_sx=$real_s*-1; $y1=")";}
                    else {
                    	$x1=""; $real_sx=$real_s; $y1="";}
                    $selisih = number_format($real_sx,"2",",",".");
                    if ($trh->nilai==0){
                        $tmp=1;
                    }else{
                        $tmp=$trh->nilai;
                    }
                    $nilai    = number_format($trh->nilai,"2",",",".");
                    $angnilai = number_format($trh->anggaran,"2",",",".");
                    $per1     = ($angnil!=0)?($nil / $angnil ) * 100:0; 
                    $persen1  = number_format($per1,"2",",",".");
                    $no       = $no + 1;
                    switch ($row4->seq) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;					
					case 35:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 40:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x001$selisihpend$y001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen001</td>
                                 </tr>";
                        break;
					case 45:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 50:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td	 style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 55:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 75:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 120:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x002$selisihbelanja$y002</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen002</td>
                                 </tr>";
                        break;
					case 125:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 130:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$e$angsurplus1$f</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x$surplus1$y</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x003$selisihsurplus$y003</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen003</td>
                                 </tr>";
                        break;
                   
                    default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                }
                }
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LRA UNIT $kd_skpd / $cbulan");
        $this->template->set('title', 'LRA UNIT $kd_skpd / $cbulan');        
        switch($pilih) {       
        case 1;
			echo ("<title>LRA UNIT $cbulan</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
    }
    
	
    function cetak_lra($cbulan="", $pilih=1){
	$id  = $this->session->userdata('kdskpd');
    $thn = $this->session->userdata('pcThang');
	$sqlanggaran1="select case when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_ubah) then 2 
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_sempurna) and $cbulan<month(tgl_dpa_ubah) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan>=month(tgl_dpa_sempurna) then 1 
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=0 and status_ubah=0 and $cbulan>=month(tgl_dpa) then 1
					   else 1 end as anggaran from trhrka where kd_skpd='$id'";
    $sqlanggaran=$this->db->query($sqlanggaran1);
	foreach ($sqlanggaran->result() as $rowttd)
        {
            $anggaran=$rowttd->anggaran;
        }

	$ag_tox=$anggaran;
	 
	 

    //function cetak_lra(){
        $sql41="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1)='4' and kd_skpd<>'$id' ";
                    $query41 = $this->db->query($sql41);
                    $jmlp = $query41->row();
                    $jmlpendapatan = $jmlp->nilai;
                    $jmlangpendapatan = $jmlp->anggaran;
                    $jmlangpendapatan1= number_format($jmlp->anggaran,"2",",",".");
                    $jmlpendapatan1= number_format($jmlp->nilai,"2",",",".");
                    
					$real_pend = $jmlangpendapatan - $jmlpendapatan;
                    if ($real_pend < 0){
                    	$x001="("; $real_pendx=$real_pend*-1; $y001=")";}
                    else {
                    	$x001=""; $real_pendx=$real_pend; $y001="";}
                    $selisihpend = number_format($real_pendx,"2",",",".");
                    if ($jmlpendapatan==0){
                        $tmp001=1;
                    }else{
                        $tmp001=$jmlpendapatan;
                    }
					
                    $per001     = ($jmlangpendapatan!=0)?($jmlpendapatan / $jmlangpendapatan ) * 100:0; 
                    $persen001  = number_format($per001,"2",",",".");
					
        $sql51="SELECT SUM(anggaran) as angaran,SUM(real_spj)as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,1) in ('5','6') and kd_skpd<>'$id' ";
                    $query51 = $this->db->query($sql51);
                    $jmlb = $query51->row();
                    $jmlangbelanja = $jmlb->angaran;
                    $jmlbelanja = $jmlb->nilai;
                    $jmlbelanja1= number_format($jmlb->nilai,"2",",",".");
                    $jmlangbelanja1= number_format($jmlb->angaran,"2",",",".");
					
					$real_belanja = $jmlangbelanja - $jmlbelanja;
                    if ($real_belanja < 0){
                    	$x002="("; $real_belanjax=$real_belanja*-1; $y002=")";}
                    else {
                    	$x002=""; $real_belanjax=$real_belanja; $y002="";}
                    $selisihbelanja = number_format($real_belanjax,"2",",",".");
                    if ($jmlbelanja==0){
                        $tmp002=1;
                    }else{
                        $tmp002=$jmlbelanja;
                    }
					
                    $per002     = ($jmlangbelanja!=0)?($jmlbelanja / $jmlangbelanja ) * 100:0; 
                    $persen002  = number_format($per002,"2",",",".");
					
        $sql523="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,3)='523' and kd_skpd<>'$id' ";
                    $query523 = $this->db->query($sql523);
                    $jmlbm = $query523->row();
                    $jmlbmbelanja = $jmlbm->nilai;
                    $jmlangbmbelanja = $jmlbm->anggaran;
                    $jmlbmbelanja1= number_format($jmlbmbelanja,"2",",",".");
                    $jmlangbmbelanja1= number_format($jmlangbmbelanja,"2",",",".");
        $sql61="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='71' and kd_skpd<>'$id' ";
                    $query61 = $this->db->query($sql61);
                    $jmlpm = $query61->row();
                    $jmlpmasuk = $jmlpm->nilai;
                    $jmlangpmasuk = $jmlpm->anggaran;
        $sql62="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) WHERE left(kd_rek5,2)='72' and kd_skpd<>'$id' ";
                    $query62 = $this->db->query($sql62);
                    $jmlpk = $query62->row();
                    $jmlpkeluar = $jmlpk->nilai;
                    $jmlangpkeluar = $jmlpk->anggaran;
        $surplus =  $jmlpendapatan- $jmlbelanja;
        $angsurplus = $jmlangpendapatan- $jmlangbelanja;        
        if ($surplus < 0){
                    	$x="("; $surplusx=$surplus*-1; $y=")";
                        }else {
                    	$x=""; $surplusx=$surplus; $y="";
                        }
        if ($angsurplus < 0){
                    	$e="("; $angsurplusx=$angsurplus*-1; $f=")";
                        }else {
                    	$e=""; $angsurplusx=$angsurplus; $f="";
                        }
        $surplus1= number_format($surplusx,"2",",",".");
        $angsurplus1= number_format($angsurplusx,"2",",",".");
		
		$real_surplus = $angsurplus - $surplus;
                    if ($real_surplus < 0){
                    	$x003="("; $real_surplusx=$real_surplus*-1; $y003=")";}
                    else {
                    	$x003=""; $real_surplusx=$real_surplus; $y003="";}
        $selisihsurplus = number_format($real_surplusx,"2",",",".");
                    if ($surplus==0){
                        $tmp003=1;
                    }else{
                        $tmp003=$surplus;
                    }
					
                    $per003     = ($angsurplus!=0)?($surplus / $angsurplus ) * 100:0; 
                    $persen003  = number_format($per003,"2",",",".");
		
        $biaya_net =  $jmlpmasuk- $jmlpkeluar;
        $angbiaya_net =  $jmlangpmasuk- $jmlangpkeluar;        
        if ($biaya_net < 0){
                    	$a="("; $biaya_netx=$biaya_net*-1; $b=")";
                        }else {
                    	$a=""; $biaya_netx=$biaya_net; $b="";
                        }
        if ($angbiaya_net < 0){
                    	$g="("; $angbiaya_netx=$angbiaya_net*-1; $h=")";
                        }else {
                    	$g=""; $angbiaya_netx=$angbiaya_net; $h="";
                        }
        $biaya_net1 =   number_format($biaya_netx,"2",",",".");
        $angbiaya_net1 =   number_format($angbiaya_netx,"2",",",".");
        $silpa= ($jmlpendapatan+$jmlpmasuk)-($jmlbelanja+$jmlpkeluar);
        $angsilpa= ($jmlangpendapatan+$jmlangpmasuk)-($jmlangbelanja+$jmlangpkeluar);                
        if ($silpa < 0){
                    	$c="("; $silpax=$silpa*-1; $d=")";
                        }else {
                    	$c=""; $silpax=$silpa; $d="";
                        }
        if ($angsilpa < 0){
                    	$i="("; $angsilpax=$angsilpa*-1; $j=")";
                        }else {
                    	$i=""; $angsilpax=$angsilpa; $j="";
                        }
        $silpa1 =number_format($silpax,"2",",","."); 
        $angsilpa1 =number_format($angsilpax,"2",",",".");
       $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
		$nm_skpd	= strtoupper ($nmskpd);
        $jk=$this->rka_model->combo_skpd();
       
        $cRet='';
        
	 $modtahun= $thn%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>					
                    <tr>
                         <td align=\"center\"><strong>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>ANGGARAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>REALISASI</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>LEBIH</br>(KURANG)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";
               
                   $sql4="SELECT a.seq,a.nor,a.uraian,isnull(a.kode_1,'-') as kode_1,isnull(a.kode_2,'-') as kode_2,isnull(a.kode_3,'-') as kode_3,thn_m1 AS lalu FROM map_lra_skpd a 
				   GROUP BY a.seq,a.nor,a.uraian,isnull(a.kode_1,'-'),isnull(a.kode_2,'-'),isnull(a.kode_3,'-'),thn_m1 ORDER BY a.seq";
                // isnull(a.kode_1,\"'-'\")
                $query4 = $this->db->query($sql4);
                $no     = 0;                                  
               
                foreach ($query4->result() as $row4)
                {
                    
                    $nama      = $row4->uraian;   
                    $real_lalu = number_format($row4->lalu,"2",",",".");
                    $n         = $row4->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$n2         = $row4->kode_2;
					$n2		   = ($n2=="-"?"'-'":$n2);
					$n3         = $row4->kode_3;
					$n3		   = ($n3=="-"?"'-'":$n3);

//                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $bulan,$ag_tox) b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (".$n.") ";
                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $cbulan,$ag_tox) b WHERE kd_skpd<>'$id' and (left(b.kd_rek5,3) in ($n) or left(b.kd_rek5,5) in ($n2) or left(b.kd_rek5,7) in ($n3))";
//					                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM realisasi b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (\"'.$n.'\") ";
                    $query5 = $this->db->query($sql5);
                    $trh    = $query5->row();
                    $nil    = $trh->nilai;
                    $angnil = $trh->anggaran;
                    
                    $real_s = $trh->anggaran - $trh->nilai;
                    if ($real_s < 0){
                    	$x1="("; $real_sx=$real_s*-1; $y1=")";}
                    else {
                    	$x1=""; $real_sx=$real_s; $y1="";}
                    $selisih = number_format($real_sx,"2",",",".");
                    if ($trh->nilai==0){
                        $tmp=1;
                    }else{
                        $tmp=$trh->nilai;
                    }
                    $nilai    = number_format($trh->nilai,"2",",",".");
                    $angnilai = number_format($trh->anggaran,"2",",",".");
                    $per1     = ($angnil!=0)?($nil / $angnil ) * 100:0; 
                    $persen1  = number_format($per1,"2",",",".");
                    $no       = $no + 1;
                    switch ($row4->seq) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;					
					case 35:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 40:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlpendapatan1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x001$selisihpend$y001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen001</td>
                                 </tr>";
                        break;
					case 45:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 50:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td	 style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 55:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 75:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;						
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 120:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlangbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$jmlbelanja1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x002$selisihbelanja$y002</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen002</td>
                                 </tr>";
                        break;
					case 125:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 130:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$e$angsurplus1$f</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x$surplus1$y</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x003$selisihsurplus$y003</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen003</td>
                                 </tr>";
                        break;
                   
                    default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                }
                }
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LRA SKPD Keseluruhan / $cbulan");
        $this->template->set('title', 'LRA SKPD Keseluruhan / $cbulan');        
        switch($pilih) {       
        case 1;
			echo ("<title>LRA SKPD $cbulan</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
    }
    
	function cetak_lra_pemda_unit($cbulan="", $kd_skpd="", $cetak=1){ 
	$bulan=$cbulan;
	$id  = $this->session->userdata('kdskpd');
    $thn = $this->session->userdata('pcThang');
	$sqlanggaran1="select case when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_ubah) then 2 
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_sempurna) and $cbulan<month(tgl_dpa_ubah) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan>=month(tgl_dpa_sempurna) then 1 
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=0 and status_ubah=0 and $cbulan>=month(tgl_dpa) then 1
					   else 1 end as anggaran from trhrka where kd_skpd='$kd_skpd'";
    $sqlanggaran=$this->db->query($sqlanggaran1);
	foreach ($sqlanggaran->result() as $rowttd)
        {
            $anggaran=$rowttd->anggaran;
        }

	$ag_tox=$anggaran;
	

    //function cetak_lra(){
        $sql41="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,1)='4' and kd_skpd='$kd_skpd'";
                    $query41 = $this->db->query($sql41);
                    $jmlp = $query41->row();
                    $jmlpendapatan = $jmlp->nilai;
                    $jmlangpendapatan = $jmlp->anggaran;
                    $jmlangpendapatan1= number_format($jmlp->anggaran,"2",",",".");
                    $jmlpendapatan1= number_format($jmlp->nilai,"2",",",".");
                    
					$real_pend = $jmlangpendapatan - $jmlpendapatan;
                    if ($real_pend < 0){
                    	$x001="("; $real_pendx=$real_pend*-1; $y001=")";}
                    else {
                    	$x001=""; $real_pendx=$real_pend; $y001="";}
                    $selisihpend = number_format($real_pendx,"2",",",".");
                    if ($jmlpendapatan==0){
                        $tmp001=1;
                    }else{
                        $tmp001=$jmlpendapatan;
                    }
					
                    $per001     = ($jmlangpendapatan!=0)?($jmlpendapatan / $jmlangpendapatan ) * 100:0; 
                    $persen001  = number_format($per001,"2",",",".");
					
        $sql51="SELECT SUM(anggaran) as angaran,SUM(real_spj)as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,1) in ('5','6') and kd_skpd='$kd_skpd'";
                    $query51 = $this->db->query($sql51);
                    $jmlb = $query51->row();
                    $jmlangbelanja = $jmlb->angaran;
                    $jmlbelanja = $jmlb->nilai;
                    $jmlbelanja1= number_format($jmlb->nilai,"2",",",".");
                    $jmlangbelanja1= number_format($jmlb->angaran,"2",",",".");
					
					$real_belanja = $jmlangbelanja - $jmlbelanja;
                    if ($real_belanja < 0){
                    	$x002="("; $real_belanjax=$real_belanja*-1; $y002=")";}
                    else {
                    	$x002=""; $real_belanjax=$real_belanja; $y002="";}
                    $selisihbelanja = number_format($real_belanjax,"2",",",".");
                    if ($jmlbelanja==0){
                        $tmp002=1;
                    }else{
                        $tmp002=$jmlbelanja;
                    }
					
                    $per002     = ($jmlangbelanja!=0)?($jmlbelanja / $jmlangbelanja ) * 100:0; 
                    $persen002  = number_format($per002,"2",",",".");
					
        $sql523="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,2)='52' and kd_skpd='$kd_skpd'";
                    $query523 = $this->db->query($sql523);
                    $jmlbm = $query523->row();
                    $jmlbmbelanja = $jmlbm->nilai;
                    $jmlangbmbelanja = $jmlbm->anggaran;
                    $jmlbmbelanja1= number_format($jmlbmbelanja,"2",",",".");
                    $jmlangbmbelanja1= number_format($jmlangbmbelanja,"2",",",".");
        $sql61="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,2)='71' and kd_skpd='$kd_skpd'";
                    $query61 = $this->db->query($sql61);
                    $jmlpm = $query61->row();
                    $jmlpmasuk = $jmlpm->nilai;
                    $jmlangpmasuk = $jmlpm->anggaran;
        $sql62="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,2)='72' and kd_skpd='$kd_skpd'";
                    $query62 = $this->db->query($sql62);
                    $jmlpk = $query62->row();
                    $jmlpkeluar = $jmlpk->nilai;
                    $jmlangpkeluar = $jmlpk->anggaran;
        $surplus =  $jmlpendapatan- $jmlbelanja;
        $angsurplus = $jmlangpendapatan- $jmlangbelanja;        
        if ($surplus < 0){
                    	$x="("; $surplusx=$surplus*-1; $y=")";
                        }else {
                    	$x=""; $surplusx=$surplus; $y="";
                        }
        if ($angsurplus < 0){
                    	$e="("; $angsurplusx=$angsurplus*-1; $f=")";
                        }else {
                    	$e=""; $angsurplusx=$angsurplus; $f="";
                        }
        $surplus1= number_format($surplusx,"2",",",".");
        $angsurplus1= number_format($angsurplusx,"2",",",".");
		
		$real_surplus = $angsurplus - $surplus;
                    if ($real_surplus < 0){
                    	$x003="("; $real_surplusx=$real_surplus*-1; $y003=")";}
                    else {
                    	$x003=""; $real_surplusx=$real_surplus; $y003="";}
        $selisihsurplus = number_format($real_surplusx,"2",",",".");
                    if ($surplus==0){
                        $tmp003=1;
                    }else{
                        $tmp003=$surplus;
                    }
					
                    $per003     = ($angsurplus!=0)?($surplus / $angsurplus ) * 100:0; 
                    $persen003  = number_format($per003,"2",",",".");
		
        $biaya_net = $jmlpmasuk- $jmlpkeluar;
        $angbiaya_net =  $jmlangpmasuk- $jmlangpkeluar;        
        if ($biaya_net < 0){
                    	$a="("; $biaya_netx=$biaya_net*-1; $b=")";
                        }else {
                    	$a=""; $biaya_netx=$biaya_net; $b="";
                        }
        if ($angbiaya_net < 0){
                    	$g="("; $angbiaya_netx=$angbiaya_net*-1; $h=")";
                        }else {
                    	$g=""; $angbiaya_netx=$angbiaya_net; $h="";
                        }
        $biaya_net1 =   number_format($biaya_netx,"2",",",".");
        $angbiaya_net1 =   number_format($angbiaya_netx,"2",",",".");
        $silpa= ($jmlpendapatan+$jmlpmasuk)-($jmlbelanja+$jmlpkeluar);
        $angsilpa= ($jmlangpendapatan+$jmlangpmasuk)-($jmlangbelanja+$jmlangpkeluar);                
        if ($silpa < 0){
                    	$c="("; $silpax=$silpa*-1; $d=")";
                        }else {
                    	$c=""; $silpax=$silpa; $d="";
                        }
        if ($angsilpa < 0){
                    	$i="("; $angsilpax=$angsilpa*-1; $j=")";
                        }else {
                    	$i=""; $angsilpax=$angsilpa; $j="";
                        }
        $silpa1 =number_format($silpax,"2",",","."); 
        $angsilpa1 =number_format($angsilpax,"2",",",".");

		$selisih_biaya = $angbiaya_net- $biaya_net;		
		if ($selisih_biaya < 0){
                    	$xy="("; $selisih_biayax=$selisih_biaya*-1; $yx=")";
                        }else {
                    	$xy=""; $selisih_biayax=$selisih_biaya; $yx="";
                        }
		$selisih_biaya1 = number_format($selisih_biayax,"2",",",".");
                    
                    $per004     = ($angbiaya_net!=0)?($biaya_net / $angbiaya_net ) * 100:0; 
                    $persen004  = number_format($per004,"2",",",".");
		
		$selisih_silpa = $angsilpa - $silpa;		
		if ($selisih_silpa < 0){
                    	$az="("; $selisih_silpax=$selisih_silpa*-1; $za=")";
                        }else {
                    	$az=""; $selisih_silpax=$selisih_silpa; $za="";
                        }
						
		$selisih_silpa1 = number_format($selisih_silpax,"2",",",".");
                    $per005     = ($angsilpa!=0)?($silpa / $angsilpa) * 100:0; 
                    $persen005  = number_format($per005,"2",",",".");
		
		$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
		
		$nm_skpd	= strtoupper ($nmskpd);
        $jk=$this->rka_model->combo_skpd();
       
        $cRet='';
        
	 $modtahun= $thn%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
	   
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA DAERAH</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN</strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong> $arraybulan[$bulan] $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>ANGGARAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>REALISASI</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>LEBIH</br>(KURANG)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                        </tr>";
               
                   $sql4="SELECT a.seq,a.nor,a.uraian,isnull(a.kode_1,'-') as kode_1,isnull(a.kode_2,'-') as kode_2,isnull(a.kode_3,'-') as kode_3,thn_m1 AS lalu FROM map_lra_prov a 
				   GROUP BY a.seq,a.nor,a.uraian,isnull(a.kode_1,'-'),isnull(a.kode_2,'-'),isnull(a.kode_3,'-'),thn_m1 ORDER BY a.seq";
                // isnull(a.kode_1,\"'-'\")
                $query4 = $this->db->query($sql4);
                $no     = 0;                                  
               
                foreach ($query4->result() as $row4)
                {
                    
                    $nama      = $row4->uraian;   
                    $real_lalu = number_format($row4->lalu,"2",",",".");
                    $n         = $row4->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$n2         = $row4->kode_2;
					$n2		   = ($n2=="-"?"'-'":$n2);
					$n3         = $row4->kode_3;
					$n3		   = ($n3=="-"?"'-'":$n3);

//                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $bulan,$ag_tox) b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (".$n.") ";
                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi_pemda( $bulan,$ag_tox) b WHERE (left(b.kd_rek5,3) in ($n) or left(b.kd_rek5,5) in ($n2) or left(b.kd_rek5,7) in ($n3)) and kd_skpd='$kd_skpd'";
//					                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM realisasi b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (\"'.$n.'\") ";
                    $query5 = $this->db->query($sql5);
                    $trh    = $query5->row();
                    $nil    = $trh->nilai;
                    $angnil = $trh->anggaran;
                    
                    $real_s = $trh->anggaran - $trh->nilai;
                    if ($real_s < 0){
                    	$x1="("; $real_sx=$real_s*-1; $y1=")";}
                    else {
                    	$x1=""; $real_sx=$real_s; $y1="";}
                    $selisih = number_format($real_sx,"2",",",".");
                    if ($trh->nilai==0){
                        $tmp=1;
                    }else{
                        $tmp=$trh->nilai;
                    }
                    $nilai    = number_format($trh->nilai,"2",",",".");
                    $angnilai = number_format($trh->anggaran,"2",",",".");
                    $per1     = ($angnil!=0)?($nil / $angnil ) * 100:0; 
                    $persen1  = number_format($per1,"2",",",".");
                    $no       = $no + 1;
                    switch ($row4->seq) {	
                    case 5:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 40:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 45:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 50:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 85:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 140:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;
					case 145:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 150:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 190:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 195:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 235:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 240:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 260:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 265:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 270:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 295:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 330:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 335:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$e$angsurplus1$f</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x$surplus1$y</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$selisihsurplus</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen003</td>
                                 </tr>";
                        break;
                    case 340:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 345:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 350:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 355:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 425:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 430:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 495:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$g$angbiaya_net1$h</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$a$biaya_net1$b</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xy$selisih_biaya1$yx</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen004</td>
                                 </tr>";
                        break;
                    case 500:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 505:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$i$angsilpa1$j</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$silpa1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$az$selisih_silpa1$za</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen005</td>
                                 </tr>";
                        break;				
                    default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1</td>
                                 </tr>";
                }
                }
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LRA KONSOL / $kd_skpd / $cbulan");
        $this->template->set('title', 'LRA KONSOL / $kd_skpd / $cbulan');        
        switch($cetak) {       
        case 1;
			echo ("<title>LRA KONSOL UNIT $cbulan</title>");
			echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
    }

	
	
	function cetak_lra_pemda($cbulan="", $cetak=1){ 
	$bulan=$cbulan;
	$id  = $this->session->userdata('kdskpd');
    $thn = $this->session->userdata('pcThang');
	$sqlanggaran1="select case when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_ubah) then 2 
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_sempurna) and $cbulan<month(tgl_dpa_ubah) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan>=month(tgl_dpa_sempurna) then 1 
					   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan<month(tgl_dpa_sempurna) then 1
					   when statu=1 and status_sempurna=0 and status_ubah=0 and $cbulan>=month(tgl_dpa) then 1
					   else 1 end as anggaran from trhrka where kd_skpd='$id'";
    $sqlanggaran=$this->db->query($sqlanggaran1);
	foreach ($sqlanggaran->result() as $rowttd)
        {
            $anggaran=$rowttd->anggaran;
        }

	$ag_tox=$anggaran;
	

    //function cetak_lra(){
        $sql41="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,1)='4'";
                    $query41 = $this->db->query($sql41);
                    $jmlp = $query41->row();
                    $jmlpendapatan = $jmlp->nilai;
                    $jmlangpendapatan = $jmlp->anggaran;
                    $jmlangpendapatan1= number_format($jmlp->anggaran,"2",",",".");
                    $jmlpendapatan1= number_format($jmlp->nilai,"2",",",".");
                    
					$real_pend = $jmlangpendapatan - $jmlpendapatan;
                    if ($real_pend < 0){
                    	$x001="("; $real_pendx=$real_pend*-1; $y001=")";}
                    else {
                    	$x001=""; $real_pendx=$real_pend; $y001="";}
                    $selisihpend = number_format($real_pendx,"2",",",".");
                    if ($jmlpendapatan==0){
                        $tmp001=1;
                    }else{
                        $tmp001=$jmlpendapatan;
                    }
					
                    $per001     = ($jmlangpendapatan!=0)?($jmlpendapatan / $jmlangpendapatan ) * 100:0; 
                    $persen001  = number_format($per001,"2",",",".");
					
        $sql51="SELECT SUM(anggaran) as angaran,SUM(real_spj)as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,1) in ('5','6')";
                    $query51 = $this->db->query($sql51);
                    $jmlb = $query51->row();
                    $jmlangbelanja = $jmlb->angaran;
                    $jmlbelanja = $jmlb->nilai;
                    $jmlbelanja1= number_format($jmlb->nilai,"2",",",".");
                    $jmlangbelanja1= number_format($jmlb->angaran,"2",",",".");
					
					$real_belanja = $jmlangbelanja - $jmlbelanja;
                    if ($real_belanja < 0){
                    	$x002="("; $real_belanjax=$real_belanja*-1; $y002=")";}
                    else {
                    	$x002=""; $real_belanjax=$real_belanja; $y002="";}
                    $selisihbelanja = number_format($real_belanjax,"2",",",".");
                    if ($jmlbelanja==0){
                        $tmp002=1;
                    }else{
                        $tmp002=$jmlbelanja;
                    }
					
                    $per002     = ($jmlangbelanja!=0)?($jmlbelanja / $jmlangbelanja ) * 100:0; 
                    $persen002  = number_format($per002,"2",",",".");
					
        $sql523="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,2)='52'";
                    $query523 = $this->db->query($sql523);
                    $jmlbm = $query523->row();
                    $jmlbmbelanja = $jmlbm->nilai;
                    $jmlangbmbelanja = $jmlbm->anggaran;
                    $jmlbmbelanja1= number_format($jmlbmbelanja,"2",",",".");
                    $jmlangbmbelanja1= number_format($jmlangbmbelanja,"2",",",".");
        $sql61="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,2)='71'";
                    $query61 = $this->db->query($sql61);
                    $jmlpm = $query61->row();
                    $jmlpmasuk = $jmlpm->nilai;
                    $jmlangpmasuk = $jmlpm->anggaran;
        $sql62="SELECT SUM(anggaran) as anggaran,SUM(real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) WHERE left(kd_rek5,2)='72'";
                    $query62 = $this->db->query($sql62);
                    $jmlpk = $query62->row();
                    $jmlpkeluar = $jmlpk->nilai;
                    $jmlangpkeluar = $jmlpk->anggaran;
        $surplus =  $jmlpendapatan- $jmlbelanja;
        $angsurplus = $jmlangpendapatan- $jmlangbelanja;        
        if ($surplus < 0){
                    	$x="("; $surplusx=$surplus*-1; $y=")";
                        }else {
                    	$x=""; $surplusx=$surplus; $y="";
                        }
        if ($angsurplus < 0){
                    	$e="("; $angsurplusx=$angsurplus*-1; $f=")";
                        }else {
                    	$e=""; $angsurplusx=$angsurplus; $f="";
                        }
        $surplus1= number_format($surplusx,"2",",",".");
        $angsurplus1= number_format($angsurplusx,"2",",",".");
		
		$real_surplus = $angsurplus - $surplus;
                    if ($real_surplus < 0){
                    	$x003="("; $real_surplusx=$real_surplus*-1; $y003=")";}
                    else {
                    	$x003=""; $real_surplusx=$real_surplus; $y003="";}
        $selisihsurplus = number_format($real_surplusx,"2",",",".");
                    if ($surplus==0){
                        $tmp003=1;
                    }else{
                        $tmp003=$surplus;
                    }
					
                    $per003     = ($angsurplus!=0)?($surplus / $angsurplus ) * 100:0; 
                    $persen003  = number_format($per003,"2",",",".");
		
        $biaya_net = $jmlpmasuk- $jmlpkeluar;
        $angbiaya_net =  $jmlangpmasuk- $jmlangpkeluar;        
        if ($biaya_net < 0){
                    	$a="("; $biaya_netx=$biaya_net*-1; $b=")";
                        }else {
                    	$a=""; $biaya_netx=$biaya_net; $b="";
                        }
        if ($angbiaya_net < 0){
                    	$g="("; $angbiaya_netx=$angbiaya_net*-1; $h=")";
                        }else {
                    	$g=""; $angbiaya_netx=$angbiaya_net; $h="";
                        }
        $biaya_net1 =   number_format($biaya_netx,"2",",",".");
        $angbiaya_net1 =   number_format($angbiaya_netx,"2",",",".");
        $silpa= ($jmlpendapatan+$jmlpmasuk)-($jmlbelanja+$jmlpkeluar);
        $angsilpa= ($jmlangpendapatan+$jmlangpmasuk)-($jmlangbelanja+$jmlangpkeluar);                
        if ($silpa < 0){
                    	$c="("; $silpax=$silpa*-1; $d=")";
                        }else {
                    	$c=""; $silpax=$silpa; $d="";
                        }
        if ($angsilpa < 0){
                    	$i="("; $angsilpax=$angsilpa*-1; $j=")";
                        }else {
                    	$i=""; $angsilpax=$angsilpa; $j="";
                        }
        $silpa1 =number_format($silpax,"2",",","."); 
        $angsilpa1 =number_format($angsilpax,"2",",",".");

		$selisih_biaya = $angbiaya_net- $biaya_net;		
		if ($selisih_biaya < 0){
                    	$xy="("; $selisih_biayax=$selisih_biaya*-1; $yx=")";
                        }else {
                    	$xy=""; $selisih_biayax=$selisih_biaya; $yx="";
                        }
		$selisih_biaya1 = number_format($selisih_biayax,"2",",",".");
                    
                    $per004     = ($angbiaya_net!=0)?($biaya_net / $angbiaya_net ) * 100:0; 
                    $persen004  = number_format($per004,"2",",",".");
		
		$selisih_silpa = $angsilpa - $silpa;		
		if ($selisih_silpa < 0){
                    	$az="("; $selisih_silpax=$selisih_silpa*-1; $za=")";
                        }else {
                    	$az=""; $selisih_silpax=$selisih_silpa; $za="";
                        }
						
		$selisih_silpa1 = number_format($selisih_silpax,"2",",",".");
                    $per005     = ($angsilpa!=0)?($silpa / $angsilpa) * 100:0; 
                    $persen005  = number_format($per005,"2",",",".");
		
		$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
		
		$nm_skpd	= strtoupper ($nmskpd);
        $jk=$this->rka_model->combo_skpd();
       
        $cRet='';
        
	 $modtahun= $thn%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
	   
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA DAERAH</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN</strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong> $arraybulan[$bulan] $thn</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>ANGGARAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>REALISASI</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>LEBIH</br>(KURANG)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                        </tr>";
               
                   $sql4="SELECT a.seq,a.nor,a.uraian,isnull(a.kode_1,'-') as kode_1,isnull(a.kode_2,'-') as kode_2,isnull(a.kode_3,'-') as kode_3,thn_m1 AS lalu FROM map_lra_prov a 
				   GROUP BY a.seq,a.nor,a.uraian,isnull(a.kode_1,'-'),isnull(a.kode_2,'-'),isnull(a.kode_3,'-'),thn_m1 ORDER BY a.seq";
                // isnull(a.kode_1,\"'-'\")
                $query4 = $this->db->query($sql4);
                $no     = 0;                                  
               
                foreach ($query4->result() as $row4)
                {
                    
                    $nama      = $row4->uraian;   
                    $real_lalu = number_format($row4->lalu,"2",",",".");
                    $n         = $row4->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$n2         = $row4->kode_2;
					$n2		   = ($n2=="-"?"'-'":$n2);
					$n3         = $row4->kode_3;
					$n3		   = ($n3=="-"?"'-'":$n3);

//                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi( $bulan,$ag_tox) b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (".$n.") ";
                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi_pemda( $bulan,$ag_tox) b WHERE (left(b.kd_rek5,3) in ($n) or left(b.kd_rek5,5) in ($n2) or left(b.kd_rek5,7) in ($n3))";
//					                    $sql5   = "SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM realisasi b LEFT JOIN ms_rek5 c ON b.kd_rek5=c.kd_rek5 WHERE c.map_lra1 IN (\"'.$n.'\") ";
                    $query5 = $this->db->query($sql5);
                    $trh    = $query5->row();
                    $nil    = $trh->nilai;
                    $angnil = $trh->anggaran;
                    
                    $real_s = $trh->anggaran - $trh->nilai;
                    if ($real_s < 0){
                    	$x1="("; $real_sx=$real_s*-1; $y1=")";}
                    else {
                    	$x1=""; $real_sx=$real_s; $y1="";}
                    $selisih = number_format($real_sx,"2",",",".");
                    if ($trh->nilai==0){
                        $tmp=1;
                    }else{
                        $tmp=$trh->nilai;
                    }
                    $nilai    = number_format($trh->nilai,"2",",",".");
                    $angnilai = number_format($trh->anggaran,"2",",",".");
                    $per1     = ($angnil!=0)?($nil / $angnil ) * 100:0; 
                    $persen1  = number_format($per1,"2",",",".");
                    $no       = $no + 1;
                    switch ($row4->seq) {	
                    case 5:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 40:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 45:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 50:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 85:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 140:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;
					case 145:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 150:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 190:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 195:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 235:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 240:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 260:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 265:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 270:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 295:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 330:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 335:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$e$angsurplus1$f</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$x$surplus1$y</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$selisihsurplus</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen003</td>
                                 </tr>";
                        break;
                    case 340:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 345:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 350:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 355:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 425:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 430:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 495:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$g$angbiaya_net1$h</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$a$biaya_net1$b</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xy$selisih_biaya1$yx</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen004</td>
                                 </tr>";
                        break;
                    case 500:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 505:
                        $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$i$angsilpa1$j</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$silpa1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$az$selisih_silpa1$za</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen005</td>
                                 </tr>";
                        break;				
                    default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$angnilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x1$selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1</td>
                                 </tr>";
                }
                }
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LRA KONSOL $cbulan");
        $this->template->set('title', 'LRA KONSOL $cbulan');        
        switch($cetak) {       
        case 1;
			echo ("<title>LRA KONSOL $cbulan</title>");
			echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
    }

    function ctk_lra_lo_pemda($cbulan="", $pilih=1){
        //$id = $skpd;
        $cetak='2';//$ctk; 
        $id     = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $thn_ang_1= $thn_ang-1;  
        //$laporan=$lap; 
       
       // if ($cetak == '1') {
//           $skpd = '';
//           $skpd1 = '';           
//       } else {             
           $skpd = "AND kd_skpd='$id'";
           $skpd1 = "AND b.kd_skpd='$id'"; 
       //}  

       $y123=")";
	   $x123="(";       
	    $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $nmskpd     = $rowsc->nm_skpd;
                } 
		$nm_skpd = strtoupper($nmskpd);		
	   // INSERT DATA
	   
       $sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
     
// created by henri_tb
			
		$sqllo1="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('81','82','83')";
                    $querylo1= $this->db->query($sqllo1);
                    $penlo = $querylo1->row();
                    $pen_lo = $penlo->nilai;
                    $pen_lo1= number_format($penlo->nilai,"2",",",".");
        
		$sqllo2="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83')";
                    $querylo2= $this->db->query($sqllo2);
                    $penlo2 = $querylo2->row();
                    $pen_lo_lalu = $penlo2->nilai;
                    $pen_lo_lalu1= number_format($penlo2->nilai,"2",",",".");
		
		$sqllo3="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('91','92')";
                    $querylo3= $this->db->query($sqllo3);
                    $bello = $querylo3->row();
                    $bel_lo = $bello->nilai;
                    $bel_lo1= number_format($bello->nilai,"2",",",".");
        
		$sqllo4="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92')";
                    $querylo4= $this->db->query($sqllo4);
                    $bello2 = $querylo4->row();
                    $bel_lo_lalu = $bello2->nilai;
                    $bel_lo_lalu1= number_format($bello2->nilai,"2",",",".");		

					$surplus_lo = $pen_lo - $bel_lo;
                    if ($surplus_lo < 0){
                    	$lo1="("; $surplus_lox=$surplus_lo*-1; $lo2=")";}
                    else {
                    	$lo1=""; $surplus_lox=$surplus_lo; $lo2="";}		
                    $surplus_lo1 = number_format($surplus_lox,"2",",",".");
                    
					$surplus_lo_lalu = $pen_lo_lalu - $bel_lo_lalu;
                    if ($surplus_lo_lalu < 0){
                    	$lo3="("; $surplus_lo_lalux=$surplus_lo_lalu*-1; $lo4=")";}
                    else {
                    	$lo3=""; $surplus_lo_lalux=$surplus_lo_lalu; $lo4="";}						
                    $surplus_lo_lalu1 = number_format($surplus_lo_lalux,"2",",",".");

					$selisih_surplus_lo = $surplus_lo - $surplus_lo_lalu;
                    if ($selisih_surplus_lo < 0){
                    	$lo5="("; $selisih_surplus_lox=$selisih_surplus_lo*-1; $lo6=")";}
                    else {
                    	$lo5=""; $selisih_surplus_lox=$selisih_surplus_lo; $lo6="";}
                    $selisih_surplus_lo1 = number_format($selisih_surplus_lox,"2",",",".");
                    
					if( $surplus_lo_lalu=='' or $surplus_lo_lalu==0){
					$persen2 = '0,00';
					}else{
					$persen2 = ($surplus_lo/$surplus_lo_lalu)*100;
					$persen2 = number_format($persen2,"2",",",".");
					}
					
		$sqllo5="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('81','82','83','84')";
                    $querylo5= $this->db->query($sqllo5);
                    $penlo3 = $querylo5->row();
                    $pen_lo3 = $penlo3->nilai;
                    $pen_lo31= number_format($penlo3->nilai,"2",",",".");
        
		$sqllo6="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83','84')";
                    $querylo6= $this->db->query($sqllo6);
                    $penlo4 = $querylo6->row();
                    $pen_lo_lalu4 = $penlo4->nilai;
                    $pen_lo_lalu41= number_format($penlo4->nilai,"2",",",".");
		
		$sqllo7="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('91','92','93')";
                    $querylo7= $this->db->query($sqllo7);
                    $bello5 = $querylo7->row();
                    $bel_lo5 = $bello5->nilai;
                    $bel_lo51= number_format($bello5->nilai,"2",",",".");
		
		$sqllo8="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92','93')";
                    $querylo8= $this->db->query($sqllo8);
                    $bello6 = $querylo8->row();
                    $bel_lo_lalu6 = $bello6->nilai;
                    $bel_lo_lalu61= number_format($bello6->nilai,"2",",",".");		

					$surplus_lo2 = $pen_lo3 - $bel_lo5;
                    if ($surplus_lo2 < 0){
                    	$lo7="("; $surplus_lo2x=$surplus_lo2*-1; $lo8=")";}
                    else {
                    	$lo7=""; $surplus_lo2x=$surplus_lo2; $lo8="";}		
                    $surplus_lo21 = number_format($surplus_lo2x,"2",",",".");
                    
					$surplus_lo_lalu2 = $pen_lo_lalu4 - $bel_lo_lalu6;
                    if ($surplus_lo_lalu2 < 0){
                    	$lo9="("; $surplus_lo_lalu2x=$surplus_lo_lalu2*-1; $lo10=")";}
                    else {
                    	$lo9=""; $surplus_lo_lalu2x=$surplus_lo_lalu2; $lo10="";}						
                    $surplus_lo_lalu21 = number_format($surplus_lo_lalu2x,"2",",",".");

					$selisih_surplus_lo2 = $surplus_lo2 - $surplus_lo_lalu2;
                    if ($selisih_surplus_lo2 < 0){
                    	$lo11="("; $selisih_surplus_lo2x=$selisih_surplus_lo2*-1; $lo12=")";}
                    else {
                    	$lo11=""; $selisih_surplus_lo2x=$selisih_surplus_lo2; $lo12="";}
                    $selisih_surplus_lo21 = number_format($selisih_surplus_lo2x,"2",",",".");
                    
					if( $surplus_lo_lalu2=='' or $surplus_lo_lalu2==0){
					$persen3 = '0,00';
					}else{
					$persen3 = ($surplus_lo2/$surplus_lo_lalu2)*100;
					$persen3 = number_format($persen3,"2",",",".");
					}
		
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,1) in ('8')";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,1) in ('9')";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3x=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $surplus_lo3x=$surplus_lo3; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3x,"2",",",".");
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3x=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $surplus_lo_lalu3x=$surplus_lo_lalu3; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3x,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3x=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $selisih_surplus_lo3x=$selisih_surplus_lo3; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3x,"2",",",".");
                    
					if( $surplus_lo_lalu3=='' or $surplus_lo_lalu3==0){
					$persen4 = '0,00';
					}else{
					$persen4 = ($surplus_lo3/$surplus_lo_lalu3)*100;
					$persen4 = number_format($persen4,"2",",",".");
					}

					
		$sqllo13="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('84')";
                    $querylo13= $this->db->query($sqllo13);
                    $penlo11 = $querylo13->row();
                    $pen_lo11 = $penlo11->nilai;
                    $pen_lo111= number_format($penlo11->nilai,"2",",",".");
        
		$sqllo14="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('84')";
                    $querylo14= $this->db->query($sqllo14);
                    $penlo12 = $querylo14->row();
                    $pen_lo_lalu12 = $penlo12->nilai;
                    $pen_lo_lalu121= number_format($penlo12->nilai,"2",",",".");
		
		$sqllo15="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('93')";
                    $querylo15= $this->db->query($sqllo15);
                    $bello13 = $querylo15->row();
                    $bel_lo13 = $bello13->nilai;
                    $bel_lo131= number_format($bello13->nilai,"2",",",".");
		
		$sqllo16="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('93')";
                    $querylo16= $this->db->query($sqllo16);
                    $bello14 = $querylo16->row();
                    $bel_lo_lalu14 = $bello14->nilai;
                    $bel_lo_lalu141= number_format($bello14->nilai,"2",",",".");		

					$surplus_lo4 = $pen_lo11 - $bel_lo13;
                    if ($surplus_lo4 < 0){
                    	$lo19="("; $surplus_lo4x=$surplus_lo4*-1; $lo20=")";}
                    else {
                    	$lo19=""; $surplus_lo4x=$surplus_lo4; $lo20="";}		
                    $surplus_lo41 = number_format($surplus_lo4x,"2",",",".");
                    
					$surplus_lo_lalu4 = $pen_lo_lalu12 - $bel_lo_lalu14;
                    if ($surplus_lo_lalu4 < 0){
                    	$lo21="("; $surplus_lo_lalu4x=$surplus_lo_lalu4*-1; $lo22=")";}
                    else {
                    	$lo21=""; $surplus_lo_lalu4x=$surplus_lo_lalu4; $lo22="";}						
                    $surplus_lo_lalu41 = number_format($surplus_lo_lalu4x,"2",",",".");

					$selisih_surplus_lo4 = $surplus_lo4 - $surplus_lo_lalu4;
                    if ($selisih_surplus_lo4 < 0){
                    	$lo23="("; $selisih_surplus_lo4x=$selisih_surplus_lo4*-1; $lo24=")";}
                    else {
                    	$lo23=""; $selisih_surplus_lo4x=$selisih_surplus_lo4; $lo24="";}
                    $selisih_surplus_lo41 = number_format($selisih_surplus_lo4x,"2",",",".");
                    
					if( $surplus_lo_lalu4=='' or $surplus_lo_lalu4==0){
					$persen5 = '0,00';
					}else{
					$persen5 = ($surplus_lo4/$surplus_lo_lalu4)*100;
					$persen5 = number_format($persen5,"2",",",".");
					}
					
					
		$sqllo17="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('85')";
                    $querylo17= $this->db->query($sqllo17);
                    $penlo15 = $querylo17->row();
                    $pen_lo15 = $penlo15->nilai;
                    $pen_lo151= number_format($penlo15->nilai,"2",",",".");
        
		$sqllo18="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('85')";
                    $querylo18= $this->db->query($sqllo18);
                    $penlo16 = $querylo18->row();
                    $pen_lo_lalu16 = $penlo16->nilai;
                    $pen_lo_lalu161= number_format($penlo16->nilai,"2",",",".");
		
		$sqllo19="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('94')";
                    $querylo19= $this->db->query($sqllo19);
                    $bello17 = $querylo19->row();
                    $bel_lo17 = $bello17->nilai;
                    $bel_lo171= number_format($bello17->nilai,"2",",",".");
		
		$sqllo20="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('94')";
                    $querylo20= $this->db->query($sqllo20);
                    $bello18 = $querylo20->row();
                    $bel_lo_lalu18 = $bello18->nilai;
                    $bel_lo_lalu181= number_format($bello18->nilai,"2",",",".");		

					$surplus_lo5 = $pen_lo15 - $bel_lo17;
                    if ($surplus_lo5 < 0){
                    	$lo25="("; $surplus_lo5x=$surplus_lo5*-1; $lo26=")";}
                    else {
                    	$lo25=""; $surplus_lo5x=$surplus_lo5; $lo26="";}		
                    $surplus_lo51 = number_format($surplus_lo5x,"2",",",".");
                    
					$surplus_lo_lalu5 = $pen_lo_lalu16 - $bel_lo_lalu18;
                    if ($surplus_lo_lalu5 < 0){
                    	$lo27="("; $surplus_lo_lalu5x=$surplus_lo_lalu5*-1; $lo28=")";}
                    else {
                    	$lo27=""; $surplus_lo_lalu5x=$surplus_lo_lalu5; $lo28="";}						
                    $surplus_lo_lalu51 = number_format($surplus_lo_lalu5x,"2",",",".");

					$selisih_surplus_lo5 = $surplus_lo5 - $surplus_lo_lalu5;
                    if ($selisih_surplus_lo5 < 0){
                    	$lo29="("; $selisih_surplus_lo5x=$selisih_surplus_lo5*-1; $lo30=")";}
                    else {
                    	$lo29=""; $selisih_surplus_lo5x=$selisih_surplus_lo5; $lo30="";}
                    $selisih_surplus_lo51 = number_format($selisih_surplus_lo5x,"2",",",".");
                    
					if( $surplus_lo_lalu5=='' or $surplus_lo_lalu5==0){
					$persen6 = '0,00';
					}else{
					$persen6 = ($surplus_lo5/$surplus_lo_lalu5)*100;
					$persen6 = number_format($persen6,"2",",",".");
					}			
					
		
        $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);

        $cRet='';
        
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN OPERASIONAL </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>Kenaikan</br>(Penurunan)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                        </tr>";

        $sqlmaplo="SELECT seq, nor, uraian, isnull(kode_1,'-') as kode_1, isnull(kode_2,'-') as kode_2, isnull(kode_3,'-') as kode_3, isnull(cetak,'debet-debet') as cetak FROM map_lo_prov 
				   GROUP BY seq, nor, uraian, isnull(kode_1,'-'), isnull(kode_2,'-'), isnull(kode_3,'-'), isnull(cetak,'debet-debet') ORDER BY seq";
				   
                $querymaplo = $this->db->query($sqlmaplo);
                $no     = 0;                                  
               
                foreach ($querymaplo->result() as $loquery)
                {
                    
                    $nama      = $loquery->uraian;   
                    $n         = $loquery->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$n2        = $loquery->kode_2;
					$n2		   = ($n2=="-"?"'-'":$n2);
					$n3        = $loquery->kode_3;
					$n3		   = ($n3=="-"?"'-'":$n3);
					$normal    = $loquery->cetak;
					
		$quelo01   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE (left(kd_rek5,3) in ($n) or left(kd_rek5,5) in ($n2) or left(kd_rek5,7) in ($n3)) and year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan";
                    $quelo02 = $this->db->query($quelo01);
                    $quelo03 = $quelo02->row();
                    $nil     = $quelo03->nilai;
                    $nilai    = number_format($quelo03->nilai,"2",",",".");
					
		$quelo04   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE (left(kd_rek5,3) in ($n) or left(kd_rek5,5) in ($n2) or left(kd_rek5,7) in ($n3)) and year(tgl_voucher)=$thn_ang_1";
                    $quelo05 = $this->db->query($quelo04);
                    $quelo06 = $quelo05->row();
                    $nil_lalu     = $quelo06->nilai;
                    $nilai_lalu    = number_format($quelo06->nilai,"2",",",".");
					
                    $real_nilai = $nil - $nil_lalu;
                    if ($real_nilai < 0){
                    	$lo0="("; $real_nilaix=$real_nilai*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai; $lo00="";}
                    $real_nilai1 = number_format($real_nilaix,"2",",",".");
                    
					if( $nil_lalu=='' or $nil_lalu==0){
					$persen1 = '0,00';
					}else{
					$persen1 = ($nil/$nil_lalu)*100;
					$persen1 = number_format($persen1,"2",",",".");
					}
                    $no       = $no + 1;
                    switch ($loquery->seq) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 40:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 45:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 50:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 85:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 140:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 145:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 150:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 200:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 205:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 245:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 250:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo1$surplus_lo1$lo2</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo3$surplus_lo_lalu1$lo4</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo5$selisih_surplus_lo1$lo6</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen2</td>
                                 </tr>";
                        break;
					case 255:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 260:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 265:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 290:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 295:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 325:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 330:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo7$surplus_lo21$lo8</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo9$surplus_lo_lalu21$lo10</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo11$selisih_surplus_lo21$lo12</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen3</td>
                                 </tr>";
                        break;
					case 335:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 340:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 345:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 360:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 365:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 390:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo13$surplus_lo31$lo14</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo15$surplus_lo_lalu31$lo16</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo17$selisih_surplus_lo31$lo18</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen4</td>
                                 </tr>";
                        break;
					default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1</td>
                                 </tr>";

                }
                              
                    
                }
               
              
       // $cRet         .= "</table>";
//        $data['prev']  = $cRet;
//        $data['sikap'] = 'preview';
//        
//        
//        
//        $this->template->set('title', 'LAPORAN OPERASIONAL'); 
//        $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
        //$this->template->load('template','anggaran/rka/perkadaII',$data); 
        
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LO KONSOL $cbulan");
        $this->template->set('title', 'LO KONSOL $cbulan');        
        switch($pilih) {       
        case 1;
            // $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
			echo "<title>LO KONSOL $cbulan</title>";
			echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
        
                 
    }
    
	function ctk_lra_lo_pemda_unit($cbulan="", $kd_skpd="", $pilih=1){
        //$id = $skpd;
        $cetak='2';//$ctk; 
        $id     = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $thn_ang_1= $thn_ang-1;  
        //$laporan=$lap; 
       
       // if ($cetak == '1') {
//           $skpd = '';
//           $skpd1 = '';           
//       } else {             
           $skpd = "AND kd_skpd='$kd_skpd'";
           $skpd1 = "AND b.kd_skpd='$kd_skpd'"; 
       //}  

       $y123=")";
	   $x123="(";       
	    $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $nmskpd     = $rowsc->nm_skpd;
                } 
		$nm_skpd = strtoupper($nmskpd);		
	   // INSERT DATA
	   
       $sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$kd_skpd'";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
     
// created by henri_tb
			
		$sqllo1="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('81','82','83') and kd_skpd='$kd_skpd'";
                    $querylo1= $this->db->query($sqllo1);
                    $penlo = $querylo1->row();
                    $pen_lo = $penlo->nilai;
                    $pen_lo1= number_format($penlo->nilai,"2",",",".");
        
		$sqllo2="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83') and kd_skpd='$kd_skpd'";
                    $querylo2= $this->db->query($sqllo2);
                    $penlo2 = $querylo2->row();
                    $pen_lo_lalu = $penlo2->nilai;
                    $pen_lo_lalu1= number_format($penlo2->nilai,"2",",",".");
		
		$sqllo3="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('91','92') and kd_skpd='$kd_skpd'";
                    $querylo3= $this->db->query($sqllo3);
                    $bello = $querylo3->row();
                    $bel_lo = $bello->nilai;
                    $bel_lo1= number_format($bello->nilai,"2",",",".");
        
		$sqllo4="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92') and kd_skpd='$kd_skpd'";
                    $querylo4= $this->db->query($sqllo4);
                    $bello2 = $querylo4->row();
                    $bel_lo_lalu = $bello2->nilai;
                    $bel_lo_lalu1= number_format($bello2->nilai,"2",",",".");		

					$surplus_lo = $pen_lo - $bel_lo;
                    if ($surplus_lo < 0){
                    	$lo1="("; $surplus_lox=$surplus_lo*-1; $lo2=")";}
                    else {
                    	$lo1=""; $surplus_lox=$surplus_lo; $lo2="";}		
                    $surplus_lo1 = number_format($surplus_lox,"2",",",".");
                    
					$surplus_lo_lalu = $pen_lo_lalu - $bel_lo_lalu;
                    if ($surplus_lo_lalu < 0){
                    	$lo3="("; $surplus_lo_lalux=$surplus_lo_lalu*-1; $lo4=")";}
                    else {
                    	$lo3=""; $surplus_lo_lalux=$surplus_lo_lalu; $lo4="";}						
                    $surplus_lo_lalu1 = number_format($surplus_lo_lalux,"2",",",".");

					$selisih_surplus_lo = $surplus_lo - $surplus_lo_lalu;
                    if ($selisih_surplus_lo < 0){
                    	$lo5="("; $selisih_surplus_lox=$selisih_surplus_lo*-1; $lo6=")";}
                    else {
                    	$lo5=""; $selisih_surplus_lox=$selisih_surplus_lo; $lo6="";}
                    $selisih_surplus_lo1 = number_format($selisih_surplus_lox,"2",",",".");
                    
					if( $surplus_lo_lalu=='' or $surplus_lo_lalu==0){
					$persen2 = '0,00';
					}else{
					$persen2 = ($surplus_lo/$surplus_lo_lalu)*100;
					$persen2 = number_format($persen2,"2",",",".");
					}
					
		$sqllo5="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('81','82','83','84') and kd_skpd='$kd_skpd'";
                    $querylo5= $this->db->query($sqllo5);
                    $penlo3 = $querylo5->row();
                    $pen_lo3 = $penlo3->nilai;
                    $pen_lo31= number_format($penlo3->nilai,"2",",",".");
        
		$sqllo6="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83','84') and kd_skpd='$kd_skpd'";
                    $querylo6= $this->db->query($sqllo6);
                    $penlo4 = $querylo6->row();
                    $pen_lo_lalu4 = $penlo4->nilai;
                    $pen_lo_lalu41= number_format($penlo4->nilai,"2",",",".");
		
		$sqllo7="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('91','92','93') and kd_skpd='$kd_skpd'";
                    $querylo7= $this->db->query($sqllo7);
                    $bello5 = $querylo7->row();
                    $bel_lo5 = $bello5->nilai;
                    $bel_lo51= number_format($bello5->nilai,"2",",",".");
		
		$sqllo8="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92','93') and kd_skpd='$kd_skpd'";
                    $querylo8= $this->db->query($sqllo8);
                    $bello6 = $querylo8->row();
                    $bel_lo_lalu6 = $bello6->nilai;
                    $bel_lo_lalu61= number_format($bello6->nilai,"2",",",".");		

					$surplus_lo2 = $pen_lo3 - $bel_lo5;
                    if ($surplus_lo2 < 0){
                    	$lo7="("; $surplus_lo2x=$surplus_lo2*-1; $lo8=")";}
                    else {
                    	$lo7=""; $surplus_lo2x=$surplus_lo2; $lo8="";}		
                    $surplus_lo21 = number_format($surplus_lo2x,"2",",",".");
                    
					$surplus_lo_lalu2 = $pen_lo_lalu4 - $bel_lo_lalu6;
                    if ($surplus_lo_lalu2 < 0){
                    	$lo9="("; $surplus_lo_lalu2x=$surplus_lo_lalu2*-1; $lo10=")";}
                    else {
                    	$lo9=""; $surplus_lo_lalu2x=$surplus_lo_lalu2; $lo10="";}						
                    $surplus_lo_lalu21 = number_format($surplus_lo_lalu2x,"2",",",".");

					$selisih_surplus_lo2 = $surplus_lo2 - $surplus_lo_lalu2;
                    if ($selisih_surplus_lo2 < 0){
                    	$lo11="("; $selisih_surplus_lo2x=$selisih_surplus_lo2*-1; $lo12=")";}
                    else {
                    	$lo11=""; $selisih_surplus_lo2x=$selisih_surplus_lo2; $lo12="";}
                    $selisih_surplus_lo21 = number_format($selisih_surplus_lo2x,"2",",",".");
                    
					if( $surplus_lo_lalu2=='' or $surplus_lo_lalu2==0){
					$persen3 = '0,00';
					}else{
					$persen3 = ($surplus_lo2/$surplus_lo_lalu2)*100;
					$persen3 = number_format($persen3,"2",",",".");
					}
		
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3x=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $surplus_lo3x=$surplus_lo3; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3x,"2",",",".");
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3x=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $surplus_lo_lalu3x=$surplus_lo_lalu3; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3x,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3x=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $selisih_surplus_lo3x=$selisih_surplus_lo3; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3x,"2",",",".");
                    
					if( $surplus_lo_lalu3=='' or $surplus_lo_lalu3==0){
					$persen4 = '0,00';
					}else{
					$persen4 = ($surplus_lo3/$surplus_lo_lalu3)*100;
					$persen4 = number_format($persen4,"2",",",".");
					}

					
		$sqllo13="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('84') and kd_skpd='$kd_skpd'";
                    $querylo13= $this->db->query($sqllo13);
                    $penlo11 = $querylo13->row();
                    $pen_lo11 = $penlo11->nilai;
                    $pen_lo111= number_format($penlo11->nilai,"2",",",".");
        
		$sqllo14="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('84') and kd_skpd='$kd_skpd'";
                    $querylo14= $this->db->query($sqllo14);
                    $penlo12 = $querylo14->row();
                    $pen_lo_lalu12 = $penlo12->nilai;
                    $pen_lo_lalu121= number_format($penlo12->nilai,"2",",",".");
		
		$sqllo15="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('93') and kd_skpd='$kd_skpd'";
                    $querylo15= $this->db->query($sqllo15);
                    $bello13 = $querylo15->row();
                    $bel_lo13 = $bello13->nilai;
                    $bel_lo131= number_format($bello13->nilai,"2",",",".");
		
		$sqllo16="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('93') and kd_skpd='$kd_skpd'";
                    $querylo16= $this->db->query($sqllo16);
                    $bello14 = $querylo16->row();
                    $bel_lo_lalu14 = $bello14->nilai;
                    $bel_lo_lalu141= number_format($bello14->nilai,"2",",",".");		

					$surplus_lo4 = $pen_lo11 - $bel_lo13;
                    if ($surplus_lo4 < 0){
                    	$lo19="("; $surplus_lo4x=$surplus_lo4*-1; $lo20=")";}
                    else {
                    	$lo19=""; $surplus_lo4x=$surplus_lo4; $lo20="";}		
                    $surplus_lo41 = number_format($surplus_lo4x,"2",",",".");
                    
					$surplus_lo_lalu4 = $pen_lo_lalu12 - $bel_lo_lalu14;
                    if ($surplus_lo_lalu4 < 0){
                    	$lo21="("; $surplus_lo_lalu4x=$surplus_lo_lalu4*-1; $lo22=")";}
                    else {
                    	$lo21=""; $surplus_lo_lalu4x=$surplus_lo_lalu4; $lo22="";}						
                    $surplus_lo_lalu41 = number_format($surplus_lo_lalu4x,"2",",",".");

					$selisih_surplus_lo4 = $surplus_lo4 - $surplus_lo_lalu4;
                    if ($selisih_surplus_lo4 < 0){
                    	$lo23="("; $selisih_surplus_lo4x=$selisih_surplus_lo4*-1; $lo24=")";}
                    else {
                    	$lo23=""; $selisih_surplus_lo4x=$selisih_surplus_lo4; $lo24="";}
                    $selisih_surplus_lo41 = number_format($selisih_surplus_lo4x,"2",",",".");
                    
					if( $surplus_lo_lalu4=='' or $surplus_lo_lalu4==0){
					$persen5 = '0,00';
					}else{
					$persen5 = ($surplus_lo4/$surplus_lo_lalu4)*100;
					$persen5 = number_format($persen5,"2",",",".");
					}
					
					
		$sqllo17="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('85') and kd_skpd='$kd_skpd'";
                    $querylo17= $this->db->query($sqllo17);
                    $penlo15 = $querylo17->row();
                    $pen_lo15 = $penlo15->nilai;
                    $pen_lo151= number_format($penlo15->nilai,"2",",",".");
        
		$sqllo18="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('85') and kd_skpd='$kd_skpd'";
                    $querylo18= $this->db->query($sqllo18);
                    $penlo16 = $querylo18->row();
                    $pen_lo_lalu16 = $penlo16->nilai;
                    $pen_lo_lalu161= number_format($penlo16->nilai,"2",",",".");
		
		$sqllo19="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and left(kd_rek5,2) in ('94') and kd_skpd='$kd_skpd'";
                    $querylo19= $this->db->query($sqllo19);
                    $bello17 = $querylo19->row();
                    $bel_lo17 = $bello17->nilai;
                    $bel_lo171= number_format($bello17->nilai,"2",",",".");
		
		$sqllo20="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('94') and kd_skpd='$kd_skpd'";
                    $querylo20= $this->db->query($sqllo20);
                    $bello18 = $querylo20->row();
                    $bel_lo_lalu18 = $bello18->nilai;
                    $bel_lo_lalu181= number_format($bello18->nilai,"2",",",".");		

					$surplus_lo5 = $pen_lo15 - $bel_lo17;
                    if ($surplus_lo5 < 0){
                    	$lo25="("; $surplus_lo5x=$surplus_lo5*-1; $lo26=")";}
                    else {
                    	$lo25=""; $surplus_lo5x=$surplus_lo5; $lo26="";}		
                    $surplus_lo51 = number_format($surplus_lo5x,"2",",",".");
                    
					$surplus_lo_lalu5 = $pen_lo_lalu16 - $bel_lo_lalu18;
                    if ($surplus_lo_lalu5 < 0){
                    	$lo27="("; $surplus_lo_lalu5x=$surplus_lo_lalu5*-1; $lo28=")";}
                    else {
                    	$lo27=""; $surplus_lo_lalu5x=$surplus_lo_lalu5; $lo28="";}						
                    $surplus_lo_lalu51 = number_format($surplus_lo_lalu5x,"2",",",".");

					$selisih_surplus_lo5 = $surplus_lo5 - $surplus_lo_lalu5;
                    if ($selisih_surplus_lo5 < 0){
                    	$lo29="("; $selisih_surplus_lo5x=$selisih_surplus_lo5*-1; $lo30=")";}
                    else {
                    	$lo29=""; $selisih_surplus_lo5x=$selisih_surplus_lo5; $lo30="";}
                    $selisih_surplus_lo51 = number_format($selisih_surplus_lo5x,"2",",",".");
                    
					if( $surplus_lo_lalu5=='' or $surplus_lo_lalu5==0){
					$persen6 = '0,00';
					}else{
					$persen6 = ($surplus_lo5/$surplus_lo_lalu5)*100;
					$persen6 = number_format($persen6,"2",",",".");
					}			
					
		
        $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);

        $cRet='';
        
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
						<td align=\"center\"><strong>$nm_skpd</strong></td>
					</tr>	
                    <tr>
                         <td align=\"center\"><strong>LAPORAN OPERASIONAL </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\">&nbsp;</td>
                    </tr>
                  </table>";        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\" ><b>Kenaikan</br>(Penurunan)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                        </tr>";

        $sqlmaplo="SELECT seq, nor, uraian, isnull(kode_1,'-') as kode_1, isnull(kode_2,'-') as kode_2, isnull(kode_3,'-') as kode_3, isnull(cetak,'debet-debet') as cetak FROM map_lo_prov 
				   GROUP BY seq, nor, uraian, isnull(kode_1,'-'), isnull(kode_2,'-'), isnull(kode_3,'-'), isnull(cetak,'debet-debet') ORDER BY seq";
				   
                $querymaplo = $this->db->query($sqlmaplo);
                $no     = 0;                                  
               
                foreach ($querymaplo->result() as $loquery)
                {
                    
                    $nama      = $loquery->uraian;   
                    $n         = $loquery->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$n2        = $loquery->kode_2;
					$n2		   = ($n2=="-"?"'-'":$n2);
					$n3        = $loquery->kode_3;
					$n3		   = ($n3=="-"?"'-'":$n3);
					$normal    = $loquery->cetak;
					
		$quelo01   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE (left(kd_rek5,3) in ($n) or left(kd_rek5,5) in ($n2) or left(kd_rek5,7) in ($n3)) and year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$cbulan and kd_skpd='$kd_skpd'";
                    $quelo02 = $this->db->query($quelo01);
                    $quelo03 = $quelo02->row();
                    $nil     = $quelo03->nilai;
                    $nilai    = number_format($quelo03->nilai,"2",",",".");
					
		$quelo04   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE (left(kd_rek5,3) in ($n) or left(kd_rek5,5) in ($n2) or left(kd_rek5,7) in ($n3)) and year(tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";
                    $quelo05 = $this->db->query($quelo04);
                    $quelo06 = $quelo05->row();
                    $nil_lalu     = $quelo06->nilai;
                    $nilai_lalu    = number_format($quelo06->nilai,"2",",",".");
					
                    $real_nilai = $nil - $nil_lalu;
                    if ($real_nilai < 0){
                    	$lo0="("; $real_nilaix=$real_nilai*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai; $lo00="";}
                    $real_nilai1 = number_format($real_nilaix,"2",",",".");
                    
					if( $nil_lalu=='' or $nil_lalu==0){
					$persen1 = '0,00';
					}else{
					$persen1 = ($nil/$nil_lalu)*100;
					$persen1 = number_format($persen1,"2",",",".");
					}
                    $no       = $no + 1;
                    switch ($loquery->seq) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 40:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 45:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;	
                    case 50:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 85:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 140:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 145:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 150:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 200:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 205:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 245:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 250:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo1$surplus_lo1$lo2</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo3$surplus_lo_lalu1$lo4</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo5$selisih_surplus_lo1$lo6</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen2</td>
                                 </tr>";
                        break;
					case 255:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 260:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 265:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 290:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 295:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 325:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 330:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo7$surplus_lo21$lo8</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo9$surplus_lo_lalu21$lo10</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo11$selisih_surplus_lo21$lo12</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen3</td>
                                 </tr>";
                        break;
					case 335:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 340:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 345:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 360:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 365:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 390:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo13$surplus_lo31$lo14</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo15$surplus_lo_lalu31$lo16</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo17$selisih_surplus_lo31$lo18</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen4</td>
                                 </tr>";
                        break;
					default:
                    $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"40%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"right\">$persen1</td>
                                 </tr>";

                }
                              
                    
                }
               
              
       // $cRet         .= "</table>";
//        $data['prev']  = $cRet;
//        $data['sikap'] = 'preview';
//        
//        
//        
//        $this->template->set('title', 'LAPORAN OPERASIONAL'); 
//        $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
        //$this->template->load('template','anggaran/rka/perkadaII',$data); 
        
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LO KONSOL UNIT $cbulan");
        $this->template->set('title', 'LO KONSOL UNIT $cbulan');        
        switch($pilih) {       
        case 1;
            // $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
			echo "<title>LO KONSOL UNIT $cbulan</title>";
			echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
        
                 
    }
    
	
    function lampiran_II()
    {
        $data['page_title'] = 'REALISASI';
        $this->template->set('title', 'REALISASI');
        $this->template->load('template', 'akuntansi/perda_real_ii', $data);
    }

    function cetak_perdaII_real($cetak = 0)
    {
        //$cetak =   $this->uri->segment(3);
        $sqlsc = "SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
        $sqlsclient = $this->db->query($sqlsc);
        foreach ($sqlsclient->result() as $rowsc)
        {
            $tgl = $rowsc->tgl_rka;
            $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
            $kab = $rowsc->kab_kota;
            $daerah = $rowsc->daerah;
            $thn = $rowsc->thn_ang;
        }

        $cRet = '';
        if ($cetak <> 0)
        {
            $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td rowspan=\"3\" align=\"left\" width=\"60%\"><strong></strong></td>
                         <td rowspan=\"3\" valign =\"top\" align=\"left\" width=\"10%\"><strong><h5>LAMPIRAN II  :</h6></strong></td>
                         <td colspan=\"2\" align=\"left\" width=\"30%\"><strong><h5>PERATURAN DAERAH</strong></h5></td>
                    </tr>
                    <tr> 
                         <td align=\"left\" width=\"10%\"><h5>NOMOR</h5></td><td width=\"20%\" align=\"left\" ><h5>:</h5></td>
                    </tr>
                    <tr>
                        <td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"10%\"><h5>TANGGAL</h5></td><td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"20%\"><h5>:</h5></td>
                    </tr>
                                         
                   
                  </table>";
        }
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\" width=\"100%\"><strong>$kab</strong></td>
                         
                    </tr>
                    <tr>
                         <td align=\"center\" width=\"100%\"><strong>REALISASI APBD </strong></td>
                    </tr>
                    
                    <tr>
                         <td align=\"center\" width=\"100%\"><strong>TAHUN ANGARAN $thn</strong></td>
                    </tr>

                  </table>";

        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>KODE</b></td>                            
                            <td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\"><b>URUSAN PEMERINTAH DAERAH</b></td>
                            <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" bgcolor=\"#CCCCCC\" width=\"26%\" align=\"center\" colspan=\"4\"><b>PENDAPATAN</b></td>
                            <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" bgcolor=\"#CCCCCC\" width=\"54%\" align=\"center\" colspan=\"8\"><b>BELANJA</b></td>
                        </tr>
                        <tr>
 		                    <td rowspan=\"2\" width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">SETELAH<br>PERUBAHAN</td>
                            <td rowspan=\"2\" width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">REALISASI</td>
                            <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" colspan=\"2\" width=\"12%\" bgcolor=\"#CCCCCC\" align=\"center\">LEBIH(KURANG)</td>
                            <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\"colspan=\"3\" width=\"21%\" bgcolor=\"#CCCCCC\" align=\"center\">SETELAH PERUBAHAN</td>
                            <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\"colspan=\"3\" width=\"21%\" bgcolor=\"#CCCCCC\" align=\"center\">REALISASI</td>
                            <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\"colspan=\"2\" width=\"12%\" bgcolor=\"#CCCCCC\" align=\"center\">LEBIH</br>(KURANG)</td>
                        </tr>
                        <tr>
                             <td bgcolor=\"#CCCCCC\" width=\"7%\" align=\"center\" >(RP.)</td>
                             <td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" >%</td>
                             <td bgcolor=\"#CCCCCC\" width=\"7%\" align=\"center\" >Tidak Langsung</td>
                             <td bgcolor=\"#CCCCCC\" width=\"7%\" align=\"center\" >Langsung</td>
                             <td bgcolor=\"#CCCCCC\" width=\"7%\" align=\"center\" >Jumlah</td>
                             <td bgcolor=\"#CCCCCC\" width=\"7%\" align=\"center\" >Tidak Langsung</td>
                             <td bgcolor=\"#CCCCCC\" width=\"7%\" align=\"center\" >Langsung</td>
                             <td bgcolor=\"#CCCCCC\" width=\"7%\" align=\"center\" >Jumlah</td>
                             <td bgcolor=\"#CCCCCC\" width=\"7%\" align=\"center\" >(RP.)</td>
                             <td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" >%</td>
                        </tr>    
                     </thead>
                    
                     
                        <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" >&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                        </tr>
                        ";
        $sql1 = "SELECT * FROM (SELECT a.kd_urusan1 AS kode, a.nm_urusan1 AS nama,a.kd_urusan1 AS urut,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,1)='4' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS nilai_4,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,1)='4' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS cp_4,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,1)='4' AND LEFT(d.kd_skpd,1)=a.kd_urusan1) AS debet_4,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,1)='4' AND LEFT(d.kd_skpd,1)=a.kd_urusan1) AS kredit_4,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,2)='51' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS btl,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,2)='52' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS bl,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,1)='5' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS jumlah,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='51' AND LEFT(d.kd_skpd,1)=a.kd_urusan1) AS debet_btl,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='51' AND LEFT(d.kd_skpd,1)=a.kd_urusan1) AS kredit_btl,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,2)='51' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS cp_btl,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='52' AND LEFT(d.kd_skpd,1)=a.kd_urusan1) AS debet_bl,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='52' AND LEFT(d.kd_skpd,1)=a.kd_urusan1) AS kredit_bl,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,2)='52' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS cp_bl FROM trdrka b
                        RIGHT JOIN ms_urusan1 a ON LEFT(b.kd_skpd,1)=a.kd_urusan1 GROUP BY  a.kd_urusan1 ,a.nm_urusan1
                        UNION
                        SELECT a.kd_urusan AS kode, a.nm_urusan AS nama,a.kd_urusan AS urut,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,1)='4' AND LEFT(kd_skpd,4)=a.kd_urusan) AS nilai_4,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,1)='4' AND LEFT(kd_skpd,4)=a.kd_urusan) AS cp_4,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,1)='4' AND LEFT(d.kd_skpd,4)=a.kd_urusan) AS debet_4,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,1)='4' AND LEFT(d.kd_skpd,4)=a.kd_urusan) AS kredit_4,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,2)='51' AND LEFT(kd_skpd,4)=a.kd_urusan) AS btl,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,2)='52' AND LEFT(kd_skpd,4)=a.kd_urusan) AS bl,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,1)='5' AND LEFT(kd_skpd,4)=a.kd_urusan) AS jumlah,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='51' AND LEFT(d.kd_skpd,4)=a.kd_urusan) AS debet_btl,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='51' AND LEFT(d.kd_skpd,4)=a.kd_urusan) AS kredit_btl,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,2)='51' AND LEFT(kd_skpd,4)=a.kd_urusan) AS cp_btl,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='52' AND LEFT(d.kd_skpd,4)=a.kd_urusan) AS debet_bl,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='52' AND LEFT(d.kd_skpd,4)=a.kd_urusan) AS kredit_bl,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,2)='52' AND LEFT(kd_skpd,4)=a.kd_urusan) AS cp_bl FROM trdrka b
                        RIGHT JOIN ms_urusan a ON LEFT(b.kd_skpd,4)=a.kd_urusan WHERE LENGTH(kd_urusan) <> '1' GROUP BY  a.kd_urusan ,a.nm_urusan
                        UNION
                        SELECT a.kd_skpd AS kode, a.nm_skpd AS nama,a.kd_skpd AS urut,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,1)='4' AND kd_skpd=a.kd_skpd) AS nilai_4,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,1)='4' AND kd_skpd=a.kd_skpd) AS cp_4,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,1)='4' AND d.kd_skpd=a.kd_skpd) AS debet_4,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,1)='4' AND d.kd_skpd=a.kd_skpd) AS kredit_4,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,2)='51' AND kd_skpd=a.kd_skpd) AS btl,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,2)='52' AND kd_skpd=a.kd_skpd) AS bl,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,1)='5' AND  kd_skpd=a.kd_skpd) AS jumlah,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='51' AND d.kd_skpd=a.kd_skpd) AS debet_btl,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='51' AND d.kd_skpd=a.kd_skpd) AS kredit_btl,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,2)='51' AND kd_skpd=a.kd_skpd) AS cp_btl,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='52' AND d.kd_skpd=a.kd_skpd) AS debet_bl,
                        (SELECT SUM(kredit) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher=d.no_voucher WHERE LEFT(c.kd_rek5,2)='52' AND d.kd_skpd=a.kd_skpd) AS kredit_bl,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,2)='52' AND kd_skpd=a.kd_skpd) AS cp_bl FROM trdrka b
                        RIGHT JOIN ms_skpd a ON a.kd_skpd=b.kd_skpd GROUP BY a.kd_skpd,a.nm_skpd
                        UNION
                        SELECT '' AS kode, 'JUMLAH' AS nama,'JUMLAH' AS urut,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,1)='4') AS nilai_4,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,1)='4') AS cp_4,
                        (SELECT SUM(debet) FROM trdju_pkd  WHERE LEFT(kd_rek5,1)='4' ) AS debet_4,
                        (SELECT SUM(kredit) FROM trdju_pkd WHERE LEFT(kd_rek5,1)='4' ) AS kredit_4,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,2)='51' ) AS btl,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,2)='52' ) AS bl,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_rek5,1)='5' ) AS jumlah,
                        (SELECT SUM(debet) FROM trdju_pkd WHERE LEFT(kd_rek5,2)='51' ) AS debet_btl,
                        (SELECT SUM(kredit) FROM trdju_pkd WHERE LEFT(kd_rek5,2)='51') AS kredit_btl,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,2)='51' ) AS cp_btl,
                        (SELECT SUM(debet) FROM trdju_pkd WHERE LEFT(kd_rek5,2)='52' ) AS debet_bl,
                        (SELECT SUM(kredit) FROM trdju_pkd WHERE LEFT(kd_rek5,2)='52' ) AS kredit_bl,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd WHERE LEFT(kd_rek5,2)='52' ) AS cp_bl FROM trdrka b
                        RIGHT JOIN ms_urusan1 a ON LEFT(b.kd_skpd,1)=a.kd_urusan1 GROUP BY  a.kd_urusan1 ,a.nm_urusan1) a ORDER BY a.urut
";

        $query = $this->db->query($sql1);
        foreach ($query->result() as $row)
        {
            $kode = $row->kode;
            $nama = $row->nama;
            $ang_4 = $row->nilai_4;
            $in = $row->cp_4;
            $indebet = $row->debet_4;
            $inkredit = $row->kredit_4;
            $real_4 = ($in + $inkredit) - $indebet;
            $pend = number_format($ang_4, "2", ",", ".");
            $pend_real = number_format($real_4, "2", ",", ".");
            $selisih_4 = $real_4 - $ang_4;
            if ($selisih_4 < 0)
            {
                $x = "(";
                $selisih_4 = $selisih_4 * -1;
                $y = ")";
            } else
            {
                $x = "";
                $y = "";
            }
            $sel_4 = number_format($selisih_4, "2", ",", ".");
            $per_4 = ($selisih_4 != 0) ? ($selisih_4 / $ang_4) * 100 : 0;
            $persen_4 = number_format($per_4);

            $ang_51 = $row->btl;
            $btlcp = $row->cp_btl;
            $debet_btl = $row->debet_btl;
            $kredit_btl = $row->kredit_btl;
            $real_btl = $debet_btl - ($btlcp + $kredit_btl);
            $ang_52 = $row->bl;
            $blcp = $row->cp_bl;
            $debet_bl = $row->debet_bl;
            $kredit_bl = $row->kredit_bl;
            $real_bl = $debet_bl - ($blcp + $kredit_bl);
            $jum_5 = $ang_51 + $ang_52;
            $jum_5_real = $real_btl + $real_bl;
            $btl = number_format($ang_51, "2", ",", ".");
            $bl = number_format($ang_52, "2", ",", ".");
            $jum = number_format($jum_5, "2", ",", ".");
            $btl_real = number_format($real_btl, "2", ",", ".");
            $bl_real = number_format($real_bl, "2", ",", ".");
            $jum_real = number_format($jum_5_real, "2", ",", ".");
            $selisih_5 = $jum_5_real - $jum_5;
            if ($selisih_5 < 0)
            {
                $x1 = "(";
                $selisih_5 = $selisih_5 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $sel_5 = number_format($selisih_5, "2", ",", ".");
            $per_5 = ($selisih_5 != 0) ? ($selisih_5 / $jum_5) * 100 : 0;
            $persen_5 = number_format($per_5);

            $cRet .= "<tr>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"left\" width=\"5%\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"left\" width=\"15%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$pend</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$pend_real</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$x$sel_4$y</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"5%\">$persen_4</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$btl</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$bl</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$jum</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$btl_real</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$bl_real</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$jum_real</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"7%\">$x1$sel_5$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" align=\"right\" width=\"5%\">$persen_5</td>
                                </tr>
                                     ";


        }

        $cRet .= " </table>";
        $judul = 'Laporan Realisasi APBD  Lamp II';
        $data['prev'] = $cRet;
        $this->template->set('title', 'CETAK PERDA REALISASI LAMPIRAN II');
        switch ($cetak)
        {
            case 1;
                $this->tukd_model->_mpdf('', $cRet, 10, 10, 10, 'L');
                break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
    }

    function lampiran_III()
    {
        $data['page_title'] = 'REALISASI';
        $this->template->set('title', 'REALISASI');
        $this->template->load('template', 'akuntansi/perda_real_iii', $data);
    }

    function cetak_perdaIII_real($skpd = '', $cetak = '')
    {
        $cetak = $cetak;
        $id = $skpd;
        $sqldns = "SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
        $sqlskpd = $this->db->query($sqldns);
        foreach ($sqlskpd->result() as $rowdns)
        {

            $kd_urusan = $rowdns->kd_u;
            $nm_urusan = $rowdns->nm_u;
            $kd_skpd = $rowdns->kd_sk;
            $nm_skpd = $rowdns->nm_sk;
        }

        $sqlsc = "SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
        $sqlsclient = $this->db->query($sqlsc);
        foreach ($sqlsclient->result() as $rowsc)
        {

            $tgl = $rowsc->tgl_rka;
            $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
            $kab = $rowsc->kab_kota;
            $daerah = $rowsc->daerah;
            $thn = $rowsc->thn_ang;
        }


        $cRet = '';
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>$kab</strong></td>
                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>RINGKASAN REALISASI APBD </strong></td>
                    </tr>
                    
                    <tr>
                         <td align=\"center\"><strong>TAHUN ANGARAN $thn</strong></td>
                    </tr>

                  </table>";
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"left\" border=\"0\">
                    <tr>
                        <td width=\"20%\">Urusan Organisasi </td>
                        <td width=\"80%\">:$kd_urusan - $nm_urusan</td>
                    </tr>
                    <tr>
                        <td>Organisasi</td>
                        <td>:$kd_skpd - $nm_skpd</td>
                    </tr>";

        $cRet .= "</table>";

        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\"><b>Kode Rekening</b></td>                            
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"26%\" align=\"center\"><b>Uraian</b></td>                            
                            <td colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"28%\" align=\"center\"><b>Jumlah (Rp.)</b></td>
                            <td colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"16%\" align=\"center\"><b>Bertambah/ (berkurang)</b></td>
                            <td  rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"13%\" align=\"center\"><b>Dasar Hukum</b></td>                            
                            </tr>
                        <tr>
 		                     <td width=\"13%\" bgcolor=\"#CCCCCC\" align=\"center\">Anggaran </td>
                             <td width=\"13%\" bgcolor=\"#CCCCCC\" align=\"center\">Realisasi</td>
                             <td width=\"13%\" bgcolor=\"#CCCCCC\" align=\"center\">Jumlah</td>
                             <td width=\"3%\" bgcolor=\"#CCCCCC\" align=\"center\">%</td>
                             
                        </tr>    
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>  
                            <td style=\"border-top: none;\"></td>
                                                                                   
                         </tr>
                     </tfoot>
                    
                     
                        <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"26%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"3%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"14%\">&nbsp;</td>
                            </tr>
                        ";


        $sql_p = "SELECT * FROM (SELECT a.kd_kegiatan AS kd_rek,c.nm_kegiatan AS nm_rek,SUM(b.nilai)AS nilai,SUM(b.nilai_ubah)AS nilai_u,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd g INNER JOIN trhkasin_pkd h ON g.no_sts = h.no_sts WHERE h.kd_skpd='$id' AND h.kd_kegiatan = a.kd_kegiatan ) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd i  INNER JOIN trhju_pkd j ON i.no_voucher = j.no_voucher  WHERE j.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan ) AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd k  INNER JOIN trhju_pkd l ON k.no_voucher = l.no_voucher WHERE l.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan ) AS kredit,'2' AS nu FROM trskpd a INNER JOIN m_giat c ON a.kd_kegiatan1=c.kd_kegiatan
                        LEFT JOIN trdrka b ON a.kd_kegiatan=b.kd_kegiatan WHERE a.kd_skpd='$id' AND RIGHT(a.kd_kegiatan,5) ='00.01' GROUP BY a.kd_kegiatan,c.nm_kegiatan
                        UNION ALL 
                        SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek2 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE  g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE  h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'3' AS nu FROM trdrka a INNER JOIN ms_rek2 b 
                        ON LEFT(a.kd_rek5,2)=b.kd_rek2 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,24)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,1)='4' GROUP BY SUBSTR(a.no_trdrka,12,25)) a ORDER BY kd_rek,nu ";

        $pend = $this->db->query($sql_p);
        //$query = $this->skpd_model->getAllc();

        foreach ($pend->result() as $row)
        {
            $kode = $row->kd_rek;
            $nama = $row->nm_rek;
            $ang = number_format($row->nilai_u, "2", ".", ",");
            $angaran = $row->nilai_u;
            $pen = $row->cp;
            $debet = $row->debet;
            $kredit = $row->kredit;
            $real = ($pen + $kredit) - $debet;
            $nreal = number_format($real, "2", ".", ",");
            $real_s = $real - $angaran;
            if ($real_s < 0)
            {
                $x1 = "(";
                $real_s = $real_s * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisih = number_format($real_s, "2", ".", ",");
            $per1 = ($real_s != 0) ? ($real_s / $row->nilai_u) * 100 : 0;
            $persen1 = number_format($per1);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$pend_selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen1</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"left\"></td>
                                     </tr>
                                     ";


        }

        $sqltp = "SELECT SUM(a.nilai) AS totp,SUM(a.nilai_ubah) AS totp_u, 
                        (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,1)='4' AND a.kd_skpd='$id') AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,1)='4' AND d.kd_skpd='$id') AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,1)='4' AND f.kd_skpd='$id') AS kredit FROM trdrka a
                         WHERE LEFT(kd_rek5,1)='4' AND kd_skpd='$id'";


        $sqlp = $this->db->query($sqltp);
        foreach ($sqlp->result() as $rowp)
        {
            $angp = number_format($rowp->totp_u, "2", ".", ",");
            $angaranp = $rowp->totp_u;
            $penp = $rowp->cp;
            $debetp = $rowp->debet;
            $kreditp = $rowp->kredit;
            $realp = ($penp + $kreditp) - $debetp;
            $nrealp = number_format($realp, "2", ".", ",");
            $real_sp = $realp - $angaranp;
            if ($real_sp < 0)
            {
                $x1 = "(";
                $real_sp = $real_sp * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $pend_selisihp = number_format($real_sp, "2", ".", ",");
            $per1p = ($real_sp != 0) ? ($real_sp / $rowp->totp_u) * 100 : 0;
            $persen1p = number_format($per1p);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Jumlah Pendapatan Daerah</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$angp</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nrealp</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$pend_selisihp$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen1p</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        }


        $sqltb = "SELECT SUM(a.nilai) AS totb,SUM(a.nilai_ubah) AS totb_u, 
            (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,1)='5' AND a.kd_skpd='$id' ) AS cp,
            (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,1)='5' AND d.kd_skpd='$id' ) AS debet,
            (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,1)='5' AND f.kd_skpd='$id' ) AS kredit FROM trdrka a
            WHERE LEFT(kd_rek5,1)='5' AND kd_skpd='$id'";

        $sqlb = $this->db->query($sqltb);
        foreach ($sqlb->result() as $rowb_5)
        {
            $ang_5 = number_format($rowb_5->totb_u, "2", ".", ",");
            $angaran_5 = $rowb_5->totb_u;
            $in_5 = $rowb_5->cp;
            $debet_5 = $rowb_5->debet;
            $kredit_5 = $rowb_5->kredit;
            $real_5 = $debet_5 - ($in_5 + $kredit_5);
            $nreal_5 = number_format($real_5, "2", ".", ",");
            $real_s_5 = $real_5 - $angaran_5;
            if ($real_s_5 < 0)
            {
                $x1 = "(";
                $real_s_5 = $real_s_5 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_5 = number_format($real_s_5, "2", ".", ",");
            $per_5 = ($real_s_5 != 0) ? ($real_s_5 / $rowb_5->totb_u) * 100 : 0;
            $persen_5 = number_format($per_5);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Belanja Daerah</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_5$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_5</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";


        }

        $sqltbtl = "SELECT SUM(a.nilai) AS totb,SUM(a.nilai_ubah) AS totb_u, 
                            (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='51' AND a.kd_skpd='$id' ) AS cp,
                            (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='51' AND d.kd_skpd='$id' ) AS debet,
                            (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='51' AND f.kd_skpd='$id' ) AS kredit FROM trdrka a
                            WHERE LEFT(kd_rek5,2)='51' AND kd_skpd='$id'";


        $sqlbtl = $this->db->query($sqltbtl);
        foreach ($sqlbtl->result() as $rowbtl)
        {
            $ang_51 = number_format($rowbtl->totb_u, "2", ".", ",");
            $angaran_51 = $rowbtl->totb_u;
            $in_51 = $rowbtl->cp;
            $debet_51 = $rowbtl->debet;
            $kredit_51 = $rowbtl->kredit;
            $real_51 = $debet_51 - ($in_51 + $kredit_51);
            $nreal_51 = number_format($real_51, "2", ".", ",");
            $real_s_51 = $real_51 - $angaran_51;
            if ($real_s_51 < 0)
            {
                $x1 = "(";
                $real_s_51 = $real_s_51 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_51 = number_format($real_s_51, "2", ".", ",");
            $per_51 = ($real_s_51 != 0) ? ($real_s_51 / $rowbtl->totb_u) * 100 : 0;
            $persen_51 = number_format($per_51);


        }


        $sql_btl = "SELECT * FROM (SELECT a.kd_kegiatan AS kd_rek,c.nm_kegiatan AS nm_rek,SUM(b.nilai)AS nilai,SUM(b.nilai_ubah)AS nilai_u,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd g INNER JOIN trhkasin_pkd h ON g.no_sts = h.no_sts WHERE h.kd_skpd='$id' AND h.kd_kegiatan = a.kd_kegiatan ) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd i  INNER JOIN trhju_pkd j ON i.no_voucher = j.no_voucher  WHERE j.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan ) AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd k  INNER JOIN trhju_pkd l ON k.no_voucher = l.no_voucher WHERE l.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan ) AS kredit,'2' AS nu FROM trskpd a INNER JOIN m_giat c ON a.kd_kegiatan1=c.kd_kegiatan
                        LEFT JOIN trdrka b ON a.kd_kegiatan=b.kd_kegiatan WHERE a.kd_skpd='$id' AND RIGHT(a.kd_kegiatan,5) ='00.02' GROUP BY a.kd_kegiatan,c.nm_kegiatan
                        UNION ALL 
                        SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='51' GROUP BY SUBSTR(a.no_trdrka,12,25)) a ORDER BY kd_rek,nu";

        $btl = $this->db->query($sql_btl);

        foreach ($btl->result() as $row_btl)
        {
            $kode = $row_btl->kd_rek;
            $nama = $row_btl->nm_rek;
            $ang_511 = number_format($row_btl->nilai_u, "2", ".", ",");
            $angaran_511 = $row_btl->nilai_u;
            $in_511 = $row_btl->cp;
            $debet_511 = $row_btl->debet;
            $kredit_511 = $row_btl->kredit;
            $real_511 = $debet_511 - ($in_511 + $kredit_511);
            $nreal_511 = number_format($real_511, "2", ".", ",");
            $real_s_511 = $real_511 - $angaran_511;
            if ($real_s_511 < 0)
            {
                $x1 = "(";
                $real_s_511 = $real_s_511 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_511 = number_format($real_s_511, "2", ".", ",");
            $per_511 = ($real_s_511 != 0) ? ($real_s_511 / $row_btl->nilai_u) * 100 : 0;
            $persen_511 = number_format($per_511);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_511</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_511</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_511$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_511</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"left\"></td>
                                     </tr>
                                     ";


        }
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";


        $sqltbl = "SELECT SUM(a.nilai) AS totbl,SUM(a.nilai_ubah) AS totbl_u, 
                        (SELECT SUM(rupiah) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='52' AND a.kd_skpd='$id') AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='52' AND d.kd_skpd='$id') AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='52' AND f.kd_skpd='$id') AS kredit FROM trdrka a
                        WHERE LEFT(kd_rek5,2)='52' AND kd_skpd='$id'";

        $sqlbl = $this->db->query($sqltbl);
        foreach ($sqlbl->result() as $rowbl)
        {
            $ang_52 = number_format($rowbl->totbl_u, "2", ".", ",");
            $angaran_52 = $rowbl->totbl_u;
            $in_52 = $rowbl->cp;
            $debet_52 = $rowbl->debet;
            $kredit_52 = $rowbl->kredit;
            $real_52 = $debet_52 - ($in_52 + $kredit_52);
            $nreal_52 = number_format($real_52, "2", ".", ",");
            $real_s_52 = $real_52 - $angaran_52;
            if ($real_s_52 < 0)
            {
                $x1 = "(";
                $real_s_52 = $real_s_52 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_52 = number_format($real_s_51, "2", ".", ",");
            $per_52 = ($real_s_5 != 0) ? ($real_s_51 / $rowbl->totbl_u) * 100 : 0;
            $persen_52 = number_format($per_52);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Belanja Langsung</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_52</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_52</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_52$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_52</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        }
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";


        $sql_bl = "SELECT * FROM (SELECT a.kd_program AS kd_rek, c.nm_program AS nm_rek,(SELECT SUM(nilai) FROM trdrka WHERE LEFT(kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program) AS nilai,
                        (SELECT SUM(nilai_ubah) FROM trdrka WHERE LEFT(kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program) AS nilai_u,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd g INNER JOIN trhkasin_pkd h ON g.no_sts = h.no_sts WHERE h.kd_skpd='$id' AND LEFT(h.kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program ) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd i  INNER JOIN trhju_pkd j ON i.no_voucher = j.no_voucher  WHERE j.kd_skpd='$id' AND LEFT(i.kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program ) AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd k  INNER JOIN trhju_pkd l ON k.no_voucher = l.no_voucher WHERE l.kd_skpd='$id' AND LEFT(k.kd_kegiatan,(LENGTH(a.kd_program))) = a.kd_program ) AS kredit,'1' AS nu FROM trskpd a INNER JOIN m_prog c ON a.kd_program1=c.kd_program
                        LEFT JOIN trdrka b ON a.kd_program=LEFT(b.kd_kegiatan,(LENGTH(a.kd_program))) WHERE a.kd_skpd='$id' AND RIGHT(a.kd_program,2) <>'00' GROUP BY a.kd_program,c.nm_program 
                        UNION ALL
                        SELECT a.kd_kegiatan AS kd_rek,c.nm_kegiatan AS nm_rek,SUM(b.nilai)AS nilai,SUM(b.nilai_ubah)AS nilai_u,
                        (SELECT SUM(rupiah) FROM trdkasin_pkd g INNER JOIN trhkasin_pkd h ON g.no_sts = h.no_sts WHERE h.kd_skpd='$id' AND h.kd_kegiatan = a.kd_kegiatan ) AS cp,
                        (SELECT SUM(debet) FROM trdju_pkd i  INNER JOIN trhju_pkd j ON i.no_voucher = j.no_voucher  WHERE j.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan ) AS debet,
                        (SELECT SUM(kredit) FROM trdju_pkd k  INNER JOIN trhju_pkd l ON k.no_voucher = l.no_voucher WHERE l.kd_skpd='$id' AND kd_kegiatan = a.kd_kegiatan ) AS kredit,'2' AS nu FROM trskpd a INNER JOIN m_giat c ON a.kd_kegiatan1=c.kd_kegiatan
                        LEFT JOIN trdrka b ON a.kd_kegiatan=b.kd_kegiatan WHERE a.kd_skpd='$id' AND RIGHT(a.kd_program,2) <>'00' GROUP BY a.kd_kegiatan,c.nm_kegiatan
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek2 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'3' AS nu FROM trdrka a INNER JOIN ms_rek2 b 
                        ON LEFT(a.kd_rek5,2)=b.kd_rek2   
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,24)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE d.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3                   
                        WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='52' GROUP BY SUBSTR(a.no_trdrka,12,25)) a ORDER BY kd_rek,nu";


        $bl = $this->db->query($sql_bl);
        foreach ($bl->result() as $row_bl)
        {
            $kode = $row_bl->kd_rek;
            $nama = $row_bl->nm_rek;
            $ang_522 = number_format($row_bl->nilai_u, "2", ".", ",");
            $angaran_522 = $row_bl->nilai_u;
            $in_522 = $row_bl->cp;
            $debet_522 = $row_bl->debet;
            $kredit_522 = $row_bl->kredit;
            $real_522 = $debet_522 - ($in_522 + $kredit_522);
            $nreal_522 = number_format($real_522, "2", ".", ",");
            $real_s_522 = $real_522 - $angaran_522;
            if ($real_s_522 < 0)
            {
                $x1 = "(";
                $real_s_522 = $real_s_522 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_522 = number_format($real_s_522, "2", ".", ",");
            $per_522 = ($real_s_522 != 0) ? ($real_s_522 / $row_bl->nilai_u) * 100 : 0;
            $persen_522 = number_format($per_522);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_522</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_522</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_522$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_522</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"left\"></td>
                                     </tr>
                                     ";


        }
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";


        $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Belanja Daerah</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_5</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_5$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_5</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";


        $sqltpm = "SELECT SUM(IFNULL(a.nilai,0)) AS totbl,SUM(a.nilai_ubah) AS totbl_u, 
                        (SELECT SUM(IFNULL(rupiah,0)) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='61' AND a.kd_skpd='$id' ) AS cp,
                        (SELECT SUM(IFNULL(debet,0)) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='61' AND d.kd_skpd='$id' ) AS debet,
                        (SELECT SUM(IFNULL(kredit,0)) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='61' AND f.kd_skpd='$id' ) AS kredit FROM trdrka a
                        WHERE LEFT(kd_rek5,2)='61' AND kd_skpd='$id'";

        $sqlpm = $this->db->query($sqltpm);
        foreach ($sqlpm->result() as $rowpm)
        {
            $ang_61 = number_format($rowpm->totbl_u, "2", ".", ",");
            $angaran_61 = $rowpm->totbl_u;
            $in_61 = $rowpm->cp;
            $debet_61 = $rowpm->debet;
            $kredit_61 = $rowpm->kredit;
            $real_61 = $debet_61 - ($in_61 + $kredit_61);
            $nreal_61 = number_format($real_61, "2", ".", ",");
            $real_s_61 = $real_61 - $angaran_61;
            if ($real_s_61 < 0)
            {
                $x1 = "(";
                $real_s_61 = $real_s_61 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_61 = number_format($real_s_61, "2", ".", ",");
            $per_61 = ($real_s_61 != 0) ? ($real_s_61 / $rowpm->totbl_u) * 100 : 0;
            $persen_61 = number_format($per_61);
            //
            //                    $cRet    .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Pembiayaan Masuk</td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_61</td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_61</td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_61$y1</td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_61</td>
            //                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
            //                                     </tr>";
        }


        $sqlpm = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek2 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek2 b 
                        ON LEFT(a.kd_rek5,2)=b.kd_rek2 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,24)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='61' GROUP BY SUBSTR(a.no_trdrka,12,25) ) a ORDER BY kd_rek,nu";


        $sql611 = $this->db->query($sqlpm);
        foreach ($sql611->result() as $row_61)
        {
            $kd = $row_61->kd_rek;
            $nm = $row_61->nm_rek;
            $ang_611 = number_format($row_61->nilai_u, "2", ".", ",");
            $angaran_611 = $row_61->nilai_u;
            $in_611 = $row_61->cp;
            $debet_611 = $row_61->debet;
            $kredit_611 = $row_61->kredit;
            $real_611 = $debet_611 - ($in_611 + $kredit_611);
            $nreal_611 = number_format($real_611, "2", ".", ",");
            $real_s_611 = $real_611 - $angaran_611;
            if ($real_s_611 < 0)
            {
                $x1 = "(";
                $real_s_611 = $real_s_611 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_611 = number_format($real_s_611, "2", ".", ",");
            $per_611 = ($real_s_611 != 0) ? ($real_s_611 / $row_61->nilai_u) * 100 : 0;
            $persen_611 = number_format($per_611);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"15%\" align=\"left\">$kd</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"26%\">$nm</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$ang_611</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$nreal_611</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$x1$selisih_611$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"3%\" align=\"right\">$persen_611</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        }
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";

        $sqltpk = "SELECT SUM(IFNULL(a.nilai,0)) AS totbl,SUM(a.nilai_ubah) AS totbl_u, 
                        (SELECT SUM(IFNULL(rupiah,0)) FROM trdkasin_pkd a INNER JOIN trhkasin_pkd b ON a.no_sts=b.no_sts WHERE LEFT(a.kd_rek5,2)='62' AND a.kd_skpd='$id' ) AS cp,
                        (SELECT SUM(IFNULL(debet,0)) FROM trdju_pkd c INNER JOIN trhju_pkd d ON c.no_voucher = d.no_voucher WHERE LEFT(c.kd_rek5,2)='62' AND d.kd_skpd='$id' ) AS debet,
                        (SELECT SUM(IFNULL(kredit,0)) FROM trdju_pkd e INNER JOIN trhju_pkd f ON e.no_voucher = f.no_voucher WHERE LEFT(e.kd_rek5,2)='62' AND f.kd_skpd='$id' ) AS kredit FROM trdrka a
                        WHERE LEFT(kd_rek5,2)='62' AND kd_skpd='$id' ";

        $sqlpk = $this->db->query($sqltpk);
        foreach ($sqlpk->result() as $rowpk)
        {
            $ang_62 = number_format($rowpk->totbl_u, "2", ".", ",");
            $angaran_62 = $rowpk->totbl_u;
            //echo($angaran_62);
            $in_62 = $rowpk->cp;
            $debet_62 = $rowpk->debet;
            $kredit_62 = $rowpk->kredit;
            $real_62 = $debet_62 - ($in_62 + $kredit_62);
            $nreal_62 = number_format($real_62, "2", ".", ",");
            $real_s_62 = $real_62 - $angaran_62;
            if ($real_s_62 < 0)
            {
                $x1 = "(";
                $real_s_62 = $real_s_62 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_62 = number_format($real_s_62, "2", ".", ",");
            $per_62 = ($real_s_62 != 0) ? ($real_s_62 / $rowpk->totbl_u) * 100 : 0;
            $persen_62 = number_format($per_62);

            //                    $cRet    .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Pembiayaan Keluar</td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$ang_62</td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$nreal_62</td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$selisih_62$y1</td>
            //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persen_62</td>
            //                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
            //                                     </tr>";
        }

        $sqlpk = "SELECT * FROM (SELECT SUBSTR(a.no_trdrka,12,24) AS kd_rek,b.nm_rek2 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek2 b 
                        ON LEFT(a.kd_rek5,2)=b.kd_rek2 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,24)
                        UNION ALL
                        SELECT SUBSTR(a.no_trdrka,12,25) AS kd_rek,b.nm_rek3 AS nm_rek,SUM(a.nilai)AS nilai,SUM(a.nilai_ubah)AS nilai_u,
                        (SELECT SUM(c.rupiah) FROM trdkasin_pkd c INNER JOIN trhkasin_pkd d ON c.no_sts = d.no_sts WHERE c.kd_skpd='$id' AND LEFT(c.kd_rek5,5)= LEFT(a.kd_rek5,5) AND d.kd_kegiatan = a.kd_kegiatan )AS cp,
                        (SELECT SUM(e.debet) FROM trdju_pkd e  INNER JOIN trhju_pkd g ON e.no_voucher = g.no_voucher WHERE g.kd_skpd='$id' AND LEFT(e.kd_rek5,3)= LEFT(a.kd_rek5,3) AND e.kd_kegiatan = a.kd_kegiatan )AS debet,
                        (SELECT SUM(f.kredit) FROM trdju_pkd f INNER JOIN trhju_pkd h ON f.no_voucher = h.no_voucher WHERE h.kd_skpd='$id' AND LEFT(f.kd_rek5,3)= LEFT(a.kd_rek5,3) AND f.kd_kegiatan = a.kd_kegiatan )AS kredit,'4' AS nu FROM trdrka a INNER JOIN ms_rek3 b 
                        ON LEFT(a.kd_rek5,3)=b.kd_rek3 WHERE a.kd_skpd='$id' AND LEFT(a.kd_rek5,2)='62' GROUP BY SUBSTR(a.no_trdrka,12,25) ) a ORDER BY kd_rek,nu";

        $sql62 = $this->db->query($sqlpk);
        foreach ($sql62->result() as $row_62)
        {
            $kd = $row_62->kd_rek;
            $nm = $row_62->nm_rek;
            $ang_622 = number_format($row_62->nilai_u, "2", ".", ",");
            $angaran_622 = $row_62->nilai_u;
            $in_622 = $row_62->cp;
            $debet_622 = $row_62->debet;
            $kredit_622 = $row_62->kredit;
            $real_622 = $debet_622 - ($in_622 + $kredit_622);
            $nreal_622 = number_format($real_622, "2", ".", ",");
            $real_s_622 = $real_622 - $angaran_622;
            if ($real_s_622 < 0)
            {
                $x1 = "(";
                $real_s_622 = $real_s_622 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $selisih_622 = number_format($real_s_622, "2", ".", ",");
            $per_622 = ($real_s_611 != 0) ? ($real_s_622 / $row_62->nilai_u) * 100 : 0;
            $persen_622 = number_format($per_622);

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"15%\" align=\"left\">$kd</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"26%\">$nm</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$ang_622</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$nreal_622</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"13%\" align=\"right\">$x1$selisih_622$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"3%\" align=\"right\">$persen_622</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";
        }
        $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\">&nbsp;</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"26%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";

        $netto = $angaran_61 - $angaran_62;
        $net = number_format($netto, "2", ",", ".");
        $netto_r = $real_61 - $real_62;
        $net_r = number_format($netto_r, "2", ",", ".");
        $netto_s = $netto_r - $netto;
        if ($netto_s < 0)
        {
            $x1 = "(";
            $netto_s = $netto_s * -1;
            $y1 = ")";
        } else
        {
            $x1 = "";
            $y1 = "";
        }
        $netto_selisih = number_format($netto_s, "2", ",", ".");
        $perpnet = ($netto_s != 0) ? ($netto_s / $netto) * 100 : 0;
        $persennet = number_format($perpnet);


        $cRet .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>
                                    <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">Pembiayaan Netto</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$net</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$net_r</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x1$netto_selisih$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persennet</td>
                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
                                     </tr>";

        $silpa = ($angaranp + $angaran_61) - ($angaran_5 + $angaran_62);
        if ($silpa < 0)
        {
            $a = "(";
            $silpa = $silpa * -1;
            $b = ")";
        } else
        {
            $a = "";
            $b = "";
        }
        $silp = number_format($silpa, "2", ",", ".");
        $silpa_real = ($realp + $real_61) - ($real_5 + $real_62);
        if ($silpa_real < 0)
        {
            $c = "(";
            $silpa_real = $silpa_real * -1;
            $d = ")";
        } else
        {
            $c = "";
            $d = "";
        }
        $silp_real = number_format($silpa_real, "2", ",", ".");
        $silpa_s = $silpa_real - $silpa;
        if ($silpa_s < 0)
        {
            $x = "(";
            $silpa_s = $silpa_s * -1;
            $y = ")";
        } else
        {
            $x = "";
            $y = "";
        }
        $silpa_selisih = number_format($silpa_s, "2", ",", ".");
        $persil = ($silpa_s != 0) ? ($silpa_s / $silpa) * 100 : 0;
        $persensilpa = number_format($persil);

        //$cRet    .= " <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\" align=\"left\"></td>
        //                                    <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"16%\">SILPA</td>
        //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$a$silp$b</td>
        //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$c$silp_real$d</td>
        //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"13%\" align=\"right\">$x$silpa_selisih$y</td>
        //                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"3%\" align=\"right\">$persensilpa</td>
        //                                     <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"13%\" align=\"right\"></td>
        //                                     </tr>";
        $cRet .= " </table>";
        $data['prev'] = $cRet;
        $this->template->set('title', 'CETAK REALISASI LAMPIRAN III');


        switch ($cetak)
        {
            case 1;
                $this->tukd_model->_mpdf('', $cRet, 10, 10, 10, '0');
                break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }

    }

    function lampiran_IV()
    {
        $data['page_title'] = 'REALISASI';
        $this->template->set('title', 'REALISASI');
        $this->template->load('template', 'akuntansi/perda_real_iv', $data);
    }
    
	function cetak_lra2()
    {
        $data['page_title']= 'LRA SKPD';
        $this->template->set('title', 'LRA SKPD');   
        $this->template->load('template','akuntansi/cetak_lra',$data) ; 
    }

	function cetak_lra_pemda2()
    {
        $data['page_title']= 'LRA KONSOLIDASI';
        $this->template->set('title', 'LRA KONSOLIDASI');   
        $this->template->load('template','akuntansi/cetak_lra_pemda',$data) ; 
    }
	
    function ctk_lra_ppkd()
    {
        $data['page_title'] = 'REALISASI PPKD';
        $this->template->set('title', 'REALISASI PPKD');
        $this->template->load('template', 'akuntansi/cetak_lra_ppkd', $data);
    }

    function cetak_lra_lo_f()
    {
        $data['page_title']= 'LO SKPD';
        $this->template->set('title', 'LO SKPD');   
        $this->template->load('template','akuntansi/cetak_lra_lo_skpd',$data) ; 
    }

    function ctk_lra_lo_ppkd()
    {
        $data['page_title'] = 'LO PPKD';
        $this->template->set('title', 'LO PPKD');
        $this->template->load('template', 'akuntansi/cetak_lra_lo_ppkd', $data);
    }
    
    function cetak_lra_lo_pemda()
    {
        $data['page_title'] = 'LO KONSOLIDASI';
        $this->template->set('title', 'LO KONSOLIDASI');
        $this->template->load('template', 'akuntansi/cetak_lra_lo_pemda', $data);
    }
    
    function cetak_lpe()
    {
        $data['page_title'] = 'LPE SKPD';
        $this->template->set('title', 'LPE SKPD');
        $this->template->load('template', 'akuntansi/cetak_lpe', $data);
    }
    
	function ctk_lpe_ppkd()
    {
        $data['page_title'] = 'LPE';
        $this->template->set('title', 'LPE');
        $this->template->load('template', 'akuntansi/cetak_lpe_ppkd', $data);
    }
	
	function cetak_lpe_pemda()
    {
        $data['page_title'] = 'LPE KONSOLIDASI';
        $this->template->set('title', 'LPE KONSOLIDASI');
        $this->template->load('template', 'akuntansi/cetak_lpe_pemda', $data);
    }
	
    function cetak_lpsal()
    {
        $data['page_title'] = 'LPSAL';
        $this->template->set('title', 'LPSAL');
        $this->template->load('template', 'akuntansi/cetak_lpsal', $data);
    }
	
	function ctk_kapitalisasi(){
        $data['page_title']= 'CETAK KAPITALISASI';
        $this->template->set('title', 'CETAK KAPITALISASI');   
        $this->template->load('template','akuntansi/ctk_kapit',$data) ;	
	}
	
	function ctk_lap_aset(){
        $data['page_title']= 'CETAK LAP. ASET';
        $this->template->set('title', 'CETAK LAP. ASET');   
        $this->template->load('template','akuntansi/cetak_lap_aset',$data) ;	
	}
	
	function ctk_lap_aset_penyu(){
	$data['page_title']= 'CETAK LAP. PENYUSUTAN';
	$this->template->set('title', 'CETAK LAP. PENYUSUTAN');   
	$this->template->load('template','akuntansi/cetak_lap_aset_penyu',$data) ;	
	}
	
	function ctk_lap_amortisasi(){
	$data['page_title']= 'CETAK LAP. AMORTISASI';
	$this->template->set('title', 'CETAK LAP. AMORTISASI');   
	$this->template->load('template','akuntansi/cetak_lap_amortisasi',$data) ;	
	}
	
	function ctk_lap_peng_aset(){
	$data['page_title']= 'CETAK LAP. PENGADAAN ASET';
	$this->template->set('title', 'CETAK LAP. PENGADAAN ASET');   
	$this->template->load('template','akuntansi/cetak_lap_peng',$data) ;	
	}
	
	function ctk_lap_pen_lra(){
	$data['page_title']= 'CETAK LAP. PENJELASAN LRA - LO';
	$this->template->set('title', 'CETAK LAP. PENJELASAN LRA - LO');   
	$this->template->load('template','akuntansi/cetak_lap_pen_lra',$data) ;	
	}
	function ctk_lap_kom(){
	$data['page_title']= 'CETAK LAP. DAMPAK KOMULATIF';
	$this->template->set('title', 'CETAK LAP. DAMPAK KOMULATIF');   
	$this->template->load('template','akuntansi/cetak_lap_kom',$data) ;	
	}
	
	function ctk_lap_lo(){
	$data['page_title']= 'CETAK LAP. OPERASIONAL ';
	$this->template->set('title', 'CETAK LAP. OPERASIONAL');   
	$this->template->load('template','akuntansi/cetak_lap_lo',$data) ;	
	}
	
	function hitung_kapitalisasi(){
		$skpd     = $this->session->userdata('kdskpd');
		$this->db->query("kapitalisasi_anguz '$skpd'");		
		echo '1';	
	}
	
	
	function hitung_rincian_kapitalisasi(){
		$skpd     = $this->session->userdata('kdskpd');
		$this->db->query("rincian_kapitalisasi_anguz '$skpd'");		
		echo '1';	
	}
	
	function proses_transfer_lamp(){
		$skpd     = $this->session->userdata('kdskpd');
		$this->db->query("kapitalisasi_transfer '$skpd'");		
		echo '1';	
	}
	
	function thapus_rincian_kapit(){
        $skpd = $this->input->post('skpd');
        $giat  = $this->input->post('giat');
        $rek  = $this->input->post('rek');
        $nolamp  = $this->input->post('nolamp');
		
        $query = $this->db->query("delete from lamp_aset where kd_skpd='$skpd' and no_lamp='$nolamp'");
        $query = $this->db->query("delete from trdkapitalisasi where kd_skpd='$skpd' and kd_kegiatan='$giat' and kd_rek5_trans='$rek' and no_lamp='$nolamp'");
        if ( $query > 0 ){
            echo '1' ;
        } else {
            echo '0' ;
        }
    }
	function kapit_rinci($skpd='',$kegiatan='',$rekening='') {
        
        $norinci  = $skpd.'.'.$kegiatan.'.'.$rekening;
        $sql    = "select *,tahun_n+nilai as tot_kap from trdkapitalisasi where no_rinci='$norinci' order by no_lamp";                   
        
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii     = 0;

        foreach($query1->result_array() as $resulte)
        { 
           
            $result[] = array(
                        'id'      => $ii,   
                        'no_lamp'  => $resulte['no_lamp'],  
                        'kd_rek3'    => $resulte['kd_rek3'],  
                        'nm_rek3'   => $resulte['nm_rek3'],  
                        'kd_rek5'  => $resulte['kd_rek5'],  
                        'nm_rek5' => $resulte['nm_rek5'],  
                        'kd_rek6' => $resulte['kd_rek6'],  
                        'nm_rek6' => $resulte['nm_rek6'],  
                        'tahun' => $resulte['tahun'],
                        'merk' => $resulte['merk'],
                        'no_polisi' => $resulte['no_polisi'],
                        'fungsi' => $resulte['fungsi'],
                        'hukum' => $resulte['hukum'],
                        'lokasi' => $resulte['lokasi'],
                        'alamat' =>$resulte['alamat'],
                        'sert'=>$resulte['sert'],
                        'luas'=>$resulte['luas'],
                        'jumlah'=>$resulte['jumlah'],
                        'satuan'=>$resulte['satuan'],
                        'harga_satuan'=>number_format($resulte['harga_satuan'],"2",".",","),
                        'piutang_awal'=>number_format($resulte['piutang_awal'],"2",".",","),
                        'piutang_koreksi'=>number_format($resulte['piutang_koreksi'],"2",".",","),
                        'piutang_sudah'=>number_format($resulte['piutang_sudah'],"2",".",","),
                        'investasi_awal'=>number_format($resulte['investasi_awal'],"2",".",","),
                        'sal_awal'=>number_format($resulte['sal_awal'],"2",".",","),
                        'kurang'=>number_format($resulte['kurang'],"2",".",","),
                        'tambah'=>number_format($resulte['tambah'],"2",".",","),
                        'tahun_n'=>number_format($resulte['tahun_n'],"2",".",","),
                        'kondisi_b'=>$resulte['kondisi_b'],     
                        'kondisi_rr'=>$resulte['kondisi_rr'],     
                        'kondisi_rb'=>$resulte['kondisi_rb'],     
                        'rincian_beban'=>$resulte['rincian_beban'],     
                        'no_polis'=>$resulte['no_polis'],     
                        'bulan'=>$resulte['bulan'],     
                        'kepemilikan'=>$resulte['kepemilikan'],     
                        'keterangan'=>$resulte['keterangan'],
                        'nilai'=>number_format($resulte['nilai'],"2",".",","),
                        'tot_kap'=>number_format($resulte['tot_kap'],"2",".",",")
                        );
                        $ii++;
        }
           
           echo json_encode($result);
    }
	function update_rincian_kapitalisasi(){
		$skpd     = $this->session->userdata('kdskpd');
        $kdgiat   = $this->input->post('kdgiat');
        $kdrek5 = $this->input->post('kdrek5');
        $no_lamp = $this->input->post('no_lamp');
        $xnil     = $this->input->post('xnil');
        
        
            $sql = "UPDATE trdkapitalisasi SET nilai=$xnil WHERE kd_skpd='$skpd' AND kd_kegiatan='$kdgiat' AND kd_rek5_trans='$kdrek5' AND no_lamp='$no_lamp'";
            $asg = $this->db->query($sql);
            if($asg){
                echo '2';
            }else{
                echo '0';
            }
        
        
    }
	function load_sum_kapit_rinci(){

		$kdskpd = $this->input->post('skpd');
		$kegiatan = $this->input->post('keg');
		$rek = $this->input->post('rek');
		$norinci=$kdskpd.'.'.$kegiatan.'.'.$rek;

        $query1 = $this->db->query(" select sum(tahun_n) as rektotal_rinci,sum(nilai) as rektotal_rinci_kapit from trdkapitalisasi where no_rinci='$norinci' ");  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
           
            $result[] = array(
                        'id' => $ii,        
                        'rektotal_rinci' => number_format($resulte['rektotal_rinci'],"2",".",","),  
                        'rektotal_rinci_kapit' => number_format($resulte['rektotal_rinci_kapit'],"2",".",",")  
                        );
                        $ii++;
        }
           
           //return $result;
		   echo json_encode($result);	
	}
	 
    function cek_rek_aset(){
        $kdrek5     = $this->input->post('kdrek5');
        $result   = array();
        $query    = $this->db->query("select LEFT(a.kd_rek5,3) as kdrek3,LEFT(a.map_lo,3) as kdrek3_u, c.nm_rek3, a.kd_rek5,a.nm_rek5,a.map_lo,b.nm_rek5 FROM ms_rek5 a
					inner join ms_rek5 b ON a.map_lo=b.kd_rek5 
					INNER JOIN ms_rek3_64 c ON LEFT(a.map_lo,3)=c.kd_rek3 where a.kd_rek5='$kdrek5'");
        $ii       = 0;
        foreach ( $query->result_array() as $row ){
            $result[] = array(
                'id'    =>  '$ii',
                'kdrek3' =>  $row['kdrek3'],
                'kdrek3_u' =>  $row['kdrek3_u'],
                'nm_rek3' =>  $row['nm_rek3'],
                'kdrek5' =>  $row['kd_rek5'],
                'nm_rek5' =>  $row['nm_rek5'],
                'map_lo' =>  $row['map_lo']
            );
            $ii++;
        }
        echo json_encode($result);
    }
	
	function cetak_kapitalisasi($kdskpd='',$ctk=''){
        $thn_ang = $this->session->userdata('pcThang');
        $lcskpd = $kdskpd;
        $skpd =  $this->tukd_model->get_nama($kdskpd,'nm_skpd','ms_skpd','kd_skpd');
        $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc){
                    $kab     = $rowsc->kab_kota;
                    $prov     = $rowsc->provinsi;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                 }
		
			$cRet ='<TABLE style="border-collapse:collapse" width="100%" border="0" cellspacing="0" cellpadding="1" align=center>
					<TR>
						<TD colspan="17" align="center" ><b>'.$prov.' </TD>
					</TR>
					<tr></tr>
                    <TR>
						<TD colspan="17" align="center" ><b>KAPITALISASI </TD>
					</TR>
					</TABLE><br/>';
			$cRet .='<TABLE width="100%">
					 <TR>
						<TD align="left" width="20%" >SKPD</TD>
						<TD colspan= "15" align="left" width="100%" >: '.$lcskpd.' '.$skpd.'</TD>
					 </TR>
					 </TABLE>';

			$cRet .='<TABLE style="border-collapse:collapse" width="100%" border="1" cellspacing="0" cellpadding="1" align=center>
					 <thead>
					 <TR>
						<TD rowspan="2" width="80" bgcolor="#CCCCCC" align="center" >Kode</TD>
						<TD rowspan="2" width="80" bgcolor="#CCCCCC" align="center" >Uraian</TD>
						<TD rowspan="2" width="80" bgcolor="#CCCCCC" align="center" >Nama Barang</TD>
						<TD rowspan="2" width="80" bgcolor="#CCCCCC" align="center" >Klasifikasi Aset</TD>
                        <TD colspan="2" width="90"  bgcolor="#CCCCCC" align="center" >Pegawai</TD>
						<TD colspan="2" width="150"  bgcolor="#CCCCCC" align="center" >Barang dan Jasa</TD>
						<TD colspan="2" width="150" bgcolor="#CCCCCC" align="center" >Belanja Modal</TD>
						<TD colspan="2" width="150" bgcolor="#CCCCCC" align="center" >Belanja Modal dan Administrasi Pengadaan</TD>
						<TD colspan="3" width="150" bgcolor="#CCCCCC" align="center" >Kapitalisasi</TD>
						<TD rowspan="2" width="150" bgcolor="#CCCCCC" align="center" >Qty</TD>
						<TD rowspan="2" width="150" bgcolor="#CCCCCC" align="center" >Sat.</TD>
					 </TR>
					 <TR>
                        <TD width="90"  bgcolor="#CCCCCC" align="center" >Anggaran</TD>
						<TD width="150"  bgcolor="#CCCCCC" align="center" >Realisasi</TD>						
						<TD width="150"  bgcolor="#CCCCCC" align="center" >Anggaran</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >Realisasi</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >Anggaran</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >Realisasi</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >Anggaran</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >Realisasi</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >Anggaran</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >Penghitungan Kapitalisasi</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >Realisasi</TD>
					 </TR>
					 <TR>
                        <TD width="90"  bgcolor="#CCCCCC" align="center" >1</TD>
						<TD width="150"  bgcolor="#CCCCCC" align="center" >2</TD>						
						<TD width="150"  bgcolor="#CCCCCC" align="center" >3</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >4</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >5</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >6</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >7</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >8</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >9</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >10</TD>
						<TD width="90"  bgcolor="#CCCCCC" align="center" >11</TD>
						<TD width="150"  bgcolor="#CCCCCC" align="center" >12</TD>						
						<TD width="150"  bgcolor="#CCCCCC" align="center" >13</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >14</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >15</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >16</TD>
						<TD width="150" bgcolor="#CCCCCC" align="center" >17</TD>
					 </TR>
					 </thead>
					 ';
				$total_kap = 0;
				$total_ang_peg = 0;
				$total_real_peg = 0;
				$total_ang_brg = 0;
				$total_real_brg = 0;
				$total_ang_mod = 0;
				$total_real_mod = 0;
				$total_ang_peng = 0;
				$total_real_peng = 0;
				$total_ang_kap = 0;
				$total_nil_kap = 0;
				$total_tot_kap = 0;
				$query = $this->db->query("cetak_kapitalisasi '$lcskpd'");
				foreach ($query->result() as $row) {
                    $kode = $row->kode; 
                    $uraian = $row->uraian;                   
                    $nama_barang = $row->nama_barang;                   
                    $klasifikasi = $row->klasifikasi;
                    $ang_peg =$row->ang_peg;
                    $real_peg=$row->real_peg;
                    $ang_brg = $row->ang_brg;
                    $real_brg = $row->real_brg;
                    $ang_mod = $row->ang_mod;
                    $real_mod = $row->real_mod;
					$ang_x  = $row->ang_x;
                    $real_x  = $row->real_x;
                    $ang_peng  = $row->ang_peng;
                    $real_peng  = $row->real_peng;
					$ang_pengx  = $ang_x+$ang_peng;
                    $real_pengx  = $real_x+$real_peng;
                    $ang_kap  = $ang_peg+$ang_brg+$ang_mod+$ang_peng;
                    $nil_kap  = $row->nil_kap;
                    $tot_kap  = $real_mod+$nil_kap;
                    $qty  = $row->qty;
                    $sat  = $row->sat;
                    $jen  = $row->jen;
					
					$panjang = strlen($kode);
					$ang_peg1  = empty($ang_peg) || $ang_peg == 0 ? '' :number_format($ang_peg,"2",",",".");
					$real_peg1 = empty($real_peg) || $real_peg == 0 ? '' :number_format($real_peg,"2",",",".");
					$ang_brg1  = empty($ang_brg) || $ang_brg == 0 ? '' :number_format($ang_brg,"2",",",".");
					$real_brg1 = empty($real_brg) || $real_brg == 0 ? '' :number_format($real_brg,"2",",",".");
					$ang_mod1  = empty($ang_mod) || $ang_mod == 0 ? '' :number_format($ang_mod,"2",",",".");
					$real_mod1 = empty($real_mod) || $real_mod == 0 ? '' :number_format($real_mod,"2",",",".");
					$ang_kap1  =  $ang_kap == 0 ? '' :number_format($ang_kap,"2",",",".");
					$nil_kap1 = empty($nil_kap) || $nil_kap == 0 ? '' :number_format($nil_kap,"2",",",".");
					$tot_kap1  = $tot_kap == 0 ? '' :number_format($tot_kap,"2",",",".");
					$ang_peng1  = empty($ang_pengx) || $ang_pengx == 0 ? '' :number_format($ang_pengx,"2",",",".");
					$real_peng1  = empty($real_pengx) || $real_pengx == 0 ? '' :number_format($real_pengx,"2",",",".");
					$qty1  = empty($qty) || $qty == 0 ? '' :number_format($qty,"0",",",".");
					
					if($panjang==18){
					$total_ang_peg=$total_ang_peg+$ang_peg;
					$total_real_peg=$total_real_peg+$real_peg;
					$total_ang_brg=$total_ang_brg+$ang_brg;
					$total_real_brg=$total_real_brg+$real_brg;
					$total_ang_mod=$total_ang_mod+$ang_mod;
					$total_real_mod=$total_real_mod+$real_mod;
					$total_ang_peng=$total_ang_peng+$ang_pengx;
					$total_real_peng=$total_real_peng+$real_pengx;
					$total_ang_kap=$total_ang_kap+$ang_kap;
					$total_nil_kap=$total_nil_kap+$nil_kap;
					$total_tot_kap=$total_tot_kap+$tot_kap;
					}
					if ($jen=='Y'){
					$cRet.='<TR>
                        <TD width="90"  >'.$kode.'</TD>
						<TD width="150" >'.$uraian.'</TD>						
						<TD width="150" >'.$nama_barang.'</TD>
						<TD width="150" >'.$klasifikasi.'</TD>
						<TD width="150" align="right" >'.$ang_peg1.'</TD>
						<TD width="150" align="right" >'.$real_peg1.'</TD>
						<TD width="150" align="right" >'.$ang_brg1.'</TD>
						<TD width="150" align="right" >'.$real_brg1.'</TD>
						<TD width="150" align="right" >'.$ang_mod1.'</TD>
						<TD width="150" align="right" >'.$real_mod1.'</TD>
						<TD width="90"  align="right" >'.$ang_peng1.'</TD>
						<TD width="150" align="right" >'.$real_peng1.'</TD>						
						<TD width="150" align="right" >'.$ang_kap1.'</TD>
						<TD width="150" align="right" >'.$nil_kap1.'</TD>
						<TD width="150" align="right" >'.$tot_kap1.'</TD>
						<TD width="150" align="center">'.$qty1.'</TD>
						<TD width="150" >'.$sat.'</TD>
						</TR>';
					} else{
					$cRet.='<TR>
                        <TD width="90"  >'.$kode.'</TD>
						<TD width="150" >'.$uraian.'</TD>						
						<TD width="150" >'.$nama_barang.'</TD>
						<TD width="150" >'.$klasifikasi.'</TD>
						<TD width="150" align="right" >'.$ang_peg1.'</TD>
						<TD width="150" align="right" >'.$real_peg1.'</TD>
						<TD width="150" align="right" >'.$ang_brg1.'</TD>
						<TD width="150" align="right" >'.$real_brg1.'</TD>
						<TD width="150" align="right" >'.$ang_mod1.'</TD>
						<TD width="150" align="right" >'.$real_mod1.'</TD>
						<TD width="90"  align="right" >'.$ang_peng1.'</TD>
						<TD width="150" align="right" >'.$real_peng1.'</TD>						
						<TD width="150" align="right" ></TD>
						<TD width="150" align="right" ></TD>
						<TD width="150" align="right" ></TD>
						<TD width="150" align="center"></TD>
						<TD width="150" ></TD>
						</TR>';	
					}
					
				}
				$cRet.='<TR>
                        <TD width="90" colspan="4" align="center" >TOTAL</TD>
						<TD width="150" align="right" >'.number_format($total_ang_peg,"2",",",".").'</TD>
						<TD width="150" align="right" >'.number_format($total_real_peg,"2",",",".").'</TD>
						<TD width="150" align="right" >'.number_format($total_ang_brg,"2",",",".").'</TD>
						<TD width="150" align="right" >'.number_format($total_real_brg,"2",",",".").'</TD>
						<TD width="150" align="right" >'.number_format($total_ang_mod,"2",",",".").'</TD>
						<TD width="150" align="right" >'.number_format($total_real_mod,"2",",",".").'</TD>
						<TD width="90"  align="right" >'.number_format($total_ang_peng,"2",",",".").'</TD>
						<TD width="150" align="right" >'.number_format($total_real_peng,"2",",",".").'</TD>						
						<TD width="150" align="right" >'.number_format($total_ang_kap,"2",",",".").'</TD>
						<TD width="150" align="right" >'.number_format($total_nil_kap,"2",",",".").'</TD>
						<TD width="150" align="right" >'.number_format($total_tot_kap,"2",",",".").'</TD>
						<TD width="150" align="center"></TD>
						<TD width="150" ></TD>
						</TR>';
						
			$cRet .='</TABLE>';
			//$ctk=0;
			$judul="Kapit_$lcskpd";
			$data['prev']= $cRet;
             switch ($ctk){
				case 0;
				echo ("<title>Kapitalisasi</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'L');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;
			}
		}
	
	
	
	function cetak_lap_aset($kdskpd='',$rek3='',$ctk=''){
        $thn_ang = $this->session->userdata('pcThang');
        $lcskpd = $kdskpd;
        if($rek3==15){
			$nama_rek='Aset Lainnya';
		}else{
			$nama_rek=$this->tukd_model->get_nama($rek3,'nm_rek3','ms_rek3_64','kd_rek3');
		}
		
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc){
                    $kab     = $rowsc->kab_kota;
                    $prov     = $rowsc->provinsi;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                 }
		
			$cRet ='<TABLE style="border-collapse:collapse" width="100%" border="0" cellspacing="0" cellpadding="1" align=center>
					<TR>
						<TD colspan="7" align="center" ><b>'.$prov.' </TD>
					</TR>
					<tr></tr>
                    <TR>
						<TD colspan="7" align="center" >'.$nama_rek.' </TD>
					</TR>
					</TABLE><br/>';
			
$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">
                <thead>
				<tr>
                    <td width=\"5%\" align=\"center\" style=\"font-size:12px\">Kode</td>
					<td width=\"40%\" align=\"center\" style=\"font-size:12px\">Nama Unit Kerja</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">2014</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Tambah</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Kurang</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Pengadaan 2015</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">2015</td>
					
                </tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">6</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">7</td> 
				</tr>
				</thead>";
			$tot_awal=0;
			$tot_tambah=0;
			$tot_kurang=0;
			$tot_tahun_n=0;
			$tot_total=0;
			$sql = "SELECT a.kd_skpd, a.nm_skpd, ISNULL(sal_awal,0) sal_awal, ISNULL(tambah,0) tambah, ISNULL(kurang,0) kurang,
					ISNULL(tahun_n,0) tahun_n FROM ms_skpd a
					LEFT JOIN (
					SELECT a.kd_skpd, SUM(a.sal_awal) sal_awal, SUM(a.tambah) as tambah, SUM(a.kurang) as kurang, SUM(a.tahun_n) as tahun_n FROM lamp_aset a 
					WHERE kd_rek3='$rek3'
					GROUP BY a.kd_skpd) b ON a.kd_skpd=b.kd_skpd
					ORDER BY a.kd_skpd";
                    $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $row)
                    {
                       $kode = $row->kd_skpd;
                       $nama = $row->nm_skpd;
                       $sal_awal = $row->sal_awal;
                       $tambah = $row->tambah;
                       $kurang = $row->kurang;
                       $tahun_n = $row->tahun_n;
                       $tot = $sal_awal+$tambah-$kurang+$tahun_n;
						$tot_awal=$tot_awal+$sal_awal;
						$tot_tambah=$tot_tambah+$tambah;
						$tot_kurang=$tot_kurang+$kurang;
						$tot_tahun_n=$tot_tahun_n+$tahun_n;
						$tot_total=$tot_total+$tot;
					 $cRet .='<tr>
							   <td align="left" valign="top" style="font-size:12px">'.$kode.'</td> 
							   <td align="left" style="font-size:12px">'.$nama.'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($sal_awal, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tambah, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($kurang, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tahun_n, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot, "2", ",", ".").'</td> 
							</tr>'; 
					}
			 $cRet .='<tr>
						   <td colspan="2" align="center" valign="top" style="font-size:12px">TOTAL</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_awal, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_tambah, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_kurang, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_tahun_n, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_total, "2", ",", ".").'</td> 
						</tr>';
			$cRet .="</table>";
			$data['prev']= $cRet;    
             switch ($ctk){
				case 0;
				echo ("<title>Lap. Aset</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'P');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $nama_rek.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
		}
	
    function cetak_lap_aset_penyu($kdskpd='',$rek3='',$ctk=''){
        $lntahunang = $this->session->userdata('pcThang');       
        $lcskpd = $kdskpd;
        if($rek3==15){
			$nama_rek='Aset Lainnya';
		}else{
			$nama_rek=$this->tukd_model->get_nama($rek3,'nm_rek3','ms_rek3_64','kd_rek3');
		}
		
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc){
                    $kab     = $rowsc->kab_kota;
                    $prov     = $rowsc->provinsi;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                 }
		
			$cRet ='<TABLE style="border-collapse:collapse" width="100%" border="0" cellspacing="0" cellpadding="1" align=center>
					<TR>
						<TD colspan="7" align="center" ><b>'.$prov.' </TD>
					</TR>
					<tr></tr>
                    <TR>
						<TD colspan="7" align="center" >'.$nama_rek.' </TD>
					</TR>
					</TABLE><br/>';
			
$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">
                <thead>
				<tr>
                    <td width=\"5%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Kode</td>
					<td width=\"50%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Nama Unit Kerja</td>
					<td width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Nilai Perolehan</td>
					<td width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\"  style=\"font-size:12px\">Akumulasi Penyusutan</td>
					<td width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Penyusutan $lntahunang</td>
					<td width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Nilai Buku</td>
					
                </tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">6</td> 
				</tr>
				</thead>";
			$tot_awal=0;
			$tot_tambah=0;
			$tot_kurang=0;
			$tot_tahun_n=0;
			$tot_total=0;
			$tot_akum_penyu=0;
			$tot_akum_penyu_n=0;
			$tot_nilai_buku=0;
			$sql = "SELECT a.kd_skpd, a.nm_skpd, ISNULL(sal_awal,0) sal_awal, ISNULL(tambah,0) tambah, ISNULL(kurang,0) kurang,
					ISNULL(tahun_n,0) tahun_n, ISNULL(akum_penyu,0) akum_penyu, ISNULL(akum_penyu_n,0) akum_penyu_n, 
					ISNULL(nilai_buku,0) nilai_buku FROM ms_skpd a
					LEFT JOIN
					(SELECT kd_skpd, SUM(sal_awal) sal_awal, SUM(tambah) tambah,SUM(kurang) kurang, SUM(tahun_n) tahun_n, 
					SUM(akum_penyu) akum_penyu, SUM(akum_penyu_n) akum_penyu_n, SUM(nilai_buku) nilai_buku
					FROM (
					SELECT
						kd_skpd,sal_awal,tambah,kurang,tahun_n,a.akum_penyu,a.akum_penyu_n, (
							a.sal_awal - a.kurang + a.tambah + tahun_n
						) - a.akum_penyu - a.akum_penyu_n AS nilai_buku
					FROM
					(SELECT	a.*, CASE WHEN len(tahun) <> 4 THEN
						CAST (	a.sal_awal - a.kurang + a.tambah + tahun_n AS DECIMAL (20,0))
						WHEN a.usia >= a.masa THEN	CAST (	a.sal_awal - a.kurang + a.tambah + tahun_n AS DECIMAL (20, 0))
						ELSE CAST (	(a.sal_awal - a.kurang + a.tambah + tahun_n	) / a.masa * a.usia AS DECIMAL (20, 0))
						END AS akum_penyu,	CASE WHEN len(tahun) <> 4 THEN	0 WHEN a.usia >= a.masa THEN 0
						WHEN a.masa - a.usia = 1 THEN (	a.sal_awal - a.kurang + a.tambah + tahun_n) - (	CAST ((	a.sal_awal - a.kurang + a.tambah + tahun_n) / a.masa * a.usia AS DECIMAL (20, 0)
							))
					ELSE CAST (	(a.sal_awal - a.kurang + a.tambah + tahun_n	) / a.masa AS DECIMAL (20, 0))
					END AS akum_penyu_n
					FROM (SELECT no_lamp, CASE WHEN (kd_rek6 = '') THEN	kd_rek5	ELSE kd_rek6 END AS kode1,
							CASE WHEN (kd_rek6 = '') THEN	kd_rek5
						ELSE kd_rek6 END AS kode,
						CASE WHEN (nm_rek6 = '') THEN nm_rek5 ELSE	nm_rek6 	END AS nama,
					tahun,	sal_awal,	kurang,	tambah,	tahun_n,kd_skpd,(SELECT	masa FROM ms_penyu WHERE kd_rek4 = LEFT (kd_rek5, 5)
					) masa,	CASE WHEN len(tahun) <> 4 THEN 0
					ELSE $lntahunang - tahun
					END AS usia FROM lamp_aset WHERE
					kd_rek3 = '$rek3' ) a
					) a
					) b GROUP BY kd_skpd ) c ON a.kd_skpd=c.kd_skpd ORDER BY kd_skpd";
                    $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $row)
                    {
                       $kode = $row->kd_skpd;
                       $nama = $row->nm_skpd;
                       $sal_awal = $row->sal_awal;
                       $tambah = $row->tambah;
                       $kurang = $row->kurang;
                       $tahun_n = $row->tahun_n;
                       $akum_penyu = $row->akum_penyu;
                       $akum_penyu_n = $row->akum_penyu_n;
                       $nilai_buku = $row->nilai_buku;
                       $tot = $sal_awal+$tambah-$kurang+$tahun_n;
						$tot_akum_penyu=$tot_akum_penyu+$akum_penyu;
						$tot_akum_penyu_n=$tot_akum_penyu_n+$akum_penyu_n;
						$tot_nilai_buku=$tot_nilai_buku+$nilai_buku;
						$tot_total=$tot_total+$tot;
					 $cRet .='<tr>
							   <td align="left" valign="top" style="font-size:12px">'.$kode.'</td> 
							   <td align="left" style="font-size:12px">'.$nama.'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($akum_penyu, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($akum_penyu_n, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($nilai_buku, "2", ",", ".").'</td> 
							</tr>'; 
					}
			 $cRet .='<tr>
						   <td colspan="2" align="center" valign="top" style="font-size:12px">TOTAL</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_total, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_akum_penyu, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_akum_penyu_n, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_nilai_buku, "2", ",", ".").'</td> 
						</tr>';
			$cRet .="</table>";
			$data['prev']= $cRet;    
            $judul='Lap_Penyusutan_Aset_'.$nama_rek.'';
			switch ($ctk){
				case 0;
				echo ("<title>$judul</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'P');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
		}
	
	function cetak_lap_amortisasi($kdskpd='',$rek3='',$ctk=''){
        $lntahunang = $this->session->userdata('pcThang');       
        $lcskpd = $kdskpd;
		$rek3='153';
        if($rek3==15){
			$nama_rek='Aset Lainnya';
		}else{
			$nama_rek=$this->tukd_model->get_nama($rek3,'nm_rek3','ms_rek3_64','kd_rek3');
		}
		
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc){
                    $kab     = $rowsc->kab_kota;
                    $prov     = $rowsc->provinsi;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                 }
		
			$cRet ='<TABLE style="border-collapse:collapse" width="100%" border="0" cellspacing="0" cellpadding="1" align=center>
					<TR>
						<TD colspan="7" align="center" ><b>'.$prov.' </TD>
					</TR>
					<tr></tr>
                    <TR>
						<TD colspan="7" align="center" >'.$nama_rek.' </TD>
					</TR>
					</TABLE><br/>';
			
		$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">
                <thead>
				<tr>
                    <td width=\"5%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Kode</td>
					<td width=\"50%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Nama Unit Kerja</td>
					<td width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Nilai Perolehan</td>
					<td width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Akumulasi Amortisasi</td>
					<td width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Amortisasi $lntahunang</td>
					<td width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Nilai Buku</td>
					
                </tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">6</td> 
				</tr>
				</thead>";
			$tot_awal=0;
			$tot_tambah=0;
			$tot_kurang=0;
			$tot_tahun_n=0;
			$tot_total=0;
			$tot_akum_penyu=0;
			$tot_akum_penyu_n=0;
			$tot_nilai_buku=0;
			$sql = "SELECT a.kd_skpd, a.nm_skpd, ISNULL(sal_awal,0) sal_awal, ISNULL(tambah,0) tambah, ISNULL(kurang,0) kurang,
					ISNULL(tahun_n,0) tahun_n, ISNULL(akum_penyu,0) akum_penyu, ISNULL(akum_penyu_n,0) akum_penyu_n, 
					ISNULL(nilai_buku,0) nilai_buku FROM ms_skpd a
					LEFT JOIN
					(SELECT kd_skpd, SUM(sal_awal) sal_awal, SUM(tambah) tambah,SUM(kurang) kurang, SUM(tahun_n) tahun_n, 
					SUM(akum_penyu) akum_penyu, SUM(akum_penyu_n) akum_penyu_n, SUM(nilai_buku) nilai_buku
					FROM (select kd_skpd,a.sal_awal,a.tambah,a.kurang,a.tahun_n, a.akum_penyu,a.akum_penyu_n,
					(a.sal_awal-a.kurang+a.tambah+tahun_n)-a.akum_penyu-a.akum_penyu_n as nilai_buku from (select a.*, case when a.usia>=a.masa then cast(a.sal_awal-a.kurang+a.tambah+tahun_n as decimal(20,0)) else cast((a.sal_awal-a.kurang+a.tambah+tahun_n)/a.masa*a.usia as decimal(20,0)) end as akum_penyu, case when a.usia>=a.masa then 0 when a.masa-a.usia=1 then (a.sal_awal-a.kurang+a.tambah+tahun_n)-(cast((a.sal_awal-a.kurang+a.tambah+tahun_n)/a.masa*a.usia as decimal(20,0))) else cast((a.sal_awal-a.kurang+a.tambah+tahun_n)/a.masa as decimal(20,0)) end as akum_penyu_n
					from (SELECT no_lamp, case when (kd_rek6='') then kd_rek5 else kd_rek6 end as kode1, case when (kd_rek6='') then kd_rek5 else kd_rek6 end as kode, case when (nm_rek6='') then nm_rek5 else nm_rek6 end as nama, kd_skpd, sal_awal,  kurang,  tambah, tahun_n, (select masa from ms_amortisasi where kd_rek4=LEFT(kd_rek5,5)) masa, 
					case when len(tahun)<>4 then 0 else $lntahunang-tahun end as usia FROM lamp_aset where kd_rek3 = '$rek3') a) a) a GROUP BY kd_skpd) b
					ON a.kd_skpd=b.kd_skpd ORDER BY a.kd_skpd";
                    $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $row)
                    {
                       $kode = $row->kd_skpd;
                       $nama = $row->nm_skpd;
                       $sal_awal = $row->sal_awal;
                       $tambah = $row->tambah;
                       $kurang = $row->kurang;
                       $tahun_n = $row->tahun_n;
                       $akum_penyu = $row->akum_penyu;
                       $akum_penyu_n = $row->akum_penyu_n;
                       $nilai_buku = $row->nilai_buku;
                       $tot = $sal_awal+$tambah-$kurang+$tahun_n;
						$tot_akum_penyu=$tot_akum_penyu+$akum_penyu;
						$tot_akum_penyu_n=$tot_akum_penyu_n+$akum_penyu_n;
						$tot_nilai_buku=$tot_nilai_buku+$nilai_buku;
						$tot_total=$tot_total+$tot;
					 $cRet .='<tr>
							   <td align="left" valign="top" style="font-size:12px">'.$kode.'</td> 
							   <td align="left" style="font-size:12px">'.$nama.'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($akum_penyu, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($akum_penyu_n, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($nilai_buku, "2", ",", ".").'</td> 
							</tr>'; 
					}
			 $cRet .='<tr>
						   <td colspan="2" align="center" valign="top" style="font-size:12px">TOTAL</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_total, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_akum_penyu, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_akum_penyu_n, "2", ",", ".").'</td> 
						   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_nilai_buku, "2", ",", ".").'</td> 
						</tr>';
			$cRet .="</table>";
			$data['prev']= $cRet;    
            $judul='Lap_amortisasi_'.$nama_rek.'';
			switch ($ctk){
				case 0;
				echo ("<title>$judul</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'P');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
		}
	
	function cetak_lap_peng($kdskpd='',$rek3='',$ctk=''){
        $lntahunang = $this->session->userdata('pcThang');       
        $lcskpd = $kdskpd;
		$rek3='153';
        if($rek3==15){
			$nama_rek='Aset Lainnya';
		}else{
			$nama_rek=$this->tukd_model->get_nama($rek3,'nm_rek3','ms_rek3_64','kd_rek3');
		}
		
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc){
                    $kab     = $rowsc->kab_kota;
                    $prov     = $rowsc->provinsi;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                 }
		
			$cRet ='<TABLE style="border-collapse:collapse" width="100%" border="0" cellspacing="0" cellpadding="1" align=center>
					<TR>
						<TD colspan="21" align="center" ><b>'.$prov.' </TD>
					</TR>
					<tr></tr>
                    <TR>
						<TD colspan="21" align="center" >PENGADAAN ASET TAHUN ANGGARAN '.$lntahunang.'</TD>
					</TR>
					</TABLE><br/>';
			
		$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">
                <thead>
				<tr>
                    <td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" style=\"font-size:12px\">No</td>
                    <td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\" style=\"font-size:12px\">Unit Kerja</td>
					<td colspan=\"6\" bgcolor=\"#CCCCCC\" width=\"50%\" align=\"center\" style=\"font-size:12px\">LRA</td>
					<td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" style=\"font-size:12px\">Jumlah LRA</td>
					<td colspan=\"9\" bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" style=\"font-size:12px\">Neraca</td>
					<td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" style=\"font-size:12px\">Jumlah Neraca</td>
					<td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" style=\"font-size:12px\">Selisih antara<br>LRA dan Neraca</td>
					<td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" style=\"font-size:12px\">Keterangan</td>
                </tr>
				<tr>
                   <td colspan=\"6\" bgcolor=\"#CCCCCC\" align=\"center\" style=\"font-size:12px\">Belanja Modal</td> 
				   <td colspan=\"1\" bgcolor=\"#CCCCCC\" align=\"center\" style=\"font-size:12px\">Aset Lancar</td> 
				   <td colspan=\"6\" bgcolor=\"#CCCCCC\" align=\"center\" style=\"font-size:12px\">Aset Tetap $lntahunang</td> 
				   <td colspan=\"2\" bgcolor=\"#CCCCCC\" align=\"center\" style=\"font-size:12px\">Aset Lainnya</td> 
				</tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Tanah</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Peralatan dan Mesin</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Gedung dan Bangunan</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Jalan Irigasi dan Jaringan</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Aset Tetap Lainnya</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Aset Lainnya</td> 
				   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Persediaan</td> 
				   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Tanah</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Peralatan dan Mesin</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Gedung dan Bangunan</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Jalan Irigasi dan Jaringan</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Aset Tetap Lainnya</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Konstruksi dalam Pengerjaan</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Aset Tak Berwujud</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Aset Lainnya</td> 
				</tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">6</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">7</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">8</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">9</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">10</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">11</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">12</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">13</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">14</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">15</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">16</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">17</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">18</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">19</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">20</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">21</td> 
				</tr>
				</thead>";
				
				$jum_mod_tanah=0;
				$jum_mod_mesin=0;
				$jum_mod_gedung=0;
				$jum_mod_jalan=0;
			   $jum_mod_tetap=0;
			   $jum_mod_lainnya=0;
			   $jum_aset_persediaan=0;
			   $jum_aset_tanah=0;
			   $jum_aset_gedung=0;
			   $jum_aset_mesin=0;
			   $jum_aset_jalan=0;
			   $jum_aset_tetap=0;
			   $jum_aset_kontruksi=0;
			   $jum_aset_takwujud=0;
			   $jum_aset_lainnya=0;
			   $tot_mod=0;
			   $tot_aset=0;
			   $tot_selisih=0;
			$no=0;
			$sql = "SELECT a.kd_skpd, a.nm_skpd
					,ISNULL(mod_tanah,0) as mod_tanah 
					,ISNULL(mod_mesin,0) as mod_mesin 
					,ISNULL(mod_gedung,0) as mod_gedung 
					,ISNULL(mod_jalan,0) as mod_jalan
					,ISNULL(mod_tetap,0) as mod_tetap
					,ISNULL(mod_lainnya,0) as mod_lainnya
					,ISNULL(aset_persediaan,0) as aset_persediaan
					,ISNULL(aset_tanah,0) as aset_tanah
					,ISNULL(aset_mesin,0) as aset_mesin
					,ISNULL(aset_gedung,0) as aset_gedung
					,ISNULL(aset_jalan,0) as aset_jalan
					,ISNULL(aset_tetap,0) as aset_tetap
					,ISNULL(aset_kontruksi,0) as aset_kontruksi
					,ISNULL(aset_takwujud,0) as aset_takwujud
					,ISNULL(aset_lainnya,0) as aset_lainnya
					FROM ms_skpd a 
					LEFT JOIN 
					(SELECT kd_skpd
					,SUM(CASE WHEN kd_rek ='521' THEN real_spj ELSE 0 END) AS mod_tanah
					,SUM(CASE WHEN kd_rek ='522' THEN real_spj ELSE 0 END) AS mod_mesin
					,SUM(CASE WHEN kd_rek ='523' THEN real_spj ELSE 0 END) AS mod_gedung
					,SUM(CASE WHEN kd_rek ='524' THEN real_spj ELSE 0 END) AS mod_jalan
					,SUM(CASE WHEN kd_rek ='525' THEN real_spj ELSE 0 END) AS mod_tetap
					,SUM(CASE WHEN kd_rek ='526' THEN real_spj ELSE 0 END) AS mod_lainnya
					,SUM(CASE WHEN kd_rek ='1170302' THEN real_spj ELSE 0 END) AS aset_persediaan
					,SUM(CASE WHEN kd_rek ='131' THEN real_spj ELSE 0 END) AS aset_tanah
					,SUM(CASE WHEN kd_rek ='132' THEN real_spj ELSE 0 END) AS aset_mesin
					,SUM(CASE WHEN kd_rek ='133' THEN real_spj ELSE 0 END) AS aset_gedung
					,SUM(CASE WHEN kd_rek ='134' THEN real_spj ELSE 0 END) AS aset_jalan
					,SUM(CASE WHEN kd_rek ='135' THEN real_spj ELSE 0 END) AS aset_tetap
					,SUM(CASE WHEN kd_rek ='136' THEN real_spj ELSE 0 END) AS aset_kontruksi
					,SUM(CASE WHEN kd_rek ='153' THEN real_spj ELSE 0 END) AS aset_takwujud
					,SUM(CASE WHEN kd_rek ='154' THEN real_spj ELSE 0 END) AS aset_lainnya
					 FROM 
					(select b.kd_skpd, left(a.kd_rek5,3) kd_rek, sum(isnull(a.debet,0)-isnull(a.kredit,0)) as real_spj 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
					where left(a.kd_rek5,3) in ('521','522','523','524','525','526')
					group by kd_skpd, left(a.kd_rek5,3)
					UNION ALL
					SELECT kd_skpd, kd_rek3 as kd_rek, SUM(tahun_n) as real_spj 
					FROM lamp_aset WHERE kd_rek3 IN('117','131','132','133','134','135','136','153','154')
					GROUP BY kd_skpd,kd_rek3
					UNION ALL
					SELECT kd_skpd, kd_rek5 as kd_rek, SUM(tahun_n) as real_spj 
					FROM lamp_aset WHERE kd_rek5 IN('1170302')
					GROUP BY kd_skpd,kd_rek5
					)a
					GROUP BY kd_skpd) b
					ON a.kd_skpd=b.kd_skpd
					";
                    $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $row)
                    {
                       $kode = $row->kd_skpd;
                       $nama = $row->nm_skpd;
                       $mod_tanah = $row->mod_tanah;
                       $mod_mesin = $row->mod_mesin;
                       $mod_gedung = $row->mod_gedung;
                       $mod_jalan = $row->mod_jalan;
                       $mod_tetap = $row->mod_tetap;
                       $mod_lainnya = $row->mod_lainnya;
                       $aset_persediaan = $row->aset_persediaan;
                       $aset_tanah = $row->aset_tanah;
                       $aset_gedung = $row->aset_gedung;
                       $aset_mesin = $row->aset_mesin;
                       $aset_jalan = $row->aset_jalan;
                       $aset_tetap = $row->aset_tetap;
                       $aset_kontruksi = $row->aset_kontruksi;
                       $aset_takwujud = $row->aset_takwujud;
                       $aset_lainnya = $row->aset_lainnya;
					   $jum_mod= $mod_tanah+$mod_mesin+$mod_gedung+$mod_jalan+$mod_tetap+$mod_lainnya;
					   $jum_aset = $aset_persediaan+$aset_tanah+$aset_gedung+$aset_mesin+$aset_jalan+$aset_tetap+$aset_kontruksi+$aset_takwujud+$aset_lainnya;
                       $selisih=$jum_aset-$jum_mod;
					   $jum_mod_tanah=$jum_mod_tanah+$mod_tanah;
					   $jum_mod_mesin=$jum_mod_mesin+$mod_mesin;
					   $jum_mod_gedung=$jum_mod_gedung+$mod_gedung;
					   $jum_mod_jalan=$jum_mod_jalan+$mod_jalan;
					   $jum_mod_tetap=$jum_mod_tetap+$mod_tetap;
					   $jum_mod_lainnya=$jum_mod_lainnya+$mod_lainnya;
					   $jum_aset_persediaan=$jum_aset_persediaan+$aset_persediaan;
					   $jum_aset_tanah=$jum_aset_tanah+$aset_tanah;
					   $jum_aset_gedung=$jum_aset_gedung+$aset_gedung;
					   $jum_aset_mesin=$jum_aset_mesin+$aset_mesin;
					   $jum_aset_jalan=$jum_aset_jalan+$aset_jalan;
					   $jum_aset_tetap=$jum_aset_tetap+$aset_tetap;
					   $jum_aset_kontruksi=$jum_aset_kontruksi+$aset_kontruksi;
					   $jum_aset_takwujud=$jum_aset_takwujud+$aset_takwujud;
					   $jum_aset_lainnya=$jum_aset_lainnya+$aset_lainnya;
					   $tot_mod=$tot_mod+$jum_mod;
					   $tot_aset=$tot_aset+$jum_aset;
					   $tot_selisih=$tot_selisih+$selisih;
					   $no=$no+1;
					 $cRet .='<tr>
							   <td align="center" valign="top" style="font-size:12px">'.$no.'</td> 
							   <td align="left" style="font-size:12px">'.$nama.'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($mod_tanah, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($mod_mesin, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($mod_gedung, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($mod_jalan, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($mod_tetap, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($mod_lainnya, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_mod, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($aset_persediaan, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($aset_tanah, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($aset_mesin, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($aset_gedung, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($aset_jalan, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($aset_tetap, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($aset_kontruksi, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($aset_takwujud, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($aset_lainnya, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($selisih, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">&nbsp;</td> 
							</tr>'; 
					}
			$cRet .='<tr>
							   <td colspan="2" align="center" valign="top" style="font-size:12px">T O T A L</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_mod_tanah, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_mod_mesin, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_mod_gedung, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_mod_jalan, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_mod_tetap, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_mod_lainnya, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_mod, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset_persediaan, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset_tanah, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset_mesin, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset_gedung, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset_jalan, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset_tetap, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset_kontruksi, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset_takwujud, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_aset_lainnya, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_aset, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_selisih, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">&nbsp;</td> 
							</tr>'; 
			$cRet .="</table>";
			$data['prev']= $cRet;    
            $judul='Lap_pengadaan_aset';
			switch ($ctk){
				case 0;
				echo ("<title>$judul</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'L');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
		}
	
	function cetak_lap_pen_lra($kdskpd='',$rek3='',$ctk=''){
        $lntahunang = $this->session->userdata('pcThang');       
        $lcskpd = $kdskpd;
		$rek3='153';
        if($rek3==15){
			$nama_rek='Aset Lainnya';
		}else{
			$nama_rek=$this->tukd_model->get_nama($rek3,'nm_rek3','ms_rek3_64','kd_rek3');
		}
		
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc){
                    $kab     = $rowsc->kab_kota;
                    $prov     = $rowsc->provinsi;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                 }
		
			$cRet ='<TABLE style="border-collapse:collapse" width="100%" border="0" cellspacing="0" cellpadding="1" align=center>
					<TR>
						<TD colspan="21" align="center" ><b>'.$prov.' </TD>
					</TR>
					<tr></tr>
                    <TR>
						<TD colspan="21" align="center" >PENGADAAN ASET TAHUN ANGGARAN '.$lntahunang.'</TD>
					</TR>
					</TABLE><br/>';
			
		$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">
                <thead>
				<tr>
                    <td rowspan=\"2\" width=\"5%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">No</td>
                    <td rowspan=\"2\" width=\"5%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Unit Kerja</td>
					<td colspan=\"3\" width=\"25%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Laporan Realisasi Anggaran</td>
					<td rowspan=\"2\" width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Jumlah LRA</td>
					<td colspan=\"3\" width=\"25%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Laporan Operasional</td>
					<td rowspan=\"2\" width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Jumlah LO</td>
					<td rowspan=\"2\" width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Selisih antara<br>LRA dan LO</td>
					<td rowspan=\"2\" width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Keterangan</td>
                </tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Pendapatan</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Belanja Pegawai</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Barang dan Jasa</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Pendapatan</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Beban Pegawai</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Barang dan Jasa</td> 
				</tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">6</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">7</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">8</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">9</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">10</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">11</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">12</td> 
				</tr>
				</thead>";
		
			$jum_pend=0;
		    $jum_bel_peg=0;
		    $jum_bel_br=0;
		    $jum_pend_lo=0;
		    $jum_bbn_peg=0;
		    $jum_bbn_br=0;
		    $tot_lra=0;
		    $tot_lo=0;
		    $tot_sel=0;
			$no=0;
			$sql = "SELECT a.kd_skpd, a.nm_skpd
					,ISNULL(pend,0) as pend 
					,ISNULL(bel_peg,0) as bel_peg 
					,ISNULL(bel_br,0) as bel_br 
					,ISNULL(pend_lo,0) as pend_lo
					,ISNULL(bbn_peg,0) as bbn_peg
					,ISNULL(bbn_br,0) as bbn_br
					FROM ms_skpd a 
					LEFT JOIN 
					(SELECT kd_skpd
					,SUM(CASE WHEN kd_rek ='4' THEN real_spj ELSE 0 END) AS pend
					,SUM(CASE WHEN kd_rek ='511' THEN real_spj ELSE 0 END) AS bel_peg
					,SUM(CASE WHEN kd_rek ='512' THEN real_spj ELSE 0 END) AS bel_br
					,SUM(CASE WHEN kd_rek ='8' THEN real_spj ELSE 0 END) AS pend_lo
					,SUM(CASE WHEN kd_rek ='911' THEN real_spj ELSE 0 END) AS bbn_peg
					,SUM(CASE WHEN kd_rek ='912' THEN real_spj ELSE 0 END) AS bbn_br
					FROM
					(select b.kd_skpd, left(a.kd_rek5,3) kd_rek, sum(isnull(a.debet,0)-isnull(a.kredit,0)) as real_spj 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
					where left(a.kd_rek5,3) in ('511','512','911','912')
					group by kd_skpd, left(a.kd_rek5,3)
					UNION ALL
					select b.kd_skpd, left(a.kd_rek5,1) kd_rek, sum(isnull(a.kredit,0)-isnull(a.debet,0)) as real_spj 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
					where left(a.kd_rek5,1) in ('4','8')
					GROUP BY kd_skpd, left(a.kd_rek5,1))a
					GROUP BY kd_skpd) b ON 
					a.kd_skpd=b.kd_skpd
					";
                    $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $row)
                    {
                       $kode = $row->kd_skpd;
                       $nama = $row->nm_skpd;
                       $pend = $row->pend;
                       $bel_peg = $row->bel_peg;
                       $bel_br = $row->bel_br;
                       $pend_lo = $row->pend_lo;
                       $bbn_peg = $row->bbn_peg;
                       $bbn_br = $row->bbn_br;
					   $jum_lra= $pend+$bel_peg+$bel_br;
					   $jum_lo = $pend_lo+$bbn_peg+$bbn_br;
                       $selisih=$jum_lra-$jum_lo;
					   $jum_pend=$jum_pend+$pend;
					   $jum_bel_peg=$jum_bel_peg+$bel_peg;
					   $jum_bel_br=$jum_bel_br+$bel_br;
					   $jum_pend_lo=$jum_pend_lo+$pend_lo;
					   $jum_bbn_peg=$jum_bbn_peg+$bbn_peg;
					   $jum_bbn_br=$jum_bbn_br+$bbn_br;
					   $tot_lra=$tot_lra+$jum_lra;
					   $tot_lo=$tot_lo+$jum_lo;
					   $tot_sel=$tot_sel+$selisih;
					   $no=$no+1;
					 $cRet .='<tr>
							   <td align="center" valign="top" style="font-size:12px">'.$no.'</td> 
							   <td align="left" style="font-size:12px">'.$nama.'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($pend, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($bel_peg, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($bel_br, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_lra, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($pend_lo, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($bbn_peg, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($bbn_br, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_lo, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($selisih, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">&nbsp;</td> 
							</tr>'; 
					}
			$cRet .='<tr>
							   <td colspan="2" align="center" valign="top" style="font-size:12px"></td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_pend, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_bel_peg, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_bel_br, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_lra, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_pend_lo, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_bbn_peg, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_bbn_br, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_lo, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot_sel, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">&nbsp;</td> 
							</tr>'; 
			$cRet .="</table>";
			$data['prev']= $cRet;    
            $judul='Lap_penjelasan_lo_lra';
			switch ($ctk){
				case 0;
				echo ("<title>$judul</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'L');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
		}
	
	function cetak_lap_kom($kdskpd='',$rek3='',$ctk=''){
        $lntahunang = $this->session->userdata('pcThang');       
        $lcskpd = $kdskpd;
		$rek3='153';
        if($rek3==15){
			$nama_rek='Aset Lainnya';
		}else{
			$nama_rek=$this->tukd_model->get_nama($rek3,'nm_rek3','ms_rek3_64','kd_rek3');
		}
		
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc){
                    $kab     = $rowsc->kab_kota;
                    $prov     = $rowsc->provinsi;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                 }
		
			$cRet ='<TABLE style="border-collapse:collapse" width="100%" border="0" cellspacing="0" cellpadding="1" align=center>
					<TR>
						<TD colspan="21" align="center" ><b>'.$prov.' </TD>
					</TR>
					<tr></tr>
                    <TR>
						<TD colspan="21" align="center" >PENJELASAN DAMPAK KOMULATIF KEBIJAKAN/KESALAHAN MENDASAR PADA LAPORAN PERUBAHAN EKUITAS TAHUN ANGGARAN '.$lntahunang.'</TD>
					</TR>
					</TABLE><br/>';
			
		$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">
                <thead>
				<tr>
                    <td rowspan=\"2\" width=\"5%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">No</td>
                    <td rowspan=\"2\" width=\"25%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Unit Kerja</td>
					<td colspan=\"2\" width=\"20%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Koreksi Nilai Persediaan</td>
					<td colspan=\"2\" width=\"20%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Selisih Revaluasi Aset Tetap</td>
					<td colspan=\"2\" width=\"20%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Lain - Lain</td>
					<td rowspan=\"2\" width=\"10%\" align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Jumlah</td>
                </tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Uraian</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Realisasi</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Uraian</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Realisasi</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Uraian</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Realisasi</td> 
				</tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">6</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">7</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">8</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">9</td> 
				</tr>
				</thead>";
			$jum_real_sedia=0;
			$jum_real_tetap=0;
			$jum_real_lain=0;
			$total=0;
			$no=0;
			$sql = "SELECT a.kd_skpd, a.nm_skpd
					,ISNULL(real_sedia,0) as real_sedia 
					,ISNULL(real_tetap,0) as real_tetap 
					,ISNULL(real_lain,0) as real_lain 
					FROM ms_skpd a 
					LEFT JOIN (
					SELECT kd_skpd
					,SUM(CASE WHEN reev ='2' THEN real_spj ELSE 0 END) AS real_sedia
					,SUM(CASE WHEN reev ='1' THEN real_spj ELSE 0 END) AS real_tetap
					,SUM(CASE WHEN reev ='3' THEN real_spj ELSE 0 END) AS real_lain
					 FROM (
					select b.kd_skpd, kd_rek5,b.reev ,sum(isnull(a.kredit,0)-isnull(a.debet,0)) as real_spj 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
					where b.reev = '2' 
					AND kd_rek5 = '3110101'
					GROUP BY b.kd_skpd,kd_rek5,b.reev
					UNION ALL
					select b.kd_skpd, kd_rek5,b.reev, sum(isnull(a.kredit,0)-isnull(a.debet,0)) as real_spj 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
					where b.reev = '1' 
					AND kd_rek5 = '3110101'
					GROUP BY b.kd_skpd,kd_rek5,b.reev
					UNION ALL
					select b.kd_skpd, kd_rek5,b.reev, sum(isnull(a.kredit,0)-isnull(a.debet,0)) as real_spj 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
					where b.reev = '3' 
					AND kd_rek5 = '3110101'
					GROUP BY b.kd_skpd,kd_rek5,b.reev) a
					GROUP BY kd_skpd)b
					ON a.kd_skpd=b.kd_skpd
					";
                    $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $row)
                    {
                       $kode = $row->kd_skpd;
                       $nama = $row->nm_skpd;
                       $real_sedia = $row->real_sedia;
                       $real_tetap = $row->real_tetap;
                       $real_lain = $row->real_lain;
					   $tot= $real_sedia+$real_tetap+$real_lain;
                       $jum_real_sedia=$jum_real_sedia+$real_sedia;
                       $jum_real_tetap=$jum_real_tetap+$real_tetap;
                       $jum_real_lain=$jum_real_lain+$real_lain;
					   $total=$total+$tot;
					   $no=$no+1;
					 $cRet .='<tr>
							   <td align="center" valign="top" style="font-size:12px">'.$no.'</td> 
							   <td align="left" style="font-size:12px">'.$nama.'</td> 
							   <td align="right" valign="top" style="font-size:12px">&nbsp;</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($real_sedia, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px"></td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($real_tetap, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px"></td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($real_lain, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot, "2", ",", ".").'</td> 
							</tr>'; 
					}
			$cRet .='<tr>
							   <td colspan="2" align="center" valign="top" style="font-size:12px">J U M L A H</td> 
							   <td align="right" valign="top" style="font-size:12px">&nbsp;</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_real_sedia, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px"></td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_real_tetap, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px"></td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_real_lain, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($total, "2", ",", ".").'</td> 
							</tr>'; 
			$cRet .="</table>";
			$data['prev']= $cRet;    
            $judul='Lap_penjelasan_dampak_komulatif';
			switch ($ctk){
				case 0;
				echo ("<title>$judul</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'L');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
		}
	
	
	function cetak_lap_lo($kdskpd='',$rek3='',$ctk=''){
        $lntahunang = $this->session->userdata('pcThang');       
        $lcskpd = $kdskpd;
		$rek3='153';
        if($rek3==15){
			$nama_rek='Aset Lainnya';
		}else{
			$nama_rek=$this->tukd_model->get_nama($rek3,'nm_rek3','ms_rek3_64','kd_rek3');
		}
		
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc){
                    $kab     = $rowsc->kab_kota;
                    $prov     = $rowsc->provinsi;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                 }
		
			$cRet ='<TABLE style="border-collapse:collapse" width="100%" border="0" cellspacing="0" cellpadding="1" align=center>
					<TR>
						<TD colspan="21" align="center" ><b>'.$prov.' </TD>
					</TR>
					<tr></tr>
                    <TR>
						<TD colspan="21" align="center" >PENJELASAN LAPORAN OPERASIONAL TAHUN ANGGARAN'.$lntahunang.'</TD>
					</TR>
					</TABLE><br/>';
			
		$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">
                <thead>
				<tr>
                    <td rowspan=\"2\" width=\"5%\" bgcolor=\"#CCCCCC\" align=\"center\" style=\"font-size:12px\">No</td>
                    <td rowspan=\"2\" width=\"35%\" bgcolor=\"#CCCCCC\" align=\"center\" style=\"font-size:12px\">Unit Kerja</td>
					<td colspan=\"2\" width=\"25%\" bgcolor=\"#CCCCCC\" align=\"center\" style=\"font-size:12px\">Beban Penyusutan</td>
					<td colspan=\"2\" width=\"25%\" bgcolor=\"#CCCCCC\" align=\"center\" style=\"font-size:12px\">Beban Lain-lain</td>
					<td rowspan=\"2\" width=\"10%\" bgcolor=\"#CCCCCC\" align=\"center\" style=\"font-size:12px\">Jumlah</td>
                </tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Uraian</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Realisasi</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Uraian</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">Realisasi</td> 
				</tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">6</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">7</td> 
				</tr>
				</thead>";
			$jum_bbn_susut=0;
			$jum_bbn_lain=0;
			$total=0;
			$no=0;
			$sql = "SELECT a.kd_skpd, a.nm_skpd
					,ISNULL(bbn_susut,0) as bbn_susut 
					,ISNULL(bbn_lain,0) as bbn_lain 
					FROM ms_skpd a 
					LEFT JOIN 
					(SELECT kd_skpd
					,SUM(CASE WHEN kd_rek ='917' THEN real_spj ELSE 0 END) AS bbn_susut
					,SUM(CASE WHEN kd_rek IN ('918','919') THEN real_spj ELSE 0 END) AS bbn_lain
					 FROM 
					(select b.kd_skpd, left(a.kd_rek5,3) kd_rek, sum(isnull(a.debet,0)-isnull(a.kredit,0)) as real_spj 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
					where left(a.kd_rek5,3) in ('917','918','919')
					group by kd_skpd, left(a.kd_rek5,3))a
					GROUP BY kd_skpd) b
					ON a.kd_skpd=b.kd_skpd
					";
                    $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $row)
                    {
                       $kode = $row->kd_skpd;
                       $nama = $row->nm_skpd;
                       $bbn_susut = $row->bbn_susut;
                       $bbn_lain = $row->bbn_lain;
					   $tot= $bbn_susut+$bbn_lain;
                       $jum_bbn_susut=$jum_bbn_susut+$bbn_susut;
                       $jum_bbn_lain=$jum_bbn_lain+$bbn_lain;
					   $total=$total+$tot;
					   $no=$no+1;
					 $cRet .='<tr>
							   <td align="center" valign="top" style="font-size:12px">'.$no.'</td> 
							   <td align="left" style="font-size:12px">'.$nama.'</td> 
							   <td align="right" valign="top" style="font-size:12px">&nbsp;</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($bbn_susut, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px"></td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($bbn_lain, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($tot, "2", ",", ".").'</td> 
							</tr>'; 
					}
			$cRet .='<tr>
							   <td colspan="2" align="center" valign="top" style="font-size:12px">J U M L A H</td> 
							   <td align="right" valign="top" style="font-size:12px">&nbsp;</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_bbn_susut, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px"></td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($jum_bbn_lain, "2", ",", ".").'</td> 
							   <td align="right" valign="top" style="font-size:12px">'.number_format($total, "2", ",", ".").'</td> 
							</tr>'; 
			$cRet .="</table>";
			$data['prev']= $cRet;    
            $judul='Lap_penjelasan_lo';
			switch ($ctk){
				case 0;
				echo ("<title>$judul</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'L');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
		}
	
	
	
	function cetak_perdaIV_real($cetak = 1)
    {

        $sqlsc = "SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
        $sqlsclient = $this->db->query($sqlsc);
        foreach ($sqlsclient->result() as $rowsc)
        {

            $tgl = $rowsc->tgl_rka;
            $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
            $kab = $rowsc->kab_kota;
            $daerah = $rowsc->daerah;
            $thn = $rowsc->thn_ang;
        }


        $cRet = '';
        if ($cetak <> 0)
        {
            $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td rowspan=\"3\" align=\"left\" width=\"60%\"><strong></strong></td>
                         <td rowspan=\"3\" valign =\"top\" align=\"left\" width=\"10%\"><strong><h5>LAMPIRAN IV  :</h6></strong></td>
                         <td colspan=\"2\" align=\"left\" width=\"30%\"><strong><h5>PERATURAN DAERAH</strong></h5></td>
                    </tr>
                    <tr> 
                         <td align=\"left\" width=\"10%\"><h5>NOMOR</h5></td><td width=\"20%\" align=\"left\" ><h5>:</h5></td>
                    </tr>
                    <tr>
                        <td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"10%\"><h5>TANGGAL</h5></td><td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"20%\"><h5>:</h5></td>
                    </tr>
                                         
                   
                  </table>";
        }
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>$kab</strong></td>
                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN REALISASI BELANJA MENURUT URUSAN PEMERINTAHAN DAERAH, ORGANISASI, PROGRAM DAN KEGIATAN</strong></td>
                    </tr>
                    
                    <tr>
                         <td align=\"center\"><strong>TAHUN ANGARAN $thn</strong></td>
                    </tr>

                  </table>";

        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\"><b>KODE</b></td>                            
                            <td rowspan=\"3\" bgcolor=\"#CCCCCC\" width=\"22%\" align=\"center\"><b>URAIAN URUSAN, ORGANISASI, PROGRAM DAN KEGIATAN PEMERINTAH DAERAH</b></td>                            
                            <td style=\"border-bottom: solid 1px black;\" colspan=\"4\" bgcolor=\"#CCCCCC\" width=\"49%\" align=\"center\"><b>SETELAH PERUBAHAN</b></td>
                            <td style=\"border-bottom: solid 1px black;\" colspan=\"4\" bgcolor=\"#CCCCCC\" width=\"49%\" align=\"center\"><b>REALISASI</b></td>
                            <td style=\"border-bottom: solid 1px black;\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"12%\" align=\"center\"><b>LEBIH/(KURANG)</b></td>
                        </tr>
                        <tr>
                            <td style=\"border-bottom: solid 1px black;\" colspan=\"3\" width=\"21%\" bgcolor=\"#CCCCCC\" align=\"center\">JENIS BELANJA</td>
                            <td rowspan=\"2\" width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">JUMLAH</td>
                            <td style=\"border-bottom: solid 1px black;\" colspan=\"3\" width=\"21%\" bgcolor=\"#CCCCCC\" align=\"center\">JENIS BELANJA</td>
                            <td rowspan=\"2\" width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">JUMLAH</td>
                            <td rowspan=\"2\" width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">(Rp)</td>
                            <td rowspan=\"2\" width=\"5%\" bgcolor=\"#CCCCCC\" align=\"center\">%</td>
                        </tr>
                        <tr>
 		                    <td width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">PEGAWAI</td>
                            <td width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">BARANG DAN JASA</td>
                            <td width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">MODAL</td>
                            <td width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">PEGAWAI</td>
                            <td width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">BARANG DAN JASA</td>
                            <td width=\"7%\" bgcolor=\"#CCCCCC\" align=\"center\">MODAL</td>
                        </tr>    
                     </thead>
                    
                     
                        <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"22%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"7%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\">&nbsp;</td>
                        </tr>
                        ";
        $sql1 = "SELECT * FROM (SELECT a.kd_urusan1 AS kode,a.kd_urusan1 AS kode1, a.nm_urusan1 AS nama,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS ang_521,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND LEFT(kd_skpd,1)=a.kd_urusan1)AS ang_522,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='523' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS ang_523,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS ang_jumlah,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS real_521,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND LEFT(kd_skpd,1)=a.kd_urusan1)AS real_522,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='523' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS real_523,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND LEFT(kd_skpd,1)=a.kd_urusan1) AS real_jumlah,'1' AS urut FROM trdrka b 
                        RIGHT JOIN ms_urusan1 a ON LEFT(b.kd_skpd,1)=a.kd_urusan1 GROUP BY  a.kd_urusan1 ,a.nm_urusan1   
                        UNION
                        SELECT a.kd_urusan AS kode,a.kd_urusan AS kode1, a.nm_urusan AS nama,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND LEFT(kd_skpd,4)=a.kd_urusan) AS ang_521,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND LEFT(kd_skpd,4)=a.kd_urusan)AS ang_522,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT (kd_rek5,3)='523' AND LEFT(kd_skpd,4)=a.kd_urusan) AS ang_523,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND LEFT(kd_skpd,4)=a.kd_urusan)AS ang_jumlah,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND LEFT(kd_skpd,4)=a.kd_urusan) AS real_521,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND LEFT(kd_skpd,4)=a.kd_urusan)AS real_522,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT (kd_rek5,3)='523' AND LEFT(kd_skpd,4)=a.kd_urusan) AS real_523,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND LEFT(kd_skpd,4)=a.kd_urusan)AS real_jumlah,'2' AS urut FROM trdrka b 
                        RIGHT JOIN ms_urusan a ON LEFT(b.kd_skpd,4)=a.kd_urusan GROUP BY  a.kd_urusan ,a.nm_urusan  
                        UNION
                        SELECT b.kd_skpd AS kode,b.kd_skpd AS kode1, b.nm_skpd AS nama,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND kd_skpd=a.kd_skpd) AS ang_521,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND kd_skpd=a.kd_skpd) AS ang_522, 
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='523' AND kd_skpd=a.kd_skpd) AS ang_523,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND kd_skpd=a.kd_skpd)AS ang_jumlah,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND kd_skpd=a.kd_skpd) AS real_521,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND kd_skpd=a.kd_skpd) AS real_522, 
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='523' AND kd_skpd=a.kd_skpd) AS real_523,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND kd_skpd=a.kd_skpd)AS real_jumlah,'3' AS urut FROM trdrka a 
                        RIGHT JOIN ms_skpd b ON a.kd_skpd=b.kd_skpd GROUP BY a.kd_skpd,b.nm_skpd 
                        UNION
                        SELECT b.kd_program AS kode,b.kd_program AS kode1,c.nm_program AS nama,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND kd_skpd=a.kd_skpd AND LEFT(kd_kegiatan,(LENGTH(b.kd_program)))=b.kd_program ) AS ang_521,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND kd_skpd=a.kd_skpd AND LEFT(kd_kegiatan,(LENGTH(b.kd_program)))=b.kd_program ) AS ang_522,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='523' AND kd_skpd=a.kd_skpd AND LEFT(kd_kegiatan,(LENGTH(b.kd_program)))=b.kd_program ) AS ang_523,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND kd_skpd=a.kd_skpd AND LEFT(kd_kegiatan,(LENGTH(b.kd_program)))=b.kd_program ) AS ang_jumlah,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND kd_skpd=a.kd_skpd AND LEFT(kd_kegiatan,(LENGTH(b.kd_program)))=b.kd_program ) AS real_521,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND kd_skpd=a.kd_skpd AND LEFT(kd_kegiatan,(LENGTH(b.kd_program)))=b.kd_program ) AS real_522,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='523' AND kd_skpd=a.kd_skpd AND LEFT(kd_kegiatan,(LENGTH(b.kd_program)))=b.kd_program ) AS real_523,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND kd_skpd=a.kd_skpd AND LEFT(kd_kegiatan,(LENGTH(b.kd_program)))=b.kd_program ) AS real_jumlah,
                        '4' AS urut
                        FROM trdrka a INNER JOIN trskpd b ON a.kd_kegiatan=b.kd_kegiatan
                        INNER JOIN m_prog c ON b.kd_program1 = c.kd_program WHERE RIGHT(b.kd_program,2) <>'00'GROUP BY  b.kd_program,c.nm_program 
                        UNION
                        SELECT b.kd_kegiatan AS kode,b.kd_kegiatan AS kode1,c.nm_kegiatan AS nama,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND kd_skpd=a.kd_skpd AND kd_kegiatan=b.kd_kegiatan ) AS ang_521,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND kd_skpd=a.kd_skpd AND kd_kegiatan=b.kd_kegiatan ) AS ang_522,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='523' AND kd_skpd=a.kd_skpd AND kd_kegiatan=b.kd_kegiatan ) AS ang_523,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND kd_skpd=a.kd_skpd AND kd_kegiatan=b.kd_kegiatan ) AS ang_jumlah,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='521' AND kd_skpd=a.kd_skpd AND kd_kegiatan=b.kd_kegiatan ) AS real_521,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='522' AND kd_skpd=a.kd_skpd AND kd_kegiatan=b.kd_kegiatan ) AS real_522,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='523' AND kd_skpd=a.kd_skpd AND kd_kegiatan=b.kd_kegiatan ) AS real_523,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,2)='52' AND kd_skpd=a.kd_skpd AND kd_kegiatan=b.kd_kegiatan ) AS real_jumlah,
                        '5' AS urut
                        FROM trdrka a INNER JOIN trskpd b ON a.kd_kegiatan=b.kd_kegiatan
                        INNER JOIN m_giat c ON b.kd_kegiatan1 = c.kd_kegiatan WHERE RIGHT(b.kd_program,2) <>'00'GROUP BY  b.kd_kegiatan,c.nm_kegiatan 
                        UNION	
                        SELECT DISTINCT '' AS kode,'99' AS kode, 'JUMLAH' AS nama,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='521') AS ang_521,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='522' )AS ang_522,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,3)='523' ) AS ang_523,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,2)='52' ) AS ang_jumlah,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='521' ) AS real_521,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='522' )AS real_522,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,3)='523' ) AS real_523,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,2)='52' ) AS real_jumlah,'6' AS urut FROM trdrka) a ORDER BY kode1,urut";

        $query = $this->db->query($sql1);
        //$query = $this->skpd_model->getAllc();

        foreach ($query->result() as $row)
        {
            $kode = $row->kode;
            $nama = $row->nama;
            $ang521 = number_format($row->ang_521, "2", ".", ",");
            $ang522 = number_format($row->ang_522, "2", ".", ",");
            $ang523 = number_format($row->ang_523, "2", ".", ",");
            $jum_ang = number_format($row->ang_jumlah, "2", ".", ",");
            $real521 = number_format($row->real_521, "2", ".", ",");
            $real522 = number_format($row->real_522, "2", ".", ",");
            $real523 = number_format($row->real_523, "2", ".", ",");
            $jum_real = number_format($row->real_jumlah, "2", ".", ",");
            $rumus1 = $row->real_jumlah - $row->ang_jumlah;
            if ($rumus1 < 0)
            {
                $x1 = "(";
                $rumus1 = $rumus1 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $total1 = number_format($rumus1, "2", ".", ",");
            $per1 = ($rumus1 != 0) ? ($rumus1 / $row->ang_jumlah) * 100 : 0;
            $persen1 = number_format($per1, "2", ".", ",");

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"10%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"22%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"7%\" align=\"right\">$ang521</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"7%\" align=\"right\">$ang522</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"7%\" align=\"right\">$ang523</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"7%\" align=\"right\">$jum_ang</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"7%\" align=\"right\">$real521</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"7%\" align=\"right\">$real522</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"7%\" align=\"right\">$real523</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"7%\" align=\"right\">$jum_real</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"7%\" align=\"right\">$x1$total1$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: solid 1px black;\" width=\"5%\" align=\"right\">$persen1</td>
                                </tr> ";


        }

        $cRet .= " </table>";
        $data['prev'] = $cRet;
        $judul = 'Laporan Realisasi APBD  Lamp IV ';
        $this->template->set('title', 'CETAK PERDA REALISASI LAMPIRAN IV');
        switch ($cetak)
        {
            case 1;
                $this->tukd_model->_mpdf('', $cRet, 10, 10, 10, 'L');
                break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
    }
	
	function ctk_penyi_piutang($skpd='', $ctk=''){
    
		$lntahunang = $this->session->userdata('pcThang');       
		$bulan = 12+1;
		$sql =  " select nm_skpd from ms_skpd where kd_skpd='$skpd'";
			$hasil = $this->db->query($sql);
            foreach ($hasil->result() as $row)
				{
					$nama_skpd = $row->nm_skpd;
				}
					
		$cRet = '';
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
                 <tr>
                    <td colspan=\"5\" style=\"border-top:none;border-right:none;border-left:none;font-size:14px\" align=\"center\">
                    <b>PEMERINTAH KABUPATEN SANGGAU</b> <br>
					<b>".strtoupper($nama_skpd)."</b> <br>
                    <b>ANALISIS UMUR PIUTANG</b><BR>
                    <b>PER 31 DESEMBER $lntahunang </b>
                    <BR>&nbsp;                                        
                    </td>           
                </tr>
				</table>
				";
		 $cRet .="<table style=\"border-collapse:collapse;font-size:12px\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
                 <tr>
                    <td width=\"5%\"  align=\"left\">
                    SKPD </td> 
					<td> :</td>
					<td> $skpd - $nama_skpd <br></td>
                </tr>
				<tr>
                    <td width=\"5%\"  align=\"left\">
                    &nbsp;</td> 
                </tr>
				</table>
				";
		
					$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">
                <tr>
                    <td width=\"10%\" align=\"center\" style=\"font-size:12px\">Kode Rekening </td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Uraian</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Tahun<br>Penetapan</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Bulan<br>Penetapan</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Keterangan</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Saldo<br>Piutang</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Umur<br>Piutang</td>
					<td width=\"5%\" align=\"center\" style=\"font-size:12px\">Kualitas<br>Piutang</td>
					<td width=\"5%\" align=\"center\" style=\"font-size:12px\">Taksiran<br>Piutang Tak<br>Tertagih</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Penyisihan<br>Piutang</td>
					<td width=\"10%\" align=\"center\" style=\"font-size:12px\">Nilai Buku<br>Piutang Tahun<br>$lntahunang</td>
                </tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">6</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">7</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">8</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">9</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">10</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" style=\"font-size:12px\">11</td> 
                </tr>";
				
				$sql = "select kd_rek3 kode1, kd_rek3 kode, UPPER(nm_rek3) nama, '' lokasi, 0 tahun, 0 bulan, 0 jumlah, 0 sal_awal, 
						0 kurang, 0 tambah, 0 tahun_n, '' keterangan, 0 umur_t, 0 umur_b, '' kualitas, 0 penyi_piu from lamp_aset 
						where kd_skpd='$skpd' and kd_rek3 in (113,114)
						union
						select LEFT(kd_rek5,5) kode1, LEFT(kd_rek5,5) kode, (SELECT UPPER(nm_rek4_64) from ms_rek4_64 where kd_rek4_64 = LEFT(kd_rek5,5)) nama, 
						'' lokasi, 0 tahun, 0 bulan, 0 jumlah, 0 sal_awal, 0 kurang, 0 tambah, 0 tahun_n, '' keterangan, 0 umur_t, 
						0 umur_b, '' kualitas, 0 penyi_piu from lamp_aset 
						where kd_skpd='$skpd' and kd_rek3 in (113,114)
						union all
						select kode1, kode, nama, lokasi, tahun, bulan, jumlah,  sal_awal,  kurang,  
						tambah, tahun_n, keterangan, umur_t, isnull(umur_b,1) umur_b, case when left(kode1,5)=11301 and umur_t<=1 then 'Lancar'
						when left(kode1,5)=11301 and umur_t>1 and umur_t<=2 then 'Kurang Lancar'
						when left(kode1,5)=11301 and umur_t>2 and umur_t<=5 then 'Diragukan'
						when left(kode1,5)=11301 and umur_t>5 then 'Macet'
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,1)<=1 then 'Lancar'
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,1)>1 and isnull(umur_b,1)<=3 then 'Kurang Lancar'
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,1)>3 and isnull(umur_b,1)<=12 then 'Diragukan'
						when left(kode1,5)=11302 and umur_t>=1 then 'Macet'
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,1)<1 then 'Lancar'
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,1)>1 and isnull(umur_b,1)<=1 then 'Kurang Lancar'
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,1)>2 and isnull(umur_b,1)<=2 then 'Diragukan'
						when left(kode1,5) not in (11301,11302) and umur_t>=0 and isnull(umur_b,1)>3 and isnull(umur_b,1)<=3 then 'Macet'
						else 'Tidak Diketahui' end as kualitas,
						case when left(kode1,5)=11301 and umur_t<=1 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.005 as decimal(20,2))
						when left(kode1,5)=11301 and umur_t>1 and umur_t<=2 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.1 as decimal(20,2))
						when left(kode1,5)=11301 and umur_t>2 and umur_t<=5 then
						cast((sal_awal-kurang+tambah+tahun_n)* 0.5 as decimal(20,2))
						when left(kode1,5)=11301 and umur_t>5 then
						cast((sal_awal-kurang+tambah+tahun_n) * 1 as decimal(20,2))
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,0)<=1 then
						cast((sal_awal-kurang+tambah+tahun_n) * 0.005 as decimal(20,2))
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,0)>1 and isnull(umur_b,0)<=3 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.1 as decimal(20,2))
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,0)>3 and isnull(umur_b,0)<=12 then 
						cast((sal_awal-kurang+tambah+tahun_n)* 0.5 as decimal(20,2))
						when left(kode1,5)=11302 and umur_t>=1 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 1 as decimal(20,2))
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,0)<1 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.005 as decimal(20,2))
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,0)>1 and isnull(umur_b,0)<=1 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.1 as decimal(20,2))
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,0)>2 and isnull(umur_b,0)<=2 then 
						cast((sal_awal-kurang+tambah+tahun_n)* 0.5 as decimal(20,2))
						when left(kode1,5) not in (11301,11302) and umur_t>=0 and isnull(umur_b,0)>3 and isnull(umur_b,0)<=3 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 1 as decimal(20,2))
						else 'Tidak Diketahui' end as penyi_piu 
						from
						(SELECT kd_rek5 as kode1, kd_rek5 as kode, nm_rek5 as nama, lokasi, tahun, isnull(bulan,1) bulan, jumlah,   
						sal_awal,  kurang,  tambah, tahun_n, keterangan, case when $bulan-isnull(bulan,1)=12 then $lntahunang-tahun+1 else $lntahunang-tahun end 
						as umur_t, case when $bulan-isnull(bulan,1)=12 then 0 else $bulan-isnull(bulan,1) end as umur_b FROM lamp_aset where kd_rek3 
						in (113,114) and kd_skpd ='$skpd') a
						union all
						select LEFT(kode1,5)+'988' kode1, '' kode, (SELECT 'TOTAL '+UPPER(nm_rek4_64) from ms_rek4_64 where kd_rek4_64 = LEFT(kode1,5)) nama, 
						'' lokasi, 0 tahun, 0 bulan, 0 jumlah, sum(sal_awal) sal_awal, sum(kurang) kurang, 
						sum(tambah) tambah, sum(tahun_n) tahun_n, '' keterangan, 0 umur_t, 
						0 umur_b, '' kualitas, sum(penyi_piu) penyi_piu
						from (select kode1, kode, nama, lokasi, tahun, bulan, jumlah,  sal_awal,  kurang,  
						tambah, tahun_n, keterangan, umur_t, isnull(umur_b,1) umur_b, case when left(kode1,5)=11301 and umur_t<=1 then 'Lancar'
						when left(kode1,5)=11301 and umur_t>1 and umur_t<=2 then 'Kurang Lancar'
						when left(kode1,5)=11301 and umur_t>2 and umur_t<=5 then 'Diragukan'
						when left(kode1,5)=11301 and umur_t>5 then 'Macet'
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,1)<=1 then 'Lancar'
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,1)>1 and isnull(umur_b,1)<=3 then 'Kurang Lancar'
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,1)>3 and isnull(umur_b,1)<=12 then 'Diragukan'
						when left(kode1,5)=11302 and umur_t>=1 then 'Macet'
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,1)<1 then 'Lancar'
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,1)>1 and isnull(umur_b,1)<=1 then 'Kurang Lancar'
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,1)>2 and isnull(umur_b,1)<=2 then 'Diragukan'
						when left(kode1,5) not in (11301,11302) and umur_t>=0 and isnull(umur_b,1)>3 and isnull(umur_b,1)<=3 then 'Macet'
						else 'Tidak Diketahui' end as kualitas,
						case when left(kode1,5)=11301 and umur_t<=1 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.005 as decimal(20,2))
						when left(kode1,5)=11301 and umur_t>1 and umur_t<=2 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.1 as decimal(20,2))
						when left(kode1,5)=11301 and umur_t>2 and umur_t<=5 then
						cast((sal_awal-kurang+tambah+tahun_n)* 0.5 as decimal(20,2))
						when left(kode1,5)=11301 and umur_t>5 then
						cast((sal_awal-kurang+tambah+tahun_n) * 1 as decimal(20,2))
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,0)<=1 then
						cast((sal_awal-kurang+tambah+tahun_n) * 0.005 as decimal(20,2))
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,0)>1 and isnull(umur_b,0)<=3 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.1 as decimal(20,2))
						when left(kode1,5)=11302 and umur_t<1 and isnull(umur_b,0)>3 and isnull(umur_b,0)<=12 then 
						cast((sal_awal-kurang+tambah+tahun_n)* 0.5 as decimal(20,2))
						when left(kode1,5)=11302 and umur_t>=1 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 1 as decimal(20,2))
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,0)<1 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.005 as decimal(20,2))
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,0)>1 and isnull(umur_b,0)<=1 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 0.1 as decimal(20,2))
						when left(kode1,5) not in (11301,11302) and umur_t<1 and isnull(umur_b,0)>2 and isnull(umur_b,0)<=2 then 
						cast((sal_awal-kurang+tambah+tahun_n)* 0.5 as decimal(20,2))
						when left(kode1,5) not in (11301,11302) and umur_t>=0 and isnull(umur_b,0)>3 and isnull(umur_b,0)<=3 then 
						cast((sal_awal-kurang+tambah+tahun_n) * 1 as decimal(20,2))
						else 'Tidak Diketahui' end as penyi_piu 
						from
						(SELECT kd_rek5 as kode1, kd_rek5 as kode, nm_rek5 as nama, lokasi, tahun, isnull(bulan,1) bulan, jumlah,   
						sal_awal,  kurang,  tambah, tahun_n, keterangan, case when $bulan-isnull(bulan,1)=12 then $lntahunang-tahun+1 else $lntahunang-tahun end 
						as umur_t, case when $bulan-isnull(bulan,1)=12 then 0 else $bulan-isnull(bulan,1) end as umur_b FROM lamp_aset where kd_rek3 
						in (113,114) and kd_skpd ='$skpd') a) a group by left(kode1,5)
						union
						select LEFT(kd_rek5,5)+'9999' kode1, '' kode, '' nama, '' lokasi, 0 tahun, 0 bulan, 0 jumlah, 0 sal_awal, 
						0 kurang, 0 tambah, 0 tahun_n, '' keterangan, 0 umur_t, 0 umur_b, '' kualitas, 0 penyi_piu from lamp_aset 
						where kd_skpd='$skpd' and kd_rek3 in (113,114) 
						order by kode1, tahun, bulan  
";
                    $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $row)
                    {
                       $kode1 = $row->kode1;
                       $kode = $row->kode;
					   $nama = $row->nama;
					   $bln = $row->bulan;
                       $tahun = $row->tahun;
                       $lokasi = $row->lokasi;
                       $jumlah = $row->jumlah;
                       $sal_awal = $row->sal_awal;
                       $kurang = $row->kurang;
                       $tambah = $row->tambah;
                       $tahun_n = $row->tahun_n;
                       $akhir = $sal_awal-$kurang+$tambah;
                       $keterangan = $row->keterangan;
					   $umur_t = $row->umur_t;
					   $umur_b = $row->umur_b;
					   $kualitas = $row->kualitas;
					   $penyi_piu = $row->penyi_piu;
					   $nilai_piu = $akhir-$penyi_piu;
					   $jumlah==0 ? $jumlah = '' : $jumlah=number_format($jumlah,"0",",",".");
					   $bln==0 ? $bln = '' : $bln=number_format($bln,"0",",",".");
					   $sal_awal==0 ? $sal_awal = '' : $sal_awal=number_format($sal_awal,"2",",",".");
					   $kurang==0 ? $kurang = '' : $kurang=number_format($kurang,"2",",",".");
					   $tambah==0 ? $tambah = '' : $tambah=number_format($tambah,"2",",",".");
					   $tahun_n==0 ? $tahun_n = '' : $tahun_n=number_format($tahun_n,"2",",",".");
					   $umur_t==0 ? $umur_t = '' : $umur_t=number_format($umur_t,"0",",",".");
					   $umur_b==0 ? $umur_b = '' : $umur_b=number_format($umur_b,"0",",",".");
					   
					   if ($umur_b==0 && strlen($kode1)==7){$umur_piu=$umur_t." Tahun";}
					   elseif (strlen($kode1)!=7){$umur_piu = '';}
					   else {$umur_piu=$umur_t." Tahun " .$umur_b. "Bulan";}
					   
					   if($kualitas=='Lancar'){
					   $taksiran="0,5%";}
					   elseif($kualitas=='Kurang Lancar'){
					   $taksiran="10%";}
					   elseif($kualitas=='Diragukan'){
					   $taksiran="50%";}
					   else{
					   $taksiran="100%";}
						
					   if (strlen($kode1)==7){$tahun=$tahun;}
					   else {$tahun = '';}
					   
					   if (strlen($kode1)==7 || strlen($kode1)==8){$akhir=number_format($akhir,"2",",",".");}
					   else {$akhir = '';}
					   
					   if (strlen($kode1)==7){$taksiran=$taksiran;}
					   else {$taksiran = '';}
					   
					   if (strlen($kode1)==7 || strlen($kode1)==8){$penyi_piu=number_format($penyi_piu,"2",",",".");}
					   else {$penyi_piu = '';}
					   
					   if (strlen($kode1)==7 || strlen($kode1)==8){$nilai_piu=number_format($nilai_piu,"2",",",".");}
					   else {$nilai_piu = '';}
					   $cRet .="<tr>
							   <td align=\"left\" style=\"font-size:12px\">$kode</td> 
							   <td align=\"left\" style=\"font-size:12px\">$nama</td> 
							   <td align=\"center\" style=\"font-size:12px\">$tahun</td> 
							   <td align=\"center\" style=\"font-size:12px\">$bln</td> 
							   <td align=\"center\" style=\"font-size:12px\">$keterangan</td> 
							   <td align=\"center\" style=\"font-size:12px\">$akhir</td> 
							   <td align=\"center\" style=\"font-size:12px\">$umur_piu</td> 
							   <td align=\"center\" style=\"font-size:12px\">$kualitas</td> 
							   <td align=\"center\" style=\"font-size:12px\">$taksiran</td> 
							   <td align=\"center\" style=\"font-size:12px\">$penyi_piu</td>
							   <td align=\"center\" style=\"font-size:12px\">$nilai_piu</td> 
							</tr>";    
                    }
				
				/* if($ctk==0){
 
         $data['prev']= $cRet;    
		 echo ("<title>Rincian Neraca $nama_rek</title>");
		 echo $cRet;}
		 else{

	    $this->_mpdf('',$cRet,10,10,10,0,1,'');
} */

		$data['prev']= $cRet;
		$judul  = "Laporan_Lampiran_Aset_Penyusutan_$skpd";
        $this->template->set('title', 'Rincian Neraca $nama_rek');        
        switch($ctk) {
		case 0;
              $data['prev']= $cRet;    
		 echo ("<title>UMUR PIUTANG</title>");
		 echo $cRet;
        break;
        case 1;
             $this->_mpdf('',$cRet,10,10,10,0,1,'');
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
           $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        } 
		
		
	}
    
	
	
    function lampiran_V()
    {
        $data['page_title'] = 'REALISASI';
        $this->template->set('title', 'REALISASI');
        $this->template->load('template', 'akuntansi/perda_real_v', $data);
    }

    function cetak_perdaV_real($cetak = 1)
    {

        $sqlsc = "SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
        $sqlsclient = $this->db->query($sqlsc);
        foreach ($sqlsclient->result() as $rowsc)
        {

            $tgl = $rowsc->tgl_rka;
            $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
            $kab = $rowsc->kab_kota;
            $daerah = $rowsc->daerah;
            $thn = $rowsc->thn_ang;
        }


        $cRet = '';
        if ($cetak <> 0)
        {
            $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td rowspan=\"3\" align=\"left\" width=\"60%\"><strong></strong></td>
                         <td rowspan=\"3\" valign =\"top\" align=\"left\" width=\"15%\"><strong><h5>LAMPIRAN V  </h6></strong></td>
                         <td colspan=\"2\" align=\"left\" width=\"30%\"><strong><h5></strong></h5></td>
                    </tr>
                    <tr> 
                         <td align=\"left\" width=\"15%\"><h5>NOMOR</h5></td><td width=\"20%\" align=\"left\" ><h5>:</h5></td>
                    </tr>
                    <tr>
                        <td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"15%\"><h5>TANGGAL</h5></td><td style=\"border-bottom: solid 1px black;\" align=\"left\" width=\"20%\"><h5>:</h5></td>
                    </tr>
                                         
                   
                  </table>";
        }
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>$kab</strong></td>
                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>REALISASI BELANJA DAERAH UNTUK KESELARASAN DAN KETERPADUAN URUSAN PEMERINTAHAN DAERAH DAN FUNGSI DALAM KERANGKA PENGELOLAAN KEUANGAN NEGARA </strong></td>
                    </tr>
                    
                    <tr>
                         <td align=\"center\"><strong>TAHUN ANGARAN $thn</strong></td>
                    </tr>

                  </table>";

        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\"><b>KODE</b></td>                            
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"39%\" align=\"center\"><b>URAIAN</b></td>                            
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"16%\" align=\"center\"><b>JUMLAH SETELAH PERUBAHAN</b></td>
                            <td rowspan=\"2\" bgcolor=\"#CCCCCC\" width=\"16%\" align=\"center\"><b>REALISASI</b></td>
                            <td colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"19%\" align=\"center\"><b>LEBIH/(KURANG)</b></td>
                            </tr>
                        <tr>
 		                     <td width=\"16%\" bgcolor=\"#CCCCCC\" align=\"center\">JUMLAH</td>
                             <td width=\"3%\" bgcolor=\"#CCCCCC\" align=\"center\">%</td>
                        </tr>    
                     </thead>
                    <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                     
                        <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"39%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"16%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"16%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"16%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"3%\">&nbsp;</td>
                        </tr>
                        ";
        $sql1 = "SELECT * FROM (SELECT b.kd_fungsi AS kode, c.nm_fungsi AS nama,b.kd_fungsi AS kode1,'1' AS kode2,' 'AS skpd,
                        (SELECT SUM(a.anggaran) FROM realisasi a LEFT JOIN ms_skpd b ON a.kd_skpd=b.kd_skpd WHERE LEFT(a.kd_rek5,1)='5' AND b.kd_fungsi=c.kd_fungsi)AS anggaran,
                        (SELECT SUM(a.real_spj) FROM realisasi a LEFT JOIN ms_skpd b ON a.kd_skpd=b.kd_skpd WHERE LEFT(a.kd_rek5,1)='5' AND b.kd_fungsi=c.kd_fungsi)AS realisasi 
                        FROM trdrka a  INNER JOIN ms_skpd b ON a.kd_skpd=b.kd_skpd LEFT JOIN ms_fungsi c ON b.kd_fungsi=c.kd_fungsi GROUP BY b.kd_fungsi,c.nm_fungsi,b.kd_fungsi
                        UNION
                        SELECT a.kd_skpd AS kode, b.nm_skpd AS nama,b.kd_fungsi AS kode1,'2' AS kode2,a.kd_skpd AS skpd,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,1)='5' AND kd_skpd=a.kd_skpd)AS anggaran,
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,1)='5' AND kd_skpd=a.kd_skpd)AS realisasi FROM trdrka a 
                        INNER JOIN ms_skpd b ON a.kd_skpd=b.kd_skpd GROUP BY a.kd_skpd,b.nm_skpd,b.kd_fungsi
                        UNION	
                        SELECT DISTINCT '' AS kode, 'JUMLAH' AS nama,'99' AS kode1,'3' AS kode2,'' AS skpd,
                        (SELECT SUM(anggaran) FROM realisasi WHERE LEFT(kd_rek5,1)='5') AS anggaran,                                          
                        (SELECT SUM(real_spj) FROM realisasi WHERE LEFT(kd_rek5,1)='5' ) AS realisasi FROM trdrka) a ORDER BY kode1,a.kode2,skpd";

        $query = $this->db->query($sql1);
        //$query = $this->skpd_model->getAllc();

        foreach ($query->result() as $row)
        {
            $kode = $row->kode;
            $nama = $row->nama;
            $ang = number_format($row->anggaran, "2", ".", ",");
            $real = number_format($row->realisasi, "2", ".", ",");
            $rumus1 = $row->realisasi - $row->anggaran;
            if ($rumus1 < 0)
            {
                $x1 = "(";
                $rumus1 = $rumus1 * -1;
                $y1 = ")";
            } else
            {
                $x1 = "";
                $y1 = "";
            }
            $total1 = number_format($rumus1, "2", ".", ",");
            $per1 = ($rumus1 != 0) ? ($rumus1 / $row->anggaran) * 100 : 0;
            $persen1 = number_format($per1, "2", ".", ",");

            $cRet .= " <tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"8%\" align=\"left\">$kode</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"12%\" align=\"right\">$ang</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"12%\" align=\"right\">$real</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"12%\" align=\"right\">$x1$total1$y1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"12%\" align=\"right\">$persen1</td>
                                    </tr>
                                     ";


        }

        $cRet .= " </table>";
        $data['prev'] = $cRet;
        $judul = 'Laporan Realisasi APBD  Lamp V ';
        $this->template->set('title', 'CETAK PERDA REALISASI LAMPIRAN V');
        switch ($cetak)
        {
            case 1;
                $this->tukd_model->_mpdf('', $cRet, 10, 10, 10, '0');
                break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }

    }

    function jur_umum()
    {
        $data['page_title'] = 'JURNAL UMUM';
        $this->template->set('title', 'JURNAL UMUM');
        $this->template->load('template', 'akuntansi/jur_umum', $data);
    }
    function jur_umum_ppkd()
    {
        $data['page_title'] = 'JURNAL UMUM';
        $this->template->set('title', 'JURNAL UMUM');
        $this->template->load('template', 'akuntansi/jur_umum_ppkd', $data);
    }

    function ctk_jurum($dcetak = '', $dcetak2 = '', $skpd = '')
    {
        $csql11 = " select nm_skpd from ms_skpd where kd_skpd = '$skpd'";
        $rs1 = $this->db->query($csql11);
        $trh1 = $rs1->row();
        $lcskpd = strtoupper($trh1->nm_skpd);
        $tgl_cetak = $this->tukd_model->rev_date($dcetak);
        $tgl_cetak2 = $this->tukd_model->rev_date($dcetak2);


        $cRet = "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
            <tr>
                <td colspan=\"11\" align=\"center\" style=\"border: solid 1px white;\">$lcskpd
                </td>
            </tr>
             <tr>
                <td colspan=\"11\" align=\"center\" style=\"border: solid 1px white;\">JURNAL UMUM
                </td>
            </tr>
            <tr>
                <td colspan=\"11\" align=\"center\" style=\"border: solid 1px white;border-bottom:solid 1px black;\">PERIODE $tgl_cetak S.D $tgl_cetak2
                </td>
            </tr>
            <tr>
                <td align=\"center\" rowspan=\"2\">Tanggal</td>
                <td align=\"center\" rowspan=\"2\">Nomor<br>Bukti</td>
                <td colspan=\"5\" align=\"center\" rowspan=\"2\">Kode<br>Rekening</td>
                <td align=\"center\" rowspan=\"2\">Uraian</td>
                <td align=\"center\" rowspan=\"2\">ref</td>
                <td align=\"center\" colspan=\"2\">Jumlah Rp</td>
            </tr>
            <tr>
                <td align=\"center\">Debit</td>
                <td align=\"center\">Kredit</td>
            </tr>
            <tr>
                <td align=\"center\" width=\"10%\">1</td>
                <td align=\"center\" width=\"10%\">2</td>
                <td colspan=\"5\" align=\"center\" width=\"15%\">3</td>
                <td align=\"center\" width=\"42%\">4</td>
                <td align=\"center\" width=\"3%\"></td>
                <td align=\"center\" width=\"10%\">5</td>
                <td align=\"center\" width=\"10%\">6</td>
            </tr>
           ";

        $csql1 = "select count(*) as tot FROM 
                 trdju_ppkd a LEFT JOIN trhju_pkd b ON a.no_voucher= b.no_voucher  AND b.kd_skpd=a.kd_unit
                 where b.tgl_voucher >= '$dcetak' and b.tgl_voucher <= '$dcetak2' and left(b.kd_skpd,7) = left('$skpd',7)";
        $rs = $this->db->query($csql1);
        $trh = $rs->row();


        $csql = "SELECT b.tgl_voucher,a.no_voucher,a.kd_rek5,a.nm_rek5 AS nm_rek5,a.debet,a.kredit FROM 
                  trdju_pkd a LEFT JOIN trhju_pkd b ON a.no_voucher= b.no_voucher AND b.kd_skpd=a.kd_unit
                  where b.tgl_voucher >= '$dcetak' and b.tgl_voucher <= '$dcetak2' and left(b.kd_skpd,7) = left('$skpd',7) 
                  ORDER BY b.tgl_voucher,a.no_voucher,a.urut,a.rk,a.kd_rek5";
        $query = $this->db->query($csql);
        $cnovoc = '';
        $lcno = 0;
        foreach ($query->result_array() as $res)
        {
            $lcno = $lcno + 1;
            if ($lcno == $trh->tot)
            {
                $cRet .= "<tr>
                                <td style=\"border-bottom:none;border-top:none;\"></td>
                                <td style=\"border-bottom:none;border-top:none;\"></td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    0, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    1, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    2, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    3, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    5, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . $res['nm_rek5'] .
                    "</td>
                                <td style=\"border-bottom:none;\"></td>";
                if ($res['debet'] == 0)
                {
                    $cRet .= " <td style=\"border-bottom:none;\"></td>
                                            <td style=\"border-bottom:none;\" align=\"right\">" .
                        number_format($res['kredit']) . "</td>";
                } else
                {
                    $cRet .= "<td style=\"border-bottom:none;\" align=\"right\">" . number_format($res['debet']) .
                        "</td>
                                               <td style=\"border-bottom:none;\"></td>";
                }

                $cRet .= "</tr>";
            } else
            {
                if ($cnovoc == $res['no_voucher'])
                {
                    $cRet .= "<tr>
                                <td style=\"border-bottom:none;border-top:none;\">&nbsp;</td>
                                <td style=\"border-bottom:none;border-top:none;\">&nbsp;</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        0, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        1, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        2, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        3, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        5, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . $res['nm_rek5'] .
                        "</td>
                                <td style=\"border-bottom:none;\"></td>";
                    if ($res['debet'] == 0)
                    {
                        $cRet .= " <td style=\"border-bottom:none;\"></td>
                                            <td style=\"border-bottom:none;\" align=\"right\">" .
                            number_format($res['kredit']) . "</td>";
                    } else
                    {
                        $cRet .= "<td style=\"border-bottom:none;\" align=\"right\">" . number_format($res['debet']) .
                            "</td>
                                               <td style=\"border-bottom:none;\"></td>";
                    }

                    $cRet .= "</tr>";
                } else
                {
                    $cRet .= "<tr>
                                <td style=\"border-bottom:none\">" . $this->
                        tukd_model->rev_date($res['tgl_voucher']) . "</td>
                                <td style=\"border-bottom:none\">" . $res['no_voucher'] .
                        "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        0, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        1, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        2, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        3, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        5, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . $res['nm_rek5'] .
                        "</td>
                                <td style=\"border-bottom:none;\"></td>";
                    if ($res['debet'] == 0)
                    {
                        $cRet .= " <td style=\"border-bottom:none;\"></td>
                                            <td style=\"border-bottom:none;\" align=\"right\">" .
                            number_format($res['kredit']) . "</td>";
                    } else
                    {
                        $cRet .= "<td style=\"border-bottom:none;\" align=\"right\">" . number_format($res['debet']) .
                            "</td>
                                               <td style=\"border-bottom:none;\"></td>";
                    }

                    $cRet .= "</tr>";
                }
                $cnovoc = $res['no_voucher'];
            }

        }

        $cRet .= " <tr>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                    </tr>  
         </table>
         ";

        $data['prev'] = 'JURNAL UMUM PPKD';
        echo $cRet;
		//$this->tukd_model->_mpdf('', $cRet, 5, 5, 10, '0');

    }


    function ctk_jurum_ppkd($dcetak = '', $dcetak2 = '', $skpd = '')
    {
        $csql11 = " select nm_skpd from ms_skpd where kd_skpd = '$skpd'";
        $rs1 = $this->db->query($csql11);
        $trh1 = $rs1->row();
        $lcskpd = strtoupper($trh1->nm_skpd);
        $tgl_cetak = $this->tukd_model->rev_date($dcetak);
        $tgl_cetak2 = $this->tukd_model->rev_date($dcetak2);


        $cRet = "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
            <tr>
                <td colspan=\"11\" align=\"center\" style=\"border: solid 1px white;\">$lcskpd
                </td>
            </tr>
             <tr>
                <td colspan=\"11\" align=\"center\" style=\"border: solid 1px white;\">JURNAL UMUM
                </td>
            </tr>
            <tr>
                <td colspan=\"11\" align=\"center\" style=\"border: solid 1px white;border-bottom:solid 1px black;\">PERIODE $tgl_cetak S.D $tgl_cetak2
                </td>
            </tr>
            <tr>
                <td align=\"center\" rowspan=\"2\">Tanggal</td>
                <td align=\"center\" rowspan=\"2\">Nomor<br>Bukti</td>
                <td colspan=\"5\" align=\"center\" rowspan=\"2\">Kode<br>Rekening</td>
                <td align=\"center\" rowspan=\"2\">Uraian</td>
                <td align=\"center\" rowspan=\"2\">ref</td>
                <td align=\"center\" colspan=\"2\">Jumlah Rp</td>
            </tr>
            <tr>
                <td align=\"center\">Debit</td>
                <td align=\"center\">Kredit</td>
            </tr>
            <tr>
                <td align=\"center\" width=\"10%\">1</td>
                <td align=\"center\" width=\"10%\">2</td>
                <td colspan=\"5\" align=\"center\" width=\"15%\">3</td>
                <td align=\"center\" width=\"42%\">4</td>
                <td align=\"center\" width=\"3%\"></td>
                <td align=\"center\" width=\"10%\">5</td>
                <td align=\"center\" width=\"10%\">6</td>
            </tr>
           ";

        $csql1 = "select count(*) as tot FROM 
                 trdju_ppkd a LEFT JOIN trhju_pkd b ON a.no_voucher= b.no_voucher  AND b.kd_skpd=a.kd_unit
                 where b.tgl_voucher >= '$dcetak' and b.tgl_voucher <= '$dcetak2' and b.kd_skpd = '$skpd'";
        $rs = $this->db->query($csql1);
        $trh = $rs->row();


        $csql = "SELECT b.tgl_voucher,a.no_voucher,a.kd_rek5,a.nm_rek5 AS nm_rek5,a.debet,a.kredit FROM 
                  trdju_pkd a LEFT JOIN trhju_pkd b ON a.no_voucher= b.no_voucher AND b.kd_skpd=a.kd_unit
                  where b.tgl_voucher >= '$dcetak' and b.tgl_voucher <= '$dcetak2' and b.kd_skpd = '$skpd' 
                  ORDER BY b.tgl_voucher,a.no_voucher,a.urut,a.rk,a.kd_rek5";
        $query = $this->db->query($csql);
        $cnovoc = '';
        $lcno = 0;
        foreach ($query->result_array() as $res)
        {
            $lcno = $lcno + 1;
            if ($lcno == $trh->tot)
            {
                $cRet .= "<tr>
                                <td style=\"border-bottom:none;border-top:none;\"></td>
                                <td style=\"border-bottom:none;border-top:none;\"></td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    0, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    1, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    2, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    3, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                    5, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . $res['nm_rek5'] .
                    "</td>
                                <td style=\"border-bottom:none;\"></td>";
                if ($res['debet'] == 0)
                {
                    $cRet .= " <td style=\"border-bottom:none;\"></td>
                                            <td style=\"border-bottom:none;\" align=\"right\">" .
                        number_format($res['kredit']) . "</td>";
                } else
                {
                    $cRet .= "<td style=\"border-bottom:none;\" align=\"right\">" . number_format($res['debet']) .
                        "</td>
                                               <td style=\"border-bottom:none;\"></td>";
                }

                $cRet .= "</tr>";
            } else
            {
                if ($cnovoc == $res['no_voucher'])
                {
                    $cRet .= "<tr>
                                <td style=\"border-bottom:none;border-top:none;\">&nbsp;</td>
                                <td style=\"border-bottom:none;border-top:none;\">&nbsp;</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        0, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        1, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        2, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        3, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        5, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . $res['nm_rek5'] .
                        "</td>
                                <td style=\"border-bottom:none;\"></td>";
                    if ($res['debet'] == 0)
                    {
                        $cRet .= " <td style=\"border-bottom:none;\"></td>
                                            <td style=\"border-bottom:none;\" align=\"right\">" .
                            number_format($res['kredit']) . "</td>";
                    } else
                    {
                        $cRet .= "<td style=\"border-bottom:none;\" align=\"right\">" . number_format($res['debet']) .
                            "</td>
                                               <td style=\"border-bottom:none;\"></td>";
                    }

                    $cRet .= "</tr>";
                } else
                {
                    $cRet .= "<tr>
                                <td style=\"border-bottom:none\">" . $this->
                        tukd_model->rev_date($res['tgl_voucher']) . "</td>
                                <td style=\"border-bottom:none\">" . $res['no_voucher'] .
                        "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        0, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        1, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        2, 1) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        3, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . substr($res['kd_rek5'],
                        5, 2) . "</td>
                                <td style=\"border-bottom:none;\">" . $res['nm_rek5'] .
                        "</td>
                                <td style=\"border-bottom:none;\"></td>";
                    if ($res['debet'] == 0)
                    {
                        $cRet .= " <td style=\"border-bottom:none;\"></td>
                                            <td style=\"border-bottom:none;\" align=\"right\">" .
                            number_format($res['kredit']) . "</td>";
                    } else
                    {
                        $cRet .= "<td style=\"border-bottom:none;\" align=\"right\">" . number_format($res['debet']) .
                            "</td>
                                               <td style=\"border-bottom:none;\"></td>";
                    }

                    $cRet .= "</tr>";
                }
                $cnovoc = $res['no_voucher'];
            }

        }

        $cRet .= " <tr>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                        <td style=\"border-top:none\"></td>
                    </tr>  
         </table>
         ";

        $data['prev'] = 'JURNAL UMUM PPKD';
        echo $cRet;
		//$this->tukd_model->_mpdf('', $cRet, 5, 5, 10, '0');

    }


    //wahyu========================================================================
    function cetak_lak()
    {
        $data['page_title'] = 'LAPORAN ARUS KAS';
        $this->template->set('title', 'LAPORAN ARUS KAS');
        $this->template->load('template', 'akuntansi/cetak_lak', $data);
    }

    function rpt_lak($cbulan="", $cetak=1){
			$thi=$this->session->userdata('pcThang');
			$thl=$thi-1;
			$id=$this->session->userdata('kdskpd');
			
			$sqlanggaran1="select case when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_ubah) then 2 
							   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan>=month(tgl_dpa_sempurna) and $cbulan<month(tgl_dpa_ubah) then 1
							   when statu=1 and status_sempurna=1 and status_ubah=1 and $cbulan<month(tgl_dpa_sempurna) then 1
							   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan>=month(tgl_dpa_sempurna) then 1 
							   when statu=1 and status_sempurna=1 and status_ubah=0 and $cbulan<month(tgl_dpa_sempurna) then 1
							   when statu=1 and status_sempurna=0 and status_ubah=0 and $cbulan>=month(tgl_dpa) then 1
							   else 1 end as anggaran from trhrka where kd_skpd='$id'";
			$sqlanggaran=$this->db->query($sqlanggaran1);
			foreach ($sqlanggaran->result() as $rowttd)
				{
					$anggaran=$rowttd->anggaran;
				}

			$ag_tox=$anggaran;
			$bulan=$cbulan;
			$idx=0;
			
			
			$modtahun= $thi%4;
	 
			 if ($modtahun = 0){
				$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
					else {
				$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
			 
			 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN ARUS KAS</strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thi</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>METODE LANGSUNG</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>&nbsp;</strong></td>
                    </tr>
                  </table>";        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thi</b></td>  
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thl</b></td>  
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                          
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                        </tr>";

			
			//level 1
			
			$sql31="SELECT isnull(kode_1,'999') kode_1, isnull(kode_2,'999') kode_2 , isnull(kode_3,'999') kode_3 from map_lak_prov where seq='85'";
					
                    $query31 = $this->db->query($sql31);
                    $jmlp = $query31->row();
                    $kode_1_85 = $jmlp->kode_1;	
                    $kode_2_85 = $jmlp->kode_2;	
                    $kode_3_85 = $jmlp->kode_3;	
			
			$sql41="SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) b 
					WHERE (left(b.kd_rek5,3) in ($kode_1_85) 
					or left(b.kd_rek5,5) in ($kode_2_85) 
					or left(b.kd_rek5,7) in ($kode_3_85))";
					
                    $query41 = $this->db->query($sql41);
                    $jmlp = $query41->row();
                    $operasi_masuk = $jmlp->nilai;					
			
			$sql32="SELECT isnull(kode_1,'999') kode_1, isnull(kode_2,'999') kode_2 , isnull(kode_3,'999') kode_3 from map_lak_prov where seq='150'";
					
                    $query32 = $this->db->query($sql32);
                    $jmlp = $query32->row();
                    $kode_1_150 = $jmlp->kode_1;	
                    $kode_2_150 = $jmlp->kode_2;	
                    $kode_3_150 = $jmlp->kode_3;
					
			$sql42="SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) b 
					WHERE (left(b.kd_rek5,3) in ($kode_1_150) 
					or left(b.kd_rek5,5) in ($kode_2_150) 
					or left(b.kd_rek5,7) in ($kode_3_150))";
					
                    $query42 = $this->db->query($sql42);
                    $jmlp2 = $query42->row();
                    $operasi_keluar = $jmlp2->nilai;					
					
					$operasi_bersih = $operasi_masuk - $operasi_keluar;
			
			$sql33="SELECT isnull(kode_1,'999') kode_1, isnull(kode_2,'999') kode_2 , isnull(kode_3,'999') kode_3 from map_lak_prov where seq='215'";
					
                    $query33 = $this->db->query($sql33);
                    $jmlp = $query33->row();
                    $kode_1_215 = $jmlp->kode_1;	
                    $kode_2_215 = $jmlp->kode_2;	
                    $kode_3_215 = $jmlp->kode_3;
			
			$sql43="SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) b 
					WHERE (left(b.kd_rek5,3) in ($kode_1_215) 
					or left(b.kd_rek5,5) in ($kode_2_215) 
					or left(b.kd_rek5,7) in ($kode_3_215))";
					
                    $query43 = $this->db->query($sql43);
                    $jmlp3 = $query43->row();
                    $investasi_masuk = $jmlp3->nilai;										

					
			$sql34="SELECT isnull(kode_1,'999') kode_1, isnull(kode_2,'999') kode_2 , isnull(kode_3,'999') kode_3 from map_lak_prov where seq='270'";
					
                    $query34 = $this->db->query($sql34);
                    $jmlp = $query34->row();
                    $kode_1_270 = $jmlp->kode_1;	
                    $kode_2_270 = $jmlp->kode_2;	
                    $kode_3_270 = $jmlp->kode_3;		
					
			$sql44="SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi_pemda($bulan,$ag_tox) b 
					WHERE (left(b.kd_rek5,3) in ($kode_1_270) 
					or left(b.kd_rek5,5) in ($kode_2_270) 
					or left(b.kd_rek5,7) in ($kode_3_270))";
					
                    $query44 = $this->db->query($sql44);
                    $jmlp4 = $query44->row();			
                    $investasi_keluar = $jmlp4->nilai;
					
					$investasi_bersih = $investasi_masuk - $investasi_keluar;

					
			$sql35="SELECT isnull(kode_1,'999') kode_1, isnull(kode_2,'999') kode_2 , isnull(kode_3,'999') kode_3 from map_lak_prov where seq='335'";
					
                    $query35 = $this->db->query($sql35);
                    $jmlp = $query35->row();
                    $kode_1_335 = $jmlp->kode_1;	
                    $kode_2_335 = $jmlp->kode_2;	
                    $kode_3_335 = $jmlp->kode_3;		
					
			$sql45="SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi_pemda( $bulan,$ag_tox) b 
					WHERE (left(b.kd_rek5,3) in ($kode_1_335) 
					or left(b.kd_rek5,5) in ($kode_2_335) 
					or left(b.kd_rek5,7) in ($kode_3_335))";
					
                    $query45 = $this->db->query($sql45);
                    $jmlp5 = $query45->row();			
                    $pendanaan_masuk = $jmlp5->nilai;
			

			$sql36="SELECT isnull(kode_1,'999') kode_1, isnull(kode_2,'999') kode_2 , isnull(kode_3,'999') kode_3 from map_lak_prov where seq='390'";
					
                    $query36 = $this->db->query($sql36);
                    $jmlp = $query36->row();
                    $kode_1_390 = $jmlp->kode_1;	
                    $kode_2_390 = $jmlp->kode_2;	
                    $kode_3_390 = $jmlp->kode_3;
			
			$sql46="SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi_pemda( $bulan,$ag_tox) b 
					WHERE (left(b.kd_rek5,3) in ($kode_1_390) 
					or left(b.kd_rek5,5) in ($kode_2_390) 
					or left(b.kd_rek5,7) in ($kode_3_390))";
					
                    $query46 = $this->db->query($sql46);
                    $jmlp6 = $query46->row();				
                    $pendanaan_keluar = $jmlp6->nilai;
					
					$pendanaan_bersih = $pendanaan_masuk - $pendanaan_keluar;
	
			//$sql47="select sum(a.nilai) nilai from trdtrmpot a inner join trhtrmpot b on a.no_bukti=b.no_bukti and 
			//		a.kd_skpd=b.kd_skpd where jns_spp in ('4','5','6') and year(b.tgl_bukti)<=$thi";
					
            //        $query47 = $this->db->query($sql47);
            //        $jmlp7 = $query47->row();
            //        $pfk_masuk = $jmlp7->nilai;					
			
			$sql47="select 154276212793 nilai ";
					
                    $query47 = $this->db->query($sql47);
                    $jmlp7 = $query47->row();
                    $pfk_masuk = $jmlp7->nilai;
			
			//$sql48="select sum(a.nilai) nilai from trdstrpot a inner join trhstrpot b on a.no_bukti=b.no_bukti and 
			//		a.kd_skpd=b.kd_skpd where jns_spp in ('4','5','6') and year(b.tgl_bukti)<=$thi";
					
            //        $query48 = $this->db->query($sql48);
            //        $jmlp8 = $query48->row();
            //        $pfk_keluar = $jmlp8->nilai;			
			
			$sql48="select 154276212793 nilai ";
					
                    $query48 = $this->db->query($sql48);
                    $jmlp8 = $query48->row();
                    $pfk_keluar = $jmlp8->nilai;
					
					$pfk_bersih = $pfk_masuk - $pfk_keluar;
					
					$naik_turun_kas = $operasi_bersih + $investasi_bersih + $pendanaan_bersih + $pfk_bersih;

			$sql49="SELECT sum(a.kredit-a.debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
					where a.kd_rek5 in (7110101) and year(b.tgl_voucher)=$thi";
					
                    $query49 = $this->db->query($sql49);
                    $jmlp9 = $query49->row();
                    $kas_awal = $jmlp9->nilai;			
					
			$sql50="SELECT sum(a.debet-a.kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where a.kd_rek5=1110201 and year(b.tgl_voucher)<=$thi";
					
                    $query50 = $this->db->query($sql50);
                    $jmlp10 = $query50->row();
                    $kas_penerimaan = $jmlp10->nilai;			
			
			$sql51="SELECT sum(a.debet-a.kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where a.kd_rek5 in (1110301,1110101) and year(b.tgl_voucher)<=$thi";
					
                    $query51 = $this->db->query($sql51);
                    $jmlp11 = $query51->row();
                    $kas_akhir	 = $jmlp11->nilai;
			
					//$kas_akhir = $kas_awal + $naik_turun_kas;
					
					$total_kas = $kas_akhir + $kas_penerimaan;
					
					
			$parent='0';
			$no=0;
			$query = $this->db->query(" SELECT a.seq,a.nor,a.uraian,isnull(a.kode_1,'888') as kode_1,isnull(a.kode_2,'888') as kode_2,
										isnull(a.kode_3,'8888') as kode_3, thn_m1 FROM map_lak_prov a ORDER BY a.seq ");  
			foreach($query->result_array() as $res){

				$idx++;				
				$nor=$res['nor'];
				$uraian=$res['uraian'];
				$seq=$res['seq'];

				$rek1=trim($res['kode_1']);
				$rek2=trim($res['kode_2']);
				$rek3=trim($res['kode_3']);
				$saldo=$res['thn_m1'];
				
				if($rek1==''){
					$rek1="'XXX'";
				}
				if($rek2==''){
					$rek2="'XXXXX'";
				}
				if($rek3==''){
					$rek3="'XXXXXXX'";
				}
				
				$q = $this->db->query(" SELECT SUM(b.anggaran) as anggaran,SUM(b.real_spj) as nilai FROM data_realisasi_pemda( $bulan,$ag_tox) b 
										WHERE (left(b.kd_rek5,3) in ($rek1) or left(b.kd_rek5,5) in ($rek2) or left(b.kd_rek5,7) in ($rek3))");  

				 foreach($q->result_array() as $r){
					$nilai=$r['nilai'];
				 }

				$nilai1=number_format($nilai,"2",",",".");

                    if ($operasi_bersih < 0){
                    	$x001="("; $operasi_bersih0=$operasi_bersih*-1; $y001=")";}
                    else {
                    	$x001=""; $operasi_bersih0=$operasi_bersih; $y001="";}
				$operasi_bersih1=number_format($operasi_bersih0,"2",",",".");
				
                    if ($investasi_bersih < 0){
                    	$x002="("; $investasi_bersih0=$investasi_bersih*-1; $y002=")";}
                    else {
                    	$x002=""; $investasi_bersih0=$investasi_bersih; $y002="";}
						
				$investasi_bersih1=number_format($investasi_bersih0,"2",",",".");
					
					if ($pendanaan_bersih < 0){
                    	$x003="("; $pendanaan_bersih0=$pendanaan_bersih*-1; $y003=")";}
                    else {
                    	$x003=""; $pendanaan_bersih0=$pendanaan_bersih; $y003="";}
				$pendanaan_bersih1=number_format($pendanaan_bersih0,"2",",",".");

					if ($pfk_keluar < 0){
                    	$x004="("; $pfk_keluar0=$pfk_keluar*-1; $y004=")";}
                    else {
                    	$x004=""; $pfk_keluar0=$pfk_keluar; $y004="";}
				$pfk_keluar1=number_format($pfk_keluar0,"2",",",".");

					if ($pfk_masuk < 0){
                    	$x005="("; $pfk_masuk0=$pfk_masuk*-1; $y005=")";}
                    else {
                    	$x005=""; $pfk_masuk0=$pfk_masuk; $y005="";}
				$pfk_masuk1=number_format($pfk_masuk0,"2",",",".");
				
					if ($pfk_bersih < 0){
                    	$x006="("; $pfk_bersih0=$pfk_bersih*-1; $y006=")";}
                    else {
                    	$x006=""; $pfk_bersih0=$pfk_bersih; $y006="";}
				$pfk_bersih1=number_format($pfk_bersih0,"2",",",".");

					if ($naik_turun_kas < 0){
                    	$x007="("; $naik_turun_kas0=$naik_turun_kas*-1; $y007=")";}
                    else {
                    	$x007=""; $naik_turun_kas0=$naik_turun_kas; $y007="";}
				$naik_turun_kas1=number_format($naik_turun_kas0,"2",",",".");	

					if ($kas_awal < 0){
                    	$x008="("; $kas_awal0=$kas_awal*-1; $y008=")";}
                    else {
                    	$x008=""; $kas_awal0=$kas_awal; $y008="";}
				$kas_awal1=number_format($kas_awal0,"2",",",".");	
				
					if ($kas_akhir < 0){
                    	$x009="("; $kas_akhir0=$kas_akhir*-1; $y009=")";}
                    else {
                    	$x009=""; $kas_akhir0=$kas_akhir; $y009="";}
				$kas_akhir1=number_format($kas_akhir0,"2",",",".");

					if ($kas_penerimaan < 0){
                    	$x010="("; $kas_penerimaan0=$kas_penerimaan*-1; $y010=")";}
                    else {
                    	$x010=""; $kas_penerimaan0=$kas_penerimaan; $y010="";}
				$kas_penerimaan1=number_format($kas_penerimaan0,"2",",",".");
								
				
					if ($total_kas < 0){
                    	$x011="("; $total_kas0=$total_kas*-1; $y011=")";}
                    else {
                    	$x011=""; $total_kas0=$total_kas; $y011="";}
				$total_kas1=number_format($total_kas0,"2",",",".");
				
					if ($saldo < 0){
                    	$xx="("; $saldo=$saldo*-1; $yy=")";}
                    else {
                    	$xx=""; $saldo=$saldo; $yy="";}
				$saldo1=number_format($saldo,"2",",",".");
				
				
				
				$no=$no+1;
				 
				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 85:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nilai1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 90:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 150:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nilai1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 155:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x001$operasi_bersih1$y001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 160:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 165:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 215:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nilai1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 220:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 270:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nilai1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 275:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x002$investasi_bersih1$y002</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 280:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 285:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 335:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nilai1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 340:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 390:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nilai1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 395:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x003$pendanaan_bersih1$y003</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 400:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 405:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 410:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x005$pfk_masuk1$y005</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 415:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x005$pfk_masuk1$y005</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 420:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
                    case 425:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x004$pfk_keluar1$y004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
					case 430:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x004$pfk_keluar1$y004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 435:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x006$pfk_bersih1$y006</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 440:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x007$naik_turun_kas1$y007</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
                    case 445:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x008$kas_awal1$y008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;						
                    case 450:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x009$kas_akhir1$y009</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;						
                    case 455:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x010$kas_penerimaan1$y010</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;						
                    case 460: 	
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$x011$total_kas1$y011</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;												
					default:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\"align=\"center\">$no</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"65%\">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nilai1</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$xx$saldo1$yy</td>
                                 </tr>";
                        break;
				}
			}

			
			$cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LAK $cbulan");
        $this->template->set('title', 'LAK $cbulan');        
        switch($cetak) {       
        case 1;
			echo ("<title>LAK $cbulan</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        }
	}

	
	
	
    function cetak_neraca(){
        $data['page_title']= 'LAPORAN NERACA SKPD';
        $this->template->set('title', 'LAPORAN NERACA SKPD');   
        $this->template->load('template','akuntansi/cetak_neraca',$data) ; 
    }
    
	function cetak_neraca_pemda()
    {
        $data['page_title'] = 'LAPORAN NERACA KONSOLIDASI';
        $this->template->set('title', 'LAPORAN NERACA KONSOLIDASI');
        $this->template->load('template', 'akuntansi/cetak_neraca_pemda', $data);
    }

    function cetak_neraca_ppkd()
    {
        $data['page_title'] = 'LAPORAN NERACA PPKD';
        $this->template->set('title', 'LAPORAN NERACA PPKD');
        $this->template->load('template', 'akuntansi/cetak_neraca_ppkd', $data);
    }

	
	function rpt_neraca_pemda_unit($cbulan="", $kd_skpd="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>$nm_skpd</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$bulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0 and kd_skpd='$kd_skpd'");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu-$rk_skpd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu-$rk_skpd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr		= $lcrx-$rk_skpd;
			$ast		= $astx-$rk_skpd;
			$eku 		= $sal_akhir + $rk_ppkd-$rk_skpd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd-$rk_skpd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 20:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;						
					case 100:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min015$lcr1$min016</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min017$lcr_lalu1$min018</td>
                                 </tr>";
                        break;
					case 105:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 145:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 170:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 175:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 220:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 225:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 240:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 245:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 280:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 285:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min019$ast1$min020</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min021$ast_lalu1$min022</td>
                                 </tr>";
                        break;		
					case 290:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 295:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 305:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 345:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 350:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 390:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 395:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;		
					case 400:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
						default:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					}
 
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA KONSOL UNIT $cbulan");
        $this->template->set('title', 'NERACA KONSOL UNIT $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA KONSOL UNIT $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}
	
	function rpt_neraca_awal_pemda_unit_obyek($cbulan="", $kd_skpd="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>$nm_skpd</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>NERACA AWAL</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER 1 JANUARI $thn_ang</strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\"bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>JUMLAH</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\"style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\"style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0 and kd_skpd='$kd_skpd'");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr		= $lcrx-$rk_skpd;
			$ast		= $astx-$rk_skpd;
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, bold, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 14:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 34:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 16:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 17:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
					}
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA AWAL KONSOL OBYEK UNIT $cbulan");
        $this->template->set('title', 'NERACA AWAL KONSOL OBYEK UNIT $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA AWAL KONSOL OBYEK UNIT $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}	
	
	
	
	function rpt_neraca_pemda_unit_obyek($cbulan="", $kd_skpd="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>$nm_skpd</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$bulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\"bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\"style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\"style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0 and kd_skpd='$kd_skpd'");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr		= $lcrx-$rk_skpd;
			$ast		= $astx-$rk_skpd;
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, bold, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 14:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 34:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 16:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 17:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
					}
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA KONSOL OBYEK UNIT $cbulan");
        $this->template->set('title', 'NERACA KONSOL OBYEK UNIT $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA KONSOL OBYEK UNIT $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}	
	
	function rpt_neraca_awal_pemda_unit($cbulan="", $kd_skpd="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>$nm_skpd</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>NERACA AWAL</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER 1 JANUARI $thn_ang</strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>JUMLAH</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0 and kd_skpd='$kd_skpd'");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu-$rk_skpd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu-$rk_skpd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr		= $lcrx-$rk_skpd;
			$ast		= $astx-$rk_skpd;
			$eku 		= $sal_akhir + $rk_ppkd-$rk_skpd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd-$rk_skpd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and kd_skpd='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 20:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;						
					case 100:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min017$lcr_lalu1$min018</td>
                                 </tr>";
                        break;
					case 105:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 145:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 170:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 175:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 220:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 225:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 240:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 245:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 280:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 285:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min021$ast_lalu1$min022</td>
                                 </tr>";
                        break;		
					case 290:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 295:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 305:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 345:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 350:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 390:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 395:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;		
					case 400:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
						default:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					}
 
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA AWAL KONSOL UNIT");
        $this->template->set('title', 'NERACA AWAL KONSOL UNIT');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA KONSOL UNIT</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	function rpt_neraca_awal_pemda_obyek($cbulan="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$kd_skpd   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA AWAL</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER 1 JANUARI $thn_ang</strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\"bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>JUMLAH</b></td>
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\"style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\"style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8')";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9')";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr		= $lcrx-$rk_skpd;
			$ast		= $astx-$rk_skpd;
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, bold, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 14:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 34:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 16:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 17:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
					}
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA AWAL KONSOL OBYEK $cbulan");
        $this->template->set('title', 'NERACA AWAL KONSOL OBYEK $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA AWAL KONSOL OBYEK $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	function rpt_neraca_pemda_obyek_audit($cbulan="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$kd_skpd   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$bulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\"bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1 AUDITED</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\"style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\"style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju a INNER JOIN trhju b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8')";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9')";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu-$rk_skpd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu-$rk_skpd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr			= $lcrx-$rk_skpd;
			$ast			= $astx-$rk_skpd;
			$eku 			= $sal_akhir - $rk_ppkd + $rk_skpd;					
			$eku_tang 		= $sal_akhir + $nilaiutang - $rk_ppkd +$rk_skpd;					
			$rk_skpd		= $rk_skpd-$rk_ppkd;
			$rk_skpd_lalu	= $rk_skpd_lalu-$rk_ppkd_lalu;
			$rk_ppkd		= $rk_skpd;
			$rk_ppkd_lalu	= $rk_skpd_lalu;
			
					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
		if ($rk_skpd_lalu < 0){
                    	$min031="("; $rk_skpd_lalu=$rk_skpd_lalu*-1; $min032=")";
                        }else {
                    	$min031=""; $rk_skpd_lalu; $min032="";
                        }			
		
		$rk_skpd_lalu1=number_format($rk_skpd_lalu,"2",",",".");
		
		if ($rk_skpd < 0){
                    	$min033="("; $rk_skpd=$rk_skpd*-1; $min034=")";
                        }else {
                    	$min033=""; $rk_skpd; $min034="";
                        }
		
		$rk_skpd1=number_format($rk_skpd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, bold, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15, isnull(nilai_lalu,0) nilai_lalu 
										FROM map_neraca_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
				$nilai_lalu=$res['nilai_lalu'];							
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
				if ($nilai_lalu < 0){
                    	$xxx="("; $nilai_lalu=$nilai_lalu*-1; $yyy=")";
                        }else {
                    	$xxx=""; $yyy="";
                        }
						
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
		$nilai_lalu1= number_format($nilai_lalu,"2",",",".");
		
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;
					case 34:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min013$rk_ppkd1$min014</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;
					case 14:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min033$rk_skpd1$min034</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min033$rk_skpd1$min034</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;	
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;
					case 16:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min015$lcr1$min016</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;	
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;	
					case 17:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min019$ast1$min020</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$xxx$nilai_lalu1$yyy</td>
                                 </tr>";
                        break;
					}
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA KONSOL OBYEK AUDIT $cbulan");
        $this->template->set('title', 'NERACA KONSOL OBYEK AUDIT $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA KONSOL OBYEK $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	
	function rpt_neraca_pemda_obyek($cbulan="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$kd_skpd   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$bulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\"bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\"style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\"style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju a INNER JOIN trhju b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8')";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9')";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu-$rk_skpd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu-$rk_skpd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr			= $lcrx-$rk_skpd;
			$ast			= $astx-$rk_skpd;
			$eku 			= $sal_akhir - $rk_ppkd + $rk_skpd;					
			$eku_tang 		= $sal_akhir + $nilaiutang - $rk_ppkd +$rk_skpd;					
			$rk_skpd		= $rk_skpd-$rk_ppkd;
			$rk_skpd_lalu	= $rk_skpd_lalu-$rk_ppkd_lalu;
			$rk_ppkd		= $rk_skpd;
			$rk_ppkd_lalu	= $rk_skpd_lalu;
			
					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
		if ($rk_skpd_lalu < 0){
                    	$min031="("; $rk_skpd_lalu=$rk_skpd_lalu*-1; $min032=")";
                        }else {
                    	$min031=""; $rk_skpd_lalu; $min032="";
                        }			
		
		$rk_skpd_lalu1=number_format($rk_skpd_lalu,"2",",",".");
		
		if ($rk_skpd < 0){
                    	$min033="("; $rk_skpd=$rk_skpd*-1; $min034=")";
                        }else {
                    	$min033=""; $rk_skpd; $min034="";
                        }
		
		$rk_skpd1=number_format($rk_skpd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, bold, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 34:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min013$rk_ppkd1$min014</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min009$rk_ppkd_lalu1$min010</td>
                                 </tr>";
                        break;
					case 14:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min033$rk_skpd1$min034</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min031$rk_skpd_lalu1$min032</td>
                                 </tr>";
                        break;
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min033$rk_skpd1$min034</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min031$rk_skpd_lalu1$min032</td>
                                 </tr>";
                        break;	
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 16:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min015$lcr1$min016</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min017$lcr_lalu1$min018</td>
                                 </tr>";
                        break;	
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 17:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min019$ast1$min020</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min021$ast_lalu1$min022</td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
					}
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA KONSOL OBYEK $cbulan");
        $this->template->set('title', 'NERACA KONSOL OBYEK $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA KONSOL OBYEK $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	
	function rpt_neraca_pemda($cbulan="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$kd_skpd   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$bulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju a INNER JOIN trhju b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8')";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9')";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju a inner join trhju b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju a
					inner join trdju b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu-$rk_skpd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu-$rk_skpd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr			= $lcrx-$rk_skpd;
			$ast			= $astx-$rk_skpd;
			$eku 			= $sal_akhir - $rk_ppkd + $rk_skpd;					
			$eku_tang 		= $sal_akhir + $nilaiutang - $rk_ppkd +$rk_skpd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju a inner join trdju b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 20:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;						
					case 100:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min015$lcr1$min016</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min017$lcr_lalu1$min018</td>
                                 </tr>";
                        break;
					case 105:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 145:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 170:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 175:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 220:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 225:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 240:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 245:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 280:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 285:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min019$ast1$min020</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min021$ast_lalu1$min022</td>
                                 </tr>";
                        break;		
					case 290:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 295:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 305:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 345:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 350:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 390:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 395:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;		
					case 400:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
						default:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					}
 
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA KONSOL $cbulan");
        $this->template->set('title', 'NERACA KONSOL $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA KONSOL $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	function rpt_neraca_awal_pemda($cbulan="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$kd_skpd   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA AWAL</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER 1 JANUARI $thn_ang</strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>JUMLAH</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)<$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8')";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9')";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)=$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu-$rk_skpd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu-$rk_skpd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr		= $lcrx-$rk_skpd;
			$ast		= $astx-$rk_skpd;
			$eku 		= $sal_akhir + $rk_ppkd-$rk_skpd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd-$rk_skpd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 20:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;						
					case 100:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min017$lcr_lalu1$min018</td>
                                 </tr>";
                        break;
					case 105:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 145:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 170:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 175:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 220:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 225:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 240:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 245:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 280:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 285:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$min021$ast_lalu1$min022</td>
                                 </tr>";
                        break;		
					case 290:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 295:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 305:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 345:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 350:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 390:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 395:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;		
					case 400:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
						default:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"60%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"15%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					}
 
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA KONSOL $cbulan");
        $this->template->set('title', 'NERACA KONSOL $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA KONSOL $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

	
    function rpt_neraca_ppkd($cetak=1){
	        $bulan	 = $_REQUEST['tgl1'];
			$bttd	 = $_REQUEST['tgl_ttd'];
			$kd_skpd   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			
			$bulan<10 ? $xbulan = "0$bulan" : $xbulan=$bulan;
			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$bulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br/>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"6\" bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"6\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"6\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1


			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE b.kd_skpd='$kd_skpd' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}


		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row){
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row){
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row){
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
					
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, isnull(normal,'') as normal, parent, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_ppkd ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
                				
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal=='D'){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal=='D'){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;
					case 75:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 80:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 85:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 110:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;
					case 115:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 130:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;
					case 135:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;	
					case 140:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 145:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 155:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;
					case 160:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 165:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 190:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;
					case 195:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 200:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"39%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;
					case 205:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 210:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 215:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 220:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 250:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;
					case 255:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 260:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 285:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;
					case 290:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 295:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"39%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$nl001$nl1$ln001<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$sblm001$sblm1$mlbs001<b></td>
                                 </tr>";
                        break;
					case 300:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 305:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 310:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 315:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"><b>$uraian<b></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 320:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"4\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"44%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 325:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"44%\"><b>$uraian<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$min003$eku1$min004<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$min001$eku_lalu1$min002<b></td>
                                 </tr>";
                        break;
					case 330:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 335:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan=\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"44%\"><b>$uraian<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$min007$eku_tang1$min008<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"><b>$min005$eku_tang_lalu1$min006<b></td>
								 </tr>";
                        break;	
					default:	
                    
                        if($res['parent']=='4'){
                            $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";   
                        }else if($res['parent']=='7'){
                            $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"51%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"25%\" align=\"right\"></td>
                                 </tr>";   
                        }
                        
                        break;	
					}
				
                                     
			}

			$cRet .=       " </table>";
        
        	$sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$kd_skpd' and kode='PPKD'";
            $sqlttd=$this->db->query($sqlttd1);
            foreach ($sqlttd->result() as $rowttd)
			
                {
                    $nip=$rowttd->nip;                    
                    $oioi= $rowttd->nm;
                    $jabatan = $rowttd->jab;
                }	
            
            $sqlttd12="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$kd_skpd' and kode='PPK'";
            $sqlttd2=$this->db->query($sqlttd12);
            foreach ($sqlttd2->result() as $rowttd)
			
                {
                    $nip2=$rowttd->nip;                    
                    $oioi2= $rowttd->nm;
                    $jabatan2 = $rowttd->jab;
                }	

            
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> Mengetahui,</td>
		 <td align=\"center\" width=\"50%\"> Sanggau, ".$this->tukd_model->tanggal_format_indonesia($bttd)." </td>
		 </tr>		
		 <tr>
		 <td align=\"center\" width=\"50%\"> $jabatan </td>
		 <td align=\"center\" width=\"50%\"> $jabatan2 </td>
		 </tr>	
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		  <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> $oioi</td>
		 <td align=\"center\" width=\"50%\"> $oioi2 </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> NIP :$nip</td>
		 <td align=\"center\" width=\"50%\"> NIP :$nip2 </td>
		 </tr>
         </table>
		 ";		
			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = 'NERACA PPKD';
        $this->template->set('title', 'NERACA PPKD');  
         switch ($cetak){
				case 1;
				echo ("<title>NERACA PPKD $xbulan</title>");
				echo $cRet;
				break;
				case 2;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'P');
				break;
				case 3;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			} 
			}


	function rpt_neraca_unit($cbulan="", $kd_skpd="", $pilih=1){
	        $id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
			
			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
			$modtahun= $thn_ang%4;
	 
			if ($modtahun = 0){
				$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
					else {
				$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
			 
			$arraybulan=explode(".",$nilaibulan);
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1, isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE b.kd_skpd='$kd_skpd' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
					
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_skpd ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal=='D'){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and a.kd_skpd ='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal=='D'){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 65:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 170:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 320:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 340:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 370:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 375:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 378:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 380:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 410:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 415:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 420:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 460:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 465:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;
					case 470:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min013$rk_ppkd1$min014</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min009$rk_ppkd_lalu1$min010</td>
                                 </tr>";
						break;		 
					case 475:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 485:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;	
					default:	
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					}
				
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA UNIT $kd_skpd / $cbulan");
        $this->template->set('title', ("NERACA UNIT $kd_skpd / $cbulan"));  
         switch ($pilih)
        {
            case 1;
				echo ("<title>NERACA UNIT $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}
		
			
			
    function rpt_neraca($cbulan="", $pilih=1){
	        $id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
			
			$sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_skpd;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
			$modtahun= $thn_ang%4;
	 
			if ($modtahun = 0){
				$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
					else {
				$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
			 
			$arraybulan=explode(".",$nilaibulan);
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=31101011 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE kd_skpd<>'$id' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
					
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_skpd ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal=='D'){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT isnull(SUM(b.debet),0) AS debet,isnull(SUM(b.kredit),0) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and kd_skpd<>'$id' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal=='D'){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['seq']) {
                    case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 65:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 70:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 170:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 300:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 320:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 340:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 370:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 375:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 378:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 380:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 385:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 410:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 415:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 420:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 460:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 465:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;
					case 470:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min013$rk_ppkd1$min014</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min009$rk_ppkd_lalu1$min010</td>
                                 </tr>";
						break;		 
					case 475:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 485:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;	
					default:	
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"55%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uraian</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					}
				
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA SKPD Keseluruhan / $cbulan");
        $this->template->set('title', ("NERACA SKPD Keseluruhan / $cbulan"));  
         switch ($pilih)
        {
            case 1;
				echo ("<title>NERACA SKPD $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}

			
function cetakneraca_saldo($dcetak='',$skpd='',$dcetak2='', $jenis=''){        
         
          $thn_ang = $this->session->userdata('pcThang');
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" ><B>NERACA SALDO </B></TD>
					</TR>
					</TABLE>';

			$cRet .='<TABLE width="100%">
					 <TR>
						<TD align="left" width="20%" >SKPD</TD>
						<TD align="left" width="80%" >: '.$skpd.' '.$this->tukd_model->get_nama($skpd,'nm_skpd','ms_skpd','kd_skpd').'</TD>
					 </TR>					 
					 <TR>
						<TD align="left" width="20%" >Periode</TD>
						<TD align="left" width="80%" >: '.$this->tukd_model->tanggal_format_indonesia($dcetak).' s/d '.$this->tukd_model->tanggal_format_indonesia($dcetak2).'</TD>
					 </TR>
					 </TABLE>';

			$cRet .='<TABLE style="border-collapse:collapse;" width="100%" align="center" border="1" cellspacing="0" cellpadding="4">
					 <THEAD>
					 <TR>
						<TD width="10%"  bgcolor="#CCCCCC" align="center" >KODE</TD>
						<TD width="50%" bgcolor="#CCCCCC" align="center" >NAMA REKENING</TD>						
						<TD width="15%" bgcolor="#CCCCCC" align="center" >DEBET</TD>
						<TD width="15%" bgcolor="#CCCCCC" align="center" >KREDIT</TD>						
					 </TR>
					 </THEAD>';		      
                
				$idx=1;
				
				/*25/10/2016
				$query = $this->db->query("SELECT a.kd_rek5,a.debet,a.kredit,b.tgl_voucher,b.ket,b.no_voucher FROM trdju_pkd a LEFT JOIN trhju_pkd b ON a.no_voucher=b.no_voucher AND a.kd_unit=b.kd_skpd WHERE a.kd_rek5='$rek5' AND b.kd_skpd='$skpd' AND b.tgl_voucher>='$dcetak' AND b.tgl_voucher<='$dcetak2'  ORDER BY b.tgl_voucher, 
										   case when left('$rek5',1) in (1,5,6,9) then kredit-debet else debet-kredit end");  
				*/
                $saldo_debet1=0;
                $saldo_debet=0;
                $saldo_kredit1=0;
                $saldo_kredit=0;
				$query = $this->db->query("SELECT DISTINCT isnull(kd_rek5,'') kd_rek5 , isnull(nm_rek5,'') nm_rek5,sum(debet) as debet,sum(kredit) as kredit FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
				 where left(kd_skpd,7)= left('$skpd',7) and
				 b.tgl_voucher>='$dcetak' AND b.tgl_voucher<='$dcetak2'
				 group by kd_rek5,nm_rek5 order by kd_rek5
                 ");  
						
				//$query = $this->db->query("SELECT a.kd_rek5,a.debet,a.kredit,b.tgl_voucher,b.ket,b.no_voucher FROM trdju_pkd a LEFT JOIN trhju_pkd b ON a.no_voucher=b.no_voucher WHERE a.kd_rek5='$rek5' AND b.kd_skpd='$skpd' and b.tgl_voucher>='$dcetak' and b.tgl_voucher<='$dcetak2' and a.pos='1' ORDER by b.tgl_voucher, convert(b.no_voucher,unsigned)");  
				if ($query->num_rows() > 0){
				$jdebet=0;
				$jkredit=0;
				foreach($query->result_array() as $res){
										
					$kd_rek5=$res['kd_rek5'];
					$nm_rek5=$res['nm_rek5'];				
					$debet=$res['debet'];
					$kredit=$res['kredit'];
					$idx++;
                        	
					if ((substr($kd_rek5,0,1)=='9') or (substr($kd_rek5,0,1)=='5') or (substr($kd_rek5,0,2)=='62') or (substr($kd_rek5,0,2)=='72') or (substr($kd_rek5,0,1)=='1')){					
						$saldo_debet=$debet-$kredit;
						
					}else{
						$saldo_kredit=$kredit-$debet;
						
					}
                    
					if($saldo_debet<0){
						$saldo_debet1=$saldo_debet*-1;
						$c='(';
						$d=')';
						}else{
						$saldo_debet1=$saldo_debet;
						$c='';
						$d='';	
						}
                   
                   	if($saldo_kredit<0){
						$saldo_kredit1=$saldo_kredit*-1;
						$e='(';
						$f=')';
						}else{
						$saldo_kredit1=$saldo_kredit;
						$e='';
						$f='';	
						}
                    
                    if ((substr($kd_rek5,0,1)=='9') or (substr($kd_rek5,0,1)=='5') or (substr($kd_rek5,0,2)=='62') or (substr($kd_rek5,0,2)=='72') or (substr($kd_rek5,0,1)=='1')){					
						$cRet .='<TR>
								<TD width="10%" align="left" >'.$kd_rek5.'</TD>
								<TD width="50%" align="left" >'.$nm_rek5.'</TD>
								<TD width="15%" align="right" >'.$c.''.number_format($saldo_debet1,"2",",",".").''.$d.'</TD>
								<TD width="15%" align="right" ></TD>						
							 </TR>';					
					$jdebet=$jdebet+$saldo_debet1;
					
                    }else{
						$cRet .='<TR>
								<TD width="10%" align="left" >'.$kd_rek5.'</TD>
								<TD width="50%" align="left" >'.$nm_rek5.'</TD>
								<TD width="15%" align="right" ></TD>
								<TD width="15%" align="right" >'.$e.''.number_format($saldo_kredit1,"2",",",".").''.$f.'</TD>						
							 </TR>';
					$jkredit = $jkredit + $saldo_kredit1;
	
					}    
							 
					
				}
				if($jdebet<0){
						$jdebet1=$jdebet*-1;
						$k='(';
						$l=')';
						}else{
						$jdebet1=$jdebet;
						$k='';
						$l='';	
						}
				if($jkredit<0){
						$jkredit1=$jkredit*-1;
						$m='(';
						$n=')';
						}else{
						$jkredit1=$jkredit;
						$m='';
						$n='';	
						}
				
				$cRet .='<TR>
					<TD width="10%" align="left" ></TD>
					<TD width="50%" align="left" >JUMLAH</TD>				
					<TD width="15%" align="right" >'.$k.''.number_format($jdebet1,"2",",",".").''.$l.'</TD>
					<TD width="15%" align="right" >'.$m.''.number_format($jkredit1,"2",",",".").''.$n.'</TD>					
				 </TR>';
				$cRet .='</TABLE>';				 
				} else{
				
				$cRet .='</TABLE>';
				}
			 
             $sqlsc="SELECT nama,jabatan,pangkat,nip FROM ms_ttd where kode='PA' and kd_skpd='$skpd'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowttd)
                {
                    $nama_ttd = $rowttd->nama;
                    $jabatan = $rowttd->jabatan;
                    $pangkat = $rowttd->pangkat;
                    $nip = 'NIP. '.$rowttd->pangkat;
                } 
             
             $cRet .="<table style=\"border-collapse:collapse;font-family:Arial;font-size:12px\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"1\" cellpadding=\"1\">
				<tr>
                    <td width=\"50%\" align=\"center\">&nbsp;</td>
                    <td width=\"50%\" align=\"center\"></td>
				</tr>
				<tr>
                    <td width=\"50%\" align=\"center\">&nbsp;</td>
                    <td width=\"50%\" align=\"center\">Sanggau, 31 Desember 2016<br>$jabatan<br><br><br><br><br><b><u>$nama_ttd</u></b><br>$pangkat<br>$nip
					</td>
				</tr>
				</table>";
             
			if($jenis == 1){
			echo '<title> Neraca Saldo </title>';
			echo $cRet;
			}
			if($jenis ==2){
            $this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
			}
	}

	
	function ctk_lpe_pemda_unit($cbulan="", $kd_skpd="", $cetak = 1)
    {
		$id = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
		$bulan	 = $cbulan;
        $id1     = $this->session->userdata('kdskpd');
        $nmskpd = $this->tukd_model->get_nama($kd_skpd,'nm_skpd','ms_skpd','kd_skpd');
        $nm_skpd =strtoupper($nmskpd);
        $thn_ang_1= $thn_ang-1;   
        
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                }
				
        $skpd = "AND kd_skpd='$id1'";
        $skpd1 = "AND b.kd_skpd='$id1'"; 

// UPDATE LPE TAHUN LALU
    		        
			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0 and kd_skpd='$kd_skpd'");  
	        foreach($query3->result_array() as $res2){
				 $debet=$res2['debet'];
				 $kredit=$res2['kredit'];
                 				 
			 }
			 
		$real=$kredit-$debet+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;
//        $this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$real' WHERE nor = '1' ");
//          }
/*		    
			
			$query3 = $this->db->query(" SELECT
										SUM(a.debet) AS debet, SUM(a.kredit) AS kredit
									FROM
										trdju_pkd a
									INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd
									WHERE
										b.kd_skpd = '$kd_skpd'
									AND left(a.kd_rek5,1) = '9'
									AND YEAR (b.tgl_voucher) < '$thn'");  
	        foreach($query3->result_array() as $res21){
				 $debet9=$res21['debet'];
				 $kredit9=$res21['kredit'];
                 				 
			 }
			 
		$query3 = $this->db->query(" SELECT
										SUM(a.debet) AS debet, SUM(a.kredit) AS kredit
									FROM
										trdju_pkd a
									INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd
									WHERE
										b.kd_skpd = '$kd_skpd'
									AND left(a.kd_rek5,1) = '8'
									AND YEAR (b.tgl_voucher) < '$thn'");  
	        foreach($query3->result_array() as $res22){
				 $debet8=$res22['debet'];
				 $kredit8=$res22['kredit'];
                 				 
			 }	 
			 
		$surplus1_1=($kredit8-$debet8)-($debet9-$kredit9);
		$surplus1=number_format($surplus1_1, "2", ".", "");
*/
		//        $this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$surplus1' WHERE nor = '2'");
          
//		$this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$akhir' WHERE nor = '7'");
		

// end tahun lalu		  
        
/*        $sqlsawal = "SELECT * FROM map_lpe_skpd where nor='7'";
        $queryawal = $this->db->query($sqlsawal);
        $jmlsaldo = $queryawal->row();
        $jmlsal = $jmlsaldo->thn_m1;
        
        $sql41 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,1)='8' $skpd";
        $query41 = $this->db->query($sql41);
        $jmlp = $query41->row();
        $jmlpendapatan = $jmlp->nilai;
        $jmlpendapatan1 = number_format($jmlp->nilai, "2", ".", ",");
*/
//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu31 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;
/*		
        $sql51 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,1)='9'";
        $query51 = $this->db->query($sql51);
        $jmlb = $query51->row();
        $jmlbelanja = $jmlb->nilai;
        $jmlbelanja1 = number_format($jmlb->nilai, "2", ".", ",");
        $sql523 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,3)='923'";
        $query523 = $this->db->query($sql523);
        $jmlbm = $query523->row();
        $jmlbmbelanja = $jmlbm->nilai;
        $jmlbmbelanja1 = number_format($jmlbmbelanja, "2", ".", ",");
        $sql61 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,2)='71'";
        $query61 = $this->db->query($sql61);
        $jmlpm = $query61->row();
        $jmlpmasuk = $jmlpm->nilai;
        $sql62 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,2)='72'";
        $query62 = $this->db->query($sql62);
        $jmlpk = $query62->row();
        $jmlpkeluar = $jmlpk->nilai;
        $surplus = $jmlpendapatan - $jmlbelanja;
*/						
            $sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
/*        $biaya_net = $jmlpmasuk - $jmlpkeluar;        
        $silpa = ($jmlpendapatan + $jmlpmasuk) - ($jmlbelanja + $jmlpkeluar);
        if ($silpa < 0)
        {
            $a = "(";
            $silpa1 = $silpa * -1;
            $b = ")";
        } else
        {
            $a = "";
            $silpa1 = $silpa;
            $b = "";
        }
*/
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

					if ($lpe_lalu1 < 0){
                    	$lalu1="("; $lpe_lalu1=$lpe_lalu1*-1; $lalu2=")";}
                    else {
                    	$lalu1=""; $lpe_lalu1; $lalu2="";}				

					if ($lpe_lalu2 < 0){
                    	$lalu3="("; $lpe_lalu2=$lpe_lalu2*-1; $lalu4=")";}
                    else {
                    	$lalu3=""; $lpe_lalu2; $lalu4="";}

					if ($lpe_lalu3 < 0){
                    	$lalu5="("; $lpe_lalu3=$lpe_lalu3*-1; $lalu6=")";}
                    else {
                    	$lalu5=""; $lpe_lalu3; $lalu6="";}
						
					if ($nilaiDR < 0){
                    	$l000="("; $nilaiDR=$nilaiDR*-1; $p000=")";}
                    else {
                    	$l000=""; $nilaiDR; $p000="";}		

					if ($nilailpe1 < 0){
                    	$l001="("; $nilailpe1=$nilailpe1*-1; $p001=")";}
                    else {
                    	$l001=""; $nilailpe1; $p001="";}

					if ($nilailpe2 < 0){
                    	$l002="("; $nilailpe2=$nilailpe2*-1; $p002=")";}
                    else {
                    	$l002=""; $nilailpe2; $p002="";}

                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3,"2",",",".");
					
					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}

					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}

					if ($real < 0)
					{
						$cx = "("; $real = $real * -1; $dx = ")";
					} else
					{
						$cx = ""; $real; $dx = "";
					}

	 $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);

    
         $cRet = '';
         $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong>$nm_skpd</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN PERUBAHAN EKUITAS</strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>&nbsp</strong></td>
                    </tr>
                  </table>";        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                        
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                        </tr>";
                
                     $sql = "SELECT * FROM map_lpe_skpd  ORDER BY seq";
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row)
                    {
                      
                       $kd_rek   =$row->nor ;
                       $parent   =$row->parent;
                       $nama     =$row->uraian;
                       $nilai_1    =$row->thn_m1;
                       
					   
/*        if ($nilai_1 < 0)
        {
            $tx = "(";
            $nilai_1 = $nilai_1 * -1;
            $ty = ")";
        } else
        {
            $tx = "";
            $ty = "";
        }
*/
                               switch ($kd_rek)
                                {
                                    case 1:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"> $c1".number_format($sal_awal,"2",",",".")."$d1</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$cx".number_format($real,"2",",",".")."$dx</td>
                                                     </tr>";
                                            
                                    break; 
                                    case 2:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"> $lo13".number_format($surplus_lo3,"2",",",".")."$lo14</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lo15".number_format($surplus_lo_lalu3,"2",",",".")."$lo16</td>
                                                     </tr>";
                                            
                                    break; 
                                     case 3:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                     </tr>";
                                            
                                    break; 
                                    case 4: 
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l001".number_format($nilailpe1,"2",",",".")."$p001</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu1".number_format($lpe_lalu1,"2",",",".")."$lalu2</td>
                                                     </tr>";
									break;
                                    case 5:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l000".number_format($nilaiDR,"2",",",".")."$p000</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu3".number_format($lpe_lalu3,"2",",",".")."$lalu4</td>
                                                     </tr>";
									break;
                                    case 6:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l002".number_format($nilailpe2,"2",",",".")."$p002</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu5".number_format($lpe_lalu3,"2",",",".")."$lalu6</td>
                                                     </tr>";
									break;
                                    case 7:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$c".number_format($sal_akhir,"2",",",".")."$d</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$c1".number_format($sal_awal,"2",",",".")."$d1</td>
                                                     </tr>";
                                } 
                       
                    }                           

        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("LPE KONSOL $cbulan");
        $this->template->set('title', 'LPE KONSOL $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>LPE KONSOL $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }

    }
    
	
	
	function ctk_lpe_pemda($cbulan="", $cetak = 1)
    {
		$kd_skpd = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
		$bulan	 = $cbulan;
        $id1     = $this->session->userdata('kdskpd');
        $nmskpd = $this->tukd_model->get_nama($id1,'nm_skpd','ms_skpd','kd_skpd');
        $nmskpd =strtoupper($nmskpd);
        $thn_ang_1= $thn_ang-1;   
        
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                }
				
        $skpd = "AND kd_skpd='$id1'";
        $skpd1 = "AND b.kd_skpd='$id1'"; 

// UPDATE LPE TAHUN LALU
    		        
			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet=$res2['debet'];
				 $kredit=$res2['kredit'];
                 				 
			 }
			 
		$real=$kredit-$debet+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;
//        $this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$real' WHERE nor = '1' ");
//          }
/*		    
			
			$query3 = $this->db->query(" SELECT
										SUM(a.debet) AS debet, SUM(a.kredit) AS kredit
									FROM
										trdju_pkd a
									INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd
									WHERE
										b.kd_skpd = '$kd_skpd'
									AND left(a.kd_rek5,1) = '9'
									AND YEAR (b.tgl_voucher) < '$thn'");  
	        foreach($query3->result_array() as $res21){
				 $debet9=$res21['debet'];
				 $kredit9=$res21['kredit'];
                 				 
			 }
			 
		$query3 = $this->db->query(" SELECT
										SUM(a.debet) AS debet, SUM(a.kredit) AS kredit
									FROM
										trdju_pkd a
									INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd
									WHERE
										b.kd_skpd = '$kd_skpd'
									AND left(a.kd_rek5,1) = '8'
									AND YEAR (b.tgl_voucher) < '$thn'");  
	        foreach($query3->result_array() as $res22){
				 $debet8=$res22['debet'];
				 $kredit8=$res22['kredit'];
                 				 
			 }	 
			 
		$surplus1_1=($kredit8-$debet8)-($debet9-$kredit9);
		$surplus1=number_format($surplus1_1, "2", ".", "");
*/
		//        $this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$surplus1' WHERE nor = '2'");
          
//		$this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$akhir' WHERE nor = '7'");
		

// end tahun lalu		  
        
/*        $sqlsawal = "SELECT * FROM map_lpe_skpd where nor='7'";
        $queryawal = $this->db->query($sqlsawal);
        $jmlsaldo = $queryawal->row();
        $jmlsal = $jmlsaldo->thn_m1;
        
        $sql41 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,1)='8' $skpd";
        $query41 = $this->db->query($sql41);
        $jmlp = $query41->row();
        $jmlpendapatan = $jmlp->nilai;
        $jmlpendapatan1 = number_format($jmlp->nilai, "2", ".", ",");
*/
//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8')";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8')";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9')";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu31 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;
/*		
        $sql51 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,1)='9'";
        $query51 = $this->db->query($sql51);
        $jmlb = $query51->row();
        $jmlbelanja = $jmlb->nilai;
        $jmlbelanja1 = number_format($jmlb->nilai, "2", ".", ",");
        $sql523 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,3)='923'";
        $query523 = $this->db->query($sql523);
        $jmlbm = $query523->row();
        $jmlbmbelanja = $jmlbm->nilai;
        $jmlbmbelanja1 = number_format($jmlbmbelanja, "2", ".", ",");
        $sql61 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,2)='71'";
        $query61 = $this->db->query($sql61);
        $jmlpm = $query61->row();
        $jmlpmasuk = $jmlpm->nilai;
        $sql62 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,2)='72'";
        $query62 = $this->db->query($sql62);
        $jmlpk = $query62->row();
        $jmlpkeluar = $jmlpk->nilai;
        $surplus = $jmlpendapatan - $jmlbelanja;
*/						
            $sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
/*        $biaya_net = $jmlpmasuk - $jmlpkeluar;        
        $silpa = ($jmlpendapatan + $jmlpmasuk) - ($jmlbelanja + $jmlpkeluar);
        if ($silpa < 0)
        {
            $a = "(";
            $silpa1 = $silpa * -1;
            $b = ")";
        } else
        {
            $a = "";
            $silpa1 = $silpa;
            $b = "";
        }
*/
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

					if ($lpe_lalu1 < 0){
                    	$lalu1="("; $lpe_lalu1=$lpe_lalu1*-1; $lalu2=")";}
                    else {
                    	$lalu1=""; $lpe_lalu1; $lalu2="";}				

					if ($lpe_lalu2 < 0){
                    	$lalu3="("; $lpe_lalu2=$lpe_lalu2*-1; $lalu4=")";}
                    else {
                    	$lalu3=""; $lpe_lalu2; $lalu4="";}

					if ($lpe_lalu3 < 0){
                    	$lalu5="("; $lpe_lalu3=$lpe_lalu3*-1; $lalu6=")";}
                    else {
                    	$lalu5=""; $lpe_lalu3; $lalu6="";}
						
					if ($nilaiDR < 0){
                    	$l000="("; $nilaiDR=$nilaiDR*-1; $p000=")";}
                    else {
                    	$l000=""; $nilaiDR; $p000="";}		

					if ($nilailpe1 < 0){
                    	$l001="("; $nilailpe1=$nilailpe1*-1; $p001=")";}
                    else {
                    	$l001=""; $nilailpe1; $p001="";}

					if ($nilailpe2 < 0){
                    	$l002="("; $nilailpe2=$nilailpe2*-1; $p002=")";}
                    else {
                    	$l002=""; $nilailpe2; $p002="";}

                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3,"2",",",".");
					
					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}

					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}

					if ($real < 0)
					{
						$cx = "("; $real = $real * -1; $dx = ")";
					} else
					{
						$cx = ""; $real; $dx = "";
					}

	 $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);

    
         $cRet = '';
         $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN PERUBAHAN EKUITAS</strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>&nbsp</strong></td>
                    </tr>
                  </table>";        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"40%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                        
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"40%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                        </tr>";
                
                     $sql = "SELECT * FROM map_lpe_skpd  ORDER BY seq";
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row)
                    {
                      
                       $kd_rek   =$row->nor ;
                       $parent   =$row->parent;
                       $nama     =$row->uraian;
                       $nilai_1    =$row->thn_m1;
                       
					   
/*        if ($nilai_1 < 0)
        {
            $tx = "(";
            $nilai_1 = $nilai_1 * -1;
            $ty = ")";
        } else
        {
            $tx = "";
            $ty = "";
        }
*/
                               switch ($kd_rek)
                                {
                                    case 1:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"> $c1".number_format($sal_awal,"2",",",".")."$d1</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$cx".number_format($real,"2",",",".")."$dx</td>
                                                     </tr>";
                                            
                                    break; 
                                    case 2:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"> $lo13".number_format($surplus_lo3,"2",",",".")."$lo14</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lo15".number_format($surplus_lo_lalu3,"2",",",".")."$lo16</td>
                                                     </tr>";
                                            
                                    break; 
                                     case 3:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                     </tr>";
                                            
                                    break; 
                                    case 4: 
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l001".number_format($nilailpe1,"2",",",".")."$p001</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu1".number_format($lpe_lalu1,"2",",",".")."$lalu2</td>
                                                     </tr>";
									break;
                                    case 5:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l000".number_format($nilaiDR,"2",",",".")."$p000</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu3".number_format($lpe_lalu3,"2",",",".")."$lalu4</td>
                                                     </tr>";
									break;
                                    case 6:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l002".number_format($nilailpe2,"2",",",".")."$p002</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu5".number_format($lpe_lalu3,"2",",",".")."$lalu6</td>
                                                     </tr>";
									break;
                                    case 7:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$c".number_format($sal_akhir,"2",",",".")."$d</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$c1".number_format($sal_awal,"2",",",".")."$d1</td>
                                                     </tr>";
                                } 
                       
                    }                           

        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("LPE KONSOL $cbulan");
        $this->template->set('title', 'LPE KONSOL $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>LPE KONSOL $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }

    }
    
    
function cetak_lpe_ppkd($cetak = 0)
    {
		$kd_skpd = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $id1     = $this->session->userdata('kdskpd');
        $bulan	 = $_REQUEST['tgl1'];
		$bttd= $_REQUEST['tgl_ttd']; 
		$nmskpd = $this->tukd_model->get_nama($id1,'nm_skpd','ms_skpd','kd_skpd');
        $nmskpd =strtoupper($nmskpd);
        $thn_ang_1= $thn_ang-1;   
        
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                }
				
        $skpd = "AND kd_skpd='$id1'";
        $skpd1 = "AND b.kd_skpd='$id1'"; 

// UPDATE LPE TAHUN LALU
    		        
			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and b.kd_rek5='3110101' and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and b.kd_rek5='3110101' and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and b.kd_rek5='3110101' and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE b.kd_skpd='$kd_skpd' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet=$res2['debet'];
				 $kredit=$res2['kredit'];
                 				 
			 }
			 
		$real=$kredit-$debet+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;
//        $this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$real' WHERE nor = '1' ");
//          }
/*		    
			
			$query3 = $this->db->query(" SELECT
										SUM(a.debet) AS debet, SUM(a.kredit) AS kredit
									FROM
										trdju_pkd a
									INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd
									WHERE
										b.kd_skpd = '$kd_skpd'
									AND left(a.kd_rek5,1) = '9'
									AND YEAR (b.tgl_voucher) < '$thn'");  
	        foreach($query3->result_array() as $res21){
				 $debet9=$res21['debet'];
				 $kredit9=$res21['kredit'];
                 				 
			 }
			 
		$query3 = $this->db->query(" SELECT
										SUM(a.debet) AS debet, SUM(a.kredit) AS kredit
									FROM
										trdju_pkd a
									INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd
									WHERE
										b.kd_skpd = '$kd_skpd'
									AND left(a.kd_rek5,1) = '8'
									AND YEAR (b.tgl_voucher) < '$thn'");  
	        foreach($query3->result_array() as $res22){
				 $debet8=$res22['debet'];
				 $kredit8=$res22['kredit'];
                 				 
			 }	 
			 
		$surplus1_1=($kredit8-$debet8)-($debet9-$kredit9);
		$surplus1=number_format($surplus1_1, "2", ".", "");
*/
		//        $this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$surplus1' WHERE nor = '2'");
          
//		$this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$akhir' WHERE nor = '7'");
		

// end tahun lalu		  
        
/*        $sqlsawal = "SELECT * FROM map_lpe_skpd where nor='7'";
        $queryawal = $this->db->query($sqlsawal);
        $jmlsaldo = $queryawal->row();
        $jmlsal = $jmlsaldo->thn_m1;
        
        $sql41 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,1)='8' $skpd";
        $query41 = $this->db->query($sql41);
        $jmlp = $query41->row();
        $jmlpendapatan = $jmlp->nilai;
        $jmlpendapatan1 = number_format($jmlp->nilai, "2", ".", ",");
*/
//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and b.kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and b.kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and b.kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}
                    
			$sqlrkpp2 = "select isnull(sum(b.kredit)-sum(b.debet),0) as nilai from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where left(b.kd_rek5,3) in ('313') and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$kd_skpd',7)";//Henri_TB
                            
                    $rkpp2 = $this->db->query($sqlrkpp2); 
                    $rkpp12 = $rkpp2->row();
                    $rkpp_lalu2 = $rkpp12->nilai;
                    $rkpp_lalu12 = number_format($rkpp12->nilai,"2",",",".");
                    
		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3 + $rkpp_lalu2;
/*		
        $sql51 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,1)='9'";
        $query51 = $this->db->query($sql51);
        $jmlb = $query51->row();
        $jmlbelanja = $jmlb->nilai;
        $jmlbelanja1 = number_format($jmlb->nilai, "2", ".", ",");
        $sql523 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,3)='923'";
        $query523 = $this->db->query($sql523);
        $jmlbm = $query523->row();
        $jmlbmbelanja = $jmlbm->nilai;
        $jmlbmbelanja1 = number_format($jmlbmbelanja, "2", ".", ",");
        $sql61 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,2)='71'";
        $query61 = $this->db->query($sql61);
        $jmlpm = $query61->row();
        $jmlpmasuk = $jmlpm->nilai;
        $sql62 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,2)='72'";
        $query62 = $this->db->query($sql62);
        $jmlpk = $query62->row();
        $jmlpkeluar = $jmlpk->nilai;
        $surplus = $jmlpendapatan - $jmlbelanja;
*/						
            $sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and b.kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and b.kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and b.kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}

			$sqlrkpp3 = "select isnull(sum(b.kredit)-sum(b.debet),0) as nilai from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where left(b.kd_rek5,3) in ('313') and year(a.tgl_voucher)=$thn_ang and left(a.kd_skpd,7)=left('$kd_skpd',7)";//Henri_TB
                            
                    $rkpp3 = $this->db->query($sqlrkpp3); 
                    $rkpp13 = $rkpp3->row();
                    $rkpp = $rkpp13->nilai ;
                    $rkpp1 = number_format($rkpp13->nilai,"2",",","."); 
                    		
/*        $biaya_net = $jmlpmasuk - $jmlpkeluar;        
        $silpa = ($jmlpendapatan + $jmlpmasuk) - ($jmlbelanja + $jmlpkeluar);
        if ($silpa < 0)
        {
            $a = "(";
            $silpa1 = $silpa * -1;
            $b = ")";
        } else
        {
            $a = "";
            $silpa1 = $silpa;
            $b = "";
        }
*/
        $sal_akhir = $sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2+$rkpp;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3,"2",",",".");
					
					if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3,"2",",",".");

					if ($lpe_lalu1 < 0){
                    	$lalu1="("; $lpe_lalu1=$lpe_lalu1*-1; $lalu2=")";}
                    else {
                    	$lalu1=""; $lpe_lalu1; $lalu2="";}				

					if ($lpe_lalu2 < 0){
                    	$lalu3="("; $lpe_lalu2=$lpe_lalu2*-1; $lalu4=")";}
                    else {
                    	$lalu3=""; $lpe_lalu2; $lalu4="";}

					if ($lpe_lalu3 < 0){
                    	$lalu5="("; $lpe_lalu3=$lpe_lalu3*-1; $lalu6=")";}
                    else {
                    	$lalu5=""; $lpe_lalu3; $lalu6="";}
						
					if ($nilaiDR < 0){
                    	$l000="("; $nilaiDR=$nilaiDR*-1; $p000=")";}
                    else {
                    	$l000=""; $nilaiDR; $p000="";}		

					if ($nilailpe1 < 0){
                    	$l001="("; $nilailpe1=$nilailpe1*-1; $p001=")";}
                    else {
                    	$l001=""; $nilailpe1; $p001="";}

					if ($nilailpe2 < 0){
                    	$l002="("; $nilailpe2=$nilailpe2*-1; $p002=")";}
                    else {
                    	$l002=""; $nilailpe2; $p002="";}

                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3,"2",",",".");
					
                    if ($rkpp_lalu2 < 0)
					{
						$pp1 = "("; $rkpp_lalu2 = $rkpp_lalu2 * -1; $pp2 = ")";
					} else
					{
						$pp1 = ""; $rkpp_lalu2; $pp2 = "";
					}

                    if ($rkpp < 0)
					{
						$pp3 = "("; $rkpp = $rkpp * -1; $pp4 = ")";
					} else
					{
						$pp3 = ""; $rkpp; $pp4 = "";
					}
                    
					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}

					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}

					if ($real < 0)
					{
						$cx = "("; $real = $real * -1; $dx = ")";
					} else
					{
						$cx = ""; $real; $dx = "";
                        }
	 $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
					
         $cRet = '';
         $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
         
            <tr>
                <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>
            </tr>
	        <tr>
                <td align=\"center\"><strong>$nmskpd</strong></td>
            </tr>
			<tr>
                <td align=\"center\"><strong>LAPORAN PERUBAHAN EKUITAS</strong></td>
            </tr>
			<tr>
                <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$bulan] $thn_ang DAN $thn_ang_1</strong></td>
            </tr>
              <tr>
                <td align=\"center\">&nbsp;</td>
            </tr>   
        </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">    
					<thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"65%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\"><b>$thn_ang_1</b></td> 
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                          
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"65%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                        </tr>";
                
                
                     $sql = "SELECT * FROM map_lpe_skpd  ORDER BY seq";
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row)
                    {
                      
                       $kd_rek   =$row->nor ;
                       $parent   =$row->parent;
                       $nama     =$row->uraian;
                       $nilai_1    =$row->thn_m1;
                       
					   
/*        if ($nilai_1 < 0)
        {
            $tx = "(";
            $nilai_1 = $nilai_1 * -1;
            $ty = ")";
        } else
        {
            $tx = "";
            $ty = "";
        }
*/
                               switch ($kd_rek)
                                {
                                    case 1:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek<b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama<b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$c1".number_format($sal_awal,"2",",",".")."$d1<b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$cx".number_format($real,"2",",",".")."$dx<b></td>
                                                     </tr>";
                                            
                                    break; 
                                    case 2:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$lo13".number_format($surplus_lo3,"2",",",".")."$lo14<b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$lo15".number_format($surplus_lo_lalu3,"2",",",".")."$lo16<b></td>
                                                     </tr>";
                                            
                                    break; 
                                     case 3:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek<b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama<b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                     </tr>";
                                            
                                    break; 
                                    case 4: 
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l001".number_format($nilailpe1,"2",",",".")."$p001</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu1".number_format($lpe_lalu2,"2",",",".")."$lalu2</td>
                                                     </tr>";
									break;
                                    case 5:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l000".number_format($nilaiDR,"2",",",".")."$p000</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu3".number_format($lpe_lalu1,"2",",",".")."$lalu4</td>
                                                     </tr>";
									break;
                                    case 6:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l002".number_format($nilailpe2,"2",",",".")."$p002</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu5".number_format($lpe_lalu3,"2",",",".")."$lalu6</td>
                                                     </tr>";
									break;
                                    case 7:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$pp3".number_format($rkpp,"2",",",".")."$d</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$pp1".number_format($rkpp_lalu2,"2",",",".")."$d1</b></td>
                                                     </tr>";
									break;
                                    case 8:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$c".number_format($sal_akhir,"2",",",".")."$d</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$c1".number_format($sal_awal,"2",",",".")."$d1</b></td>
                                                      </tr>";
                                } 
                       
                    }
		$cRet .=       " </table>";
        
        	$sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$kd_skpd' and kode='PA'";
            $sqlttd=$this->db->query($sqlttd1);
            foreach ($sqlttd->result() as $rowttd)
			
                {
                    $nip=$rowttd->nip;                    
                    $oioi= $rowttd->nm;
                    $jabatan = $rowttd->jab;
                }	
            
            $sqlttd12="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$kd_skpd' and kode='PPK'";
            $sqlttd2=$this->db->query($sqlttd12);
            foreach ($sqlttd2->result() as $rowttd)
			
                {
                    $nip2=$rowttd->nip;                    
                    $oioi2= $rowttd->nm;
                    $jabatan2 = $rowttd->jab;
                }	

            
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> Mengetahui,</td>
		 <td align=\"center\" width=\"50%\"> Sanggau, ".$this->tukd_model->tanggal_format_indonesia($bttd)." </td>
		 </tr>		
		 <tr>
		 <td align=\"center\" width=\"50%\"> $jabatan </td>
		 <td align=\"center\" width=\"50%\"> $jabatan2 </td>
		 </tr>	
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		  <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> $oioi</td>
		 <td align=\"center\" width=\"50%\"> $oioi2 </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> NIP :$nip</td>
		 <td align=\"center\" width=\"50%\"> NIP :$nip2 </td>
		 </tr>
         </table>
		 ";	
                                        

        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = 'LAPORAN PERUBAHAN EKUITAS';
        $this->template->set('title', 'LAPORAN PERUBAHAN EKUITAS');  
         switch ($cetak)
        {
            case 1;
				echo $cRet;
				echo ("<title>LPE $bulan</title>");
				break;
            case 2;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
			   	echo ("<title>LPE $bulan</title>");
				echo $cRet;
               break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }

    }
    	
	function ctk_lpe_unit($cbulan="", $kd_skpd="", $pilih=1){
		$id = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $id1     = $this->session->userdata('kdskpd');
        $nmskpd = $this->tukd_model->get_nama($kd_skpd,'nm_skpd','ms_skpd','kd_skpd');
        $nmskpd =strtoupper($nmskpd);
        $thn_ang_1= $thn_ang-1;   
        $cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
		
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                }
				
        $skpd = "AND kd_skpd='$id1'";
        $skpd1 = "AND b.kd_skpd='$id1'"; 

// UPDATE LPE TAHUN LALU
    		        
			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE b.kd_skpd='$kd_skpd' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet=$res2['debet'];
				 $kredit=$res2['kredit'];
                 				 
			 }
			 
		$real=$kredit-$debet+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;
//        $this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$real' WHERE nor = '1' ");
//          }
/*		    
			
			$query3 = $this->db->query(" SELECT
										SUM(a.debet) AS debet, SUM(a.kredit) AS kredit
									FROM
										trdju_pkd a
									INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd
									WHERE
										b.kd_skpd = '$kd_skpd'
									AND left(a.kd_rek5,1) = '9'
									AND YEAR (b.tgl_voucher) < '$thn'");  
	        foreach($query3->result_array() as $res21){
				 $debet9=$res21['debet'];
				 $kredit9=$res21['kredit'];
                 				 
			 }
			 
		$query3 = $this->db->query(" SELECT
										SUM(a.debet) AS debet, SUM(a.kredit) AS kredit
									FROM
										trdju_pkd a
									INNER JOIN trhju_pkd b ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd
									WHERE
										b.kd_skpd = '$kd_skpd'
									AND left(a.kd_rek5,1) = '8'
									AND YEAR (b.tgl_voucher) < '$thn'");  
	        foreach($query3->result_array() as $res22){
				 $debet8=$res22['debet'];
				 $kredit8=$res22['kredit'];
                 				 
			 }	 
			 
		$surplus1_1=($kredit8-$debet8)-($debet9-$kredit9);
		$surplus1=number_format($surplus1_1, "2", ".", "");
*/
		//        $this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$surplus1' WHERE nor = '2'");
          
//		$this->db->query(" UPDATE map_lpe_skpd SET thn_m1 = '$akhir' WHERE nor = '7'");
		

// end tahun lalu		  
        
/*        $sqlsawal = "SELECT * FROM map_lpe_skpd where nor='7'";
        $queryawal = $this->db->query($sqlsawal);
        $jmlsaldo = $queryawal->row();
        $jmlsal = $jmlsaldo->thn_m1;
        
        $sql41 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,1)='8' $skpd";
        $query41 = $this->db->query($sql41);
        $jmlp = $query41->row();
        $jmlpendapatan = $jmlp->nilai;
        $jmlpendapatan1 = number_format($jmlp->nilai, "2", ".", ",");
*/
//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and b.kd_skpd='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and b.kd_skpd='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu31 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;
/*		
        $sql51 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,1)='9'";
        $query51 = $this->db->query($sql51);
        $jmlb = $query51->row();
        $jmlbelanja = $jmlb->nilai;
        $jmlbelanja1 = number_format($jmlb->nilai, "2", ".", ",");
        $sql523 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,3)='923'";
        $query523 = $this->db->query($sql523);
        $jmlbm = $query523->row();
        $jmlbmbelanja = $jmlbm->nilai;
        $jmlbmbelanja1 = number_format($jmlbmbelanja, "2", ".", ",");
        $sql61 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,2)='71'";
        $query61 = $this->db->query($sql61);
        $jmlpm = $query61->row();
        $jmlpmasuk = $jmlpm->nilai;
        $sql62 = "SELECT SUM(real_spj) as nilai FROM realisasi WHERE left(kd_rek5,2)='72'";
        $query62 = $this->db->query($sql62);
        $jmlpk = $query62->row();
        $jmlpkeluar = $jmlpk->nilai;
        $surplus = $jmlpendapatan - $jmlbelanja;
*/						
            $sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and a.kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
/*        $biaya_net = $jmlpmasuk - $jmlpkeluar;        
        $silpa = ($jmlpendapatan + $jmlpmasuk) - ($jmlbelanja + $jmlpkeluar);
        if ($silpa < 0)
        {
            $a = "(";
            $silpa1 = $silpa * -1;
            $b = ")";
        } else
        {
            $a = "";
            $silpa1 = $silpa;
            $b = "";
        }
*/
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

					if ($lpe_lalu1 < 0){
                    	$lalu1="("; $lpe_lalu1=$lpe_lalu1*-1; $lalu2=")";}
                    else {
                    	$lalu1=""; $lpe_lalu1; $lalu2="";}				

					if ($lpe_lalu2 < 0){
                    	$lalu3="("; $lpe_lalu2=$lpe_lalu2*-1; $lalu4=")";}
                    else {
                    	$lalu3=""; $lpe_lalu2; $lalu4="";}

					if ($lpe_lalu3 < 0){
                    	$lalu5="("; $lpe_lalu3=$lpe_lalu3*-1; $lalu6=")";}
                    else {
                    	$lalu5=""; $lpe_lalu3; $lalu6="";}
						
					if ($nilaiDR < 0){
                    	$l000="("; $nilaiDR=$nilaiDR*-1; $p000=")";}
                    else {
                    	$l000=""; $nilaiDR; $p000="";}		

					if ($nilailpe1 < 0){
                    	$l001="("; $nilailpe1=$nilailpe1*-1; $p001=")";}
                    else {
                    	$l001=""; $nilailpe1; $p001="";}

					if ($nilailpe2 < 0){
                    	$l002="("; $nilailpe2=$nilailpe2*-1; $p002=")";}
                    else {
                    	$l002=""; $nilailpe2; $p002="";}

                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3,"2",",",".");
					
					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}

					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}

					if ($real < 0)
					{
						$cx = "("; $real = $real * -1; $dx = ")";
					} else
					{
						$cx = ""; $real; $dx = "";
					}
		
		 $modtahun= $thn_ang%4;
		 
		 if ($modtahun = 0){
			$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
				else {
			$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
		 
		 $arraybulan=explode(".",$nilaibulan);
		
         $cRet = '';
         $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
         
            <tr>
                <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>
            </tr>
	        <tr>
                <td align=\"center\"><strong>$nmskpd</strong></td>
            </tr>
			<tr>
                <td align=\"center\"><strong>LAPORAN PERUBAHAN EKUITAS</strong></td>
            </tr>
			<tr>
                <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
            </tr>
              <tr>
                <td align=\"center\">&nbsp;</td>
            </tr>   
        </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">    
					<thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"65%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\"><b>$thn_ang_1</b></td> 
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                          
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"65%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                        </tr>";
                
                
                     $sql = "SELECT * FROM map_lpe_skpd  ORDER BY seq";
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row)
                    {
                      
                       $kd_rek   =$row->nor ;
                       $parent   =$row->parent;
                       $nama     =$row->uraian;
                       $nilai_1    =$row->thn_m1;
                       
					   
/*        if ($nilai_1 < 0)
        {
            $tx = "(";
            $nilai_1 = $nilai_1 * -1;
            $ty = ")";
        } else
        {
            $tx = "";
            $ty = "";
        }
*/
                               switch ($kd_rek)
                                {
                                    case 1:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"> $c1".number_format($sal_awal,"2",",",".")."$d1</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$cx".number_format($real,"2",",",".")."$dx</td>
                                                     </tr>";
                                            
                                    break; 
                                    case 2:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"> $lo13".number_format($surplus_lo3,"2",",",".")."$lo14</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lo15".number_format($surplus_lo_lalu3,"2",",",".")."$lo16</td>
                                                     </tr>";
                                            
                                    break; 
                                     case 3:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                     </tr>";
                                            
                                    break; 
                                    case 4: 
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l001".number_format($nilailpe1,"2",",",".")."$p001</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu1".number_format($lpe_lalu1,"2",",",".")."$lalu2</td>
                                                     </tr>";
									break;
                                    case 5:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l000".number_format($nilaiDR,"2",",",".")."$p000</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu3".number_format($lpe_lalu3,"2",",",".")."$lalu4</td>
                                                     </tr>";
									break;
                                    case 6:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l002".number_format($nilailpe2,"2",",",".")."$p002</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu5".number_format($lpe_lalu3,"2",",",".")."$lalu6</td>
                                                     </tr>";
									break;
                                    case 7:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$c".number_format($sal_akhir,"2",",",".")."$d</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$c1".number_format($sal_awal,"2",",",".")."$d1</td>
                                                     </tr>";
                                } 
                       
                    }
                                        

        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("LPE UNIT $kd_skpd / $cbulan");
        $this->template->set('title', 'LPE SKPD $id / $cbulan');  
         switch ($pilih)
        {
            case 1;
				echo ("<title>LPE UNIT $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }

    }
    
	
    function ctk_lpe($cbulan="", $pilih=1){
		$id = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $id1     = $this->session->userdata('kdskpd');
        $nmskpd = $this->tukd_model->get_nama($id1,'nm_skpd','ms_skpd','kd_skpd');
        $nmskpd =strtoupper($nmskpd);
        $thn_ang_1= $thn_ang-1;   
        $cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;
		
		$sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                }
				
        $skpd = "AND kd_skpd='$id1'";
        $skpd1 = "AND b.kd_skpd='$id1'"; 

// UPDATE LPE TAHUN LALU
    		        
			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE kd_skpd<>'$id' AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet=$res2['debet'];
				 $kredit=$res2['kredit'];
                 				 
			 }
			 
		$real=$kredit-$debet+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and kd_skpd<>'$id'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and kd_skpd<>'$id'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu31 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;
						
            $sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and kd_skpd<>'$id'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

					if ($lpe_lalu1 < 0){
                    	$lalu1="("; $lpe_lalu1=$lpe_lalu1*-1; $lalu2=")";}
                    else {
                    	$lalu1=""; $lpe_lalu1; $lalu2="";}				

					if ($lpe_lalu2 < 0){
                    	$lalu3="("; $lpe_lalu2=$lpe_lalu2*-1; $lalu4=")";}
                    else {
                    	$lalu3=""; $lpe_lalu2; $lalu4="";}

					if ($lpe_lalu3 < 0){
                    	$lalu5="("; $lpe_lalu3=$lpe_lalu3*-1; $lalu6=")";}
                    else {
                    	$lalu5=""; $lpe_lalu3; $lalu6="";}
						
					if ($nilaiDR < 0){
                    	$l000="("; $nilaiDR=$nilaiDR*-1; $p000=")";}
                    else {
                    	$l000=""; $nilaiDR; $p000="";}		

					if ($nilailpe1 < 0){
                    	$l001="("; $nilailpe1=$nilailpe1*-1; $p001=")";}
                    else {
                    	$l001=""; $nilailpe1; $p001="";}

					if ($nilailpe2 < 0){
                    	$l002="("; $nilailpe2=$nilailpe2*-1; $p002=")";}
                    else {
                    	$l002=""; $nilailpe2; $p002="";}

                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3,"2",",",".");
					
					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}

					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}

					if ($real < 0)
					{
						$cx = "("; $real = $real * -1; $dx = ")";
					} else
					{
						$cx = ""; $real; $dx = "";
					}
		
		 $modtahun= $thn_ang%4;
		 
		 if ($modtahun = 0){
			$nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
				else {
			$nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
		 
		 $arraybulan=explode(".",$nilaibulan);
		
         $cRet = '';
         $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
         
            <tr>
                <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>
            </tr>
			<tr>
                <td align=\"center\"><strong>LAPORAN PERUBAHAN EKUITAS</strong></td>
            </tr>
			<tr>
                <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
            </tr>
              <tr>
                <td align=\"center\">&nbsp;</td>
            </tr>   
        </table>";        
        
        
        $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">    
					<thead>                       
                        <tr><td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td  bgcolor=\"#CCCCCC\" width=\"65%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"15%\" align=\"center\"><b>$thn_ang_1</b></td> 
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                          
                         </tr>
                     </tfoot>
                   
                     <tr><td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"65%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"15%\">&nbsp;</td>
                        </tr>";
                
                
                     $sql = "SELECT * FROM map_lpe_skpd  ORDER BY seq";
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row)
                    {
                      
                       $kd_rek   =$row->nor ;
                       $parent   =$row->parent;
                       $nama     =$row->uraian;
                       $nilai_1    =$row->thn_m1;
                       

                               switch ($kd_rek)
                                {
                                    case 1:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"> $c1".number_format($sal_awal,"2",",",".")."$d1</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$cx".number_format($real,"2",",",".")."$dx</td>
                                                     </tr>";
                                            
                                    break; 
                                    case 2:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"> $lo13".number_format($surplus_lo3,"2",",",".")."$lo14</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lo15".number_format($surplus_lo_lalu3,"2",",",".")."$lo16</td>
                                                     </tr>";
                                            
                                    break; 
                                     case 3:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                     </tr>";
                                            
                                    break; 
                                    case 4: 
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l001".number_format($nilailpe1,"2",",",".")."$p001</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu1".number_format($lpe_lalu1,"2",",",".")."$lalu2</td>
                                                     </tr>";
									break;
                                    case 5:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l000".number_format($nilaiDR,"2",",",".")."$p000</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu3".number_format($lpe_lalu3,"2",",",".")."$lalu4</td>
                                                     </tr>";
									break;
                                    case 6:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$l002".number_format($nilailpe2,"2",",",".")."$p002</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$lalu5".number_format($lpe_lalu3,"2",",",".")."$lalu6</td>
                                                     </tr>";
									break;
                                    case 7:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\">$kd_rek</td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$c".number_format($sal_akhir,"2",",",".")."$d</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">$c1".number_format($sal_awal,"2",",",".")."$d1</td>
                                                     </tr>";
                                } 
                       
                    }
                                        

        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("LPE SKPD $id / $cbulan");
        $this->template->set('title', 'LPE SKPD $id / $cbulan');  
         switch ($pilih)
        {
            case 1;
				echo ("<title>LPE SKPD $cbulan</title>");
				echo $cRet;
				break;
            case 0;
               $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }

    }
    
		
    function  tanggal_format_indonesia($tgl){
        $tanggal  = explode('-',$tgl); 
        $bulan  = $this-> getBulan($tanggal[1]);
        $tahun  =  $tanggal[0];
        return  $tanggal[2].' '.$bulan.' '.$tahun;

        }
         
        function  tanggal_indonesia($tgl){
        $tanggal  =  substr($tgl,8,2);
        $bulan  = substr($tgl,5,2);
        $tahun  =  substr($tgl,0,4);
        return  $tanggal.'-'.$bulan.'-'.$tahun;

        }
        
        function  getBulan($bln){
        switch  ($bln){
        case  1:
        return  "Januari";
        break;
        case  2:
        return  "Februari";
        break;
        case  3:
        return  "Maret";
        break;
        case  4:
        return  "April";
        break;
        case  5:
        return  "Mei";
        break;
        case  6:
        return  "Juni";
        break;
        case  7:
        return  "Juli";
        break;
        case  8:
        return  "Agustus";
        break;
        case  9:
        return  "September";
        break;
        case  10:
        return  "Oktober";
        break;
        case  11:
        return  "November";
        break;
        case  12:
        return  "Desember";
        break;
    }
    }	 
	
	function rpt_neraca_pemda_org_obyek($cbulan="", $kd_skpd="", $cetak=1){
		//$bulan	 = $_REQUEST['tgl1'];
			$id   	= $this->session->userdata('kdskpd');
			$thn_ang	= $this->session->userdata('pcThang');
			$thn_ang_1	= $thn_ang-1;
			$bulan	 = $cbulan;
			$cbulan<10 ? $xbulan = "0$cbulan" : $xbulan=$cbulan;

			$sqlsc="SELECT nm_org FROM ms_organisasi where kd_org='$kd_skpd' ";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $nmskpd  = $rowsc->nm_org;
                } 
        
			$nm_skpd	= strtoupper ($nmskpd);
			
	/*		       $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                   
                    $tgl=$rowsc->tgl_rka;
                    $tanggal = $this->tukd_model->tanggal_format_indonesia($tgl);
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                    $thn     = $rowsc->thn_ang;
                } 

			$sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE a.kd_skpd='$skpd'  ";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
*/				
	$modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
			
			$cRet='';
			
			$cRet ="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
					<tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<TR>
						<td align=\"center\"><strong>$nm_skpd</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>NERACA</strong></td>
					</TR>
					<TR>
						<td align=\"center\"><strong>PER $arraybulan[$bulan] $thn_ang DAN $thn_ang_1 </strong></td>
					</TR>
					</TABLE><br>";

					  $cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
							<td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>
                            <td colspan =\"7\"bgcolor=\"#CCCCCC\" width=\"55%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>                            
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
							<td style=\"border-top: none;\"></td>
                            <td colspan =\"7\"style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                                             
                         </tr>
                     </tfoot>
                   
                     <tr>	<td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>
							<td colspan =\"7\"style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"55%\" align=\"center\">&nbsp;</td>                            
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\" align=\"center\">&nbsp;</td>
                           
                        </tr>";
			
			
			//level 1

// Created by Henri_TB

			$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and LEFT(kd_skpd,7)='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and LEFT(kd_skpd,7)='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)<$thn_ang_1 and kd_skpd='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT SUM(a.debet) AS debet, SUM(a.kredit) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0 and LEFT(kd_skpd,7)='$kd_skpd'");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('8') and LEFT(kd_skpd,7)='$kd_skpd'";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and LEFT(kd_skpd,7)='$kd_skpd'";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and left(kd_rek5,1) in ('9') and LEFT(kd_skpd,7)='$kd_skpd'";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and LEFT(kd_skpd,7)='$kd_skpd'";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;					

			$sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='1' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and LEFT(kd_skpd,7)='$kd_skpd'";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='2' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev='3' and kd_rek5=3110101 and year(a.tgl_voucher)=$thn_ang and month(tgl_voucher)<=$bulan and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
		
        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2;

			$sqlutang_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and year(a.tgl_voucher)<=$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang_lalu  =$row->thn_m1;
					}					

			$sqlkas_lalu = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and year(a.tgl_voucher)<=$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd_lalu  =$row->thn_m1;
					}

			$sqlskpd_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and year(a.tgl_voucher)<=$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd_lalu  =$row->thn_m1;
					}
			
			$sqllcr_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and year(a.tgl_voucher)<=$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx_lalu  =$row->thn_m1;
					}
					
			$sqlast_lalu = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and year(a.tgl_voucher)<=$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast_lalu); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx_lalu  =$row->thn_m1;
					}
			
			$lcr_lalu		= $lcrx_lalu-$rk_skpd_lalu;
			$ast_lalu		= $astx_lalu-$rk_skpd_lalu;			
			$eku_lalu 		= $sal_awal + $rk_ppkd_lalu;					
			$eku_tang_lalu 	= $sal_awal + $nilaiutang_lalu + $rk_ppkd_lalu;
		
			$sqlutang = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher
			and b.kd_unit=a.kd_skpd where left(b.kd_rek5,1)=2 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlutang); 
                    foreach ($hasil->result() as $row)
                    {
                       $nilaiutang  =$row->thn_m1;
					}					
			
			$sqlkas = "select isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=3130101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlkas); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_ppkd  =$row->thn_m1;
					}
			
			$sqlskpd = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where kd_rek5=1180101 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlskpd); 
                    foreach ($hasil->result() as $row)
                    {
                       $rk_skpd  =$row->thn_m1;
					}

			$sqllcr = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,2)=11 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqllcr); 
                    foreach ($hasil->result() as $row)
                    {
                       $lcrx =$row->thn_m1;
					}
					
			$sqlast = "select isnull(sum(debet-kredit),0) thn_m1 from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
			and b.kd_unit=a.kd_skpd where left(kd_rek5,1)=1 and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and LEFT(kd_skpd,7)='$kd_skpd'";//Henri_TB
                            
                    $hasil = $this->db->query($sqlast); 
                    foreach ($hasil->result() as $row)
                    {
                       $astx  =$row->thn_m1;
					}		
			
			$lcr		= $lcrx-$rk_skpd;
			$ast		= $astx-$rk_skpd;
			$eku 		= $sal_akhir + $rk_ppkd;					
			$eku_tang 	= $sal_akhir + $nilaiutang + $rk_ppkd;					

					if ($sal_akhir < 0)
					{
						$c = "("; $sal_akhir = $sal_akhir * -1; $d = ")";
					} else
					{
						$c = ""; $sal_akhir; $d = "";
					}
					
					$sal_akhir1= number_format($sal_akhir,"2",",",".");
				
					if ($sal_awal < 0)
					{
						$c1 = "("; $sal_awal = $sal_awal * -1; $d1 = ")";
					} else
					{
						$c1 = ""; $sal_awal; $d1 = "";
					}		
					
					$sal_awal1= number_format($sal_awal,"2",",",".");
								
			
		if ($eku_lalu < 0){
                    	$min001="("; $eku_lalu=$eku_lalu*-1; $min002=")";
                        }else {
                    	$min001=""; $eku_lalu; $min002="";
                        }			
		
		$eku_lalu1=number_format($eku_lalu,"2",",",".");

		if ($eku < 0){
                    	$min003="("; $eku=$eku*-1; $min004=")";
                        }else {
                    	$min003=""; $eku; $min004="";
                        }			
		
		$eku1=number_format($eku,"2",",",".");
			
		if ($eku_tang_lalu < 0){
                    	$min005="("; $eku_tang_lalu=$eku_tang_lalu*-1; $min006=")";
                        }else {
                    	$min005=""; $eku_tang_lalu; $min006="";
                        }			
		
		$eku_tang_lalu1=number_format($eku_tang_lalu,"2",",",".");

		if ($eku_tang < 0){
                    	$min007="("; $eku_tang=$eku_tang*-1; $min008=")";
                        }else {
                    	$min007=""; $eku_tang; $min008="";
                        }			
		
		$eku_tang1=number_format($eku_tang,"2",",",".");		

		if ($rk_ppkd_lalu < 0){
                    	$min009="("; $rk_ppkd_lalu=$rk_ppkd_lalu*-1; $min010=")";
                        }else {
                    	$min009=""; $rk_ppkd_lalu; $min010="";
                        }			
		
		$rk_ppkd_lalu1=number_format($rk_ppkd_lalu,"2",",",".");

		if ($rk_ppkd < 0){
                    	$min013="("; $rk_ppkd=$rk_ppkd*-1; $min014=")";
                        }else {
                    	$min013=""; $rk_ppkd; $min014="";
                        }			

		$rk_ppkd1=number_format($rk_ppkd,"2",",",".");
		
		if ($lcr < 0){
                    	$min015="("; $lcr=$lcr*-1; $min016=")";
                        }else {
                    	$min015=""; $lcr; $min016="";
                        }			

		$lcr1=number_format($lcr,"2",",",".");
		
		if ($lcr_lalu < 0){
                    	$min017="("; $lcr_lalu=$lcr_lalu*-1; $min018=")";
                        }else {
                    	$min017=""; $lcr_lalu; $min018="";
                        }			
		
		$lcr_lalu1=number_format($lcr_lalu,"2",",",".");
		
		if ($ast < 0){
                    	$min019="("; $ast=$ast*-1; $min020=")";
                        }else {
                    	$min019=""; $ast; $min020="";
                        }			

		$ast1=number_format($ast,"2",",",".");
		
		if ($ast_lalu < 0){
                    	$min021="("; $ast_lalu=$ast_lalu*-1; $min022=")";
                        }else {
                    	$min021=""; $ast_lalu; $min022="";
                        }			
		
		$ast_lalu1=number_format($ast_lalu,"2",",",".");
		
			$queryneraca = " SELECT kode, uraian, bold, seq, isnull(normal,'') as normal, isnull(kode_1,'xxx') as kode_1, isnull(kode_2,'xxx')  as kode_2, isnull(kode_3,'xxx') as kode_3, 
										isnull(kode_4,'xxx') as kode_4, isnull(kode_5,'xxx') as kode_5, isnull(kode_6,'xxx') as kode_6, isnull(kode_7,'xxx') as kode_7, 
										isnull(kode_8,'xxx') as kode_8, isnull(kode_9,'xxx') as kode_9, isnull(kode_10,'xxx') as kode_10, isnull(kode_11,'xxx') as kode_11,
										isnull(kode_12,'xxx') as kode_12, isnull(kode_13,'xxx') as kode_13, isnull(kode_14,'xxx') as kode_14, isnull(kode_15,'xxx') as kode_15 
										FROM map_neraca_obyek ORDER BY seq ";  
		
			$query10 = $this->db->query($queryneraca);
			
			$no     = 0;
			
			foreach($query10->result_array() as $res){
				$uraian=$res['uraian'];
				$normal=$res['normal'];
				$bold=$res['bold'];
				$kode_1=trim($res['kode_1']);
				$kode_2=trim($res['kode_2']);
				$kode_3=trim($res['kode_3']);
				$kode_4=trim($res['kode_4']);
				$kode_5=trim($res['kode_5']);
				$kode_6=trim($res['kode_6']);
				$kode_7=trim($res['kode_7']);
				$kode_8=trim($res['kode_8']);
				$kode_9=trim($res['kode_9']);
				$kode_10=trim($res['kode_10']);
				$kode_11=trim($res['kode_11']);
				$kode_12=trim($res['kode_12']);
				$kode_13=trim($res['kode_13']);
				$kode_14=trim($res['kode_14']);
				$kode_15=trim($res['kode_15']);
											
				
			$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and LEFT(kd_skpd,7)='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $r){
					$debet=$r['debet'];
					$kredit=$r['kredit'];
				 }
				
				if ($debet=='') $debet=0;
				if ($kredit=='') $kredit=0;

				if ($normal==1){
					$nl=$debet-$kredit;
				}else{
					$nl=$kredit-$debet;				
				}
				if ($nl=='') $nl=0;
	
				// Jurnal Tahun lalu
				$q = $this->db->query(" SELECT SUM(b.debet) AS debet,SUM(b.kredit) AS kredit from trhju_pkd a inner join trdju_pkd b on a.no_voucher=b.no_voucher 
									and b.kd_unit=a.kd_skpd where year(tgl_voucher)<=$thn_ang_1 and LEFT(kd_skpd,7)='$kd_skpd' and
										(kd_rek5 like '$kode_1%' or kd_rek5 like '$kode_2%'  or 
										kd_rek5 like '$kode_3%' or kd_rek5 like '$kode_4%'  or 
										kd_rek5 like '$kode_5%' or kd_rek5 like '$kode_6%'  or 
										kd_rek5 like '$kode_7%' or kd_rek5 like '$kode_8%'  or 
										kd_rek5 like '$kode_9%' or kd_rek5 like '$kode_10%' or 
										kd_rek5 like '$kode_11%' or kd_rek5 like '$kode_12%' or 
										kd_rek5 like '$kode_13%' or kd_rek5 like '$kode_14%' or 
										kd_rek5 like '$kode_15%') ");  

				 foreach($q->result_array() as $rx){
					$debet_lalu=$rx['debet'];
					$kredit_lalu=$rx['kredit'];
				 }
				
				if ($debet_lalu=='') $debet_lalu=0;
				if ($kredit_lalu=='') $kredit_lalu=0;

				if ($normal==1){
					$sblm=$debet_lalu-$kredit_lalu;
				}else{
					$sblm=$kredit_lalu-$debet_lalu;				
				}
				if ($sblm=='') $sblm=0;

				if ($nl < 0){
                    	$nl001="("; $nl=$nl*-1; $ln001=")";
                        }else {
                    	$nl001=""; $ln001="";
                        }
				if ($sblm < 0){
                    	$sblm001="("; $sblm=$sblm*-1; $mlbs001=")";
                        }else {
                    	$sblm001=""; $mlbs001="";
                        }
        $nl1= number_format($nl,"2",",",".");
        $sblm1= number_format($sblm,"2",",",".");
				
				$no       = $no + 1;

				switch ($res['bold']) {
                    case 1:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"7\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"6\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
									 <td colspan =\"5\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
                        break;	
					case 4:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 14:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 34:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 5:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 15:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 6:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 16:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 7:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;
					case 17:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nl001$nl1$ln001</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$sblm001$sblm1$mlbs001</td>
                                 </tr>";
                        break;	
					case 10:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                 </tr>";
					    break;
					case 11:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\"style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c$sal_akhir1$d</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$c1$sal_awal1$d1</td>
                                 </tr>";
                        break;		
					case 12:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min003$eku1$min004</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min001$eku_lalu1$min002</td>
                                 </tr>";
                        break;
					case 13:
                         $cRet    .= "<tr><td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"55%\">$uraian</td>
									 <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min007$eku_tang1$min008</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$min005$eku_tang_lalu1$min006</td>
                                 </tr>";
                        break;
					}
			}

			
        $cRet .='</table>';
                 
         $data['prev']= $cRet;  
         $data['sikap'] = 'preview';
         $judul = ("NERACA KONSOL OBYEK SKPD $cbulan");
        $this->template->set('title', 'NERACA KONSOL OBYEK SKPD $cbulan');  
         switch ($cetak)
        {
            case 0;
				$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
				echo $cRet;
				break;
            case 1;
				echo "<title>NERACA KONSOL OBYEK UNIT $cbulan</title>";
				echo $cRet;
               break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
			}	
	
	
	function list_org() {
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_org,nm_org FROM ms_organisasi where upper(kd_org) like upper('%$lccr%') or upper(nm_org) like upper('%$lccr%') order by kd_org ";
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
           
            $result[] = array(
                        'id' => $ii,        
                        'kd_org' => $resulte['kd_org'],  
                        'nm_org' => $resulte['nm_org']
                        );
                        $ii++;
        }
           
        echo json_encode($result);
    	    $query1->free_result();
	}



function skpd_akt() {
		$id  = $this->session->userdata('pcUser'); 
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_skpd,nm_skpd FROM ms_skpd where kd_skpd IN (SELECT kd_skpd FROM user_akt WHERE user_id='$id')AND (upper(kd_skpd) like upper('%$lccr%') or upper(nm_skpd) like upper('%$lccr%')) order by kd_skpd ";
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
           
            $result[] = array(
                        'id' => $ii,        
                        'kd_skpd' => $resulte['kd_skpd'],  
                        'nm_skpd' => $resulte['nm_skpd']
                        );
                        $ii++;
        }
           
        echo json_encode($result);
    	    $query1->free_result();
	}
	
	
function reg_spj()
    {
        $data['page_title']= 'Register SPJ Pengeluaran';
        $this->template->set('title', 'Register SPJ Pengeluaran');   
        $this->template->load('template','akuntansi/reg_spj',$data) ; 
    }

function load_reg_spj($bulan=''){
	$id  = $this->session->userdata('pcUser'); 
        $result = array();
        $row = array();
      	$page = isset($_POST['page']) ? intval($_POST['page']) : 1;
	    $rows = isset($_POST['rows']) ? intval($_POST['rows']) : 10;
	    $offset = ($page-1)*$rows;
        $kriteria = '';
        $kriteria = $this->input->post('cari');
        $where ='';
        if ($kriteria <> ''){                               
            $where="AND (upper(kd_skpd) like upper('%$kriteria%'))";            
        }
		
        $sql = "SELECT count(*) as tot from trhsah_spj WHERE bulan='$bulan' $where" ;
        $query1 = $this->db->query($sql);
        $total = $query1->row();
        
        //$sql = "SELECT * from trhspj_ppkd WHERE bulan='$bulan' AND kd_skpd IN (SELECT kd_skpd FROM user_akt WHERE user_id='$id') $where order by kd_skpd ";
        $sql = "SELECT * from trhsah_spj WHERE bulan='$bulan' $where order by kd_skpd ";        
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
            $row[] = array(
                        'id' => $ii,
                        'kd_skpd' => $resulte['kd_skpd'],        
                        'bulan' => $resulte['bulan'],                                
                        'tgl_terima' => $resulte['tgl_terima'],                                
                        'gj' => $resulte['gj'],                        
                        'up' => $resulte['up'],    
                        'brg' => $resulte['brg'],    
                        'bku' => $resulte['bku'],    
                        'spj' => $resulte['spj'],    
                        'bank' => $resulte['bank'],    
                        'tunai' => $resulte['tunai'],    
                        'pajak' => $resulte['pajak'],    
                        'cp' => $resulte['cp'],    
                        
                        'real_up' =>  number_format($resulte['real_up'], "2", ".", ","),
						'real_gj' =>  number_format($resulte['real_gj'], "2", ".", ","),
                        'real_brg' => number_format($resulte['real_brg'], "2", ".", ","),
                        'real_bku' => number_format($resulte['real_bku'], "2", ".", ","),
                        'real_spj' => number_format($resulte['real_spj'], "2", ".", ","),
                        'real_bank' => number_format($resulte['real_bank'], "2", ".", ","),
                        'real_tunai' => number_format($resulte['real_tunai'], "2", ".", ","),
                        'real_pajak' => number_format($resulte['real_pajak'], "2", ".", ","),
                        'real_cp' => number_format($resulte['real_cp'], "2", ".", ","),
						'ket' => $resulte['keterangan'],
                        'total' => $resulte['gj']+$resulte['up']+$resulte['brg']+$resulte['bku']+$resulte['spj']+$resulte['bank']+$resulte['tunai']+$resulte['pajak']+$resulte['cp']
						
                        );
                        $ii++;
        }
           
        $result["total"] = $total->tot;
        $result["rows"] = $row; 
        echo json_encode($result);	   
	}

function reload_reg_spj(){
	$id  = $this->session->userdata('pcUser'); 
    $tahun = $this->session->userdata('pcThang');
    $this->load->model('tukd_model');
    
        $result = array();
        $row = array();
      	$page = isset($_POST['page']) ? intval($_POST['page']) : 1;
	    $rows = isset($_POST['rows']) ? intval($_POST['rows']) : 10;
	    $offset = ($page-1)*$rows;
        $initBulan = '';
        $initBulan = $this->input->post('init_bln');        
		
        $sql = "SELECT count(*) as tot from ms_skpd_sah where right(kd_skpd,2)='00'" ;
        $query1 = $this->db->query($sql);
        $total = $query1->row();
        
        //$sql = "SELECT * from trhspj_ppkd WHERE bulan='$bulan' AND kd_skpd IN (SELECT kd_skpd FROM user_akt WHERE user_id='$id') $where order by kd_skpd ";
        $sql = "spj_reg_sah '$initBulan'";        
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
            
            $kode             = $resulte['kd_skpd'];
			$real_up_ini	  =	$resulte['up_ini'];
			$real_up_ll		  =	$resulte['up_lalu'];
			$real_gaji_ini	  =	$resulte['gaji_ini'];
			$real_gaji_ll	  =	$resulte['gaji_lalu'];
			$real_brg_js_ini  =	$resulte['brg_ini'];
			$real_brg_js_ll	  =	$resulte['brg_lalu'];    
            $real_saldobku    = $this->akuntansi_model->get_saldobku($kode,$initBulan,$tahun);  
            $real_saldospj    = $this->akuntansi_model->get_saldospj($kode,$initBulan);       
            $real_saldobank   = $this->akuntansi_model->get_saldobank($kode,$initBulan);      
            $real_saldotunai  = $this->akuntansi_model->get_saldotunai($kode,$initBulan);                     
            $real_saldopajak  = $this->akuntansi_model->get_saldopajak($kode,$initBulan);
            $real_saldocp     = $this->akuntansi_model->get_saldocp($kode,$initBulan);
            
            $row[] = array(
                        'id' => $ii,
                        'kd_skpd' => $kode,        
                        'tgl_terima' => '',  
                        'bulan' => $initBulan,
                        'real_up' => number_format($real_up_ini, "2", ".", ","),
						'real_gj' => number_format($real_gaji_ini, "2", ".", ","),
                        'real_brg' => number_format($real_brg_js_ini, "2", ".", ","),
                        'real_bku' => number_format($real_saldobku, "2", ".", ","),	
                        'real_spj' => number_format($real_saldospj, "2", ".", ","),		
                        'real_bank' => number_format($real_saldobank, "2", ".", ","),				
                        'real_tunai' => number_format($real_saldotunai, "2", ".", ","),				
                        'real_pajak' => number_format($real_saldopajak, "2", ".", ","),				
                        'real_cp' => number_format($real_saldocp, "2", ".", ","),				
                        'gj' => '',
                        'up' => '',
						'brg' => '',						
                        'spj' => '',
                        'bku' => '',
						'bank' => '',
						'tunai' => '',						
                        'pajak' => '',
						'cp' => '',
						'ket' => '',
						);
                        $ii++;
                    
        }
           
        $result["total"] = $total->tot;
        $result["rows"] = $row; 
        echo json_encode($result);	   
	}
	

	 function simpan_pengesahan(){
        $kdskpd = $this->input->post('kdskpd');
        $tgl_terima = $this->input->post('tgl_terima');
        $real_gj = $this->input->post('real_gj');
        $real_up = $this->input->post('real_up');
        $real_brg = $this->input->post('real_brg');
        $real_bku = $this->input->post('real_bku');
        $real_spj = $this->input->post('real_spj');
        $real_bank = $this->input->post('real_bank');
        $real_tunai = $this->input->post('real_tunai');
        $real_pajak = $this->input->post('real_pajak');
        $real_cp = $this->input->post('real_cp');
                
        $gj = $this->input->post('gj');
        $up = $this->input->post('up');
        $brg = $this->input->post('brg');
        $bku = $this->input->post('bku');		
        $spj = $this->input->post('spj');
        $bank = $this->input->post('bank');
        $tunai = $this->input->post('tunai');
		$pajak = $this->input->post('pajak');
        $cp = $this->input->post('cp');
        $ket = $this->input->post('ket');
        $cek = $this->input->post('cek');
        $bulan = $this->input->post('bulan');
		$usernm = $this->session->userdata('pcNama');
        $update = date('Y-m-d');
        
        $query_hapus = $this->db->query("delete trhsah_spj where kd_skpd='$kdskpd' and bulan='$bulan'");
        
        $query_tambah = "insert into trhsah_spj values ('$kdskpd','$bulan','$tgl_terima','$gj','$real_gj','$up','$real_up','$brg','$real_brg','$bku','$real_bku','$spj','$real_spj','$bank','$real_bank','$tunai','$real_tunai','$pajak','$real_pajak','$cp','$real_cp','$ket','$usernm','$update')";        
        $asg = $this->db->query($query_tambah);
        if($asg){
            echo '1';
        }else{
            echo '0';
        }
        
     }	 

	function ctk_register_spj($bulan='',$ctk=''){
		$cRet ="";	
        
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
                 <tr>
                    <td colspan=\"5\" style=\"border-top:none;border-right:none;border-left:none;font-size:14px\" align=\"center\">
                    <b>PEMERINTAH KABUPATEN SANGGAU</b> <br>
                    <b>REGISTER PENGESAHAN SPJ</b><BR>
                    <b>BULAN ".strtoupper($this-> getBulan($bulan))."</b>
                    <BR>&nbsp;                                        
                    </td>           
                </tr>
				</table>
				";    
			
		$cRet .="<table style=\"border-collapse:collapse; font-size:12px\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"2\">
            <thead>
			<tr>
                <td align=\"center\" bgcolor=\"#CCCCCC\" width=\"15%\"  >Uraian</td>
                <td align=\"center\" bgcolor=\"#CCCCCC\" width=\"3%\"  >Tanggal</td>
                <td align=\"center\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"8%\"  >Gaji</td>
                <td align=\"center\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"8%\"  >UP/GU/TU</td>
                <td align=\"center\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"8%\"  >LS</td>
                <td align=\"center\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"8%\"  >BKU</td>
                <td align=\"center\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"8%\"  >SPJ</td>
                <td align=\"center\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"8%\"  >BP. Bank</td>                
                <td align=\"center\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"8%\"  >BP. Tunai</td>
                <td align=\"center\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"8%\"  >BP. Pajak</td>
                <td align=\"center\" colspan=\"2\" bgcolor=\"#CCCCCC\" width=\"8%\"  >CP</td>
                <td align=\"center\" bgcolor=\"#CCCCCC\" width=\"10%\"  >Keterangan</td>
            </tr>			
			</thead>
           ";
         
        
		$csql = "SELECT a.nm_skpd, b.kd_skpd
				,ISNULL(b.tgl_terima,'') tgl_terima
                ,ISNULL(b.real_up,0) real_up
				,ISNULL(b.real_gj,0) real_gj
				,ISNULL(b.real_brg,0) real_brg                
				,ISNULL(b.real_bku,0) real_bku
				,ISNULL(b.real_spj,0) real_spj
				,ISNULL(b.real_bank,0) real_bank
				,ISNULL(b.real_tunai,0) real_tunai
				,ISNULL(b.real_pajak,0) real_pajak
				,ISNULL(b.real_cp,0) real_cp
                ,b.gj,b.up,b.brg,b.bku,b.spj,b.bank,b.tunai,b.pajak,b.cp
				,b.keterangan
				 FROM ms_skpd a 
				LEFT JOIN trhsah_spj b ON a.kd_skpd=b.kd_skpd
				WHERE bulan='$bulan' ORDER BY kd_skpd
				";
		$no=0;
         $query = $this->db->query($csql);  
         foreach($query->result_array() as $res){
			 $no=$no+1;
			 $kd_skpd = $res['kd_skpd'];			 
             $nm_skpd = $res['nm_skpd'];
             $tgl_terima = $res['tgl_terima'];
			 $real_gj = $res['real_gj'];             			 
			 $real_up = $res['real_up'];
			 $real_brg = $res['real_brg'];
			 $real_bku = $res['real_bku'];
			 $real_spj = $res['real_spj'];
			 $real_bank = $res['real_bank'];
			 $real_tunai = $res['real_tunai'];
			 $real_pajak = $res['real_pajak'];
			 $real_cp = $res['real_cp'];			 
             $ket = $res['keterangan'];
             
			$tanggal = empty($tgl_terima) || $tgl_terima == '1900-01-01' ? '-' :$this->tukd_model->tanggal_ind($tgl_terima);
			
            $gj =$res['gj']=='1' ? '&#10003;' : '';
			$up =$res['up']=='1' ? '&#10003;' : '';
			$brg =$res['brg']=='1' ? '&#10003;' : '';			
            $bku =$res['bku']=='1' ? '&#10003;' : '';
			$spj =$res['spj']=='1' ? '&#10003;' : '';			
            $bank =$res['bank']=='1' ? '&#10003;' : '';
			$tunai =$res['tunai']=='1' ? '&#10003;' : '';			
            $pajak =$res['pajak']=='1' ? '&#10003;' : '';
			$cp =$res['cp']=='1' ? '&#10003;' : '';
			
				   $cRet .="<tr>
							<td>$nm_skpd</td>
							<td align='center' >$tanggal</td>
                            <td align='left' width=\"1%\">$gj</td>                            							
                            <td align='right' >".number_format($real_gj,"2",",",".")."</td>
							<td align='left' width=\"1%\">$up</td>
                            <td align='right' >".number_format($real_up,"2",",",".")."</td>
							<td align='left' width=\"1%\">$brg</td>
                            <td align='right' >".number_format($real_brg,"2",",",".")."</td>
                            <td align='left' width=\"1%\">$bku</td>
							<td align='right' >".number_format($real_bku,"2",",",".")."</td>
                            <td align='left' width=\"1%\">$spj</td>
                            <td align='right' >".number_format($real_spj,"2",",",".")."</td>
                            <td align='left' width=\"1%\">$bank</td>
                            <td align='right' >".number_format($real_bank,"2",",",".")."</td>                            
                            <td align='left' width=\"1%\">$tunai</td>
                            <td align='right' >".number_format($real_tunai,"2",",",".")."</td>
                            <td align='left' width=\"1%\">$pajak</td>
                            <td align='right' >".number_format($real_pajak,"2",",",".")."</td>
                            <td align='left' width=\"1%\">$cp</td>
                            <td align='right' >".number_format($real_cp,"2",",",".")."</td>
                            <td>$ket</td>
						</tr>";
            }
            
         $cRet .=" 
         </table>
         ";

			$data['prev']=$cRet; //'JURNAL UMUM';
			 $judul='Reg_SPJ';
			switch ($ctk){
				case 1;
				echo ("<title>$judul</title>");
				echo $cRet;
				break;
				case 2;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'L');
				break;
				case 3;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
	
	} 
    
	 
     function pilih_ttd_kd() {
        $lccr = $this->input->post('q');
        $sql = "SELECT nip,nama,jabatan,kd_skpd FROM ms_ttd where kd_skpd ='4.02.01.00' and kode='PA' ";
        $query1 = $this->db->query($sql);  
        $result = array();
        $ii = 0;
        foreach($query1->result_array() as $resulte)
        { 
           
            $result[] = array(
                        'id' => $ii,        
                        'nip' => $resulte['nip'],  
                        'nama' => $resulte['nama'],  
                        'jabatan' => $resulte['jabatan'],
                        'kd_skpd' => $resulte['kd_skpd']
                        );
                        $ii++;
        }
           
        echo json_encode($result);
     $query1->free_result();	   
	}	

    
        function cetak_lra_pemda2_gab()
        {
          $data['page_title'] = 'LRA GABUNGAN';
         $this->template->set('title', 'LRA GABUNGAN');
          $this->template->load('template', 'akuntansi/cetak_lra_konsol', $data);
        }

        function cetak_lra_pemda3_gab()
        {
          $data['page_title'] = 'LRA GABUNGAN 13';
         $this->template->set('title', 'LRA GABUNGAN 13');
          $this->template->load('template', 'akuntansi/cetak_lra_konsol2', $data);
        }		

        function cetak_neraca_pemda_gab()
        {
           $data['page_title'] = 'NERACA GABUNGAN';
           $this->template->set('title', 'NERACA GABUNGAN');
         $this->template->load('template', 'akuntansi/cetak_neraca_konsol2', $data);
        }

        function cetak_lo_pemda_gab()
        {
           $data['page_title'] = 'LO GABUNGAN';
           $this->template->set('title', 'LO GABUNGAN');
         $this->template->load('template', 'akuntansi/cetak_lo_konsol', $data);
        }
        
        function cetak_lpe_pemda_gab()
        {
          $data['page_title'] = 'LPE GABUNGAN';
         $this->template->set('title', 'LPE GABUNGAN');
          $this->template->load('template', 'akuntansi/cetak_lpe_konsol', $data);
        }
        
        
    function skpd_new()
    {
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_skpd,nm_skpd FROM ms_skpd where right(kd_skpd,2)='00'";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {

            $result[] = array('id' => $ii, 'kd_skpd' => $resulte['kd_skpd'], 'nm_skpd' => $resulte['nm_skpd'], );
            $ii++;
        }

        echo json_encode($result);
    }


     function skpd_kolom($kd_skpd="")
        {
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_skpd,kd_skpd_field FROM ms_konsol where kd_skpd='$kd_skpd'";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {

            $result[] = array('id' => $ii, 
            'kd_skpd' => $resulte['kd_skpd'], 
            'kd_skpd_field' => $resulte['kd_skpd_field'] );
            $ii++;
        }

        echo json_encode($result);
    }

        
     function posting_lra_kolom(){
        
        $skpd 	  = $this->input->post('skpd');
        $kolom 	  = $this->input->post('kolom');
        $vbulan      = $this->input->post('bulan');
        $sql = "    		--4 PENDAPATAN
		update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,1)='4' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '1'
		
		--41 PENDAPATAN ASLI DAERAH
		update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2)='41' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '2'

        --411 Pendapatan Pajak Daerah
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3)='411' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '3'
        
        --412 Pendapatan Retribusi Daerah
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3)='412' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '4'
        
        --413 Pendapatan Hasil Pengelolaan Kekayaan Daerah yang Dipisahkan
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3)='413' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '5'
        
        --414 Lain-lain PAD yang Sah
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3)='414' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '6'
        
        --42 PENDAPATAN TRANSFER
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2)='42' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '8'
        
        --421 TRANSFER PEMERINTAH PUSAT - DANA PERIMBANGAN
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3)='421' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '9'

        --42101 Dana Bagi Hasil Pajak
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='42101' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '10'
        
        --42102 Dana Bagi Hasil Sumber Daya Alam
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='42102' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '11'
        
        --42103 Dana Alokasi Umum
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='42103' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '12'
        
        --42104 Dana Alokasi Khusus
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='42104' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '13'
        
        --422 TRANSFER PEMERINTAH PUSAT - LAINNYA
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5) in ('42201','42203') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '15'
        
        --'43402' Dana Otonomi Khusus
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='42201' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '16'
        
        --'43401' Dana Penyesuaian
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='42203' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '17'
        
        --423 TRANSFER PEMERINTAH PROVINSI
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5) in ('42301','42302') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '19'
        
        --'43301' Pendapatan Bagi Hasil Pajak
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='42301' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '20'
        
        --'43302' Pendapatan Bagi Hasil Lainnya
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='42302' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '21'
        
        --'435' BANTUAN KEUANGAN
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3)='424' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '23'
        
        --'42401' Bantuan Keuangan dari Pemerintah Daerah Provinsi Lainnya
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='42401' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '24'      
        
        --431 LAIN-LAIN PENDAPATAN YANG SAH
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3)='433' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '26'
 
        --431 Pendapatan Hibah
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3)='433' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '27' 
        
        --433 Pendapatan Lainnya
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,5)='43301' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '28'
         
        --'4' JUMLAH PENDAPATAN 
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,1)='4' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '29'
            
        
        --'5' BELANJA
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,1) in ('5') 
        and left(b.kd_skpd,7) = left('$skpd',7) and month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '31'       
 
        --51 BELANJA OPERASI
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2) in ('51') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '32' 
        
        --511 Belanja Pegawai
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('511') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '33'
        
        --512 Belanja Barang
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('512') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '34'
        
        --513 Belanja Bunga
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('513') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '35'
        
        --514 Belanja Subsidi
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('514') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '36'
        
        --515 Belanja Hibah
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('515') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '37'
        
        --516 Belanja Bantuan Sosial
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('516') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '38'
        
        --517 Belanja Bantuan Keuangan
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('517') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '39'
        
        --52 BELANJA MODAL
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2) in ('52') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '41'
        
        --521 Belanja Tanah
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('521') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '42'

        --522 Belanja Peralatan dan Mesin
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('522') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '43'

        --523 Belanja Gedung dan Bangunan
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('523') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '44'

        --524 Belanja Jalan, Irigasi dan Jaringan
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('524') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '45'

        --525 Belanja Aset Tetap Lainnya
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('525') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '46'

        --526 Belanja Aset Lainnya
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('526') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '47'
    
        --53 BELANJA TAK TERDUGA
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2) in ('53') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '49'        
 
         --531 Belanja Tak Terduga
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('531') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '50' 
        
        --5 JUMLAH BELANJA
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,1) in ('5') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '51'

        --6 TRANSFER
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,1) in ('6') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '53'
 
        --623 Bantuan Keuangan Lainnya
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('623') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '54' 

        --6 Jumlah Transfer
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,1) in ('6') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '55' 
 
         --6 Jumlah Belanja & Transfer
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,1) in ('5','6') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '56' 
        
        --'58' SURPLUS/DEFISIT 
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as real_spj from (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as kredit,0 as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,1)='4' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        UNION
        select 0 as kredit,isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,1) in ('5','6') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'
        ) v 
        ) i
        where map_lra_konsol_$vbulan.nor = '58'
        
        --PEMBIAYAAN
        --'71'
        update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2) in ('71') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '61'        
        
        --'711'
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('711') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '62'
        
        --'712'
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('712') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '63'
        
        --'715'
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('715') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '64'
        
        --'71'
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2) in ('71') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '65'
        
        --72 PENGELUARAN PEMBIAYAAN
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2) in ('72') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '67'
 
        --721 Pembentukan Dana Cadangan 
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('721') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '68' 
        
        --722 Penyertaan Modal Pemerintah Daerah 
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('722') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '69'
        
        --723 Pembayaran Pokok Pinjaman
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('723') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '70'
        
        --728 Pembayaram Utang Akibat Kejadian Tertentu
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,3) in ('728') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '71'
        
        --72 JUMLAH PENGELUARAN PEMBIAYAAN
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2) in ('72') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol_$vbulan.nor = '72'
        
        --'77' NETTO
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as real_spj from (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as kredit,0 as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2)='71' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        UNION
        select 0 as kredit,isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.kd_rek5,2)='72' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'
        ) v 
        ) i
        where map_lra_konsol_$vbulan.nor = '73'
        
        --'79' SILPA
            update map_lra_konsol_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        SELECT isnull(sum(v.surplus),0)+isnull(sum(v.netto),0) as real_spj from( 
        SELECT isnull(sum($kolom),0) as surplus,0 as netto  FROM [dbo].[map_lra_konsol_$vbulan] where nor='58'
        UNION
        SELECT 0 as surplus,isnull(sum($kolom),0) as netto  FROM [dbo].[map_lra_konsol_$vbulan] where nor='73'
        )v
        ) i
        where map_lra_konsol_$vbulan.nor = '75'";
        $asg = $this->db->query($sql);
		echo '1';	
	} 


    function cetak_lra_gab_pemkot_real($bulanctk='',$cetak='',$ttd='',$tanggal_ttd='',$ttdperda=''){
	        $ttd1 = str_replace('n',' ',$ttdperda);
			$thi=$this->session->userdata('pcThang');
			$thz=$thi-1;
            
     $cRet='';
        
	 $modtahun= $thi%4;
	 
	/* if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 */
      if ($modtahun = 0){
        $nilaibulan=".JANUARI. FEBRUARI. MARET. APRIL. MEI. JUNI. JULI. AGUSTUS. SEPTEMBER. OKTOBER. NOVEMBER. DESEMBER";}
            else {
        $nilaibulan=".JANUARI. FEBRUARI. MARET. APRIL. MEI. JUNI. JULI. AGUSTUS. SEPTEMBER. OKTOBER. NOVEMBER. DESEMBER";}
	
	 $arraybulan=explode(".",$nilaibulan);
            

		
	/*	 $cRet ='<TABLE style="border-collapse:collapse; font-size:12px" font-family: Bookman Old Style; width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="left" >LAMPIRAN II &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/> PERATURAN DAERAH KABUPATEN SANGGAU <br/> 
                        NOMOR &nbsp;&nbsp;&nbsp;&nbsp; TAHUN 2017 <br/>TENTANG PERTANGGUNGJAWABAN PELAKSANAAN <br/> ANGGARAN PENDAPATAN DAN BELANJA DAERAH<br/>KABUPATEN SANGGAU TAHUN ANGGARAN 2017
                        </TD>
					</TR>
                    <TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="center" ><b>&nbsp;</TD>
					</TR>
					</TABLE><br/>';*/
	$cRet .="<TABLE style=\"border-collapse:collapse;font-size:12px;font-family:Bookman Old Style\" width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"1\" align=\"center\">
					<tr>
					<td rowspan=\"3\" align=\"center\" style=\"border-right:hidden\">
                        <img src=\"".base_url()."/image/logoHP.png\"  width=\"75\" height=\"100\" />
                        </td>
					<td align=\"center\" style=\"border-left:hidden;border-bottom:hidden\"><strong>PEMERINTAH KABUPATEN SANGGAU </strong></td></tr>
                    <tr><td align=\"center\" style=\"border-left:hidden;border-bottom:hidden;border-top:hidden\"><b>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA  </b></tr>
					<tr><td align=\"center\" style=\"border-left:hidden;border-top:hidden\" ><b>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$bulanctk] $thi</b></tr>
					</TABLE>";
			
		$cRet .="<table style=\"border-collapse:collapse;font-size:12px;font-family:Bookman Old Style\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"3\" cellpadding=\"3\">
                <thead>
				<tr>
                    <td rowspan=\"2\" width=\"7%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>KD REK</b></td>
                    <td rowspan=\"2\" width=\"32%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>URAIAN</b></td>
                    <td colspan=\"2\" width=\"37%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>JUMLAH (Rp.)</b></td>
                    <td colspan=\"2\" width=\"23%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>BERTAMBAH/KURANG</b></td>
				</tr>
				<tr>
					<td width=\"19%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>ANGGARAN</b></td>
					<td width=\"18%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>REALISASI</b></td>
					<td width=\"18%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>(Rp)</b></td>
					<td width=\"5%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>%</b></td>
					</tr>
					<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >6</td> 
				</tr>
				</thead>";
				
				
			$idx=0;			
			$query = $this->db->query(" SELECT b.kode_rek,b.nor,b.uraian,b.kode_1,b.kode1,b.kode_2,b.kode_3,b.thn_m1,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_07_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                    FROM map_lra_konsol_$bulanctk b order by cast(seq as int)");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
				$kode_2=$res->kode_2;
				$kode_1=$res->kode_1;
				$kode=$res->kode1;	
				$kode_re=$res->kode_rek;	
    			$initdb=$res->thn_m1;
				$bold=$res->bold;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;														
				
                $total_pemkot=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl20+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
				//kode1				
				$kode_1=trim($res->kode_1);				
				$kode_3=trim($res->kode_3);				
				
                if($kode_1=="") $kode_1="'xxx'";		
                if($kode_3=="") $kode_3="'xxx'";		
                
                if($initdb=="4" or $initdb=="61"){
                    $normal = "debet-kredit";
                }else{
                    $normal = "kredit-debet";
                }                		
				
                $cek_nil = $this->db->query("select isnull(sum(nilai),0) as nilai_ang from trdrka where left(kd_rek5,$kode) in ($kode_1)")->row();
                $nilai_ang = $cek_nil->nilai_ang;                 					
                $per1     = ($nilai_ang!=0)?($total_pemkot / $nilai_ang ) * 100:0; 
				$sel = $nilai_ang-$total_pemkot;
					if(($nilai_ang==0) || ($nilai_ang=='')){
						$per1=0;
					} else{
					$per1 = $total_pemkot/$nilai_ang *100;
					}
				
				
               	if($bold=='1'){
				$cRet .='<TR>
							<TD width="7" align="left" ><b>'.$kode_re.'</b></TD>
							<TD width="32%" align="left" ><b>'.$uraian.'</b></TD>
							<TD width="19%" align="right" ><b>'.number_format($nilai_ang, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($sel, "2", ",", ".").'</b></TD>
							<TD width="5%" align="right" ><b>'.number_format($per1,"2",",",".").'</b></TD>	            
						</TR>';
				}else if($bold=='2'){ 
				$cRet .='<TR>
							<TD width="7" align="left" ><b>'.$kode_re.'</b></TD>
							<TD width="32%" align="left" ><b>&nbsp;&nbsp;'.$uraian.'</b></TD>
							<TD width="19%" align="right" ><b>'.number_format($nilai_ang, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($sel, "2", ",", ".").'</b></TD>
							<TD width="5%" align="right" ><b>'.number_format($per1,"2",",",".").'</b></TD>		
							</TR>';
				}else if($bold=='3'){ 
				$cRet .='<TR>
							<TD width="7" align="left" ><b>'.$kode_re.'</b></TD>
							<TD width="32%" align="left" ><b>&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</b></TD>
							<TD width="19%" align="right" ><b>'.number_format($nilai_ang, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($sel, "2", ",", ".").'</b></TD>
							<TD width="5%" align="right" ><b>'.number_format($per1,"2",",",".").'</b></TD>		
							</TR>';	
				}else if($bold=='4'){ 
				$cRet .='<TR>
							<TD width="7" align="left" >'.$kode_re.'</TD>
							<TD width="32%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>
							<TD width="19%" align="right" >'.number_format($nilai_ang, "2", ",", ".").'</TD>
							<TD width="18%" align="right" >'.number_format($total_pemkot, "2", ",", ".").'</TD>
							<TD width="18%" align="right" >'.number_format($sel, "2", ",", ".").'</TD>
							<TD width="5%" align="right" >'.number_format($per1,"2",",",".").'</TD>		
							</TR>';							
				}else if($bold=='5'){ 
				$cRet .='<TR>
							<TD width="7" align="left" >'.$kode_re.'</TD>
							<TD width="32%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>
							<TD width="19%" align="right" >'.number_format($nilai_ang, "2", ",", ".").'</TD>
							<TD width="18%" align="right" >'.number_format($total_pemkot, "2", ",", ".").'</TD>
							<TD width="18%" align="right" >'.number_format($sel, "2", ",", ".").'</TD>
							<TD width="5%" align="right" >'.number_format($per1,"2",",",".").'</TD>		
							</TR>';
				}else if($bold=='8'){ 
				$cRet .='<TR>
							<TD width="7" align="left" ><b>'.$kode_re.'</b></TD>
							<TD width="32%" align="left" ><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</b></TD>
							<TD width="19%" align="right" ><b>'.number_format($nilai_ang, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($sel, "2", ",", ".").'</b></TD>
							<TD width="5%" align="right" ><b>'.number_format($per1,"2",",",".").'</b></TD>		
							</TR>';			
				}else if($bold=='6'){ 
				$cRet .='<TR>
							<TD width="7" align="left" ><b>'.$kode_re.'</b></TD>
							<TD width="32%" align="left" ><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</b></TD>
							<TD width="19%" align="right" ><b>'.number_format($nilai_ang, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($sel, "2", ",", ".").'</b></TD>
							<TD width="5%" align="right" ><b>'.number_format($per1,"2",",",".").'</b></TD>		
							</TR>';									
				}else if($bold=='9'){ 				
					
                    switch($no){
						case 58:
                        
                            $cek_nil = $this->db->query("select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as nilai_ang from (
                            select isnull(sum(a.nilai),0) as kredit,0 as debet from trdrka a                              
                            left join ms_rek5 b on b.kd_rek5 = a.kd_rek5  
                            where left(b.kd_rek64,1) in ('4')  
                            UNION
                            select 0 as kredit,isnull(sum(a.nilai),0) as debet from trdrka a                            
                            left join ms_rek5 b on b.kd_rek5 = a.kd_rek5  
                            where left(b.kd_rek64,1) in ('5','6') 
                            ) v ")->row();
                            $nilai_surplus = $cek_nil->nilai_ang;   
                                          	
				            $per1_surplus  = ($nilai_surplus!=0)?($total_pemkot / $nilai_surplus ) * 100:0; 
                        
                        
							$cRet .='<TR>
							<TD width="7" align="left" ><b>'.$kode_re.'</b></TD>
							<TD width="32%" align="right" ><b>'.$uraian.'</b></TD>							
							<TD width="19%" align="right" ><b>'.number_format($nilai_surplus, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>  
							<TD width="18%" align="right" ><b>'.number_format($sel, "2", ",", ".").'</b></TD>                           
							<TD width="5%" align="right" ><b>'.number_format($per1_surplus, "2", ",", ".").'</b></TD>
						    </TR>';	
						break;
						case 73:
                        
                         $cek_nil = $this->db->query("select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as nilai_ang from (
                            select isnull(sum(a.nilai),0) as kredit,0 as debet from trdrka a
                            left join ms_rek5 b on b.kd_rek5 = a.kd_rek5  
                            where left(b.kd_rek64,2)='71'  
                            UNION
                            select 0 as kredit,isnull(sum(a.nilai),0) as debet from trdrka a
                            left join ms_rek5 b on b.kd_rek5 = a.kd_rek5  
                            where left(b.kd_rek64,2) in ('72') 
                            ) v ")->row();
                            $nilai_netto = $cek_nil->nilai_ang;   
                                          	
				            $per1_netto  = ($nilai_netto!=0)?($total_pemkot / $nilai_netto ) * 100:0; 
                        
						$cRet .='<TR>
							<TD width="5" align="left" ><b>'.$kode_re.'</b></TD>
							<TD width="32%" align="right" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="19%" align="right" ><b>'.number_format($nilai_netto, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD> 
							<TD width="18%" align="right" ><b>'.number_format($sel, "2", ",", ".").'</b></TD>                              
							<TD width="5%" align="right" ><b>'.number_format($per1_netto, "2", ",", ".").'</b></TD>
						    </TR>';	
						break;
						case 75:
                        
                            $nilai_silpa = $nilai_surplus + $nilai_netto;
                            $per1_silpa  = ($nilai_silpa!=0)?($total_pemkot / $nilai_silpa ) * 100:0;                 
                        
							$cRet .='<TR>
							<TD width="5" align="left" ><b>'.$kode_re.'</b></TD>
							<TD width="32%" align="right" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="19%" align="right" ><b>'.number_format($nilai_silpa, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD> 
							<TD width="18%" align="right" ><b>'.number_format($sel, "2", ",", ".").'</b></TD>                            
							<TD width="5%" align="right" ><b>'.number_format($per1_silpa, "2", ",", ".").'</b></TD>
						</TR>';	
						break;						
						default:
						$cRet .='<TR>
							<TD width="5" align="left" ><b>'.$kode_re.'</b></TD>
							<TD width="32%" align="right" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="19%" align="right" ><b>'.number_format($nilai_ang, "2", ",", ".").'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD> 
							<TD width="18%" align="right" ><b>'.number_format($sel, "2", ",", ".").'</b></TD>                              
							<TD width="5%" align="right" ><b>'.number_format($per1, "2", ",", ".").'</b></TD>
						</TR>';
					}
                    			
				}else{ 
				$cRet .='<TR>
							<TD width="5" align="left" >'.$kode_re.'</TD>
							<TD width="32%" align="left" ><br/></TD>
							<TD width="19%" align="right" ><br/></TD>
							<TD width="18%" align="right" ><br/></TD>
							<TD width="18%" align="right" ><br/></TD>                            
							<TD width="5%" align="right" ><br/></TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';	
            
            
            if($ttd=="1"){
                
                $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient where kd_skpd='4.02.01.00'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                   
                }
                
                $sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab,pangkat FROM ms_ttd where nip='$ttd1' and kode in ('wk','agr')";
                 $sqlttd=$this->db->query($sqlttd1);
                 foreach ($sqlttd->result() as $rowttd)
                {
                    $nip=$rowttd->nip;                    
                    $nama= $rowttd->nm;
                    $jabatan  = $rowttd->jab;
                    $pangkat  = $rowttd->pangkat;
                }
                
                if($ttd1!='1'){
                    $xx="<u>";
                    $xy="</u>";
                    $nipxx=$nip;
                    $nipx="NIP. ";
                }else{
                    $xx="";
                    $xy="";
                    $nipxx="";
                    $nipx="";
                }	
				 
                		
		$cRet .='<TABLE style="border-collapse:collapse; font-size:12px;font-family:Bookman Old Style" width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$daerah.', '.$this->tanggal_format_indonesia($tanggal_ttd).'</TD>
					</TR>
					
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$jabatan.'</b></TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>                    
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$xx.'<b>'.$nama.'</b>'.$xy.'</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$nipx.''.$nipxx.'</TD>
					</TR>
					</TABLE><br/>';
            }
            
            	 
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            //$data['prev'] = $cRet;
				//echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	} 	
	
    
 
function cetak_lra_gab_skpd($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" ><b>PEMERINTAH KABUPATEN SANGGAU</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>LAPORAN REALISASI ANGGARAN (GABUNGAN)</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>PER '.$arraybulan[$bulanctk].' '.$thi.'</b></TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC" ><b>NO</b></TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC" ><b>URAIAN</b></TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC" ><b>PPKD</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" ><b>SKPD</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" ><b>PEMKOT</b></TD>						
					 </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.kode_1,b.kode_2,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_07_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                     FROM map_lra_konsol_$bulanctk b order by cast(seq as int)");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
				//$seq=$res['seq'];
				//$parent=$res['parent'];
				$bold=$res->bold;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;											
				
                $total_ppkd=$nl20;
                $total_skpd=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
                $total_pemkot = $total_ppkd + $total_skpd;
				//kode1				
			/*	$kode_1=trim($res->kode_1);				
				if ($kode_1=="") $kode_1="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par = explode(",",$kode_1);				
				$leftpar = strlen($par[0]);
				$leftpar1= $leftpar-2;												
				
				//kode2
				$kode_2=trim($res->kode_2);				
				if ($kode_2=="") $kode_2="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par2 = explode(",",$kode_2);				
				$leftpar2 = strlen($par2[0]);
				$leftpar12= $leftpar2-2;												
				*/
                
               	if($bold=='1'){
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
						</TR>';
				}else if($bold=='2'){
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
						</TR>';
				}else if($bold=='3'){
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
						</TR>';	
				}else if($bold=='4'){
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_ppkd, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot, "2", ",", ".").'</TD>
						</TR>';	
				}else if($bold=='5'){
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_ppkd, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot, "2", ",", ".").'</TD>
						</TR>';	
				}else if($bold=='6'){
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
						</TR>';		
				}else if($bold=='8'){
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
						</TR>';							
				}else if($bold=='7'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							</TR>';
				}else if($bold=='9'){ 				
					
                    switch($no){
						case 58:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="right" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
						    </TR>';	
						break;
						case 73:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="right" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							</TR>';	
						break;
						case 75:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="right" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
						</TR>';	
						break;						
						default:
						$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" >'.number_format($total_ppkd, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot, "2", ",", ".").'</TD>
						</TR>';
					}
                    			
				}else{ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            //$data['prev'] = $cRet;
				//echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}
 
 
 function cetak_lra_gab_pemkot($cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" >PEMERINTAH KABUPATEN SANGGAU</TD>
					</TR>
					<TR>
						<TD align="center" >LAPORAN REALISASI ANGGARAN</TD>
					</TR>
					<TR>
						<TD align="center" >PER 31 DESEMBER '.$thi.'</TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" ><b>NO</b></TD>
						<TD width="50%" align="center" ><b>URAIAN</b></TD>						
						<TD width="15%" align="center" ><b>ANGGARAN</b></TD>
						<TD width="15%" align="center" ><b>REALISASI</b></TD>
						<TD width="15%" align="center" ><b>BERTAMBAH/BERKURANG</b></TD>						
					 </TR>';
            $cRet .='<TR>
						<TD width="5%" align="center" ><b>NO</b></TD>
						<TD width="50%" align="center" ><b>URAIAN</b></TD>						
						<TD width="15%" align="center" ><b>ANGGARAN</b></TD>
						<TD width="15%" align="center" ><b>REALISASI</b></TD>
						<TD width="15%" align="center" ><b>BERTAMBAH/BERKURANG</b></TD>						
					 </TR>';
            						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.kode_1,b.kode_2,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_07_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                    FROM map_lra_konsol b ");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
				//$seq=$res['seq'];
				//$parent=$res['parent'];
				$bold=$res->bold;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;																
				
                $total_ppkd=$nl20;
                $total_skpd=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
                $total_pemkot = $total_ppkd + $total_skpd;
				//kode1				
			/*	$kode_1=trim($res->kode_1);				
				if ($kode_1=="") $kode_1="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par = explode(",",$kode_1);				
				$leftpar = strlen($par[0]);
				$leftpar1= $leftpar-2;												
				
				//kode2
				$kode_2=trim($res->kode_2);				
				if ($kode_2=="") $kode_2="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par2 = explode(",",$kode_2);				
				$leftpar2 = strlen($par2[0]);
				$leftpar12= $leftpar2-2;												
				*/
                
               	if($bold=='1'){
				$cRet .='<TR>
						    <TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
						</TR>';
				}else if($bold=='2'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							</TR>';
				}else if($bold=='3'){ 				
					
                    switch($no){
						case 59:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
						    </TR>';	
						break;
						case 77:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							</TR>';	
						break;
						case 79:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
						</TR>';	
						break;						
						default:
						$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" >'.number_format($total_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
						</TR>';
					}
                    			
				}else{ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				//$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            $data['prev'] = $cRet;
				echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}
 
 

    function cetak_lra_gab_konsol($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);

            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" >PEMERINTAH KABUPATEN SANGGAU</TD>
					</TR>
					<TR>
						<TD align="center" >LAPORAN REALISASI ANGGARAN (GABUNGAN) PER SKPD</TD>
					</TR>
					<TR>
						<TD align="center" >PER '.$arraybulan[$bulanctk].' '.$thi.'</TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC" >NO</TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC" >URAIAN</TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC" >PEMKOT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENDIDIKAN DAN KEBUDAYAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KESEHATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PEKERJAAN UMUM DAN PENATAAN RUANG</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERUMAHAN RAKYAT DAN KAWASAN PEMUKIMAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SATUAN POLISI PAMONG PRAJA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANGGULANGAN KEBAKARAN DAN BENCANA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KANTOR KESATUAN BANGSA DAN SOSIAL POLITIK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS SOSIAL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENGENDALIAN PENDUDUK, KB, PEMBERDAYAAN PEREMPUAN DAN PERLINDUNGAN ANAK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PANGAN, PERTANIAN DAN PERIKANAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS LINGKUNGAN HIDUP</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPENDUDUKAN DAN PENCATATAN SIPIL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERHUBUNGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOMUNIKASI INFORMATIKA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOPERASI, USAHA MIKRO DAN PERDAGANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANAMAN MODAL, TENAGA KERJA DAN PELAYANAN TERPADU SATU PINTU</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPEMUDAAN, OLAHRAGA DAN PARIWISATA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERPUSTAKAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN PERENCANAAN PEMBANGUNAN DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >PPKD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEUANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEPEGAWAIAN DAN PENGEMBANGAN SUMBER DAYA MANUSIA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DEWAN PERWAKILAN RAKYAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DPRD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEPALA DAERAH DAN WAKIL KEPALA DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >INSPEKTORAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TENGGARA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK SELATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TIMUR</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK KOTA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK BARAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK UTARA</TD>
					 </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.kode_1,b.kode_2,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_07_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                     FROM map_lra_konsol_$bulanctk b order by cast(seq as int)");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
				//$seq=$res['seq'];
				//$parent=$res['parent'];
				$bold=$res->bold;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;															
				
                $total_pemkot=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl20+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
				//kode1				
				$kode_1=trim($res->kode_1);				
				if ($kode_1=="") $kode_1="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par = explode(",",$kode_1);				
				$leftpar = strlen($par[0]);
				$leftpar1= $leftpar-2;												
				
				//kode2
				$kode_2=trim($res->kode_2);				
				if ($kode_2=="") $kode_2="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par2 = explode(",",$kode_2);				
				$leftpar2 = strlen($par2[0]);
				$leftpar12= $leftpar2-2;												
				
				if($bold=='1'){
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33, "2", ",", ".").'</b></TD>
						 </TR>';
				}else if($bold=='2'){ 						 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33, "2", ",", ".").'</b></TD>
						 </TR>';	
				}else if($bold=='3'){ 						 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33, "2", ",", ".").'</b></TD>
						 </TR>';	
				}else if($bold=='4'){ 						 
				$cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl1, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl2, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl3, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl4, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl5, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl6, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl7, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl8, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl9, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl10, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl11, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl12, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl13, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl14, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl15, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl16, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl17, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl18, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl19, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl20, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl21, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl22, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl23, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl24, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl25, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl26, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl27, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl28, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl29, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl30, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl31, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl32, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl33, "2", ",", ".").'</TD>
						 </TR>';
				}else if($bold=='5'){ 						 
				$cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl1, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl2, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl3, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl4, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl5, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl6, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl7, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl8, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl9, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl10, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl11, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl12, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl13, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl14, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl15, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl16, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl17, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl18, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl19, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl20, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl21, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl22, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl23, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl24, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl25, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl26, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl27, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl28, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl29, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl30, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl31, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl32, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl33, "2", ",", ".").'</TD>
						 </TR>';
				}else if($bold=='6'){ 						 
				$cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >'.$uraian.'</TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33, "2", ",", ".").'</b></TD>
						 </TR>';
				}else if($bold=='8'){ 						 
				$cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >'.$uraian.'</TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33, "2", ",", ".").'</b></TD>
						 </TR>';							 
				}else if($bold=='7'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
						 </TR>';
				}else if($bold=='9'){ 				
					
                    switch($no){
						case 58:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="right" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33, "2", ",", ".").'</b></TD>
						 </TR>';	
						break;
						case 73:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="right" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33, "2", ",", ".").'</b></TD>
						 </TR>';	
						break;
						case 75:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="right" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32, "2", ",", ".").'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33, "2", ",", ".").'</b></TD>
						 </TR>';	
						break;						
						default:
						$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl1, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl2, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl3, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl4, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl5, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl6, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl7, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl8, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl9, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl10, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl11, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl12, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl13, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl14, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl15, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl16, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl17, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl18, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl19, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl20, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl21, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl22, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl23, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl24, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl25, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl26, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl27, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl28, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl29, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl30, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl31, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl32, "2", ",", ".").'</TD>
							<TD width="15%" align="right" >'.number_format($nl33, "2", ",", ".").'</TD>
						 </TR>';
					}
                    			
				}else{ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				//$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            $data['prev'] = $cRet;
				echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}


    function skpd_new2()
    {
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_skpd,nm_skpd FROM ms_skpd where right(kd_skpd,2)='00'";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {

            $result[] = array('id' => $ii, 'kd_skpd' => $resulte['kd_skpd'], 'nm_skpd' => $resulte['nm_skpd'], );
            $ii++;
        }

        echo json_encode($result);
    }


     function skpd_kolom2($kd_skpd="")
        {
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_skpd,kd_skpd_field FROM ms_konsol where kd_skpd='$kd_skpd'";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {

            $result[] = array('id' => $ii, 
            'kd_skpd' => $resulte['kd_skpd'], 
            'kd_skpd_field' => $resulte['kd_skpd_field'] );
            $ii++;
        }

        echo json_encode($result);
    }

    
    
    function posting_neraca_kolom(){
        $thi=$this->session->userdata('pcThang');
        $thz=$thi-1;
        $skpd2 	  = $this->input->post('skpd');
        $kolom2 	  = $this->input->post('kolom');
        $vbulan2      = $this->input->post('bulan');
        $vbulan3      = $this->input->post('bulan');
        
        $cek = strlen($vbulan2);
        if($cek==1){
            $vbulan2 = '0'.$vbulan2;             
        }
        
        if($vbulan3==1){
           $tabell = "map_neraca_konsol";    
           $tabell2 = "map_neraca_konsol.kode";       
        }else{ 
           $tabell = "map_neraca_konsol_".$vbulan3;
           $tabell2 = "map_neraca_konsol_".$vbulan3.".kode"; 
        }
        
        //$vbulan2=0+$vbulan3;
            
            $sql ="	
                ------kasda
                
                update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11101') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11101') 
                and  year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '3'
                
                -----kas penerimaan
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11102') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11102') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '4'
                
                -----kas pengeluaran
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11103') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11103') 
                and  year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '6'
                
                ------kas blud
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1110401') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1110401') 
                and  year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '125'
                
                -----kas lainnya
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1110501') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1110501') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '126'
                
                -----investasi jangka pendek
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('112') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('112') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '7'
                
                ------piutang pajak
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11301') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11301') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '8'
                
                -----Penyisihan Piutang Pajak
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150101') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150101') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '9'
                
                -----Piutang Pajak Netto
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1130101','1130102','1130103','1130104','1130105','1130106','1130107','1130108','1130109','1130110','1130111','1130112','1130113','1130112','1130113','1130114','1130115','1130116','1150101') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1130101','1130102','1130103','1130104','1130105','1130106','1130107','1130108','1130109','1130110','1130111','1130112','1130113','1130112','1130113','1130114','1130115','1130116','1150101') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '10'
                
                -----Piutang Retribusi
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11302') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11302') 
                and  year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '11'
                
                -----Penyisihan Piutang Retribusi
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150102') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150102') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '13'
                
                ------Piutang Retribusi Netto
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1130201','1130202','1130203','1130204','1130205','1130206','1130207','1130208','1130209','1130210','1130211','1130212','1130213','1130214','1130215','1130216','1130217','1130218','1130219','1130220','1130221','1130222','1130223','1130224','1130225','1150102') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1130201','1130202','1130203','1130204','1130205','1130206','1130207','1130208','1130209','1130210','1130211','1130212','1130213','1130214','1130215','1130216','1130217','1130218','1130219','1130220','1130221','1130222','1130223','1130224','1130225','1150102') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '14'
                
                -----Belanja Dibayar Dimuka
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('116') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('116') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '15'
                
                -----Bagian Lancar Pinjaman Kepada Perusahaan Negara
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140201') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140201') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '16'
                
                -----Penyisihan Bagian Lancar Pinjaman Kepada Perusahaan Negara
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '17'
                
                -----Bagian Lancar Pinjaman Kepada Perusahaan Negara Netto
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140201','1150202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140201','1150202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '18'
                
                -----Bagian Lancar Pinjaman kepada Perusahaan Daerah
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '19'
                
                -----Penyisihan Bagian Lancar Pinjaman Kepada Perusahaan Daerah
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '20'
                
                -----Bagian Lancar Pinjaman Kepada Pemerintah Daerah Netto
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140202','1140202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140202','1140202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '21'
                
                ------Bagian Lancar Pinjaman Kepada Pemerintah Pusat
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140203') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140203') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '22'
                
                ------Penyisihan Bagian Lancar Pinjaman Kepada Pemerintah Pusat
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '23'
                
                ------Bagian Lancar Pinjaman Kepada Pemerintah Pusat Netto
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140203','1150202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140203','1150202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '24'
                
                ------Bagian Lancar Pinjaman Kepada Pemerintah Daerah Lainnya
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140204') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140204') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '25'
                
                -----Penyisihan Bagian Lancar Pinjaman Kepada Pemerintah Daerah Lainnya
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '26'
                
                -----Bagian Lancar Pinjaman Kepada Pemerintah Daerah Lainnya Netto
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140204','1150202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140204','1150202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '27'
                
                -----Bagian Lancar Tagihan Penjualan Angsuran
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140301','1140302','1140303') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140301','1140302','1140303') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '28'
                
                -----Penyisihan Bagian Lancar Tagihan Penjualan Angsuran
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150203') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150203') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '29'
                
                -----Bagian Lancar Tagihan Penjualan Angsuran Netto
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140301','1140302','1140303','1150203') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140301','1140302','1140303','1150203') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '30'
                
                -----Bagian Lancar Tuntutan Ganti Rugi
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140401','1140402') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140401','1140402') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '31'
                
                -----Penyisihan Bagian Lancar Tuntutan Ganti Rugi
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150204') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150204') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '32'
                
                ------Bagian Lancar Tuntutan Ganti Rugi Netto
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140401','1140402','1150204') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140401','1140402','1150204') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '33'
                
                ------Piutang Lainnya
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140601','1140501','1130401','1130402','1130403','1130404','1130405','1130406','1130407','1130408','1130409','1130410','1130411','1130412','1130413','1130414','1130415','1130416','1130417') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140601','1140501','1130401','1130402','1130403','1130404','1130405','1130406','1130407','1130408','1130409','1130410','1130411','1130412','1130413','1130414','1130415','1130416','1130417') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '34'
                
                ------Penyisihan Piutang Lainnya
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150201','1150202','1150203','1150204','1150205','1150206','1150104') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1150201','1150202','1150203','1150204','1150205','1150206','1150104') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '35'
                
                ------Piutang Lainnya Netto
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140601','1140501','1130401','1130402','1130403','1130404','1130405','1130406','1130407','1130408','1130409','1130410','1130411','1130412','1130413','1130414','1130415','1130416','1130417','1150201','1150202','1150203','1150204','1150205','1150206','1150104') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,7) in ('1140601','1140501','1130401','1130402','1130403','1130404','1130405','1130406','1130407','1130408','1130409','1130410','1130411','1130412','1130413','1130414','1130415','1130416','1130417','1150201','1150202','1150203','1150204','1150205','1150206','1150104') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '36'
                
                -----Persediaan
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('117') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('117') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '37'
                
                -----Jumlah Aset Lancar
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull($kolom2,0)) as real_spj from $tabell where urut>=3 and urut<=40 and parent='1'
                )i
                where $tabell2 = '38'
                
                
                -----Pinjaman Jangka Panjang
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12101') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12101') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '42'
                
                -----Investasi dalam Surat Utang Negara
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12102') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12102') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '43'
                
                -----Investasi dalam Proyek Pembangunan
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12103') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12103') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '44'
                
                -----Investasi Nonpermanen Lainnya
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12106') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12106') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '45'
                
                
                -----Jumlah Investasi Nonpermanen
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('121') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('121') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '46'

                -----Penyertaan Modal Pemerintah Daerah
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12201') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12201') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '49'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('12202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '50'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('122') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('122') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '51'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('12') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('12') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '52'
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('131') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('131') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '55'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('132') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('132') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '56'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('133') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('133') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '57'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('134') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('134') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '58'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('135') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('135') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '59'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('136') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('136') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '60'
                
               
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('137') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('137') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '61'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('13') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('13') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '62'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('141') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('141') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '65'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('141') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('141') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '66'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15101') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15101') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '69'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15101') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15101') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '71'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15102') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15102') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '72'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15102') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15102') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '74'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15202') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15202') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '75'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15301','15302','15303','15304','15305') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15301','15302','15303','15304','15305') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '76'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15306') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('15306') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '77'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('153') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('153') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '78'
                
               
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('154') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('154') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '79'
                
                 
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('155') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('155') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '80'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('151','152','153','154','155') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('151','152','153','154','155') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '81'
                
               
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('11801') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)<=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                )z
                ) i
                where $tabell2 = '82'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('11','12','13','14','15') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('11','12','13','14','15') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '83'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('211') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('211') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '87'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('212') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('212') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '88'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('213') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('213') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '89'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('214') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('214') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '90'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('215') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('215') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '91'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('216') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('216') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '92'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('211','212','213','214','215','216') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('211','212','213','214','215','216') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '93'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('22101') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('22101') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '96'
                
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('22102') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,5) in ('22102') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '97'
                
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('222') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,3) in ('222') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '99'
                
  
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('22') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('22') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '100'
                
  
                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull(z.real_spj,0)) as real_spj from(
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('21','22') 
                and month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd 
                where left(a.kd_rek5,2) in ('21','22') 
                and year(b.tgl_voucher)<$thi
                and left(b.kd_skpd,7)=left('$skpd2',7))z
                ) i
                where $tabell2 = '101'
                

                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select isnull(sum(x.nilai),0) as real_spj from(

                select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a 
                inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thz
                and left(kd_rek5,1) in ('8') and left(b.kd_skpd,7)=left('$skpd2',7) 
                UNION

                select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher 
                and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thz and 
                left(kd_rek5,1) in ('9') and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(kredit-debet),0) nilai from trhju_pkd a
                inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit 
                where  reev in ('1','37') and left(b.kd_rek5,1)='1' and year(a.tgl_voucher)<$thz and left(a.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(kredit-debet),0) nilai from trhju_pkd a
                inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') 
                and kd_rek5='3110101' and year(a.tgl_voucher)<$thz and left(a.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(kredit-debet),0) nilai from trhju_pkd a
                inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') 
                and kd_rek5='3110101' and year(a.tgl_voucher)<$thz and left(a.kd_skpd,7)=left('$skpd2',7)
                UNION

                SELECT isnull(SUM(a.kredit-a.debet),0) AS nilai FROM trdju_pkd a INNER JOIN trhju_pkd b 
                ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(b.kd_skpd,7)=left('$skpd2',7) 
                AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<$thz and b.tabel=1 and reev=0
                UNION

                select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b 
                on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thz 
                and left(kd_rek5,3) in ('313') and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(z.kredit-z.debet),0) as nilai from(

                select 0 as debet,isnull(sum(kredit-debet),0) as kredit from trdju_pkd a inner join trhju_pkd b 
                on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thz 
                and left(kd_rek5,1) in ('8') and left(b.kd_skpd,7)=left('$skpd2',7)
                UNION
                select isnull(sum(debet-kredit),0) as debet,0 as kredit from trdju_pkd a inner join trhju_pkd b 
                on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thz 
                and left(kd_rek5,1) in ('9') and left(b.kd_skpd,7)=left('$skpd2',7)
                )z
                UNION

                select isnull(sum(kredit-debet),0) nilai from trhju_pkd a
                inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  
                reev in ('1','37') and kd_rek5='3110101' and year(a.tgl_voucher)=$thz and left(a.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(kredit-debet),0) nilai from trhju_pkd a
                inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit 
                where  reev in ('2','35') and kd_rek5='3110101' and year(a.tgl_voucher)=$thz 
                and left(a.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(kredit-debet),0) nilai from trhju_pkd a
                inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  
                reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5='3110101' and year(a.tgl_voucher)=$thz and left(a.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher 
                and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thz and left(kd_rek5,3) in ('313') 
                and left(b.kd_skpd,7)=left('$skpd2',7)

                UNION
                select isnull(sum(z.kredit-z.debet),0) as nilai from (
                select 0 as debet,isnull(sum(kredit-debet),0) as kredit from trdju_pkd a inner join trhju_pkd b 
                on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thi 
                and left(CONVERT(char(15),tgl_voucher, 112),6)<=$thi$vbulan2 and left(kd_rek5,1) in 
                ('8') and left(b.kd_skpd,7)=left('$skpd2',7)
                
                UNION
                select isnull(sum(debet-kredit),0) as debet,0 as kredit from trdju_pkd a inner join trhju_pkd b 
                on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thi and 
                left(CONVERT(char(15),tgl_voucher, 112),6)<=$thi$vbulan2 and left(kd_rek5,1) in ('9') 
                and left(b.kd_skpd,7)=left('$skpd2',7)
                )z

                UNION

                select isnull(sum(kredit-debet),0) as nilai from trhju_pkd a
                inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') 
                and kd_rek5='3110101' and year(a.tgl_voucher)=$thi and left(CONVERT(char(15),tgl_voucher, 112),6)<=$thi$vbulan2 
                and left(a.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(kredit-debet),0) as nilai from trhju_pkd a
                inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and 
                year(a.tgl_voucher)=$thi and left(CONVERT(char(15),tgl_voucher, 112),6)<=$thi$vbulan2 
                and left(a.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(kredit-debet),0) as nilai from trhju_pkd a
                inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and 
                kd_rek5=3110101 and year(a.tgl_voucher)=$thi and left(CONVERT(char(15),tgl_voucher, 112),6)<=$thi$vbulan2 
                and left(a.kd_skpd,7)=left('$skpd2',7)
                UNION

                select isnull(sum(z.kredit-z.kredit2),0) as nilai from (
                select isnull(sum(kredit-debet),0) as kredit,0 as kredit2 from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher 
                and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thi and left(kd_rek5,3) in ('313') and 
                left(b.kd_skpd,7)=left('$skpd2',7)
 
                UNION
  
                select 0 as kredit,isnull(sum(kredit-debet),0) as kredit2 from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and 
                a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thi and left(kd_rek5,3) in ('313') 
                and left(b.kd_skpd,7)=left('$skpd2',7)
                ) z
    
                ) x
                ) i
                where $tabell2 = '121'
                

                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select isnull(sum(kredit-debet),0) as real_spj from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and 
                a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thi and left(kd_rek5,3) in ('313') and month(tgl_voucher)<=$vbulan2 
                and left(b.kd_skpd,7)=left('$skpd2',7)
                ) i
                where $tabell2 = '122'
                

                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull($kolom2,0)) as real_spj from $tabell where kode>=121 and kode<=122 and parent='1'
                ) i
                where $tabell2 = '123'
                

                    update $tabell set $kolom2=i.real_spj 
                from 
                (
                select sum(isnull($kolom2,0)) as real_spj from $tabell where urut>=104 and urut<=109 and bold='3'
                ) i
                where $tabell2 = '124' ";
                $asg = $this->db->query($sql);
		          echo '1';
    }
        
        

    


    function rpt_neraca_konsol_gab_real($bulanctk='',$cetak='',$ttd='',$tanggal_ttd=''){
	        
			$thi=$this->session->userdata('pcThang');
			$thz=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
             $cRet ='<TABLE style="border-collapse:collapse; font-size:12px" font-family: Bookman Old Style; width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="left" >LAMPIRAN IV &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/> PERATURAN DAERAH KABUPATEN SANGGAU <br/> 
                        NOMOR &nbsp;&nbsp;&nbsp;&nbsp; TAHUN 2017 <br/>TENTANG PERTANGGUNGJAWABAN PELAKSANAAN <br/> ANGGARAN PENDAPATAN DAN BELANJA DAERAH<br/>KABUPATEN SANGGAU TAHUN ANGGARAN 2017
                        </TD>
					</TR>
                    <TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="center" ><b>&nbsp;</TD>
					</TR>
					</TABLE><br/>
                    
			<TABLE width="100%">
					<TR>
						<TD align="center" ><b>PEMERINTAH KABUPATEN SANGGAU</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>LAPORAN NERACA </b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>PER '.$arraybulan[$bulanctk].' '.$thi.'</b></TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC"> <b>NO</b></TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC"><b>URAIAN</b></TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>TAHUN '.$thi.'</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>TAHUN '.$thz.'</b></TD>												
					 </TR>';
          		
			$idx=0;			
		$query = $this->db->query(" SELECT b.kode,b.uraian,b.seq,b.seq2,b.parent,b.bold,b.normal,b.map_rek,b.map_rek1,b.kode_1,b.kode_2,b.kode_3,b.kode_4,b.kode_5,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_05_02_00,b.a4_02_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_08_06_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_07_01_00,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00
                    ,isnull(eliminasi_debet,0) as eliminasi_debet,isnull(eliminasi_kredit,0) as eliminasi_kredit,
                    isnull(n_lalu,0) as nilai_lalu FROM map_neraca_konsol_$bulanctk b ORDER BY b.urut ");  
			foreach($query->result_array() as $res){
				$idx++;
				$no=$res['kode'];
				$uraian=$res['uraian'];
				$seq=$res['seq'];
                $seq2=$res['seq2'];
				$parent=$res['parent'];
				$bold=$res['bold'];                
				$map_rek=$res['map_rek'];
                $map_rek1=$res['map_rek1'];
				$kode_5=$res['kode_5'];
                $n1=$res['a1_01_01_00'];$n2=$res['a1_02_01_00'];$n3=$res['a1_03_01_00'];
                $n4=$res['a1_04_01_00'];$n5=$res['a1_05_01_00'];$n6=$res['a1_05_02_00'];
                $n7=$res['a1_05_03_00'];$n8=$res['a1_06_01_00'];$n9=$res['a2_02_01_00'];
                $n10=$res['a2_03_01_00'];$n11=$res['a2_05_01_00'];$n12=$res['a2_06_01_00'];
                $n13=$res['a2_09_01_00'];$n14=$res['a2_10_01_00'];$n15=$res['a2_11_01_00'];
                $n16=$res['a2_12_01_00'];$n17=$res['a2_13_01_00'];$n18=$res['a2_17_01_00'];
                $n19=$res['a4_01_01_00'];$n20=$res['a4_02_01_00'];$n21=$res['a4_02_02_00'];
                $n22=$res['a4_03_01_00'];$n23=$res['a4_05_01_00'];$n24=$res['a4_05_02_00'];
                $n25=$res['a4_06_01_00'];$n26=$res['a4_06_02_00'];$n27=$res['a4_07_01_00'];
                $n28=$res['a4_08_01_00'];$n29=$res['a4_08_02_00'];$n30=$res['a4_08_03_00'];
                $n31=$res['a4_08_04_00'];$n32=$res['a4_08_05_00'];$n33=$res['a4_08_06_00'];
                $ndebet=$res['eliminasi_debet'];
				$nkredit=$res['eliminasi_kredit'];
                $n_lalu=$res['nilai_lalu'];                
								
				//$map=$res['map_skpd'];
				//$nilai_pemkot_lalu=$res['nilai_lalu_pemkot'];													 	
				$nilai_ppkd = $n20; 
				$nilai_skpd = $n1 + $n2 + $n3 + $n4 + $n5 + $n6 + $n7 + $n8 + $n9 + $n10 + $n11 + $n12 + $n13 + $n14 + $n15 + $n16 + $n17 + $n18 + $n19 + $n21 + $n22 + $n23 + $n24 + $n25 + $n26 + $n27 + $n28 + $n29 + $n30 + $n31 + $n32 + $n33;					
				//$nilai_pemkot = $nilai_ppkd + $nilai_skpd - $ndebet - $nkredit;                
                $nilai_pemkot = $nilai_ppkd + $nilai_skpd;
                
                $kode_x=trim($map_rek);				
				if ($kode_x=="") $kode_x="'xxx'";				
				
                $kode_x1=trim($map_rek1);				
				if ($kode_x1=="") $kode_x1="'xxx'";				
				
                
                if($normal=$res['normal']=="K"){
                    $normal1 = "kredit-debet";
                }else{
                    $normal1 = "debet-kredit";
                }
                //echo $kode_1.'<br/>';
			    
                $kode_1=trim($res['kode_1']);
                $kode_2=trim($res['kode_2']);
                $kode_3=trim($res['kode_3']);
                $kode_4=trim($res['kode_4']); 
                $kode_5=trim($kode_5);      

                if ($kode_1=='') $kode_1='xxx';                                             
                if ($kode_2=='') $kode_2='xxx';                                             
                if ($kode_3=='') $kode_3='xxx';                                             
                if ($kode_4=='') $kode_4='xxx';                                                                         
                

                
                $q = $this->db->query(" SELECT isnull(SUM($normal1),0) AS nilai_lalu  FROM trdju_pkd a INNER JOIN trhju_pkd b ON a.no_voucher=b.no_voucher WHERE  
                                        year(b.tgl_voucher)<='$thz'
                                        AND
                                        (left(kd_rek5,$kode_5) in ($kode_x)
                                        OR 
                                        left(kd_rek5,$kode_5) in ($kode_x1))")->row();
                
                $nil_lalu = $q->nilai_lalu;
                
				$s = $this->db->query(" SELECT isnull(SUM($normal1),0) AS nilai_lalu  FROM trdju_pkd a INNER JOIN trhju_pkd b ON a.no_voucher=b.no_voucher WHERE  
                                        year(b.tgl_voucher)<='$thz'
                                        AND
                                        left(kd_rek5,2) in ('21','22')")->row();
                
                $nil_lalu_kw = $s->nilai_lalu;

				$l = $this->db->query(" SELECT isnull(SUM($normal1),0) AS nilai_lalu  FROM trdju_pkd a INNER JOIN trhju_pkd b ON a.no_voucher=b.no_voucher WHERE  
                                        year(b.tgl_voucher)<='$thz'
                                        AND
                                        left(kd_rek5,3) in ('313')")->row();
                
                $nil_lalu_rk = $l->nilai_lalu;                


			$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thz and left(kd_rek5,1) in ('8') ";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thz and left(kd_rek5,1) in ('9') ";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");

			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and left(b.kd_rek5,1)=1 and year(a.tgl_voucher)<$thz";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)<$thz ";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)<$thz";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thi'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet3=$res2['debet'];
				 $kredit3=$res2['kredit'];
                 				 
			 }
		
		$real=$kredit3-$debet3+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3;

//		created by henri_tb
		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thi and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thi$bulanctk' and left(kd_rek5,1) in ('8') ";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thz and left(kd_rek5,1) in ('8') ";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thi and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thi$bulanctk' and left(kd_rek5,1) in ('9')";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thz and left(kd_rek5,1) in ('9')";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
					
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5=3110101 and year(a.tgl_voucher)=$thz ";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5=3110101 and year(a.tgl_voucher)=$thz ";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5=3110101 and year(a.tgl_voucher)=$thz";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}

		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3;	
                
        $sal_awal_jm = $nil_lalu_kw +  $sal_awal;                  
                
				if($seq2=='2'){ 
				    
                    if($no=="121"){
                        $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>	
                            <TD width="15%" align="right" >'.number_format($sal_awal,2).'</TD>													
						 </TR>';
                    }else{
                        
                    if($bold=="11"){
                        $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>	
                            <TD width="15%" align="right" >'.number_format($nil_lalu,2).'</TD>													
						 </TR>';
                    }else if($bold=="111"){
                        $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>	
                            <TD width="15%" align="right" >'.number_format($nil_lalu,2).'</TD>													
						 </TR>';
                    }else{
                   	    $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>	
                            <TD width="15%" align="right" >'.number_format($nil_lalu,2).'</TD>													
						 </TR>';   
                    }                    
                }
				}else if($seq2=='4'){ 
				    
                    if($no=="123" || $no=="124"){
                        $cRet .='<TR>
							<TD width="5" align="center" ><b>'.$idx.'</b></TD>
							<TD width="50%" align="left" ><b>&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</b></TD>														
							<TD width="15%" align="right" ><b>'.number_format($nilai_pemkot,2).'</b></TD>	
                            <TD width="15%" align="right" ><b>'.number_format($sal_awal_jm,2).'</b></TD>													
						 </TR>';
                    }else{
                        $cRet .='<TR>
							<TD width="5" align="center" ><b>'.$idx.'</b></TD>
							<TD width="50%" align="left" ><b>&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</b></TD>														
							<TD width="15%" align="right" ><b>'.number_format($nilai_pemkot,2).'</b></TD>	
                            <TD width="15%" align="right" ><b>'.number_format($nil_lalu,2).'</b></TD>													
						 </TR>';   
                    }                

				}else if($seq2=='5'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>														
						 </TR>';

				}else if($seq2=='6'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>							
							<TD width="15%" align="right" >'.number_format($nil_lalu,2).'</TD>							
						 </TR>';

				}else if($seq2==''){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ></TD>							
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>														
						 </TR>';

				}				
			}
			
			$cRet .='</TABLE>';		
            
             if($ttd=="1"){
                
                $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient where kd_skpd='4.02.01.00'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                   
                }
                
                $sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab,pangkat FROM ms_ttd where kode='walikota'";
                 $sqlttd=$this->db->query($sqlttd1);
                 foreach ($sqlttd->result() as $rowttd)
                {
                    $nip=$rowttd->nip;                    
                    $nama= $rowttd->nm;
                    $jabatan  = $rowttd->jab;
                    $pangkat  = $rowttd->pangkat;
                }
                		
		$cRet .='<TABLE style="border-collapse:collapse; font-size:12px" font-family: Bookman Old Style" width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$daerah.', '.$this->tanggal_format_indonesia($tanggal_ttd).'</TD>
					</TR>
					
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$jabatan.'</b></TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>                    
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$nama.'</b></TD>
					</TR>
                    <!--<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$nip.'</TD>
					</TR>-->
					</TABLE><br/>';
            }
             			
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');		
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}		    
	}
    function rpt_neraca_konsol_gab($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" ><b>PEMERINTAH KABUPATEN SANGGAU</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>LAPORAN REKON NERACA (GABUNGAN)</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>PER '.$arraybulan[$bulanctk].' '.$thi.'</b></TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC" > <b>NO</b></TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC"><b>URAIAN</b></TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>PPKD</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>SKPD</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>PEMKOT</b></TD>						
					 </TR>';
			$idx=0;			
		$query = $this->db->query(" SELECT b.kode,b.uraian,b.seq,b.seq2,b.parent,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_05_02_00,b.a4_02_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_08_06_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_07_01_00,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00
                    ,isnull(eliminasi_debet,0) as eliminasi_debet,isnull(eliminasi_kredit,0) as eliminasi_kredit 
                    FROM map_neraca_konsol_$bulanctk b ORDER BY b.urut ");  
			foreach($query->result_array() as $res){
				$idx++;
				$no=$res['kode'];
				$uraian=$res['uraian'];
				$seq=$res['seq'];
                $seq2=$res['seq2'];
				$parent=$res['parent'];
				$bold=$res['bold'];
                $n1=$res['a1_01_01_00'];$n2=$res['a1_02_01_00'];$n3=$res['a1_03_01_00'];
                $n4=$res['a1_04_01_00'];$n5=$res['a1_05_01_00'];$n6=$res['a1_05_02_00'];
                $n7=$res['a1_05_03_00'];$n8=$res['a1_06_01_00'];$n9=$res['a2_02_01_00'];
                $n10=$res['a2_03_01_00'];$n11=$res['a2_05_01_00'];$n12=$res['a2_06_01_00'];
                $n13=$res['a2_09_01_00'];$n14=$res['a2_10_01_00'];$n15=$res['a2_11_01_00'];
                $n16=$res['a2_12_01_00'];$n17=$res['a2_13_01_00'];$n18=$res['a2_17_01_00'];
                $n19=$res['a4_01_01_00'];$n20=$res['a4_02_01_00'];$n21=$res['a4_02_02_00'];
                $n22=$res['a4_03_01_00'];$n23=$res['a4_05_01_00'];$n24=$res['a4_05_02_00'];
                $n25=$res['a4_06_01_00'];$n26=$res['a4_06_02_00'];$n27=$res['a4_07_01_00'];
                $n28=$res['a4_08_01_00'];$n29=$res['a4_08_02_00'];$n30=$res['a4_08_03_00'];
                $n31=$res['a4_08_04_00'];$n32=$res['a4_08_05_00'];$n33=$res['a4_08_06_00'];
                $ndebet=$res['eliminasi_debet'];
				$nkredit=$res['eliminasi_kredit'];
                
                
								
				//$map=$res['map_skpd'];
				//$nilai_pemkot_lalu=$res['nilai_lalu_pemkot'];													 	
				$nilai_ppkd = $n20; 
				$nilai_skpd = $n1 + $n2 + $n3 + $n4 + $n5 + $n6 + $n7 + $n8 + $n9 + $n10 + $n11 + $n12 + $n13 + $n14 + $n15 + $n16 + $n17 + $n18 + $n19 + $n21  + $n22 + $n23 + $n24 + $n25 + $n26 + $n27 + $n28 + $n29 + $n30 + $n31 + $n32 + $n33;					
				//$nilai_pemkot = $nilai_ppkd + $nilai_skpd - $ndebet - $nkredit;
                $nilai_pemkot = $nilai_ppkd + $nilai_skpd;                
                
				if($seq2=='2'){ 
				
                if($bold=="11"){
                        $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
					       	<TD width="15%" align="right" >'.number_format($nilai_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>										
						 </TR>';
                    }else if($bold=="111"){
                        $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($nilai_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>										
						 </TR>';
                    }else{
                   	    $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($nilai_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>													
						 </TR>';   
                    }
				
                }else if($seq2=='4'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</b></TD>							
							<TD width="15%" align="right" >'.number_format($nilai_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>							
						 </TR>';

				}else if($seq2=='5'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>														
						 </TR>';

				}else if($seq2=='6'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" >'.number_format($nilai_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>							
						 </TR>';

				}else if($seq2==''){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ></b></TD>							
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>														
						 </TR>';

				}				
			}
			
			$cRet .='</TABLE>';		 			
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');		
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}		    
	}

	     function rpt_neraca_konsol_skpd($bulanctk='',$cetak=''){
	        $bulan= $this->input->post('bulan');
			$thi=$this->session->userdata('pcThang');
			$thl=$thi-1;
            
     $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" >PEMERINTAH KABUPATEN SANGGAU</TD>
					</TR>
					<TR>
						<TD align="center" >LAPORAN REKON NERACA PER SKPD</TD>
					</TR>
					<TR>
						<TD align="center" >PER '.$arraybulan[$bulanctk].' '.$thi.'</TD>
					</TR>
					</TABLE><br>';
            
            	$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center"  bgcolor="#CCCCCC" >NO</TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC">URAIAN</TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC">PEMKOT</TD>
                        <TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENDIDIKAN DAN KEBUDAYAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KESEHATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PEKERJAAN UMUM DAN PENATAAN RUANG</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERUMAHAN RAKYAT DAN KAWASAN PEMUKIMAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SATUAN POLISI PAMONG PRAJA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANGGULANGAN KEBAKARAN DAN BENCANA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KANTOR KESATUAN BANGSA DAN SOSIAL POLITIK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS SOSIAL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENGENDALIAN PENDUDUK, KB, PEMBERDAYAAN PEREMPUAN DAN PERLINDUNGAN ANAK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PANGAN, PERTANIAN DAN PERIKANAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS LINGKUNGAN HIDUP</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPENDUDUKAN DAN PENCATATAN SIPIL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERHUBUNGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOMUNIKASI INFORMATIKA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOPERASI, USAHA MIKRO DAN PERDAGANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANAMAN MODAL, TENAGA KERJA DAN PELAYANAN TERPADU SATU PINTU</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPEMUDAAN, OLAHRAGA DAN PARIWISATA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERPUSTAKAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN PERENCANAAN PEMBANGUNAN DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >PPKD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEUANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEPEGAWAIAN DAN PENGEMBANGAN SUMBER DAYA MANUSIA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DEWAN PERWAKILAN RAKYAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DPRD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEPALA DAERAH DAN WAKIL KEPALA DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >INSPEKTORAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TENGGARA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK SELATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TIMUR</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK KOTA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK BARAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK UTARA</TD>
					 </TR>';

			
$this->db->query("update map_neraca_konsol_$bulanctk set eliminasi_kredit=i.real_spj 
                                from 
(
select sum(isnull(a4_02_01_00,0)) as real_spj from map_neraca_konsol_$bulanctk where kode='82'
) i
where map_neraca_konsol_$bulanctk.kode = '82'");

$this->db->query("update map_neraca_konsol_$bulanctk set eliminasi_kredit=i.real_spj 
                                from 
(
select sum(isnull(a4_02_01_00,0)) as real_spj from map_neraca_konsol_$bulanctk where kode='82'
) i
where map_neraca_konsol_$bulanctk.kode = '83'");

$this->db->query("update map_neraca_konsol_$bulanctk set eliminasi_debet=i.real_spj 
                                from 
(
select isnull(sum(b.a1_01_01_00+b.a1_02_01_00+b.a1_03_01_00
                    +b.a1_04_01_00+b.a1_05_01_00+b.a1_05_02_00+b.a1_05_03_00+b.a1_06_01_00+b.a2_02_01_00
                    +b.a2_03_01_00+b.a2_05_01_00+b.a2_06_01_00+b.a2_09_01_00+b.a2_10_01_00+b.a2_11_01_00
                    +b.a2_12_01_00+b.a2_13_01_00+b.a2_17_01_00+b.a4_01_01_00+b.a4_05_02_00+b.a4_02_01_00
                    +b.a4_02_02_00+b.a4_03_01_00+b.a4_05_01_00+b.a4_08_06_00+b.a4_06_01_00+b.a4_06_02_00
                    +b.a4_07_01_00+b.a4_08_01_00+b.a4_08_02_00+b.a4_08_03_00+b.a4_08_04_00+b.a4_08_05_00),0) 
                    as real_spj from map_neraca_konsol_$bulanctk b where kode='122'
) i
where map_neraca_konsol_$bulanctk.kode = '122'");            

$this->db->query("update map_neraca_konsol_$bulanctk set eliminasi_debet=i.real_spj 
                                from 
(
select isnull(sum(b.a1_01_01_00+b.a1_02_01_00+b.a1_03_01_00
                    +b.a1_04_01_00+b.a1_05_01_00+b.a1_05_02_00+b.a1_05_03_00+b.a1_06_01_00+b.a2_02_01_00
                    +b.a2_03_01_00+b.a2_05_01_00+b.a2_06_01_00+b.a2_09_01_00+b.a2_10_01_00+b.a2_11_01_00
                    +b.a2_12_01_00+b.a2_13_01_00+b.a2_17_01_00+b.a4_01_01_00+b.a4_05_02_00+b.a4_02_01_00
                    +b.a4_02_02_00+b.a4_03_01_00+b.a4_05_01_00+b.a4_08_06_00+b.a4_06_01_00+b.a4_06_02_00
                    +b.a4_07_01_00+b.a4_08_01_00+b.a4_08_02_00+b.a4_08_03_00+b.a4_08_04_00+b.a4_08_05_00),0) 
                    as real_spj from map_neraca_konsol_$bulanctk b where kode='122'
) i
where map_neraca_konsol_$bulanctk.kode = '123'");  

$this->db->query("update map_neraca_konsol_$bulanctk set eliminasi_debet=i.real_spj 
                                from 
(
select isnull(sum(b.a1_01_01_00+b.a1_02_01_00+b.a1_03_01_00
                    +b.a1_04_01_00+b.a1_05_01_00+b.a1_05_02_00+b.a1_05_03_00+b.a1_06_01_00+b.a2_02_01_00
                    +b.a2_03_01_00+b.a2_05_01_00+b.a2_06_01_00+b.a2_09_01_00+b.a2_10_01_00+b.a2_11_01_00
                    +b.a2_12_01_00+b.a2_13_01_00+b.a2_17_01_00+b.a4_01_01_00+b.a4_05_02_00+b.a4_02_01_00
                    +b.a4_02_02_00+b.a4_03_01_00+b.a4_05_01_00+b.a4_08_06_00+b.a4_06_01_00+b.a4_06_02_00
                    +b.a4_07_01_00+b.a4_08_01_00+b.a4_08_02_00+b.a4_08_03_00+b.a4_08_04_00+b.a4_08_05_00),0) 
                    as real_spj from map_neraca_konsol_$bulanctk b where kode='122'
) i
where map_neraca_konsol_$bulanctk.kode = '124'");      

					
			$idx=0;			
			$query = $this->db->query(" SELECT b.kode,b.uraian,b.seq,b.seq2,b.parent,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_02_02_00
                    ,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00,b.a4_07_01_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                    ,isnull(b.eliminasi_debet,0) as eliminasi_debet,isnull(b.eliminasi_kredit,0) as eliminasi_kredit 
                    FROM map_neraca_konsol_$bulanctk b ORDER BY b.urut ");  
			foreach($query->result_array() as $res){
				$idx++;
				$no=$res['kode'];
				$uraian=$res['uraian'];
				$seq=$res['seq'];
                $seq2=$res['seq2'];
				$parent=$res['parent'];
				$bold=$res['bold'];
                $n1=$res['a1_01_01_00'];$n2=$res['a1_02_01_00'];$n3=$res['a1_03_01_00'];
                $n4=$res['a1_04_01_00'];$n5=$res['a1_05_01_00'];$n6=$res['a1_05_02_00'];
                $n7=$res['a1_05_03_00'];$n8=$res['a1_06_01_00'];$n9=$res['a2_02_01_00'];
                $n10=$res['a2_03_01_00'];$n11=$res['a2_05_01_00'];$n12=$res['a2_06_01_00'];
                $n13=$res['a2_09_01_00'];$n14=$res['a2_10_01_00'];$n15=$res['a2_11_01_00'];
                $n16=$res['a2_12_01_00'];$n17=$res['a2_13_01_00'];$n18=$res['a2_17_01_00'];
                $n19=$res['a4_01_01_00'];$n20=$res['a4_02_01_00'];$n21=$res['a4_02_02_00'];
                $n22=$res['a4_03_01_00'];$n23=$res['a4_05_01_00'];$n24=$res['a4_05_02_00'];
                $n25=$res['a4_06_01_00'];$n26=$res['a4_06_02_00'];$n27=$res['a4_07_01_00'];
                $n28=$res['a4_08_01_00'];$n29=$res['a4_08_02_00'];$n30=$res['a4_08_03_00'];
                $n31=$res['a4_08_04_00'];$n32=$res['a4_08_05_00'];$n33=$res['a4_08_06_00'];
                $ndebet=$res['eliminasi_debet'];
				$nkredit=$res['eliminasi_kredit'];
								
				//$map=$res['map_skpd'];
				//$nilai_pemkot_lalu=$res['nilai_lalu_pemkot'];													 	
				 
				//$nilai_pemkot = $n1 + $n2 + $n3 + $n4 + $n5 + $n6 + $n7 + $n8 + $n9 + $n10 + $n11 + $n12 + $n13 + $n14 + $n15 + $n16 + $n17 + $n18 + $n19 + $n20 + $n21 + $n22 + $n23 + $n24 + $n25 + $n26 + $n27 + $n28 + $n29 + $n30 + $n31 + $n32 + $n33 + $n34 + $n35 + $n36 + $n37 - $ndebet - $nkredit;					
				$nilai_pemkot = $n1 + $n2 + $n3 + $n4 + $n5 + $n6 + $n7 + $n8 + $n9 + $n10 + $n11 + $n12 + $n13 + $n14 + $n15 + $n16 + $n17 + $n18 + $n19 + $n20 + $n21 + $n22 + $n23 + $n24 + $n25 + $n26 + $n27 + $n28 + $n29 + $n30 + $n31 + $n32 + $n33 ;
            	//if (trim($parent)=='') $parent='xxx';

				
				if($seq2=='2'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n1,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n2,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n3,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n4,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n5,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n6,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n7,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n8,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n9,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n10,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n11,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n12,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n13,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n14,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n15,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n16,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n17,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n18,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n19,2).'</TD>                            
							<TD width="15%" align="right" >'.number_format($n20,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n21,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n22,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n23,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n24,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n25,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n26,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n27,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n28,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n29,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n30,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n31,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n32,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n33,2).'</TD>							
						 </TR>';
				}else if($seq2=='4'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</b></TD>							
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n1,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n2,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n3,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n4,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n5,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n6,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n7,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n8,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n9,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n10,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n11,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n12,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n13,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n14,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n15,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n16,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n17,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n18,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n19,2).'</TD>                            
							<TD width="15%" align="right" >'.number_format($n20,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n21,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n22,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n23,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n24,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n25,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n26,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n27,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n28,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n29,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n30,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n31,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n32,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n33,2).'</TD>							
						 </TR>';

				}else if($seq2=='5'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>                            
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>							
						 </TR>';

				}else if($seq2=='6'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($nilai_pemkot,2).'</b></TD>
							<TD width="15%" align="right" >'.number_format($n1,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n2,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n3,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n4,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n5,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n6,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n7,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n8,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n9,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n10,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n11,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n12,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n13,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n14,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n15,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n16,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n17,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n18,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n19,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n20,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n21,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n22,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n23,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n24,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n25,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n26,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n27,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n28,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n29,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n30,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n31,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n32,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n33,2).'</TD>						
						 </TR>';

				}else if($seq2==''){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ></b></TD>							
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>                            
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>							
						 </TR>';

				}				
			}
			$juduln="Neraca_Gab_SKPD";
			$data['prev']= $cRet;    
            
            $cRet .='</TABLE>';		 			
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');		
			}else if($cetak=='2'){
			     
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $juduln.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);						
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}		    
	}

   


     function skpd_kolom3($kd_skpd="")
        {
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_skpd,kd_skpd_field FROM ms_konsol where kd_skpd='$kd_skpd'";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {

            $result[] = array('id' => $ii, 
            'kd_skpd' => $resulte['kd_skpd'], 
            'kd_skpd_field' => $resulte['kd_skpd_field'] );
            $ii++;
        }

        echo json_encode($result);
    }


    function posting_lo_kolom(){
        $thi=$this->session->userdata('pcThang');
        $thz=$thi-1;
        $skpd2 	  = $this->input->post('skpd');
        $kolom2   = $this->input->post('kolom');
        $vbulan2  = $this->input->post('bulan');
        $sql ="      update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)='811' and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi   
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '3'
                    
                    --412
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)='812' and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi   
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '4'
                    
                    --413
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)='813' and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '5'
                    
                    --414
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)='814' and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '6'
                    
                    --41
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('811','812','813','814') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi  
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '7'
                    
                    --42
                    --42101
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,5)in ('82101') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '11'
                    
                    --'42102'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,5)in ('82102') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '12'
                    
                    --'42103'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,5)in ('82103') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '13'
                    
                    --'42104'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,5)in ('82104') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi  
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '14'
                    
                    --'421'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('821') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi  
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '15'
                    
                    --'42201'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,5)in ('82201') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi  
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '18'
                    
                    --'42203'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,5)in ('82203') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi  
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '19'
                    
                    --'422'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('822') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi    
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '20'
                    
                    --'42301'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,5)in ('82301') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi    
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '23'
                    
                    --'42302'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,5)in ('82302') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi      
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '24'
                    
                    --'423'
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('823') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '25'
                    
                    --6
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,5)in ('82401') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '28'
                    
                    --6total
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('824') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '29'
                    
                    --total pendapatan transfer
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('821','822','823','824') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '30'
                    
                    --33
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('831') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '33'
                    
                    --34
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('833') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '34'
                    
                    --35
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('831','833') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '35'
                    
                    --36 total pendapatan
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('811','812','813','814','821','822','823','824','831','833') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '36'
                    
                    --BEBAN
                    --Operasi
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('911') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '40'
                    
                    --barang jasa
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('912') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '41'
                    
                    --bunga
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('913') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '42'
                    
                    --subsidi
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('914') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '43'
                    
                    --hibah
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('915') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '44'
                    
                    --bansos
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('916') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '45'
                    
                    --penyusutan
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('917') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '46'
                    
                    --penyisihan
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('918') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '461'
                    
                    --beban lain
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('919') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '47'
                    
                    --total operasi
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('911','912','913','914','915','916','917','918','919') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '48'
                    
                    
                    --Beban transfer
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('921') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '51'
                    
                    --pendapatan lainnya
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('922') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '52'
                    
                    --keuangan pemerintah
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('923') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '53'
                    
                    --keuangan ke desa
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('924') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '54'
                    
                    --keuangan lainnya
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('925') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '55'
                    
                    --Otonomi Khusus
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('926') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '56'
                    
                    --Jumlah Beban Transfer
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('921','922','923','924','925','926') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '57'
                    
                    --Total Beban 
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('911','912','913','914','915','916','917','918','919','921','922','923','924','925','926') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '58'
                    
                    --SURPLUS/DEFISIT 
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as real_spj from (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as kredit,0 as debet from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3) in ('811','812','813','814','821','822','823','824','831','833') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi  
                    UNION
                    select 0 as kredit,isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as debet from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3) in ('911','912','913','914','915','916','917','918','919','921','922','923','924','925','926') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                    ) v 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '60'
                    
                    
                    --SURPLUS NON OPERASIONAL
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('841') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '64'
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('842') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '65'
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('843') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '66'
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('841','842','843') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '67'
                    
                    
                    --DEFISIT NON OPERASIONAL
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('931') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '70'
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('932') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '71'
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('933') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '72'
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('931','932','933') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '73'
                    
                    --JUMLAH SURPLUS/DEFISIT DARI KEGIATAN NON OPERASIONAL 
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as real_spj from (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as kredit,0 as debet from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3) in ('841','842','843') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi  
                    UNION
                    select 0 as kredit,isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as debet from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3) in ('931','932','933') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi
                    ) v
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '74'
                    
                    --SURPLUS/DEFISIT SEBELUM POS LUAR BIASA 
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(v.surplus_keg),0)+isnull(sum(v.surplusnonkeg),0) as real_spj from (
                    select isnull(sum($kolom2),0) as surplus_keg,0 as surplusnonkeg from map_lo_konsol_$vbulan2 where nor='60' 
                    UNION
                    select 0 as surplus_keg,isnull(sum($kolom2),0) as surplusnonkeg from map_lo_konsol_$vbulan2 where nor='74' 
                    ) v
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '76'
                    
                    --PENDAPATAN LUAR BIASA
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('851') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '80'
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('851') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '81'
                    
                    --BEBAN LUAR BIASA
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('941') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '84'
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0)  as real_spj from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('941') and left(b.kd_skpd,7) = left('$skpd2',7) and 
                    month(b.tgl_voucher)<=$vbulan2 and year(b.tgl_voucher)=$thi 
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '85'
                    
                    --JUMLAH POS lUAR BIASA
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(v.surplus_keg),0)-isnull(sum(v.surplusnonkeg),0) as real_spj from (
                    select isnull(sum($kolom2),0) as surplus_keg,0 as surplusnonkeg from map_lo_konsol_$vbulan2 where nor='81' 
                    UNION
                    select 0 as surplus_keg,isnull(sum($kolom2),0) as surplusnonkeg from map_lo_konsol_$vbulan2 where nor='85' 
                    ) v
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '86'
                    
                    --JUMLAH POS lUAR BIASA
                    
                        update map_lo_konsol_$vbulan2 set $kolom2=i.real_spj		
                     
                    from 
                    (
                    select isnull(sum(v.surplus_keg),0)+isnull(sum(v.surplusnonkeg),0) as real_spj from (
                    select isnull(sum($kolom2),0) as surplus_keg,0 as surplusnonkeg from map_lo_konsol_$vbulan2 where nor='76' 
                    UNION
                    select 0 as surplus_keg,isnull(sum($kolom2),0) as surplusnonkeg from map_lo_konsol_$vbulan2 where nor='86' 
                    ) v
                    ) i
                    where map_lo_konsol_$vbulan2.nor = '88' ";
                $asg = $this->db->query($sql);
		          echo '1';
    

}

       function rpt_lo_konsol_skpd($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" >PEMERINTAH KABUPATEN SANGGAU</TD>
					</TR>
					<TR>
						<TD align="center" >REKON LO PER SKPD</TD>
					</TR>
					<TR>
						<TD align="center" >PER '.$arraybulan[$bulanctk].' '.$thi.'</TD>
					</TR>
					</TABLE><br>';

            	$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center"  bgcolor="#CCCCCC" >NO</TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC">URAIAN</TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC">PEMKOT</TD>
                        <TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENDIDIKAN DAN KEBUDAYAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KESEHATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PEKERJAAN UMUM DAN PENATAAN RUANG</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERUMAHAN RAKYAT DAN KAWASAN PEMUKIMAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SATUAN POLISI PAMONG PRAJA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANGGULANGAN KEBAKARAN DAN BENCANA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KANTOR KESATUAN BANGSA DAN SOSIAL POLITIK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS SOSIAL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENGENDALIAN PENDUDUK, KB, PEMBERDAYAAN PEREMPUAN DAN PERLINDUNGAN ANAK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PANGAN, PERTANIAN DAN PERIKANAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS LINGKUNGAN HIDUP</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPENDUDUKAN DAN PENCATATAN SIPIL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERHUBUNGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOMUNIKASI INFORMATIKA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOPERASI, USAHA MIKRO DAN PERDAGANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANAMAN MODAL, TENAGA KERJA DAN PELAYANAN TERPADU SATU PINTU</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPEMUDAAN, OLAHRAGA DAN PARIWISATA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERPUSTAKAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN PERENCANAAN PEMBANGUNAN DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >PPKD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEUANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEPEGAWAIAN DAN PENGEMBANGAN SUMBER DAYA MANUSIA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DEWAN PERWAKILAN RAKYAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DPRD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEPALA DAERAH DAN WAKIL KEPALA DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >INSPEKTORAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TENGGARA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK SELATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TIMUR</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK KOTA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK BARAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK UTARA</TD>
					 </TR>';				
				
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.seq,b.parent,b.bold,
                     b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_05_02_00,b.a4_02_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_08_06_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_07_01_00,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00
                     FROM map_lo_konsol_$bulanctk b ORDER BY b.urut ");  
			foreach($query->result_array() as $res){
				$idx++;
				$no=$res['nor'];
				$uraian=$res['uraian'];
				$seq=$res['seq'];
                $parent=$res['parent'];
				$bold=$res['bold'];
                $n1=$res['a1_01_01_00'];$n2=$res['a1_02_01_00'];$n3=$res['a1_03_01_00'];
                $n4=$res['a1_04_01_00'];$n5=$res['a1_05_01_00'];$n6=$res['a1_05_02_00'];
                $n7=$res['a1_05_03_00'];$n8=$res['a1_06_01_00'];$n9=$res['a2_02_01_00'];
                $n10=$res['a2_03_01_00'];$n11=$res['a2_05_01_00'];$n12=$res['a2_06_01_00'];
                $n13=$res['a2_09_01_00'];$n14=$res['a2_10_01_00'];$n15=$res['a2_11_01_00'];
                $n16=$res['a2_12_01_00'];$n17=$res['a2_13_01_00'];$n18=$res['a2_17_01_00'];
                $n19=$res['a4_01_01_00'];$n20=$res['a4_02_01_00'];$n21=$res['a4_02_02_00'];
                $n22=$res['a4_03_01_00'];$n23=$res['a4_05_01_00'];$n24=$res['a4_05_02_00'];
                $n25=$res['a4_06_01_00'];$n26=$res['a4_06_02_00'];$n27=$res['a4_07_01_00'];
                $n28=$res['a4_08_01_00'];$n29=$res['a4_08_02_00'];$n30=$res['a4_08_03_00'];
                $n31=$res['a4_08_04_00'];$n32=$res['a4_08_05_00'];$n33=$res['a4_08_06_00'];					
				//$map=$res['map_skpd'];
				//$nilai_pemkot_lalu=$res['nilai_lalu_pemkot'];													 	
				 
				$nilai_pemkot = $n1 + $n2 + $n3 + $n4 + $n5 + $n6 + $n7 + $n8 + $n9 + $n10 + $n11 + $n12 + $n13 + $n14 + $n15 + $n16 + $n17 + $n18 + $n19 + $n20 + $n21 + $n22 + $n23 + $n24 + $n25 + $n26 + $n27 + $n28 + $n29 + $n30 + $n31 + $n32 + $n33 ;					
				//if (trim($parent)=='') $parent='xxx';

				
				if($bold=='3'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>                            
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>								
						 </TR>';
				}else if($bold=='4'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($nilai_pemkot,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n1,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n2,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n3,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n4,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n5,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n6,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n7,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n8,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n9,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n10,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n11,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n12,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n13,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n14,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n15,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n16,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n17,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n18,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n19,2).'</TD>                            
							<TD width="15%" align="right" >'.number_format($n20,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n21,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n22,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n23,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n24,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n25,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n26,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n27,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n28,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n29,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n30,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n31,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n32,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n33,2).'</TD>						
						 </TR>';

				}else if($bold=='1' || $bold=='2'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>                            
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>						
						 </TR>';

				}else if($bold=='5'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($nilai_pemkot,2).'</b></TD>
							<TD width="15%" align="right" >'.number_format($n1,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n2,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n3,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n4,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n5,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n6,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n7,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n8,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n9,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n10,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n11,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n12,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n13,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n14,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n15,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n16,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n17,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n18,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n19,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n20,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n21,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n22,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n23,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n24,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n25,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n26,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n27,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n28,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n29,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n30,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n31,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n32,2).'</TD>
							<TD width="15%" align="right" >'.number_format($n33,2).'</TD>					
						 </TR>';

				}else if($bold=='0' ){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ></b></TD>							
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>                            
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>						
						 </TR>';

				}				
			}
			
			$cRet .='</TABLE>';		 			
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');		
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}		    
	}

     function cetak_lo_konsol_gab_real($bulanctk='',$cetak='',$ttd='',$tanggal_ttd=''){
	        
			$thi=$this->session->userdata('pcThang');
			$thz=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
            $cRet ='<TABLE style="border-collapse:collapse; font-size:12px" font-family: Bookman Old Style; width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="left" >LAMPIRAN III &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/> PERATURAN DAERAH KABUPATEN SANGGAU <br/> 
                        NOMOR &nbsp;&nbsp;&nbsp;&nbsp; TAHUN 2017 <br/>TENTANG PERTANGGUNGJAWABAN PELAKSANAAN <br/> ANGGARAN PENDAPATAN DAN BELANJA DAERAH<br/>KABUPATEN SANGGAU TAHUN ANGGARAN 2017
                        </TD>
					</TR>
                    <TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="center" ><b>&nbsp;</TD>
					</TR>
					</TABLE><br/>
                    
			<TABLE width="100%">
					<TR>
						<TD align="center" ><b>PEMERINTAH KABUPATEN SANGGAU</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>LAPORAN OPERASIONAL</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>PER '.$arraybulan[$bulanctk].' '.$thi.'</b></TD>
					</TR>
					</TABLE><br>';

                
			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC"><b>NO</b></TD>
						<TD width="45%" align="center" bgcolor="#CCCCCC"><b>URAIAN</b></TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>TAHUN '.$thi.'</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>TAHUN '.$thz.'</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>KENAIKAN <br/>(PENURUNAN)</b></TD>	
                        <TD width="5%" align="center" bgcolor="#CCCCCC"><b>(%)</b></TD>					
					 </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.parent,b.uraian,b.kode_1,b.kode,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_05_02_00,b.a4_02_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_08_06_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_07_01_00,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00
                    FROM map_lo_konsol_$bulanctk b order by cast(b.urut as int)");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
				$parent=$res->parent;
				//$parent=$res['parent'];
				$bold=$res->bold;
                $n1=$res->a1_01_01_00;$n2=$res->a1_02_01_00;$n3=$res->a1_03_01_00;
                $n4=$res->a1_04_01_00;$n5=$res->a1_05_01_00;$n6=$res->a1_05_02_00;
                $n7=$res->a1_05_03_00;$n8=$res->a1_06_01_00;$n9=$res->a2_02_01_00;
                $n10=$res->a2_03_01_00;$n11=$res->a2_05_01_00;$n12=$res->a2_06_01_00;
                $n13=$res->a2_09_01_00;$n14=$res->a2_10_01_00;$n15=$res->a2_11_01_00;
                $n16=$res->a2_12_01_00;$n17=$res->a2_13_01_00;$n18=$res->a2_17_01_00;
                $n19=$res->a4_01_01_00;$n20=$res->a4_02_01_00;$n21=$res->a4_02_02_00;
                $n22=$res->a4_03_01_00;$n23=$res->a4_05_01_00;$n24=$res->a4_05_02_00;
                $n25=$res->a4_06_01_00;$n26=$res->a4_06_02_00;$n27=$res->a4_07_01_00;
                $n28=$res->a4_08_01_00;$n29=$res->a4_08_02_00;$n30=$res->a4_08_03_00;
                $n31=$res->a4_08_04_00;$n32=$res->a4_08_05_00;$n33=$res->a4_08_06_00;														
				
                //$total_ppkd=$nl20;
                $total_pemkot= $n1 + $n2 + $n3 + $n4 + $n5 + $n6 + $n7 + $n8 + $n9 + $n10 + $n11 + $n12 + $n13 + $n14 + $n15 + $n16 + $n17 + $n18 + $n19 + $n20 + $n21 + $n22 + $n23 + $n24 + $n25 + $n26 + $n27 + $n28 + $n29 + $n30 + $n31 + $n32 + $n33 ;
                
                //$total_pemkot = $total_ppkd + $total_skpd;
				//kode1				
                $kode = $res->kode;
				$kode_1=trim($res->kode_1);				
				if ($kode_1=="") $kode_1="'xxx'";				
				
                if($parent=="8"){
                    $normal = "kredit-debet";
                }else{
                    $normal = "debet-kredit";
                }
			    
                $cek_nilai = $this->db->query("SELECT SUM($normal) as nilai_lalu FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,$kode) in ($kode_1) and year(tgl_voucher)='$thz'")->row();
                
                $nil_lalu = $cek_nilai->nilai_lalu;
                $real_nilai = $total_pemkot - $nil_lalu;
                
                    if ($real_nilai < 0){
                    	$lo0="("; $real_nilaix=$real_nilai*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai; $lo00="";}
                    
					if( $nil_lalu=='' or $nil_lalu==0){
					$persen1 = '0.00';
					}else{
					$persen1 = ($real_nilai/$nil_lalu)*100;					
                    }
                    
               	if($bold=='4'){
				$cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="45%" align="left" >&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nil_lalu,2).'</TD>
							<TD width="15%" align="right" >'.number_format($real_nilai,2).'</TD>
                            <TD width="5%" align="right" >'.number_format($persen1,2).'</TD>
						</TR>';
				}else if($bold=='2'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="45%" align="left" ><b>'.$uraian.'</b></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>                            
							<TD width="5%" align="right" ></TD>
							</TR>';
				}else if($bold=='5'){
				    
                        if($no=="60"){
                            $cek_nil = $this->db->query("select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as nilai_lalu from (
                    select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as kredit,0 as debet from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('811','812','813','814','821','822','823','824','831','833') 
                    and year(b.tgl_voucher)='$thz'  
                    UNION
                    select 0 as kredit,isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as debet from trdju_pkd a 
                    left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                    where left(a.kd_rek5,3)in ('911','912','913','914','915','916','917','918','919','921','922','923','924','925','926') 
                    and year(b.tgl_voucher)='$thz') v  ")->row();
                    
                    $nilai_surplus_lalu = $cek_nil->nilai_lalu;   
                    $real_nilai_suplus = $total_pemkot - $nilai_surplus_lalu;
                    if ($real_nilai_suplus < 0){
                    	$lo0="("; $real_nilaix=$real_nilai_suplus*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai_suplus; $lo00="";}
                    
					if( $nilai_surplus_lalu=='' or $nilai_surplus_lalu==0){
					$persen1_lalu = '0.00';
					}else{
					$persen1_lalu = ($real_nilai_suplus/$nilai_surplus_lalu)*100;					
                    }
                            
                            $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="45%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nilai_surplus_lalu,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($real_nilai_suplus,2).'</b></TD>                            
							<TD width="5%" align="right" ><b>'.number_format($persen1_lalu,2).'</b></TD>
						    </TR>';
                            
                        }else if($no=="74"){
                         $cek_nil = $this->db->query("select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as nilai_lalu from (
                            select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as kredit,0 as debet from trdju_pkd a 
                            left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                            where left(a.kd_rek5,3) in ('841','842','843') 
                            and year(b.tgl_voucher)='$thz'  
                            UNION
                            select 0 as kredit,isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as debet from trdju_pkd a 
                            left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
                            where left(a.kd_rek5,3) in ('931','932','933') 
                            and year(b.tgl_voucher)='$thz' ) v")->row();
                    
                    $nilai_surpluskeg_lalu = $cek_nil->nilai_lalu;   
                    $real_nilaikeg_suplus = $total_pemkot - $nilai_surpluskeg_lalu;
                    if ($real_nilai_suplus < 0){
                    	$lo0="("; $real_nilaix=$real_nilaikeg_suplus*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilaikeg_suplus; $lo00="";}
                    
					if( $nilai_surpluskeg_lalu=='' or $nilai_surpluskeg_lalu==0){
					$persen1keg_lalu = '0.00';
					}else{
					$persen1keg_lalu = ($real_nilaikeg_suplus/$nilai_surpluskeg_lalu)*100;					
                    }
                            
                            $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="45%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nilai_surpluskeg_lalu,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($real_nilaikeg_suplus,2).'</b></TD>                            
							<TD width="5%" align="right" ><b>'.number_format($persen1keg_lalu,2).'</b></TD>
						    </TR>';      
                                                  
                        }else if($no=="76"){
                         
                      
                    $hasil_nilaikeg_suplus = $nilai_surplus_lalu + $nilai_surpluskeg_lalu;
                    $real_milaikeg2_suplus = $total_pemkot - $hasil_nilaikeg_suplus;
                                        
                    if ($real_milaikeg2_suplus < 0){
                    	$lo0="("; $real_nilaix=$real_milaikeg2_suplus*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_milaikeg2_suplus; $lo00="";}
                    
					if( $hasil_nilaikeg_suplus=='' or $hasil_nilaikeg_suplus==0){
					$persen1keg2_lalu = '0.00';
					}else{
					$persen1keg2_lalu = ($real_milaikeg2_suplus/$hasil_nilaikeg_suplus)*100;					
                    }
                            
                            $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="45%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($hasil_nilaikeg_suplus,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($real_milaikeg2_suplus,2).'</b></TD>                            
							<TD width="5%" align="right" ><b>'.number_format($persen1keg2_lalu,2).'</b></TD>
						    </TR>';                            
                        
                        }else if($no=="88"){
                            
                            $hasil_nilaikeg_suplus = $nilai_surplus_lalu + $nilai_surpluskeg_lalu;
                    $real_milaikeg2_suplus = $total_pemkot - $hasil_nilaikeg_suplus;
                                        
                    if ($real_milaikeg2_suplus < 0){
                    	$lo0="("; $real_nilaix=$real_milaikeg2_suplus*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_milaikeg2_suplus; $lo00="";}
                    
					if( $hasil_nilaikeg_suplus=='' or $hasil_nilaikeg_suplus==0){
					$persen1keg2_lalu = '0.00';
					}else{
					$persen1keg2_lalu = ($real_milaikeg2_suplus/$hasil_nilaikeg_suplus)*100;					
                    }
                            
                            $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="45%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($hasil_nilaikeg_suplus,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($real_milaikeg2_suplus,2).'</b></TD>                            
							<TD width="5%" align="right" ><b>'.number_format($persen1keg2_lalu,2).'</b></TD>
						    </TR>';
                        
                        }else{
                            $cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="45%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nil_lalu,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($real_nilai,2).'</b></TD>                            
							<TD width="5%" align="right" ><b>'.number_format($persen1,2).'</b></TD>
						    </TR>';
                        }
                    
							
						
				}else{ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="45%" align="left" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>                            
							<TD width="5%" align="right" ><br/></TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';	
            
             if($ttd=="1"){
                
                $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient where kd_skpd='4.02.01.00'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                   
                }
                
                $sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab,pangkat FROM ms_ttd where kode='walikota'";
                 $sqlttd=$this->db->query($sqlttd1);
                 foreach ($sqlttd->result() as $rowttd)
                {
                    $nip=$rowttd->nip;                    
                    $nama= $rowttd->nm;
                    $jabatan  = $rowttd->jab;
                    $pangkat  = $rowttd->pangkat;
                }
                		
		$cRet .='<TABLE style="border-collapse:collapse; font-size:12px;font-family:Bookman Old Style" width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$daerah.', '.$this->tanggal_format_indonesia($tanggal_ttd).'</TD>
					</TR>
					
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$jabatan.'</b></TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>                    
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$nama.'</b></TD>
					</TR>
                    <!--<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$nip.'</TD>
					</TR>-->
					</TABLE><br/>';
            }
            	 
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            //$data['prev'] = $cRet;
				//echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}


    function cetak_lo_konsol_gab($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" ><b>PEMERINTAH KABUPATEN SANGGAU</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>LAPORAN OPERASIONAL (GABUNGAN)</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>PER '.$arraybulan[$bulanctk].' '.$thi.'</b></TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC"><b>NO</b></TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC"><b>URAIAN</b></TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>PPKD</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>SKPD</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>PEMKOT</b></TD>						
					 </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.kode_1,b.kode_2,b.bold,                    
                     b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_02_02_00
                    ,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_08_06_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_07_01_00,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00
                    FROM map_lo_konsol_$bulanctk b order by cast(b.urut as int)");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
				//$seq=$res['seq'];
				//$parent=$res['parent'];
				$bold=$res->bold;
                $n1=$res->a1_01_01_00;$n2=$res->a1_02_01_00;$n3=$res->a1_03_01_00;
                $n4=$res->a1_04_01_00;$n5=$res->a1_05_01_00;$n6=$res->a1_05_02_00;
                $n7=$res->a1_05_03_00;$n8=$res->a1_06_01_00;$n9=$res->a2_02_01_00;
                $n10=$res->a2_03_01_00;$n11=$res->a2_05_01_00;$n12=$res->a2_06_01_00;
                $n13=$res->a2_09_01_00;$n14=$res->a2_10_01_00;$n15=$res->a2_11_01_00;
                $n16=$res->a2_12_01_00;$n17=$res->a2_13_01_00;$n18=$res->a2_17_01_00;
                $n19=$res->a4_01_01_00;$n20=$res->a4_02_01_00;$n21=$res->a4_02_02_00;
                $n22=$res->a4_03_01_00;$n23=$res->a4_05_01_00;$n24=$res->a4_05_02_00;
                $n25=$res->a4_06_01_00;$n26=$res->a4_06_02_00;$n27=$res->a4_07_01_00;
                $n28=$res->a4_08_01_00;$n29=$res->a4_08_02_00;$n30=$res->a4_08_03_00;
                $n31=$res->a4_08_04_00;$n32=$res->a4_08_05_00;$n33=$res->a4_08_06_00;															
				
                $total_ppkd=$n20;
                $total_skpd=$n1+$n2+$n3+$n4+$n5+$n6+$n10+$n11+$n12+$n13+$n14+$n15+$n16+$n17+$n18+$n19+$n21+$n22+$n23+$n24+$n25+$n26+$n27+$n28+$n29+$n30+$n31+$n32+$n33;
                
                $total_pemkot = $total_ppkd + $total_skpd;
                
               	if($bold=='4'){
				$cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
						</TR>';
				}else if($bold=='2'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							</TR>';
				}else if($bold=='5'){ 				
						$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
						    </TR>';	
						
                    			
				}else{ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            //$data['prev'] = $cRet;
				//echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}
   
}


     function skpd_kolom4($kd_skpd="")
        {
        $lccr = $this->input->post('q');
        $sql = "SELECT kd_skpd,kd_skpd_field FROM ms_konsol where kd_skpd='$kd_skpd'";
        $query1 = $this->db->query($sql);
        $result = array();
        $ii = 0;
        foreach ($query1->result_array() as $resulte)
        {

            $result[] = array('id' => $ii, 
            'kd_skpd' => $resulte['kd_skpd'], 
            'kd_skpd_field' => $resulte['kd_skpd_field'] );
            $ii++;
        }

        echo json_encode($result);
    }


function jum_record_lpe_konsols(){
			$cbulan   = $this->input->post('bulan');
            $idx=0;
			$parent='0';
			$no='0';
			$skpd   = $this->input->post('skpd37');
            
            $cbulan<10 ? $xbulan = "$cbulan" : $xbulan=$cbulan;
            
			//$query_skpd = $this->db->query(" SELECT kd_skpd FROM ms_skpd where right(kd_skpd,2)='00'");  
			//foreach($query_skpd->result_array() as $res_skpd){
			//$skpd=trim($res_skpd['kd_skpd']);		
			
			$par1 = explode(".",$skpd);	
			$p1 = $par1[0];
			$p2 = $par1[1];
			$p3 = $par1[2];
			$p4 = $par1[3];
			
			$skdpd = "a".$p1."_".$p2."_".$p3."_".$p4; 
			$skdpd_lalu = "a".$p1."_".$p2."_".$p3."_".$p4."_lalu";
            
			$query = $this->db->query(" SELECT * FROM map_lpe_konsol_$xbulan");  			
			foreach($query->result_array() as $res){
			
				$no=$res['nor'];												
						$nilai=0;
						$q = $this->db->query(" update map_lpe_konsol_$xbulan set $skdpd='$nilai', $skdpd_lalu='$nilai' where nor='$no'");												 																							
				}			
			
            $query = $this->db->query(" SELECT * FROM map_lpe_rinci_$xbulan");  			
			foreach($query->result_array() as $res){
			
				$no=$res['nor'];												
						$nilai=0;
						$q = $this->db->query(" update map_lpe_rinci_$xbulan set $skdpd='$nilai', $skdpd_lalu='$nilai' where nor='$no'");												 																							
				}	
            
            $result[] = array(                       
                        'jumlah'  =>  '1',
                        );
        
		echo json_encode($result);
    	$query->free_result();
	  
	}
	
	function proses_mapping_lpe_konsols(){	    
        $cbulan   = $this->input->post('bulan');
		$thn_ang = $this->session->userdata('pcThang');
		$baris=$this->input->post('cbaris');
		$jumbaris=$this->input->post('jumbaris');
		$jeda=$this->input->post('sel');
		$lim=$this->input->post('lim');		
        $kodeskpd=$this->input->post('kodeskpd');		
        $id = $kodeskpd;
        
        $thn_ang_1= $thn_ang-1;   
        $cbulan<10 ? $xbulan = "$cbulan" : $xbulan=$cbulan;
		
        $par1 = explode(".",$kodeskpd);	
			$p1 = $par1[0];
			$p2 = $par1[1];
			$p3 = $par1[2];
			$p4 = $par1[3];
			
        $askdpd = "a".$p1."_".$p2."_".$p3."_".$p4; 
		$askdpd_lalu = "a".$p1."_".$p2."_".$p3."_".$p4."_lalu";       
        		
        $skpd = "AND kd_skpd='$kodeskpd'";
        $skpd1 = "AND b.kd_skpd='$kodeskpd'"; 
        
        
	$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('8') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo10= $this->db->query($sqllo10);
                    $pen8 = $querylo10->row();
                    $pen_lalu8 = $pen8->nilai;
                    $pen_lalu81= number_format($pen8->nilai,"2",",",".");
		
			$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<$thn_ang_1 and left(kd_rek5,1) in ('9') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo12= $this->db->query($sqllo12);
                    $bel10 = $querylo12->row();
                    $bel_lalu10 = $bel10->nilai;
                    $bel_lalu101= number_format($bel10->nilai,"2",",",".");
			
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5='3110101' and year(a.tgl_voucher)<$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_ll1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5='3110101' and year(a.tgl_voucher)<$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_ll2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5='3110101' and year(a.tgl_voucher)<$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll3  =$row003->thn_m1;
					}
					
			
			$query3 = $this->db->query(" SELECT isnull(SUM(a.debet),0) AS debet, isnull(SUM(a.kredit),0) AS kredit FROM trdju_pkd a INNER JOIN trhju_pkd b 
			ON a.no_voucher = b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(b.kd_skpd,7)=left('$id',7) AND a.kd_rek5='3110101' AND YEAR(b.tgl_voucher)<'$thn_ang'
			and b.tabel=1 and reev=0");  
	        foreach($query3->result_array() as $res2){
				 $debet=$res2['debet'];
				 $kredit=$res2['kredit'];
                 				 
			 }
			
			$sqlrkpp="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)<'$thn_ang_1' and left(kd_rek5,3) in ('313') and left(b.kd_skpd,7)=left('$id',7)";
                    $rkpp= $this->db->query($sqlrkpp);
                    $rkpp1 = $rkpp->row();
                    $rkpp_lalu = $rkpp1->nilai;
                    $rkpp_lalu1= number_format($rkpp1->nilai,"2",",",".");
			
		$real=$kredit-$debet+$pen_lalu8+$bel_lalu10+$lpe_ll1+$lpe_ll2+$lpe_ll3+$rkpp_lalu;

		$sqllo9="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<='$xbulan' and left(kd_rek5,1) in ('8') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<='$xbulan' and left(kd_rek5,1) in ('9') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select isnull(sum(debet-kredit),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    
					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    
			$sql_lalu = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//aba
                            
                    $hasil = $this->db->query($sql_lalu); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $lpe_lalu1  =$row001->thn_m1;
					}
				        
			$sqllpe_lalu1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $lpe_lalu2  =$row002->thn_m1;
					}					

			$sqllpe_lalu2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_lalu2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_lalu3  =$row003->thn_m1;
					}
            $sqllpe_ll31 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('31') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll31); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll31  =$row003->thn_m1;
					}
                    
            $sqllpe_ll32 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('32') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll32); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll32  =$row003->thn_m1;
					}
            $sqllpe_ll33 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('33') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll33); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll33  =$row003->thn_m1;
					}                       
            $sqllpe_ll34 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('34') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll34); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll34  =$row003->thn_m1;
					}
            $sqllpe_ll36 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('36') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll36); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll36  =$row003->thn_m1;
					}
            $sqllpe_ll38 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('38') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll38); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll38  =$row003->thn_m1;
					}                    
            $sqllpe_ll39 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('39') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll39); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll39  =$row003->thn_m1;
					}
            $sqllpe_ll40 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('40') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll40); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll40  =$row003->thn_m1;
					}
            $sqllpe_ll41 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('41') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll41); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll41  =$row003->thn_m1;
					}
            $sqllpe_ll42 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('42') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll42); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll42  =$row003->thn_m1;
					}
            $sqllpe_ll43 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('43') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll43); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll43  =$row003->thn_m1;
					}
            $sqllpe_ll44 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('44') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll44); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll44  =$row003->thn_m1;
					}
            $sqllpe_ll45 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('45') and kd_rek5='3110101' 
                    and year(a.tgl_voucher)=$thn_ang_1 and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe_ll45); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $lpe_ll45  =$row003->thn_m1;
					}
                                        			
			$sqlrkpp2="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)='$thn_ang_1' and left(kd_rek5,3) in ('313') and left(b.kd_skpd,7)=left('$id',7)";
                    $rkpp2= $this->db->query($sqlrkpp2);
                    $rkpp12 = $rkpp2->row();
                    $rkpp_lalu2 = $rkpp12->nilai;
                    $rkpp_lalu12= number_format($rkpp12->nilai,"2",",",".");
			
		$sal_awal	= $real + $surplus_lo_lalu3 + $lpe_lalu1 + $lpe_lalu2 + $lpe_lalu3 + $rkpp_lalu2;

            $sql = "select 5 nor,'SELISIH REVALUASI ASET TETAP' uraian,3 parent,25 seq,'413'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//aba
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row001)
                    {
                       $kd_rek   =$row001->nor ;
                       $parent   =$row001->parent;
                       $nama     =$row001->uraian;
                       $nilaiDR  =$row001->thn_m1;
					}
				        
			$sqllpe1 = "select 4 nor,'KOREKSI NILAI PERSEDIAAN' uraian,3 parent,20 seq,'412'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe1); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row002)
                    {
                       $kd_rek   =$row002->nor ;
                       $parent   =$row002->parent;
                       $nama     =$row002->uraian;
                       $nilailpe1  =$row002->thn_m1;
					}					

			$sqllpe2 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('3','31','32','33','34','36','38','39','40','41','42','43','44','45') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe2); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe2  =$row003->thn_m1;
					}
			
            //lpe rinci            
            $sqllpe31 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('31') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe31); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe31  =$row003->thn_m1;
					}
            
            $sqllpe32 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('32') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe32); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe32  =$row003->thn_m1;
					}
                    
            $sqllpe33 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('33') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe33); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe33  =$row003->thn_m1;
					}
             
             $sqllpe34 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('34') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe34); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe34  =$row003->thn_m1;
					}
             
             $sqllpe35 = "select 4 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('2','35') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe35); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe35  =$row003->thn_m1;
					}
                    
             $sqllpe36 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('36') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe36); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe36  =$row003->thn_m1;
					}
                    
             $sqllpe37 = "select 5 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('1','37') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe37); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe37  =$row003->thn_m1;
					}
                    
             $sqllpe38 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('38') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe38); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe38  =$row003->thn_m1;
					}
                    
             $sqllpe39 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('39') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe39); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe39  =$row003->thn_m1;
					}
                    
             $sqllpe40 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('40') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe40); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe40  =$row003->thn_m1;
					}
                    
             $sqllpe41 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('41') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe41); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe41  =$row003->thn_m1;
					}
                    
              $sqllpe42 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('42') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe42); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe42  =$row003->thn_m1;
					}
                    
               $sqllpe43 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('43') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe43); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe43  =$row003->thn_m1;
					}
                    
               $sqllpe44 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('44') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe44); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe44  =$row003->thn_m1;
					}
                    
              $sqllpe45 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('45') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe45); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe45  =$row003->thn_m1;
					}  
                    
              $sqllpe46 = "select 6 nor,'LAIN LAIN' uraian,3 parent,30 seq,'414'kode_1,isnull(sum(kredit-debet),0) thn_m1 from trhju_pkd a
					inner join trdju_pkd b on a.no_voucher=b.no_voucher and a.kd_skpd=b.kd_unit where  reev in ('46') and kd_rek5='3110101' and year(a.tgl_voucher)=$thn_ang and left(CONVERT(char(15),tgl_voucher, 112),6)<='$thn_ang$xbulan' and left(a.kd_skpd,7)=left('$id',7)";//Henri_TB
                            
                    $hasil = $this->db->query($sqllpe46); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row003)
                    {
                       $kd_rek   =$row003->nor ;
                       $parent   =$row003->parent;
                       $nama     =$row003->uraian;
                       $nilailpe46  =$row003->thn_m1;
					}                                                                                     

                                    
    		$sqlrkpp3="select isnull(sum(kredit-debet),0) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and month(tgl_voucher)<='$xbulan' and left(kd_rek5,3) in ('313') and left(b.kd_skpd,7)=left('$id',7)";
                    $rkpp3= $this->db->query($sqlrkpp3);
                    $rkpp13 = $rkpp3->row();
                    $rkpp = $rkpp13->nilai;
                    $rkpp1= number_format($rkpp13->nilai,"2",",",".");

        $sal_akhir=$sal_awal+$surplus_lo3+$nilaiDR+$nilailpe1+$nilailpe2+$rkpp;
        
        $rkskpd15=0;
  				
                 $askdpd = "a".$p1."_".$p2."_".$p3."_".$p4; 
		          $askdpd_lalu = "a".$p1."_".$p2."_".$p3."_".$p4."_lalu";
                
                     $sql = "SELECT * FROM map_lpe_konsol_$xbulan  ORDER BY seq";
                            
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row)
                    {
                      
                       $kd_rek   =$row->nor ;
                       $parent   =$row->parent;
                       $nama     =$row->uraian;
                                              
                      $xc_sal_awal = number_format($sal_awal,2);
                      $bnb_sal_awal = str_replace(',','',$xc_sal_awal); 
                      
                      $xc_real = number_format($real,2);
                      $bnb_real = str_replace(',','',$xc_real); 
                      
                      $xc_surplus_lo3 = number_format($surplus_lo3,2);
                      $bnb_surplus_lo3 = str_replace(',','',$xc_surplus_lo3); 
                      
                      $xc_surplus_lo_lalu3 = number_format($surplus_lo_lalu3,2);
                      $bnb_surplus_lo_lalu3 = str_replace(',','',$xc_surplus_lo_lalu3); 
                      
                      $xc_nilailpe1 = number_format($nilailpe1,2);
                      $bnb_nilailpe1 = str_replace(',','',$xc_nilailpe1); 
                      
                      $xc_lpe_lalu2 = number_format($lpe_lalu2,2);
                      $bnb_lpe_lalu2 = str_replace(',','',$xc_lpe_lalu2); 
                      
                      $xc_nilaiDR = number_format($nilaiDR,2);
                      $bnb_nilaiDR = str_replace(',','',$xc_nilaiDR); 
                      
                      $xc_lpe_lalu1 = number_format($lpe_lalu1,2);
                      $bnb_lpe_lalu1 = str_replace(',','',$xc_lpe_lalu1); 
                      
                      $xc_nilailpe2 = number_format($nilailpe2,2);
                      $bnb_nilailpe2 = str_replace(',','',$xc_nilailpe2); 
                      
                      $xc_lpe_lalu3 = number_format($lpe_lalu3,2);
                      $bnb_lpe_lalu3 = str_replace(',','',$xc_lpe_lalu3); 
                      
                      $xc_lpe_ll31 = number_format($lpe_ll31,2);
                      $bnb_lpe_ll31 = str_replace(',','',$xc_lpe_ll31);
                      
                      $xc_lpe_ll32 = number_format($lpe_ll32,2);
                      $bnb_lpe_ll32 = str_replace(',','',$xc_lpe_ll32);
                      
                      $xc_lpe_ll33 = number_format($lpe_ll33,2);
                      $bnb_lpe_ll33 = str_replace(',','',$xc_lpe_ll33);
                      
                      $xc_lpe_ll34 = number_format($lpe_ll34,2);
                      $bnb_lpe_ll34 = str_replace(',','',$xc_lpe_ll34);
                      
                      $xc_lpe_ll36 = number_format($lpe_ll36,2);
                      $bnb_lpe_ll36 = str_replace(',','',$xc_lpe_ll36);
                      
                      $xc_lpe_ll38 = number_format($lpe_ll38,2);
                      $bnb_lpe_ll38 = str_replace(',','',$xc_lpe_ll38);                      

                      $xc_lpe_ll39 = number_format($lpe_ll39,2);
                      $bnb_lpe_ll39 = str_replace(',','',$xc_lpe_ll39); 

                      $xc_lpe_ll40 = number_format($lpe_ll40,2);
                      $bnb_lpe_ll40 = str_replace(',','',$xc_lpe_ll40); 

                      $xc_lpe_ll41 = number_format($lpe_ll41,2);
                      $bnb_lpe_ll41 = str_replace(',','',$xc_lpe_ll41);

                      $xc_lpe_ll42 = number_format($lpe_ll42,2);
                      $bnb_lpe_ll42 = str_replace(',','',$xc_lpe_ll42);

                      $xc_lpe_ll43 = number_format($lpe_ll43,2);
                      $bnb_lpe_ll43 = str_replace(',','',$xc_lpe_ll43);

                      $xc_lpe_ll44 = number_format($lpe_ll44,2);
                      $bnb_lpe_ll44 = str_replace(',','',$xc_lpe_ll44);                      

                      $xc_lpe_ll45 = number_format($lpe_ll45,2);
                      $bnb_lpe_ll45 = str_replace(',','',$xc_lpe_ll45);

                      $xc_rkpp = number_format($rkpp,2);
                      $bnb_rkpp = str_replace(',','',$xc_rkpp); 
                      
                      $xc_rkpp_lalu2 = number_format($rkpp_lalu2,2);
                      $bnb_rkpp_lalu2 = str_replace(',','',$xc_rkpp_lalu2); 
                      
                      $xc_sal_akhir = number_format($sal_akhir,2);
                      $bnb_sal_akhir = str_replace(',','',$xc_sal_akhir); 
                      
                      $xc_sal_akhir = number_format($sal_akhir,2);
                      $bnb_sal_akhir = str_replace(',','',$xc_sal_akhir); 
                      
                      //rincian
                      $xc_nilailpe31 = number_format($nilailpe31,2);
                      $bnb_nilailpe31 = str_replace(',','',$xc_nilailpe31); 
                      
                      $xc_nilailpe32 = number_format($nilailpe32,2);
                      $bnb_nilailpe32 = str_replace(',','',$xc_nilailpe32); 
                      
                      $xc_nilailpe33 = number_format($nilailpe33,2);
                      $bnb_nilailpe33 = str_replace(',','',$xc_nilailpe33); 
                      
                      $xc_nilailpe34 = number_format($nilailpe34,2);
                      $bnb_nilailpe34 = str_replace(',','',$xc_nilailpe34); 
                      
                      $xc_nilailpe35 = number_format($nilailpe35,2);
                      $bnb_nilailpe35 = str_replace(',','',$xc_nilailpe35); 
                      
                      $xc_nilailpe36 = number_format($nilailpe36,2);
                      $bnb_nilailpe36 = str_replace(',','',$xc_nilailpe36); 
                      
                      $xc_nilailpe37 = number_format($nilailpe37,2);
                      $bnb_nilailpe37 = str_replace(',','',$xc_nilailpe37); 
                      
                      $xc_nilailpe38 = number_format($nilailpe38,2);
                      $bnb_nilailpe38 = str_replace(',','',$xc_nilailpe38); 
                      
                      $xc_nilailpe39 = number_format($nilailpe39,2);
                      $bnb_nilailpe39 = str_replace(',','',$xc_nilailpe39); 
                      
                      $xc_nilailpe40 = number_format($nilailpe40,2);
                      $bnb_nilailpe40 = str_replace(',','',$xc_nilailpe40); 
                      
                      $xc_nilailpe41 = number_format($nilailpe41,2);
                      $bnb_nilailpe41 = str_replace(',','',$xc_nilailpe41); 
                      
                      $xc_nilailpe42 = number_format($nilailpe42,2);
                      $bnb_nilailpe42 = str_replace(',','',$xc_nilailpe42); 
                      
                      $xc_nilailpe43 = number_format($nilailpe43,2);
                      $bnb_nilailpe43 = str_replace(',','',$xc_nilailpe43); 
                      
                      $xc_nilailpe44 = number_format($nilailpe44,2);
                      $bnb_nilailpe44 = str_replace(',','',$xc_nilailpe44); 
                      
                      $xc_nilailpe45 = number_format($nilailpe45,2);
                      $bnb_nilailpe45 = str_replace(',','',$xc_nilailpe45);                       
                       
					           switch ($kd_rek)
                                {
                                    case 1:                                    
                                             $this->db->query("update map_lpe_konsol_$xbulan set $askdpd='$bnb_sal_awal', $askdpd_lalu='$bnb_real' where nor='$kd_rek'");  
                                             $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_sal_awal', $askdpd_lalu='$bnb_real' where nor='$kd_rek'");                                                                                      
                                    break; 
                                    case 2:
                                             $this->db->query("update map_lpe_konsol_$xbulan set $askdpd='$bnb_surplus_lo3', $askdpd_lalu='$bnb_surplus_lo_lalu3' where nor='$kd_rek'");  
                                             $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_surplus_lo3', $askdpd_lalu='$bnb_surplus_lo_lalu3' where nor='$kd_rek'");                                                                                      
                                    break; 
                                    case 4: 
                                            $this->db->query("update map_lpe_konsol_$xbulan set $askdpd='$bnb_nilailpe1', $askdpd_lalu='$bnb_lpe_lalu2' where nor='$kd_rek'");
                                            
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe35', $askdpd_lalu= '$bnb_lpe_lalu2' where nor='$kd_rek' and kd_map='35'");                                                                                       
                                    break;
                                    case 5:
                                            $this->db->query("update map_lpe_konsol_$xbulan set $askdpd='$bnb_nilaiDR', $askdpd_lalu='$bnb_lpe_lalu1' where nor='$kd_rek'");                                              
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe37', $askdpd_lalu= '$bnb_lpe_lalu1' where nor='$kd_rek' and kd_map='37'");                                          
									break;
                                    case 6:
                                            $this->db->query("update map_lpe_konsol_$xbulan set $askdpd='$bnb_nilailpe2', $askdpd_lalu='$bnb_lpe_lalu3' where nor='$kd_rek'");
                                            //lpe rinci 
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe31', $askdpd_lalu='$bnb_lpe_ll31' where nor='$kd_rek' and kd_map='31'");                                              
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe32', $askdpd_lalu='$bnb_lpe_ll32' where nor='$kd_rek' and kd_map='32'"); 
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe33', $askdpd_lalu='$bnb_lpe_ll33' where nor='$kd_rek' and kd_map='33'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe34', $askdpd_lalu='$bnb_lpe_ll34' where nor='$kd_rek' and kd_map='34'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe36', $askdpd_lalu='$bnb_lpe_ll36' where nor='$kd_rek' and kd_map='36'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe38', $askdpd_lalu='$bnb_lpe_ll38' where nor='$kd_rek' and kd_map='38'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe39', $askdpd_lalu='$bnb_lpe_ll39' where nor='$kd_rek' and kd_map='39'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe40', $askdpd_lalu='$bnb_lpe_ll40' where nor='$kd_rek' and kd_map='40'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe41', $askdpd_lalu='$bnb_lpe_ll41' where nor='$kd_rek' and kd_map='41'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe42', $askdpd_lalu='$bnb_lpe_ll42' where nor='$kd_rek' and kd_map='42'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe43', $askdpd_lalu='$bnb_lpe_ll43' where nor='$kd_rek' and kd_map='43'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe44', $askdpd_lalu='$bnb_lpe_ll44' where nor='$kd_rek' and kd_map='44'");
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_nilailpe45', $askdpd_lalu='$bnb_lpe_ll45' where nor='$kd_rek' and kd_map='45'");                                         
                                    break;
                                    case 7:
                                            $this->db->query("update map_lpe_konsol_$xbulan set $askdpd='$bnb_rkpp', $askdpd_lalu='$bnb_rkpp_lalu2' where nor='$kd_rek'"); 
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_rkpp', $askdpd_lalu='$bnb_rkpp_lalu2' where nor='$kd_rek'");                                           
									break;
                                    case 8:
                                            $this->db->query("update map_lpe_konsol_$xbulan set $askdpd='$bnb_sal_akhir', $askdpd_lalu='$bnb_sal_awal' where nor='$kd_rek'");  
                                            $this->db->query("update map_lpe_rinci_$xbulan set $askdpd='$bnb_sal_akhir', $askdpd_lalu='$bnb_sal_awal' where nor='$kd_rek'");                                           
                                    break;                                    
                                }                        
                    }
                    
                    
                        
        
		echo '1';		
	}

 function cetak_lpe_gab_konsol_rinci($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" >PEMERINTAH KABUPATEN SANGGAU</TD>
					</TR>
					<TR>
						<TD align="center" >LAPORAN REKON LPE (GABUNGAN) PER SKPD</TD>
					</TR>
					<TR>
						<TD align="center" >PER '.$arraybulan[$bulanctk].' '.$thi.'</TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center"  bgcolor="#CCCCCC" >NO</TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC">URAIAN</TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC">PEMKOT</TD>
                        <TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENDIDIKAN DAN KEBUDAYAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KESEHATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PEKERJAAN UMUM DAN PENATAAN RUANG</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERUMAHAN RAKYAT DAN KAWASAN PEMUKIMAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SATUAN POLISI PAMONG PRAJA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANGGULANGAN KEBAKARAN DAN BENCANA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KANTOR KESATUAN BANGSA DAN SOSIAL POLITIK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS SOSIAL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENGENDALIAN PENDUDUK, KB, PEMBERDAYAAN PEREMPUAN DAN PERLINDUNGAN ANAK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PANGAN, PERTANIAN DAN PERIKANAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS LINGKUNGAN HIDUP</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPENDUDUKAN DAN PENCATATAN SIPIL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERHUBUNGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOMUNIKASI INFORMATIKA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOPERASI, USAHA MIKRO DAN PERDAGANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANAMAN MODAL, TENAGA KERJA DAN PELAYANAN TERPADU SATU PINTU</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPEMUDAAN, OLAHRAGA DAN PARIWISATA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERPUSTAKAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN PERENCANAAN PEMBANGUNAN DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >PPKD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEUANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEPEGAWAIAN DAN PENGEMBANGAN SUMBER DAYA MANUSIA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DEWAN PERWAKILAN RAKYAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DPRD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEPALA DAERAH DAN WAKIL KEPALA DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >INSPEKTORAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TENGGARA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK SELATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TIMUR</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK KOTA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK BARAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK UTARA</TD>
					 </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.a1_01_01_00,b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_02_02_00
                    ,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00,b.a4_07_01_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                     FROM map_lpe_rinci_$bulanctk b order by seq");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;															
				
                $total_pemkot=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl20+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
				if($no=='1' || $no=='2' || $no=='7' || $no=='8' || $no=='9'){
				        
                        $cRet .='<TR>
						    <TD width="5" align="center" ><b>'.$idx.'</TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33,2).'</TD>
						 </TR>';    
                        //}
                        
				}else if($no=='3'){ 
				    $cRet .='<TR>
							<TD width="5" align="center" ><b>'.$idx.'</TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</TD>
							<TD width="15%" align="right"><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
						 </TR>';
				}else{ 
			       $cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl1,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl2,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl3,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl4,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl5,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl6,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl7,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl8,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl9,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl10,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl11,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl12,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl13,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl14,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl15,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl16,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl17,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl18,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl19,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl20,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl21,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl22,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl23,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl24,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl25,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl26,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl27,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl28,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl29,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl30,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl31,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl32,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl33,2).'</TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				//$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            $data['prev'] = $cRet;
				echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}

    function cetak_lpe_gab_konsol($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" >PEMERINTAH KABUPATEN SANGGAU</TD>
					</TR>
					<TR>
						<TD align="center" >LAPORAN REKON LPE (GABUNGAN) PER SKPD</TD>
					</TR>
					<TR>
						<TD align="center" >PER '.$arraybulan[$bulanctk].' '.$thi.'</TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center"  bgcolor="#CCCCCC" >NO</TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC">URAIAN</TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC">PEMKOT</TD>
                        <TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENDIDIKAN DAN KEBUDAYAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KESEHATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PEKERJAAN UMUM DAN PENATAAN RUANG</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERUMAHAN RAKYAT DAN KAWASAN PEMUKIMAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SATUAN POLISI PAMONG PRAJA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANGGULANGAN KEBAKARAN DAN BENCANA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KANTOR KESATUAN BANGSA DAN SOSIAL POLITIK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS SOSIAL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENGENDALIAN PENDUDUK, KB, PEMBERDAYAAN PEREMPUAN DAN PERLINDUNGAN ANAK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PANGAN, PERTANIAN DAN PERIKANAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS LINGKUNGAN HIDUP</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPENDUDUKAN DAN PENCATATAN SIPIL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERHUBUNGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOMUNIKASI INFORMATIKA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOPERASI, USAHA MIKRO DAN PERDAGANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANAMAN MODAL, TENAGA KERJA DAN PELAYANAN TERPADU SATU PINTU</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPEMUDAAN, OLAHRAGA DAN PARIWISATA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERPUSTAKAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN PERENCANAAN PEMBANGUNAN DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >PPKD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEUANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEPEGAWAIAN DAN PENGEMBANGAN SUMBER DAYA MANUSIA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DEWAN PERWAKILAN RAKYAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DPRD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEPALA DAERAH DAN WAKIL KEPALA DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >INSPEKTORAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TENGGARA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK SELATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TIMUR</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK KOTA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK BARAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK UTARA</TD>
					 </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.a1_01_01_00,b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_02_02_00
                    ,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00,b.a4_07_01_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                     FROM map_lpe_konsol_$bulanctk b order by seq");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;
                
                $total_pemkot=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl20+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;                
                
				if($no=='1' || $no=='2' || $no=='7' || $no=='8' || $no=="9"){
				        

                            $cRet .='<TR>
						    <TD width="5" align="center" ><b>'.$idx.'</TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33,2).'</TD>
						 </TR>';    
                       // }
                                                
				}else if($no=='3'){ 
				    $cRet .='<TR>
							<TD width="5" align="center" ><b>'.$idx.'</TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
						 </TR>';
				}else{ 
			       $cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl1,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl2,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl3,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl4,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl5,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl6,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl7,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl8,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl9,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl10,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl11,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl12,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl13,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl14,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl15,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl16,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl17,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl18,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl19,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl20,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl21,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl22,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl23,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl24,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl25,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl26,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl27,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl28,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl29,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl30,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl31,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl32,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl33,2).'</TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				//$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            $data['prev'] = $cRet;
				echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}

    function cetak_lpe_gab_konsol_rinci2($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
            
        $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" >PEMERINTAH KABUPATEN SANGGAU</TD>
					</TR>
					<TR>
						<TD align="center" >LAPORAN LPE (GABUNGAN)</TD>
					</TR>
					<TR>
						<TD align="center" >PER '.$arraybulan[$bulanctk].' '.$thi.'</TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC">NO</TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC">URAIAN</TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC">PPKD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC">SKPD</TD>
					    <TD width="15%" align="center" bgcolor="#CCCCCC">PEMKOT</TD>						
                     </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.seq,b.a1_01_01_00,b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_02_02_00
                    ,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00,b.a4_07_01_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                     FROM map_lpe_rinci_$bulanctk b order by seq");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;															
				$seq=$res->seq;
                
                $ppkd = $nl20;
                $total_skpd=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                $total_pemkot = $total_skpd+$ppkd;
                
				if($no=='1' || $no=='2' || $no=='7' || $no=='8' || $no=='9'){
				    
                        $cRet .='<TR>
						    <TD width="5" align="center" ><b>'.$idx.'</TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" ><b>'.number_format($ppkd,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd,2).'</TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</TD>
						 </TR>';    

                    
				}else if($no=='3'){ 
				    $cRet .='<TR>
							<TD width="5" align="center" ><b>'.$idx.'</TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>
							<TD width="15%" align="right" ><b></TD>							
						 </TR>';
				}else{ 
			       $cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
				        </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            //$data['prev'] = $cRet;
				//echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}

 function cetak_lpe_gab_konsol_pemkot1($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" ><b>PEMERINTAH KABUPATEN SANGGAU</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>LAPORAN LPE (GABUNGAN)</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>PER '.$arraybulan[$bulanctk].' '.$thi.'</b></TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC" ><b>NO</b></TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC"><b>URAIAN</b></TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>PPKD</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>SKPD</b></TD>
					    <TD width="15%" align="center" bgcolor="#CCCCCC"><b>PEMKOT</b></TD>						
                     </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.seq,b.uraian,b.a1_01_01_00,b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_02_02_00
                    ,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00,b.a4_07_01_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                     FROM map_lpe_konsol_$bulanctk b order by seq");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;															
				$seq=$res->seq;
                
                $ppkd = $nl20;
                $total_skpd=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
                $total_pemkot = $total_skpd+$ppkd;
                
				if($no=='1' || $no=='2' || $no=='7' || $no=='8' || $no=='9'){
				    
                            $cRet .='<TR>
						    <TD width="5" align="center" > <b>'.$idx.'</b></TD>
							<TD width="50%" align="left" ><b> &nbsp;'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($ppkd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
				            </TR>';    
                        //}
                    
				        
				}else if($no=='3'){
				    $sql_ = $this->db->query("SELECT SUM(b.a1_01_01_00+b.a1_02_01_00+b.a1_03_01_00+b.a1_04_01_00+b.a1_05_01_00
                    +b.a1_05_02_00+b.a1_05_03_00+b.a1_06_01_00+b.a2_02_01_00+ b.a2_03_01_00+b.a2_05_01_00+b.a2_06_01_00+
                b.a2_09_01_00+b.a2_10_01_00+b.a2_11_01_00+b.a2_12_01_00+b.a2_13_01_00+b.a2_17_01_00+b.a4_01_01_00+
                b.a4_02_02_00+b.a4_03_01_00+b.a4_05_01_00+b.a4_05_02_00+b.a4_06_01_00+b.a4_06_02_00+b.a4_07_01_00+
                b.a4_08_01_00+b.a4_08_02_00+b.a4_08_03_00+b.a4_08_04_00+b.a4_08_05_00+b.a4_08_06_00) skpd, 
                SUM(b.a4_02_01_00) as ppkd FROM map_lpe_konsol_$bulanctk b WHERE parent='3'")->row();
                    $skpd_ = $sql_->skpd;
                    $ppkd_ = $sql_->ppkd; 
                    
				   $cRet .='<TR>
						    <TD width="5" align="center" > <b>'.$idx.'</b></TD>
							<TD width="50%" align="left" ><b> &nbsp;'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($ppkd_,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($skpd_,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($skpd_+$ppkd_,2).'</b></TD>
				            </TR>';
				}else{ 
			       $cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>							
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');		
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	} 

    function cetak_lpe_gab_konsol_rinci_lalu($bulanctk='',$cetak='',$ttd='',$tanggal_ttd=''){
	        
			$thi=$this->session->userdata('pcThang');
			$thz=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE style="border-collapse:collapse; font-size:12px" font-family: Bookman Old Style; width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="left" >LAMPIRAN V &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/> PERATURAN DAERAH KABUPATEN SANGGAU <br/> 
                        NOMOR &nbsp;&nbsp;&nbsp;&nbsp; TAHUN 2017 <br/>TENTANG PERTANGGUNGJAWABAN PELAKSANAAN <br/> ANGGARAN PENDAPATAN DAN BELANJA DAERAH<br/>KABUPATEN SANGGAU TAHUN ANGGARAN 2017
                        </TD>
					</TR>
                    <TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="center" ><b>&nbsp;</TD>
					</TR>
					</TABLE><br/>
                    
                    <TABLE width="100%">
					<TR>
						<TD align="center" ><b>PEMERINTAH KABUPATEN SANGGAU</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>LAPORAN LPE</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>PER '.$arraybulan[$bulanctk].' '.$thi.' DAN '.$thz.'</b></TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC" ><b>NO</b></TD>
						<TD width="50%" align="center"  bgcolor="#CCCCCC"><b>URAIAN</b></TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC" ><b>'.$thi.'</b></TD>
						<TD width="15%" align="center"  bgcolor="#CCCCCC"><b>'.$thz.'</b></TD>					    						
                     </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.seq,b.a1_01_01_00,b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_02_02_00
                    ,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00,b.a4_07_01_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00,
                    b.a1_01_01_00_lalu,b.a1_01_01_00_lalu,b.a1_02_01_00_lalu,b.a1_03_01_00_lalu
                    ,b.a1_04_01_00_lalu,b.a1_05_01_00_lalu,b.a1_05_02_00_lalu,b.a1_05_03_00_lalu,b.a1_06_01_00_lalu,b.a2_02_01_00_lalu
                    ,b.a2_03_01_00_lalu,b.a2_05_01_00_lalu,b.a2_06_01_00_lalu,b.a2_09_01_00_lalu,b.a2_10_01_00_lalu,b.a2_11_01_00_lalu
                    ,b.a2_12_01_00_lalu,b.a2_13_01_00_lalu,b.a2_17_01_00_lalu,b.a4_01_01_00_lalu,b.a4_02_01_00_lalu,b.a4_02_02_00_lalu
                    ,b.a4_03_01_00_lalu,b.a4_05_01_00_lalu,b.a4_05_02_00_lalu,b.a4_06_01_00_lalu,b.a4_06_02_00_lalu,b.a4_07_01_00_lalu
                    ,b.a4_08_01_00_lalu,b.a4_08_02_00_lalu,b.a4_08_03_00_lalu,b.a4_08_04_00_lalu,b.a4_08_05_00_lalu,b.a4_08_06_00_lalu
                     FROM map_lpe_rinci_$bulanctk b order by seq");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;															
				$seq=$res->seq;
                
                $nl1_lalu=$res->a1_01_01_00_lalu;$nl2_lalu=$res->a1_02_01_00_lalu;$nl3_lalu=$res->a1_03_01_00_lalu;
                $nl4_lalu=$res->a1_04_01_00_lalu;$nl5_lalu=$res->a1_05_01_00_lalu;$nl6_lalu=$res->a1_05_02_00_lalu;
                $nl7_lalu=$res->a1_05_03_00_lalu;$nl8_lalu=$res->a1_06_01_00_lalu;$nl9_lalu=$res->a2_02_01_00_lalu;
                $nl10_lalu=$res->a2_03_01_00_lalu;$nl11_lalu=$res->a2_05_01_00_lalu;$nl12_lalu=$res->a2_06_01_00_lalu;
                $nl13_lalu=$res->a2_09_01_00_lalu;$nl14_lalu=$res->a2_10_01_00_lalu;$nl15_lalu=$res->a2_11_01_00_lalu;
                $nl16_lalu=$res->a2_12_01_00_lalu;$nl17_lalu=$res->a2_13_01_00_lalu;$nl18_lalu=$res->a2_17_01_00_lalu;
                $nl19_lalu=$res->a4_01_01_00_lalu;$nl20_lalu=$res->a4_02_01_00_lalu;$nl21_lalu=$res->a4_02_02_00_lalu;
                $nl22_lalu=$res->a4_03_01_00_lalu;$nl23_lalu=$res->a4_05_01_00_lalu;$nl24_lalu=$res->a4_05_02_00_lalu;
                $nl25_lalu=$res->a4_06_01_00_lalu;$nl26_lalu=$res->a4_06_02_00_lalu;$nl27_lalu=$res->a4_07_01_00_lalu;
                $nl28_lalu=$res->a4_08_01_00_lalu;$nl29_lalu=$res->a4_08_02_00_lalu;$nl30_lalu=$res->a4_08_03_00_lalu;
                $nl31_lalu=$res->a4_08_04_00_lalu;$nl32_lalu=$res->a4_08_05_00_lalu;$nl33_lalu=$res->a4_08_06_00_lalu;
                
                
                $ppkd = $nl20;
                $total_skpd=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                $total_pemkot = $total_skpd+$ppkd;
                
                $thn_mlalu=$nl1_lalu+$nl2_lalu+$nl3_lalu+$nl4_lalu+$nl5_lalu+$nl6_lalu+$nl7_lalu+$nl8_lalu+$nl9_lalu+$nl20_lalu+$nl10_lalu+$nl11_lalu+$nl12_lalu+$nl13_lalu+$nl14_lalu+$nl15_lalu+$nl16_lalu+$nl17_lalu+$nl18_lalu+$nl19_lalu+$nl21_lalu+$nl22_lalu+$nl23_lalu+$nl24_lalu+$nl25_lalu+$nl26_lalu+$nl27_lalu+$nl28_lalu+$nl29_lalu+$nl30_lalu+$nl31_lalu+$nl32_lalu+$nl33_lalu;
                
                
                
				if($no=='1' || $no=='2' || $no=='7' || $no=='8' || $no=='9'){
				    
                    if($seq=="95"){
                         
                    }else if($seq=="100"){
                        
                        $idxz = $idx-1;
                        $cRet .='<TR>
						    <TD width="5" align="center" ><b>'.$idxz.'</b></TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($thn_mlalu,2).'</b></TD>							
						 </TR>';
                    }else{
                        $cRet .='<TR>
						    <TD width="5" align="center" ><b>'.$idx.'</b></TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
						    <TD width="15%" align="right" ><b>'.number_format($thn_mlalu,2).'</b></TD>
                         </TR>';    
                    }
                    
				}else if($no=='3'){
				    $kumo = $this->db->query("SELECT SUM(b.a1_01_01_00+b.a1_02_01_00+b.a1_03_01_00+b.a1_04_01_00+b.a1_05_01_00
                    +b.a1_05_02_00+b.a1_05_03_00+b.a1_06_01_00+b.a2_02_01_00+ b.a2_03_01_00+b.a2_05_01_00+b.a2_06_01_00+
                b.a2_09_01_00+b.a2_10_01_00+b.a2_11_01_00+b.a2_12_01_00+b.a2_13_01_00+b.a2_17_01_00+b.a4_01_01_00+b.a4_02_01_00+
                b.a4_02_02_00+b.a4_03_01_00+b.a4_05_01_00+b.a4_05_02_00+b.a4_06_01_00+b.a4_06_02_00+b.a4_07_01_00+
                b.a4_08_01_00+b.a4_08_02_00+b.a4_08_03_00+b.a4_08_04_00+b.a4_08_05_00+b.a4_08_06_00) as ini, 
                SUM(b.a1_01_01_00_lalu+b.a1_01_01_00_lalu+b.a1_02_01_00_lalu+b.a1_03_01_00_lalu+
                    b.a1_04_01_00_lalu+b.a1_05_01_00_lalu+b.a1_05_02_00_lalu+b.a1_05_03_00_lalu+
                    b.a1_06_01_00_lalu+b.a2_02_01_00_lalu+b.a2_03_01_00_lalu+b.a2_05_01_00_lalu+
                    b.a2_06_01_00_lalu+b.a2_09_01_00_lalu+b.a2_10_01_00_lalu+b.a2_11_01_00_lalu+
                    b.a2_12_01_00_lalu+b.a2_13_01_00_lalu+b.a2_17_01_00_lalu+b.a4_01_01_00_lalu+
                    b.a4_02_01_00_lalu+b.a4_02_02_00_lalu+b.a4_03_01_00_lalu+b.a4_05_01_00_lalu+
                    b.a4_05_02_00_lalu+b.a4_06_01_00_lalu+b.a4_06_02_00_lalu+b.a4_07_01_00_lalu+
                    b.a4_08_01_00_lalu+b.a4_08_02_00_lalu+b.a4_08_03_00_lalu+b.a4_08_04_00_lalu+
                    b.a4_08_05_00_lalu+b.a4_08_06_00_lalu) as lalu 
                FROM map_lpe_rinci_$bulanctk b WHERE parent='3'")->row();
                    $kumo_ini = $kumo->ini; 
                    $kumo_lalu = $kumo->lalu;
                    
				    $cRet .='<TR>
							<TD width="5" align="center" ><b>'.$idx.'</b></TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($kumo_ini,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($kumo_lalu,2).'</b></TD>							
						 </TR>';
				}else{ 
			       $cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
						    <TD width="15%" align="right" >'.number_format($thn_mlalu,2).'</TD>
				        </TR>';
				}
			}
			
			$cRet .='</TABLE>';		
            
             if($ttd=="1"){
                
                $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient where kd_skpd='4.02.01.00'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                   
                }
                
                $sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab,pangkat FROM ms_ttd where kode='walikota'";
                 $sqlttd=$this->db->query($sqlttd1);
                 foreach ($sqlttd->result() as $rowttd)
                {
                    $nip=$rowttd->nip;                    
                    $nama= $rowttd->nm;
                    $jabatan  = $rowttd->jab;
                    $pangkat  = $rowttd->pangkat;
                }
                		
		$cRet .='<TABLE style="border-collapse:collapse; font-size:16px" width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$daerah.', '.$this->tanggal_format_indonesia($tanggal_ttd).'</TD>
					</TR>
					
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$jabatan.'</b></TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>                    
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$nama.'</b></TD>
					</TR>
                    <!--<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$nip.'</TD>
					</TR>-->
					</TABLE><br/>';
            }
             
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	

			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}

 function cetak_lpe_gab_konsol_pemkot_lalu($bulanctk='',$cetak='',$ttd='',$tanggal_ttd=''){
	        
			$thi=$this->session->userdata('pcThang');
			$thz=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            $cRet ='<TABLE style="border-collapse:collapse; font-size:12px" font-family: Bookman Old Style; width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="left" >LAMPIRAN V &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/> PERATURAN DAERAH KABUPATEN SANGGAU <br/> 
                        NOMOR &nbsp;&nbsp;&nbsp;&nbsp; TAHUN 2017 <br/>TENTANG PERTANGGUNGJAWABAN PELAKSANAAN <br/> ANGGARAN PENDAPATAN DAN BELANJA DAERAH<br/>KABUPATEN SANGGAU TAHUN ANGGARAN 2017
                        </TD>
					</TR>
                    <TR>
						<TD width="70%" align="center" ><b>&nbsp;</TD>
						<TD width="30%" align="center" ><b>&nbsp;</TD>
					</TR>
					</TABLE><br/>
			
            <TABLE width="100%">
					<TR>
						<TD align="center" ><b>PEMERINTAH KABUPATEN SANGGAU</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>LAPORAN LPE</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>PER '.$arraybulan[$bulanctk].' '.$thi.' DAN '.$thz.'</b></TD>
					</TR>
					</TABLE><br>';

			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC"><b>NO</b></TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC"><b>URAIAN</b></TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC"><b>'.$thi.'</b></TD>
					    <TD width="15%" align="center" bgcolor="#CCCCCC"><b>'.$thz.'</b></TD>						
                     </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.seq,b.uraian,b.a1_01_01_00,b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_02_02_00
                    ,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00,b.a4_07_01_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00,
                    b.a1_01_01_00_lalu,b.a1_01_01_00_lalu,b.a1_02_01_00_lalu,b.a1_03_01_00_lalu
                    ,b.a1_04_01_00_lalu,b.a1_05_01_00_lalu,b.a1_05_02_00_lalu,b.a1_05_03_00_lalu,b.a1_06_01_00_lalu,b.a2_02_01_00_lalu
                    ,b.a2_03_01_00_lalu,b.a2_05_01_00_lalu,b.a2_06_01_00_lalu,b.a2_09_01_00_lalu,b.a2_10_01_00_lalu,b.a2_11_01_00_lalu
                    ,b.a2_12_01_00_lalu,b.a2_13_01_00_lalu,b.a2_17_01_00_lalu,b.a4_01_01_00_lalu,b.a4_02_01_00_lalu,b.a4_02_02_00_lalu
                    ,b.a4_03_01_00_lalu,b.a4_05_01_00_lalu,b.a4_05_02_00_lalu,b.a4_06_01_00_lalu,b.a4_06_02_00_lalu,b.a4_07_01_00_lalu
                    ,b.a4_08_01_00_lalu,b.a4_08_02_00_lalu,b.a4_08_03_00_lalu,b.a4_08_04_00_lalu,b.a4_08_05_00_lalu,b.a4_08_06_00_lalu 
                    FROM map_lpe_konsol_$bulanctk b order by seq");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;	
                
                $nl1_lalu=$res->a1_01_01_00_lalu;$nl2_lalu=$res->a1_02_01_00_lalu;$nl3_lalu=$res->a1_03_01_00_lalu;
                $nl4_lalu=$res->a1_04_01_00_lalu;$nl5_lalu=$res->a1_05_01_00_lalu;$nl6_lalu=$res->a1_05_02_00_lalu;
                $nl7_lalu=$res->a1_05_03_00_lalu;$nl8_lalu=$res->a1_06_01_00_lalu;$nl9_lalu=$res->a2_02_01_00_lalu;
                $nl10_lalu=$res->a2_03_01_00_lalu;$nl11_lalu=$res->a2_05_01_00_lalu;$nl12_lalu=$res->a2_06_01_00_lalu;
                $nl13_lalu=$res->a2_09_01_00_lalu;$nl14_lalu=$res->a2_10_01_00_lalu;$nl15_lalu=$res->a2_11_01_00_lalu;
                $nl16_lalu=$res->a2_12_01_00_lalu;$nl17_lalu=$res->a2_13_01_00_lalu;$nl18_lalu=$res->a2_17_01_00_lalu;
                $nl19_lalu=$res->a4_01_01_00_lalu;$nl20_lalu=$res->a4_02_01_00_lalu;$nl21_lalu=$res->a4_02_02_00_lalu;
                $nl22_lalu=$res->a4_03_01_00_lalu;$nl23_lalu=$res->a4_05_01_00_lalu;$nl24_lalu=$res->a4_05_02_00_lalu;
                $nl25_lalu=$res->a4_06_01_00_lalu;$nl26_lalu=$res->a4_06_02_00_lalu;$nl27_lalu=$res->a4_07_01_00_lalu;
                $nl28_lalu=$res->a4_08_01_00_lalu;$nl29_lalu=$res->a4_08_02_00_lalu;$nl30_lalu=$res->a4_08_03_00_lalu;
                $nl31_lalu=$res->a4_08_04_00_lalu;$nl32_lalu=$res->a4_08_05_00_lalu;$nl33_lalu=$res->a4_08_06_00_lalu;															
				$seq=$res->seq;
                
                $ppkd = $nl20;
                $total_skpd=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
                $total_pemkot = $total_skpd+$ppkd;
                
                $total_pemkot_lalu=$nl1_lalu+$nl2_lalu+$nl3_lalu+$nl4_lalu+$nl5_lalu+$nl6_lalu+$nl7_lalu+$nl8_lalu+$nl9_lalu+$nl20_lalu+$nl10_lalu+$nl11_lalu+$nl12_lalu+$nl13_lalu+$nl14_lalu+$nl15_lalu+$nl16_lalu+$nl17_lalu+$nl18_lalu+$nl19_lalu+$nl21_lalu+$nl22_lalu+$nl23_lalu+$nl24_lalu+$nl25_lalu+$nl26_lalu+$nl27_lalu+$nl28_lalu+$nl29_lalu+$nl30_lalu+$nl31_lalu+$nl32_lalu+$nl33_lalu;
                
                
                                
				if($no=='1' || $no=='2' || $no=='7' || $no=='8' || $no=='9'){
				    
                        if($seq=="35"){
                         
                        }else if($seq=="40"){
                            
                            $idxz = $idx-1;
                            
                            $cRet .='<TR>
						    <TD width="5" align="center" ><b>'.$idxz.'</b></TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot_lalu,2).'</b></TD>
							</TR>';
                        }else{
                            $cRet .='<TR>
						    <TD width="5" align="center" ><b>'.$idx.'</b></TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot_lalu,2).'</b></TD>
							</TR>';    
                        }
                    
				        
				}else if($no=='3'){ 
				    $sql_op = $this->db->query("SELECT SUM(b.a1_01_01_00+b.a1_02_01_00+b.a1_03_01_00+b.a1_04_01_00+b.a1_05_01_00
                    +b.a1_05_02_00+b.a1_05_03_00+b.a1_06_01_00+b.a2_02_01_00+ b.a2_03_01_00+b.a2_05_01_00+b.a2_06_01_00+
                    b.a2_09_01_00+b.a2_10_01_00+b.a2_11_01_00+b.a2_12_01_00+b.a2_13_01_00+b.a2_17_01_00+b.a4_01_01_00+b.a4_02_01_00+
                    b.a4_02_02_00+b.a4_03_01_00+b.a4_05_01_00+b.a4_05_02_00+b.a4_06_01_00+b.a4_06_02_00+b.a4_07_01_00+
                    b.a4_08_01_00+b.a4_08_02_00+b.a4_08_03_00+b.a4_08_04_00+b.a4_08_05_00+b.a4_08_06_00) ini,
                            SUM(b.a1_01_01_00_lalu+b.a1_01_01_00_lalu+b.a1_02_01_00_lalu+b.a1_03_01_00_lalu
                    +b.a1_04_01_00_lalu+b.a1_05_01_00_lalu+b.a1_05_02_00_lalu+b.a1_05_03_00_lalu+b.a1_06_01_00_lalu+b.a2_02_01_00_lalu
                    +b.a2_03_01_00_lalu+b.a2_05_01_00_lalu+b.a2_06_01_00_lalu+b.a2_09_01_00_lalu+b.a2_10_01_00_lalu+b.a2_11_01_00_lalu
                    +b.a2_12_01_00_lalu+b.a2_13_01_00_lalu+b.a2_17_01_00_lalu+b.a4_01_01_00_lalu+b.a4_02_01_00_lalu+b.a4_02_02_00_lalu
                    +b.a4_03_01_00_lalu+b.a4_05_01_00_lalu+b.a4_05_02_00_lalu+b.a4_06_01_00_lalu+b.a4_06_02_00_lalu+b.a4_07_01_00_lalu
                    +b.a4_08_01_00_lalu+b.a4_08_02_00_lalu+b.a4_08_03_00_lalu+b.a4_08_04_00_lalu+b.a4_08_05_00_lalu+b.a4_08_06_00_lalu) lalu
                             FROM map_lpe_konsol_$bulanctk b WHERE parent='3'")->row();
                    $ini = $sql_op->ini;
                    $lalu = $sql_op->lalu;
                    
                    
				    $cRet .='<TR>
							<TD width="5" align="center" ><b>'.$idx.'</b></TD>
							<TD width="50%" align="left" ><b>&nbsp;'.$uraian.'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($ini,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($lalu,2).'</b></TD>							
						 </TR>';
				}else{ 
			       $cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot_lalu,2).'</TD>
				        </TR>';
				}
			}
			
			$cRet .='</TABLE>';	
            
             if($ttd=="1"){
                
                $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient where kd_skpd='4.02.01.00'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                   
                }
                
                $sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab,pangkat FROM ms_ttd where kode='walikota'";
                 $sqlttd=$this->db->query($sqlttd1);
                 foreach ($sqlttd->result() as $rowttd)
                {
                    $nip=$rowttd->nip;                    
                    $nama= $rowttd->nm;
                    $jabatan  = $rowttd->jab;
                    $pangkat  = $rowttd->pangkat;
                }
                		
		$cRet .='<TABLE style="border-collapse:collapse; font-size:12px font-family: Bookman Old Style;"  width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$daerah.', '.$this->tanggal_format_indonesia($tanggal_ttd).'</TD>
					</TR>
					
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$jabatan.'</b></TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>                    
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$nama.'</b></TD>
					</TR>
                    <!--<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$nip.'</TD>
					</TR>-->
					</TABLE><br/>';
            }
            	 
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	

			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	} 
	function rpt_lak_kota_apbd($bulan='',$ctk='',$ttd='',$tanggal_ttd=''){
        $lntahunang = $this->session->userdata('pcThang');       
        $lntahunang_l = $lntahunang-1;       
		 switch  ($bulan){
        case  1:
        $judul="JANUARI";
        break;
        case  2:
        $judul="FEBRUARI";
        break;
        case  3:
        $judul= "MARET";
        break;
        case  4:
        $judul="APRIL";
        break;
        case  5:
        $judul= "MEI";
        break;
        case  6:
        $judul= "JUNI";
        break;
        case  7:
        $judul= "JULI";
        break;
        case  8:
        $judul= "AGUSTUS";
        break;
        case  9:
        $judul= "SEPTEMBER";
        break;
        case  10:
        $judul= "OKTOBER";
        break;
        case  11:
        $judul= "NOVEMBER";
        break;
        case  12:
        $judul= "DESEMBER";
        break;
    }

		
        $cRet='';
			$cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN ARUS KAS</strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN 31 $judul $lntahunang</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>&nbsp;</strong></td>
                    </tr>
                  </table>";        
        
        	
		$cRet .="<table style=\"border-collapse:collapse;font-family:Arial;font-size:11px\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"3\" cellpadding=\"3\">
                <thead>
				<tr>
                    <td width=\"40%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>Uraian</b></td>
                    <td width=\"15%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>$lntahunang</b></td>
                    <td width=\"15%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>$lntahunang_l</b></td>
				</tr>
				<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >3</td> 
				</tr>
				</thead>";
				

			
            $arus1=0; $arus2=0; $arus3=0; $arus4=0; $total_arus=0;
            
			$sql = "SELECT a.uraian,a.nor,a.bold,a.seq,a.kode_1,a.kode_2,a.kode_3,b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_07_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00,a.thn_m1
					FROM map_lak a LEFT  JOIN map_lra_konsol_$bulan b ON a.map_nor=b.nor
                    where a.seq<'386'
					order BY a.seq";
					$no=0;
					$tot_nor=0;					
                    $tot_peg=0;
					$tot_brg=0;
					$tot_mod=0;
					$tot_bansos=0;
                    $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $res)
                    {
						$no=$no+1;
						$nor = $res->nor;						
                        $bold = $res->bold;
						$nama = $res->uraian;
						$seq2 = $res->seq;                        
						$tahun_lalu=$res->thn_m1;
                        $n11=$res->a1_01_01_00;$n12=$res->a1_02_01_00;$n13=$res->a1_03_01_00;
                        $n14=$res->a1_04_01_00;$n15=$res->a1_05_01_00;$n16=$res->a1_05_02_00;
                        $n17=$res->a1_05_03_00;$n18=$res->a1_06_01_00;$n19=$res->a2_02_01_00;
                        $n110=$res->a2_03_01_00;$n111=$res->a2_05_01_00;$n112=$res->a2_06_01_00;
                        $n113=$res->a2_09_01_00;$n114=$res->a2_10_01_00;$n115=$res->a2_11_01_00;
                        $n116=$res->a2_12_01_00;$n117=$res->a2_13_01_00;$n118=$res->a2_17_01_00;
                        $n119=$res->a4_01_01_00;$n120=$res->a4_02_01_00;$n121=$res->a4_02_02_00;
                        $n122=$res->a4_03_01_00;$n123=$res->a4_05_01_00;$n124=$res->a4_05_02_00;
                        $n125=$res->a4_06_01_00;$n126=$res->a4_06_02_00;$n127=$res->a4_07_01_00;
                        $n128=$res->a4_08_01_00;$n129=$res->a4_08_02_00;$n130=$res->a4_08_03_00;
                        $n131=$res->a4_08_04_00;$n132=$res->a4_08_05_00;$n133=$res->a4_08_06_00;															

                        $kode_1=trim($res->kode_1);				
				        $kode_2=trim($res->kode_2);								        
                        $kode_3=trim($res->kode_3);				
				
                        if($kode_1=="") $kode_1="'xxx'";	
                        if($kode_2=="") $kode_2="'xxx'";	
                        if($kode_3=="") $kode_3="'xxx'";	
                    
                        $sql = "SELECT SUM(real_spj) as nilai FROM data_realisasi_keg5($bulan,2) WHERE (LEFT(kd_rek5,3) IN ($kode_1) or LEFT(kd_rek5,5) IN ($kode_2) or LEFT(kd_rek5,7) IN ($kode_3))";										
					
                        $hasil = $this->db->query($sql);
                        foreach ($hasil->result() as $row)
                        {
                           $nilai = $row->nilai;
					    }
                    	
					 switch ($bold) {
						case 0:
                        $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top">&nbsp; </td> 
							   <td align="right" valign="top">&nbsp; </td> 
							   </tr>'; 
                        break;	
					 case 1:
                        
                        if($nor=='20'){
                            $nilai_20 = $nilai;
                            $sql20 = $this->db->query("select sum(g.jml) as real_spj from (
                            select left(a.kd_skpd,7)+'00' as kode,'' as kd_subkegiatan,b.kd_rek5 as map_real,c.kd_rek5 as kode_rek,sum(b.rupiah) as jml from trhkasin_pkd a INNER JOIN trdkasin_pkd b
                            on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5
                            where a.jns_trans in ('1','5') and left(b.kd_rek5,3)='511' 
                            GROUP BY a.kd_skpd,b.kd_rek5,c.kd_rek5
                            UNION
                            select left(a.kd_skpd,7)+'00' as kode,'' as kd_subkegiatan,b.kd_rek5 as map_real,c.kd_rek5 as kode_rek,sum(b.rupiah) as jml from trhkasin_pkd a INNER JOIN trdkasin_pkd b
                            on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5
                            where a.jns_trans in ('1','5') and left(b.kd_rek5,5)='52103'
                            GROUP BY a.kd_skpd,b.kd_rek5,c.kd_rek5
                            ) g")->row();    
                            $nilai20 =  $sql20->real_spj;                                   
                            $nilai = $nilai20+$nilai_20;
   
                        }else if($nor=='21'){
   
                            $nilai_21 = $nilai;                            
                            $sql21 = $this->db->query("select sum(d.jml) as real_spj from (
                            select  sum(b.rupiah) as jml from trhkasin_ppkd a INNER JOIN trdkasin_ppkd b
                            on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5
                            where a.jns_trans in ('1','5') and b.kd_rek5 not in ('5210301','5110101', '5110102','5110104','5110105','5110106','5110108',
                            '5110109', '5110203', '5110205','5110206','5110207','5110208','5210301','5234901','5235802')
                            UNION
                            select  sum(b.rupiah) as jml from trhkasin_ppkd a INNER JOIN trdkasin_ppkd b
                            on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5
                            where a.jns_trans in ('1','5') and a.no_sts='1938'
                            ) d")->row();    
                            $nilai21 =  $sql21->real_spj;                                   
                            $nilai = $nilai21+$nilai_21;
                        }
                        else if($nor=='44'){
   
                            $nilai_44 = $nilai;                            
                            $sql44 = $this->db->query("select sum(b.rupiah) as real_spj from trhkasin_ppkd a INNER JOIN trdkasin_ppkd b
                            on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts  LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5 
                            where left(b.kd_rek5,3)='523' and month(a.tgl_sts)<='12' and year(a.tgl_sts)='$lntahunang'")->row();    
                                                        $nilai44 =  $sql44->real_spj;                                   
                            $nilai = $nilai44+$nilai_44;
                        }                        
                        else{
                            $nilai = $nilai;
                        }
                        
                        $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$nama.'</td> 
							   <td align="right" valign="top">'.number_format($nilai, "2", ".", ",").'</td> 
							   <td align="right" valign="top">'.number_format($tahun_lalu, "2", ".", ",").'</td> 
							</tr>'; 
                        break;	                    
				        
                	case 2:
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($nilai, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        
					    break; 
                    case 3:
                        $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top">&nbsp; </td> 
							   <td align="right" valign="top">&nbsp; </td> 
							   </tr>'; 
                        break;
                    case 4:
                    $kas_terima_operasi=$nilai;
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($nilai, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        
					    break;  
                     case 5:
                     
                    $sql20 = $this->db->query("select sum(g.jml) as real_spj from ( 
                            select sum(b.rupiah) as jml from trhkasin_pkd a INNER JOIN trdkasin_pkd b on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5 where a.jns_trans in ('1','5') and left(b.kd_rek5,3)='511' and a.no_sts not in ('1938') 
                            UNION 
                            select sum(b.rupiah) as jml from trhkasin_pkd a INNER JOIN trdkasin_pkd b on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5 where a.jns_trans in ('1','5') and left(b.kd_rek5,5)='52103'  
                            UNION 
                            select sum(b.rupiah) as jml from trhkasin_ppkd a INNER JOIN trdkasin_ppkd b on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5 where a.jns_trans in ('1','5') and b.kd_rek5 not in ('5210301','5110101', '5110102','5110104','5110105','5110106','5110108', '5110109', '5110203', '5110205','5110206','5110207','5110208','5210301','5234901','5235802') 
                            UNION 
                            select sum(b.rupiah) as jml from trhkasin_ppkd a INNER JOIN trdkasin_ppkd b on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5 where a.jns_trans in ('1','5') and a.no_sts='1938' 
                            ) g")->row();    
                            $nilai_plus =  $sql20->real_spj;                                   
                            
                    $kas_keluar_operasi=$nilai+$nilai_plus;
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($kas_keluar_operasi, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        
					    break; 
                    case 6:
                    $kas_operasi=$kas_terima_operasi-$kas_keluar_operasi;
                    $arus1=$kas_operasi;
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($kas_operasi, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
					    break; 
                    case 7:
                    $kas_terima_non=$nilai;
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($nilai, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        
					    break;  
                     case 8:
                     
                     $sql44 = $this->db->query("select sum(b.rupiah) as real_spj from trhkasin_ppkd a INNER JOIN trdkasin_ppkd b
                            on a.kd_skpd=b.kd_skpd and a.no_sts=b.no_sts  LEFT JOIN ms_rek5 c on b.kd_rek5=c.kd_rek5 
                            where left(b.kd_rek5,3)='523' and month(a.tgl_sts)<='12' and year(a.tgl_sts)='$lntahunang'")->row();    
                            $nilai44 =  $sql44->real_spj;
                     
                    $kas_keluar_non=$nilai+$nilai44;
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($kas_keluar_non, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        
					    break; 
                    case 9:
                    $kas_operasi_non=$kas_terima_non-$kas_keluar_non;
                    $arus2=$kas_operasi_non;
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($kas_operasi_non, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        
					    break;
                        
                    case 15:
                    $kas_terima_biaya=$nilai;
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($nilai, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        
					    break;  
                     case 16:
                    $kas_keluar_biaya=$nilai;
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($nilai, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        
					    break; 
                    case 17:
                    $kas_operasi_biaya=$kas_terima_biaya-$kas_keluar_biaya;
                    $arus3=$kas_operasi_biaya;
                        
                           $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($kas_operasi_biaya, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        
					    break;
                    }
                    }
                    
                    //PAJAK
                    $sql = $this->db->query("SELECT SUM(terima) as terima, SUM(setor) as setor FROM (
                    SELECT SUM(b.nilai) as terima, 0 setor FROM trhtrmpot a INNER JOIN trdtrmpot b ON a.no_bukti=b.no_bukti AND a.kd_skpd=b.kd_skpd
                    WHERE LEFT(b.kd_rek5,3) IN ('211','213')
                    UNION ALL
                    SELECT 0 terima, SUM(b.nilai) as setor FROM trhstrpot a INNER JOIN trdstrpot b ON a.no_bukti=b.no_bukti AND a.kd_skpd=b.kd_skpd
                    WHERE LEFT(b.kd_rek5,3) IN ('211','213')
                    UNION ALL
                     SELECT SUM(b.nilai) as terima, 0 setor FROM trhtrmpot_pusk a INNER JOIN trdtrmpot_pusk b ON a.no_bukti=b.no_bukti AND a.kd_skpd=b.kd_skpd
                    WHERE LEFT(b.kd_rek5,3) IN ('211','213')
                    UNION ALL
                    SELECT 0 terima, SUM(b.nilai) as setor FROM trhstrpot_pusk a INNER JOIN trdstrpot_pusk b ON a.no_bukti=b.no_bukti AND a.kd_skpd=b.kd_skpd
                    WHERE LEFT(b.kd_rek5,3) IN ('211','213'))a")->row();
                    $terima_j = $sql->terima;
                    $setor_pajak_ini = $sql->setor;
/*
                    $sql = $this->db->query("select sum(b.kredit) as ju_inputan FROM trhju_pkd a INNER JOIN trdju_pkd b ON a.kd_skpd=b.kd_unit 
                    AND a.no_voucher=b.no_voucher WHERE left(b.kd_rek5,3) IN ('211') and a.tabel='1' and  YEAR(a.tgl_voucher)='$lntahunang' 
                    and a.no_voucher='01/utang ppn/1.20.10.00'")->row();
                    $inputan_jurnal = $sql->ju_inputan;

                    $sql = $this->db->query("select sum(b.kredit)-sum(b.debet) as utang_pajak FROM trhju_pkd a INNER JOIN trdju_pkd b 
                    ON a.kd_skpd=b.kd_unit AND a.no_voucher=b.no_voucher 
                    WHERE left(b.kd_rek5,3) IN ('211') and a.tabel='1' and YEAR(a.tgl_voucher)<'$lntahunang'")->row();
                    $setor_pajak_lalu = $sql->utang_pajak;                    
                    $setor_pajak = $setor_pajak_ini + $setor_pajak_lalu;
*/                  $setor_pajak = $setor_pajak_ini;

                   $terima_pajak = $terima_j;
                    
                    //CP
                    //PAJAK
                    $sql = $this->db->query("SELECT SUM(b.rupiah) as nilai FROM trhkasin_pkd a INNER JOIN trdkasin_pkd b ON a.no_sts=b.no_sts AND a.kd_skpd=b.kd_skpd
                    WHERE jns_trans  IN ('1','5')")->row();
                    $cp1 = $sql->nilai;
                  
                 //CP baru
 /*                   $sql = $this->db->query("select sum(b.debet) as pengem_kapuas FROM trhju_pkd a INNER JOIN trdju_pkd b ON a.kd_skpd=b.kd_unit AND a.no_voucher=b.no_voucher 
                    WHERE b.kd_rek5 IN ('1110101') and a.tabel='1' and YEAR(a.tgl_voucher)='$lntahunang' 
                    and a.no_voucher in ('BUD/21/penerimaan sisa kas PD.Kapuas Indah/1.20.00.00')")->row();
                    $cp_kapuas = $sql->pengem_kapuas;

                    $sql = $this->db->query("select sum(b.kredit) as pengem_b FROM trhju_pkd a INNER JOIN trdju_pkd b ON a.kd_skpd=b.kd_unit AND a.no_voucher=b.no_voucher 
                    WHERE b.kd_rek5 IN ('1110501') and YEAR(a.tgl_voucher)='$lntahunang' 
                    and a.no_voucher in ('002/koreksi kas/BPBD/2016','04/saldo kas ta.2015/2016')")->row();
                     $cp_skpd_baru = $sql->pengem_b;
 */                      
                    $cp = $cp1; 
                    $arus4=$terima_pajak+$cp-$setor_pajak;
                    
                    //KAS di KASDA
                    $sql = $this->db->query("select 
                    SUM(CASE WHEN YEAR(a.tgl_voucher)<'$lntahunang'  AND b.kd_rek5 IN ('1110101','1110301') THEN (debet-kredit) ELSE 0 END) as lalu,
                    SUM(CASE WHEN YEAR(a.tgl_voucher)<='$lntahunang' AND b.kd_rek5 IN ('1110101','1110301') THEN (debet-kredit) ELSE 0 END) as ini,
                    SUM(CASE WHEN YEAR(a.tgl_voucher)<='$lntahunang' AND b.kd_rek5 IN ('1110201') THEN (debet-kredit) ELSE 0 END) as ter_ini,
                    SUM(CASE WHEN YEAR(a.tgl_voucher)<='$lntahunang' AND b.kd_rek5 IN ('1110401') THEN (debet-kredit) ELSE 0 END) as blud,
                    SUM(CASE WHEN YEAR(a.tgl_voucher)<='$lntahunang' AND b.kd_rek5 IN ('1110501') THEN (debet-kredit) ELSE 0 END) as lain
                    FROM trhju_pkd a INNER JOIN trdju_pkd b ON a.kd_skpd=b.kd_unit AND a.no_voucher=b.no_voucher 
                    WHERE b.kd_rek5 IN ('1110101','1110301','1110201','1110401','1110501')
                    ")->row();
                    $kas_lalu = $sql->lalu;
                    $kas_ini = $sql->ini;
                    $kas_terima = $sql->ter_ini;                    
                    $blud = $sql->blud;                    
                    $lain = $sql->lain;                    
                    $total_kas=$kas_ini+$kas_terima+$blud+$lain ;                  
                    $sql = "SELECT a.uraian,a.bold,a.seq,a.thn_m1 from map_lak a where a.seq>'386' order by a.seq";
			        $hasil = $this->db->query($sql);
                    foreach ($hasil->result() as $res)
                    { 
                        $bold = $res->bold;
						$nama = $res->uraian;
						$tahun_lalu=$res->thn_m1;
                        $seq = $res->seq;
						
			            switch ($bold) {
						case 0:
                        $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top">&nbsp; </td> 
							   <td align="right" valign="top">&nbsp; </td> 
							   </tr>'; 
                        break;	
					 case 1:
                        $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$nama.'</td> 
							   <td align="right" valign="top">'.number_format($nilai, "2", ".", ",").'</td> 
							   <td align="right" valign="top">'.number_format($tahun_lalu, "2", ".", ",").'</td> 
							</tr>'; 
                        break;	                    
				
                	case 2:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($nilai, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break; 
                    case 3:
                        $cRet .='<tr>
							   <td align="left"  valign="top">&nbsp;&nbsp;&nbsp;<b>'.$nama.'</b></td> 
							   <td align="right" valign="top">&nbsp; </td> 
							   <td align="right" valign="top">&nbsp; </td> 
							   </tr>'; 
                        break; 
                    case 4:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($nilai, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break; 
                    case 5:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($terima_pajak, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break;
                    case 14:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($terima_pajak+$cp, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break; 
                            
                    case 6:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($setor_pajak, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break;
                     case 15:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($setor_pajak, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break; 
                       
                        
                     case 7:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($kas_lalu, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break;
                         case 8:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($kas_ini, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break;
                       case 9:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($kas_terima, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break;                                              
                        case 10:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($blud, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break;                                              
                        case 11:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($lain, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break;                                              
                        case 12:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($total_kas, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break; 
                        case 13:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($arus4, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break; 
                        case 16:
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($cp, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break; 
                        case 99:
                        
                        $total_arus= $arus1+$arus2+$arus3+$arus4;                        
                        
					    $cRet .='<tr>
							   <td align="left"  valign="top"><b>'.$nama.'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($total_arus, "2", ".", ",").'</b></td> 
							   <td align="right" valign="top"><b>'.number_format($tahun_lalu, "2", ".", ",").'</b></td> 
							</tr>'; 
                        break;                                             
                    }
                     
                    } 
                     
		
			$cRet .="</table>";
            
             if($ttd=="1"){
                
                $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient where kd_skpd='4.02.01.00'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                   
                }
                
                $sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab,pangkat FROM ms_ttd where kode='walikota'";
                 $sqlttd=$this->db->query($sqlttd1);
                 foreach ($sqlttd->result() as $rowttd)
                {
                    $nip=$rowttd->nip;                    
                    $nama= $rowttd->nm;
                    $jabatan  = $rowttd->jab;
                    $pangkat  = $rowttd->pangkat;
                }
                		
		$cRet .='<TABLE style="border-collapse:collapse; font-size:16px" width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$daerah.', '.$this->tanggal_format_indonesia($tanggal_ttd).'</TD>
					</TR>
					
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$jabatan.'</b></TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>                    
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b><u>'.$nama.'</u></b><br>'.$pangkat.'</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$nip.'</TD>
					</TR>
					</TABLE><br/>';
            }
            
			$data['prev']= $cRet;    
            $judul='LAPORAN LAK';
			switch ($ctk){
				case 0;
				echo ("<title>$judul</title>");
				echo $cRet;
				break;
				case 1;
				$this->tukd_model->_mpdf('',$cRet,10,10,10,'P');
				break;
				case 2;        
				header("Cache-Control: no-cache, no-store, must-revalidate");
				header("Content-Type: application/vnd.ms-excel");
				header("Content-Disposition: attachment; filename= $judul.xls");
				$this->load->view('anggaran/rka/perkadaII', $data);
				break;	
			}
		}

function hitung_lpsal(){
 
        
        $sqlsawal = "SELECT * FROM map_lpsal where nor='8'";
        $queryawal = $this->db->query($sqlsawal);
        $jmlsaldo = $queryawal->row();
        $jmlsal = $jmlsaldo->thn_m1;
		$jmlsal_minus = 0-$jmlsaldo->thn_m1;
        
        $xc_jmlsal_minus = number_format($jmlsal_minus,2);
        $bnb_jmlsal_minus = str_replace(',','',$xc_jmlsal_minus); 
        
        
		$sub_jmlsal = $jmlsal + $jmlsal_minus;
		
		$this->db->query("update map_lpsal set thn_nilai ='$jmlsal' where nor='1' ");
        $this->db->query("update map_lpsal set thn_nilai ='$bnb_jmlsal_minus' where nor='2' ");
		$this->db->query("update map_lpsal set thn_nilai ='$sub_jmlsal' where nor='3' ");
		      
        
        $query = $this->db->query(" SELECT b.nor,b.uraian,b.kode_1,b.kode1,b.kode_2,b.thn_m1,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_07_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                     FROM map_lra_konsol b ");  
			foreach($query->result() as $res){			 
				$no=$res->nor;
                        $nl1=$res->a1_01_01_00;$n12=$res->a1_02_01_00;$n13=$res->a1_03_01_00;
                        $n14=$res->a1_04_01_00;$n15=$res->a1_05_01_00;$n16=$res->a1_05_02_00;
                        $n17=$res->a1_05_03_00;$n18=$res->a1_06_01_00;$n19=$res->a2_02_01_00;
                        $n110=$res->a2_03_01_00;$n111=$res->a2_05_01_00;$n112=$res->a2_06_01_00;
                        $n113=$res->a2_09_01_00;$n114=$res->a2_10_01_00;$n115=$res->a2_11_01_00;
                        $n116=$res->a2_12_01_00;$n117=$res->a2_13_01_00;$n118=$res->a2_17_01_00;
                        $n119=$res->a4_01_01_00;$n120=$res->a4_02_01_00;$n121=$res->a4_02_02_00;
                        $n122=$res->a4_03_01_00;$n123=$res->a4_05_01_00;$n124=$res->a4_05_02_00;
                        $n125=$res->a4_06_01_00;$n126=$res->a4_06_02_00;$n127=$res->a4_07_01_00;
                        $n128=$res->a4_08_01_00;$n129=$res->a4_08_02_00;$n130=$res->a4_08_03_00;
                        $n131=$res->a4_08_04_00;$n132=$res->a4_08_05_00;$n133=$res->a4_08_06_00;															
															
				
                $total_pemkot=$nl1+$n12+$n13+$n14+$n15+$n16+$n17+$n18+$n19+$n110+$n111+$n112+$n113+$n114+$n115+$n116+$n117+$n118+$n119+$n120+$n121+$n122+$n123+$n124+$n125+$n126+$n127+$n128+$n129+$n130+$n131+$n132+$n133;
              
              if($no=="79"){
                $nilai_silpa= $total_pemkot;
              }              
              }
        
        $xc_nilai_silpa = number_format($nilai_silpa,2);
        $bnb_nilai_silpa = str_replace(',','',$xc_nilai_silpa); 
        
		$this->db->query("update map_lpsal set thn_nilai ='$bnb_nilai_silpa' where nor='4' ");
		
		$total1 = $this->db->query("SELECT ISNULL(SUM(thn_nilai),0) as nilai FROM map_lpsal WHERE nor='3'")->row();
		$subt1 = $total1->nilai;
		
		$subt2 = $bnb_nilai_silpa;
		$subtotal5 = $subt2 + $subt1;
	  
        			
			$t5 = $this->db->query("update map_lpsal set thn_nilai ='$bnb_nilai_silpa' where nor='5' ");
			if($t5){				
				$total5 = $this->db->query("SELECT ISNULL(SUM(thn_nilai),0) as nilai FROM map_lpsal WHERE nor='5'")->row();
				$subt5 = $total5->nilai;
				
				$total6 = $this->db->query("SELECT ISNULL(SUM(thn_nilai),0) as nilai FROM map_lpsal WHERE nor='6'")->row();
				$subt6 = $total6->nilai;
				
				$total7 = $this->db->query("SELECT ISNULL(SUM(thn_nilai),0) as nilai FROM map_lpsal WHERE nor='7'")->row();
				$subt7 = $total7->nilai;
				
				$subtotal8 = $subt5 + $subt6 + $subt7;
				
				$t8 = $this->db->query("update map_lpsal set thn_nilai ='$bnb_nilai_silpa' where nor='8' ");
					if($t8){
						echo '1';
					}
		}			
    }    	


	
	function ctk_lpsal($cetak = "",$ttd='',$tanggal_ttd=''){
		$cetak = $this->uri->segment(3);
		$ttd = $this->uri->segment(4);
        $thn_ang = $this->session->userdata('pcThang');
        $thn_ang_1= $thn_ang-1;                   
                      
         $cRet = '';
         $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"1\" cellpadding=\"1\">
         
            <tr>
                <td align=\"center\" colspan=\"4\" style=\"font-size:14px;border: solid 1px white;\"><b>PEMERINTAH KABUPATEN SANGGAU<br>LAPORAN PERUBAHAN SALDO ANGGARAN LEBIH<br>31 DESEMBER $thn_ang DAN $thn_ang_1 </b></td>
            </tr>
              <tr>
                <td align=\"left\" colspan=\"4\" style=\"font-size:14px;border: solid 1px white;\">&nbsp;</td>
            </tr>            
            
            <tr>
                <td align=\"left\"  style=\"font-size:14px;border: solid 1px white;border-bottom:solid 2px black;\">&nbsp;</td>
                <td align=\"left\" colspan=\"3\" style=\"font-size:14px;border: solid 1px white;border-bottom:solid 2px black;\">&nbsp;</td>
            </tr>
      
            <tr>
                <td align=\"center\" width=\"5%\" style=\"font-size:14px;border-bottom:solid 1px black;border-top:solid 1px black;\" bgcolor=\"#CCCCCC\"><b>NO</b></td>
                <td align=\"center\" width=\"65%\" style=\"font-size:14px;border-bottom:solid 1px black;border-top:solid 1px black;\" bgcolor=\"#CCCCCC\"><b>URAIAN</b></td>
                <td align=\"center\" width=\"15%\" style=\"font-size:14px;border-bottom:solid 1px black;border-top:solid 1px black;\" bgcolor=\"#CCCCCC\"><b>$thn_ang</b></td> 
                <td align=\"center\" width=\"15%\" style=\"font-size:14px;border-bottom:solid 1px black;border-top:solid 1px black;\" bgcolor=\"#CCCCCC\"><b>$thn_ang_1</b></td>            
            </tr>";
                                      
                    $sql = "SELECT * FROM map_lpsal ORDER BY seq";
                    $hasil = $this->db->query($sql); 
                    $nawal = 0 ;
                    foreach ($hasil->result() as $row)
                    {                      
                       $kd_rek   =$row->nor ;
                       $nama     =$row->uraian;
                       $nilai_1    =$row->thn_m1;
					   $nilai_2    =$row->thn_nilai;
                       
						if ($nilai_1 < 0)
						{
							$a = "(";
							$nilai_1 = $nilai_1 * -1;
							$b = ")";
						} else
						{
							$a = "";
							$nilai_1 = $nilai_1;
							$b = "";
						}
						
						if ($nilai_2 < 0)
						{
							$c = "(";
							$nilai_2 = $nilai_2 * -1;
							$d = ")";
						} else
						{
							$c = "";
							$nilai_2 = $nilai_2;
							$d = "";
						}
					    
                               switch ($kd_rek)
                                {
                                    case 1:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$c."".number_format($nilai_2,2,',','.')."".$d."</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$a."".number_format($nilai_1,2,',','.')."".$b."</b></td>
                                                     </tr>";                                            
                                    break; 
                                    case 2:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$c."".number_format($nilai_2,2,',','.')."".$d."</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$a."".number_format($nilai_1,2,',','.')."".$b."</b></td>
                                                     </tr>";                                            
                                    break; 
                                     case 3:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$c."".number_format($nilai_2,2,',','.')."".$d."</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$a."".number_format($nilai_1,2,',','.')."".$b." </b></td>
                                                     </tr>";                                            
                                    break;
                                    case 4:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$c."".number_format($nilai_2,2,',','.')."".$d."</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$a."".number_format($nilai_1,2,',','.')."".$b."</b></td>
                                                     </tr>";                                            
                                    break; 
                                    case 5:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$c."".number_format($nilai_2,2,',','.')."".$d."</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$a."".number_format($nilai_1,2,',','.')."".$b."</b></td>
                                                     </tr>";                                            
                                    break;
                                    case 8:
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$nama</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$c."".number_format($nilai_2,2,',','.')."".$d."</b></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>".$a."".number_format($nilai_1,2,',','.')."".$b."</b></td>
                                                     </tr>";                                            
                                    break;  
                                    default:  
                                            $cRet .="<tr>
                                                      <td valign=\"top\"  width=\"5%\" align=\"center\" style=\"font-size:14px;border-bottom:none;border-top:none\"><b>$kd_rek</b></td>
                                                      <td valign=\"top\"  width=\"65%\"  align=\"left\" style=\"font-size:14px;border-bottom:none;border-top:none\">&nbsp; &nbsp; &nbsp; &nbsp;$nama</td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\"></td>
                                                      <td valign=\"top\"  width=\"15%\" align=\"right\" style=\"font-size:14px;border-bottom:none;border-top:none\">".$a."".number_format($nilai_1,2,',','.')."".$b." </td>
                                                     </tr>";                      
                                }                        
                    }
                 
           $cRet .="<tr>
                    <td align=\"center\" width=\"5%\" style=\"font-size:14px;border-bottom:solid 1px black;border-top:none\" >&nbsp;</td>
                    <td align=\"center\" width=\"65%\" style=\"font-size:14px;border-bottom:solid 1px black;border-top:none\">&nbsp;</td>
                    <td align=\"center\" width=\"15%\" style=\"font-size:14px;border-bottom:solid 1px black;border-top:none\">&nbsp;</td> 
                    <td align=\"center\" width=\"15%\" style=\"font-size:14px;border-bottom:solid 1px black;border-top:none\">&nbsp;</td>            
                    </tr>					
					";                                       
        $cRet .='</table><br/>';				
		
		 if($ttd=="1"){
                
                $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient where kd_skpd='1.20.00.00'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                   
                }
                
                $sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab,pangkat FROM ms_ttd where kode='walikota'";
                 $sqlttd=$this->db->query($sqlttd1);
                 foreach ($sqlttd->result() as $rowttd)
                {
                    $nip=$rowttd->nip;                    
                    $nama= $rowttd->nm;
                    $jabatan  = $rowttd->jab;
                    $pangkat  = $rowttd->pangkat;
                }
                		
		$cRet .='<TABLE style="border-collapse:collapse; font-size:16px" width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$daerah.', '.$this->tanggal_format_indonesia($tanggal_ttd).'</TD>
					</TR>
					
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$jabatan.'</b></TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>                    
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b><u>'.$nama.'</u></b><br>'.$pangkat.'</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$nip.'</TD>
					</TR>
					</TABLE><br/>';
            }
                 
        $data['prev']= $cRet;  
        $data['sikap'] = 'preview';
        $judul = 'LAPORAN PERUBAHAN SALDO ANGGARAN LEBIH';
        $this->template->set('title', 'LAPORAN PERUBAHAN SALDO ANGGARAN LEBIH');  
         switch ($cetak)
        {
            case 0;
                //$this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
                echo $cRet;
                break;
			case 1;
                $this->tukd_model->_mpdf('', $cRet, 10, 5, 10, '0');
                //echo $cRet;
                break;
            case 2;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-excel");
                header("Content-Disposition: attachment; filename= $judul.xls");

                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
            case 3;
                header("Cache-Control: no-cache, no-store, must-revalidate");
                header("Content-Type: application/vnd.ms-word");
                header("Content-Disposition: attachment; filename= $judul.doc");
                $this->load->view('anggaran/rka/perkadaII', $data);
                break;
        }
    }

function posting_lra_kolom13(){
        
        $skpd 	  = $this->input->post('skpd');
        $kolom 	  = $this->input->post('kolom');
        $vbulan      = $this->input->post('bulan');
        $sql = " 				
		--'4' Pendapatan
		update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,1)='4' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '1'
		
		--'41' Pendapatan Asli Daerah
		update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2)='41' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '2'
		
		--'411'
		update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
   
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3)='411' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '3'
        
        --412
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3)='412' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '4'
        
        --413
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3)='413' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '5'
        
        --414
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3)='414' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '6'
        
        --42
			update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2)='42' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '7'
        
        --42101
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,5)='42101' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '8'
        
        --'42102'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,5)='42102' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '9'
        
        --'42201'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,5)='42201' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '10'
        
        --'42301'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,5)='42301' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '11'
        
        --'43'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2)='43' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '12'
        
        --'431'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3)='431' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '13'
        
        --'432'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3)='432' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '14'
        
        --'43301'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,5)='43301' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '15'
        
        --'42301'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,5)='43302' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '16'
        
        --'434'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3)='434' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '17'
        
        --'43501'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,5)='43501' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '18'

        
        --'4' JUMLAH PENDAPATAN 
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0)  as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,1) in ('4') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '19'
        
        
        --'5' BELANJA
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,1) in ('5') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '20'
        
        --'51'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2) in ('51') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '21'
        
        --'511'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('511') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '22'
        
        --'512'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('512') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '23'
        
        --'513'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('513') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '24'
        
        --'514'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('514') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '25'
        
        --'515'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('515') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '26'
        
        --'516'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('516') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '27'
        
        --'515'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('517') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '28'
 
        --'515'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('518') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '29'
        
        --'30' Jumlah Belanja Tidak Langsung 
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2) in ('51') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '30'
        
        --'31' Belanja Langsung
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2) in ('52') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '31'
        
        --'521' 
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('521') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '32'
        
        --'522' 
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('522') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '33'
        
        --'523' 
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('523') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '34'
        
        --'35' Jumlah Belanja Langsung
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2) in ('52') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '35'
        
        --'36' SURPLUS/DEFISIT 
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as real_spj from (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as kredit,0 as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,1)='4' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        UNION
        select 0 as kredit,isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,1)='5' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'
        ) v 
        ) i
        where map_lra_konsol13_$vbulan.nor = '36'
        
        --PEMBIAYAAN
        --'37' NETTO
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as real_spj from (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as kredit,0 as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2)='61' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        UNION
        select 0 as kredit,isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2)='62' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'
        ) v 
        ) i
        where map_lra_konsol13_$vbulan.nor = '37'    
            
        --'61'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2) in ('61') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '38'
        
        --'611'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('611') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '39'
        
        --'612'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('612') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '40'
        
        --'613'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('613') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '41'
        
        --'614'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('614') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '42'
        
        --'615'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('615') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '43'
        
        --'616'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('616') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '44'
        
        --'61'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2) in ('61') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '45'
        
        --'62'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2) in ('62') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '46'
        
        --'621'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('621') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '47'
        
        --'622'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('622') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '48'
        
        --'623'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('623') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '49'
        
        --'628'
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,3) in ('628') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '50'
  
          --'62' Jumlah Pengeuaran Pembiayaan
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as real_spj from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2) in ('62') and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        ) i
        where map_lra_konsol13_$vbulan.nor = '51'
        
        --'52' NETTO
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as real_spj from (
        select isnull(sum(a.kredit),0)-isnull(sum(a.debet),0) as kredit,0 as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2)='61' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'  
        UNION
        select 0 as kredit,isnull(sum(a.debet),0)-isnull(sum(a.kredit),0) as debet from trdju_pkd a 
        left join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
        left join trdrka c on c.kd_rek5 = a.map_real and c.kd_kegiatan = a.kd_kegiatan
        where left(a.map_real,2)='62' and left(b.kd_skpd,7) = left('$skpd',7) and 
        month(b.tgl_voucher)<=$vbulan and year(b.tgl_voucher)='2017'
        ) v 
        ) i
        where map_lra_konsol13_$vbulan.nor = '52'
        
        --'79' SILPA
            update map_lra_konsol13_$vbulan set $kolom=i.real_spj		
         
        from 
        (
        SELECT isnull(sum(v.surplus),0)+isnull(sum(v.netto),0) as real_spj from( 
        SELECT isnull(sum($kolom),0) as surplus,0 as netto  FROM [dbo].[map_lra_konsol13_$vbulan] where nor='36'
        UNION
        SELECT 0 as surplus,isnull(sum($kolom),0) as netto  FROM [dbo].[map_lra_konsol13_$vbulan] where nor='52'
        )v
        ) i
        where map_lra_konsol13_$vbulan.nor = '53' ";
        $asg = $this->db->query($sql);
		echo '1';	
	} 

    function cetak_lra_gab_pemkot_real13($bulanctk='',$cetak='',$ttd='',$tanggal_ttd='',$ttdperda=''){
	        $ttd1 = str_replace('n',' ',$ttdperda);
			$thi=$this->session->userdata('pcThang');
			$thz=$thi-1;
            
     $cRet='';
        
	 $modtahun= $thi%4;
	 
	/* if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 */
      if ($modtahun = 0){
        $nilaibulan=".JANUARI. FEBRUARI. MARET. APRIL. MEI. JUNI. JULI. AGUSTUS. SEPTEMBER. OKTOBER. NOVEMBER. DESEMBER";}
            else {
        $nilaibulan=".JANUARI. FEBRUARI. MARET. APRIL. MEI. JUNI. JULI. AGUSTUS. SEPTEMBER. OKTOBER. NOVEMBER. DESEMBER";}
	
	 $arraybulan=explode(".",$nilaibulan);
            

		
		$cRet ='<TABLE style="border-collapse:collapse;font-size:12px;font-family:Bookman Old Style" width="100%" border="0" cellspacing="0" cellpadding="1" align=center>
					<TR>
						<!--<TD  width="60%" valign="top" align="right" > Lampiran I : </TD>
						<TD width="40%"  align="left" >Peraturan Daerah <br>Nomor : <br>Tanggal: </TD>-->
					<TD  width="60%" valign="top" align="right" ></TD>
					<TD width="40%"  align="left" ></TD>
                    </TR> 
					<tr>
					</TABLE><br/>';
	$cRet .="<TABLE style=\"border-collapse:collapse;font-family:Bookman Old Style\" width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"1\" align=\"center\">
					<tr>
					<td rowspan=\"3\" align=\"center\" style=\"border-right:hidden\">
                        <img src=\"".base_url()."/image/logoHP.png\"  width=\"75\" height=\"100\" />
                        </td>
					<td align=\"center\" style=\"border-left:hidden;border-bottom:hidden\"><strong>PEMERINTAH KABUPATEN SANGGAU </strong></td></tr>
                    <tr><td align=\"center\" style=\"border-left:hidden;border-bottom:hidden;border-top:hidden\"><b>LAPORAN REALISASI ANGGARAN PENDAPATAN DAN BELANJA  </b></tr>
					<tr><td align=\"center\" style=\"border-left:hidden;border-top:hidden\" ><b>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$bulanctk] $thi</b></tr>
					</TABLE>";
			
		$cRet .="<table style=\"border-collapse:collapse;font-family:Bookman Old Style;font-size:11px\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"3\" cellpadding=\"3\">
                <thead>
				<tr>
                    <td rowspan=\"2\" width=\"7%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>KD REK</b></td>
                    <td rowspan=\"2\" width=\"32%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>URAIAN</b></td>
                    <td colspan=\"2\" width=\"37%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>JUMLAH (Rp.)</b></td>
                    <td colspan=\"2\" width=\"23%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>BERTAMBAH/KURANG</b></td>
				</tr>
				<tr>
					<td width=\"19%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>ANGGARAN</b></td>
					<td width=\"18%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>REALISASI</b></td>
					<td width=\"18%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>(Rp)</b></td>
					<td width=\"5%\" align=\"center\" bgcolor=\"#CCCCCC\" ><b>%</b></td>
					</tr>
					<tr>
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >1</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >2</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >3</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >4</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >5</td> 
                   <td align=\"center\" bgcolor=\"#CCCCCC\" >6</td> 
				</tr>
				</thead>";
				
				
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.kode_1,b.kode1,b.kode_2,b.kode_3,b.thn_m1,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_07_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                    FROM map_lra_konsol13_$bulanctk b order by cast(seq as int)");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
				$kode_2=$res->kode_2;
				$kode_1=$res->kode_1;
				$kode=$res->kode1;	
    			$initdb=$res->thn_m1;
				$bold=$res->bold;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;														
				
                $total_pemkot=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl20+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
				//kode1				
				$kode_1=trim($res->kode_1);				
				$kode_3=trim($res->kode_3);				
				
                if($kode_1=="") $kode_1="'xxx'";		
                if($kode_3=="") $kode_3="'xxx'";		
                
                if($initdb=="4" or $initdb=="61"){
                    $normal = "kredit-debet";                    
                }else{
                    $normal = "debet-kredit";
                }                		
				
                $cek_nil = $this->db->query("select isnull(sum(nilai_ubah),0) as nilai_ang from trdrka where (left(kd_rek5,$kode) in ($kode_1))")->row();
                $nilai_ang = $cek_nil->nilai_ang;                 					
                $per1     = ($nilai_ang!=0)?($total_pemkot / $nilai_ang ) * 100:0; 
				$sel = $nilai_ang-$total_pemkot;
					if(($nilai_ang==0) || ($nilai_ang=='')){
						$per1=0;
					} else{
					$per1 = $total_pemkot/$nilai_ang *100;
					}
				
				
               	if($bold=='1'){
				$cRet .='<TR>
						    <TD width="7" align="left" >'.$kode_2.'</TD>
							<TD width="32%" align="left" >&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="19%" align="right" >'.number_format($nilai_ang,2).'</TD>
							<TD width="18%" align="right" >'.number_format($total_pemkot,2).'</TD>
							<TD width="18%" align="right" >'.number_format($sel,2).'</TD>
							<TD width="5%" align="right" >'.number_format($per1,"2",",",".").'</TD>                         
						</TR>';
				}else if($bold=='2'){ 
				$cRet .='<TR>
							<TD width="7" align="left" ><b>'.$kode_2.'</b></TD>
							<TD width="32%" align="left" ><b>'.$uraian.'</b></TD>
							<TD width="19%" align="right" ><b>'.number_format($nilai_ang,2).'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($sel,2).'</b></TD>
							<TD width="5%" align="right" ><b>'.number_format($per1,"2",",",".").'</b></TD>		
							</TR>';
				}else if($bold=='3'){ 				
					
                    switch($no){
						case 36:
                        
                            $cek_nil = $this->db->query("select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as nilai_ang from (
                            select isnull(sum(a.nilai),0) as kredit,0 as debet from trdrka a                              
                            left join ms_rek5 b on b.kd_rek5 = a.kd_rek5  
                            where left(b.kd_rek5,1) in ('4')  
                            UNION
                            select 0 as kredit,isnull(sum(a.nilai_ubah),0) as debet from trdrka a                            
                            left join ms_rek5 b on b.kd_rek5 = a.kd_rek5  
                            where left(b.kd_rek5,1) in ('5') 
                            ) v ")->row();
                            $nilai_surplus = $cek_nil->nilai_ang;   
                                          	
				            $per1_surplus  = ($nilai_surplus!=0)?($total_pemkot / $nilai_surplus ) * 100:0; 
                        
                        
							$cRet .='<TR>
							<TD width="7" align="left" ><b>'.$kode_2.'</b></TD>
							<TD width="32%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="19%" align="right" ><b>'.number_format($nilai_surplus,2).'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>  
							<TD width="18%" align="right" ><b>'.number_format($sel,2).'</b></TD>                           
							<TD width="5%" align="right" ><b>'.number_format($per1_surplus,2).'</b></TD>
						    </TR>';	
						break;
						case 52:
                        
                         $cek_nil = $this->db->query("select isnull(sum(v.kredit),0)-isnull(sum(v.debet),0) as nilai_ang from (
                            select isnull(sum(a.nilai_ubah),0) as kredit,0 as debet from trdrka a
                            left join ms_rek5 b on b.kd_rek5 = a.kd_rek5  
                            where left(b.kd_rek5,2)='61'  
                            UNION
                            select 0 as kredit,isnull(sum(a.nilai_ubah),0) as debet from trdrka a
                            left join ms_rek5 b on b.kd_rek5 = a.kd_rek5  
                            where left(b.kd_rek5,2) in ('62') 
                            ) v ")->row();
                            $nilai_netto = $cek_nil->nilai_ang;   
                                          	
				            $per1_netto  = ($nilai_netto!=0)?($total_pemkot / $nilai_netto ) * 100:0; 
                        
						$cRet .='<TR>
							<TD width="5" align="left" ><b>'.$kode_2.'</b></TD>
							<TD width="32%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="19%" align="right" ><b>'.number_format($nilai_netto,2).'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD> 
							<TD width="18%" align="right" ><b>'.number_format($sel,2).'</b></TD>                              
							<TD width="5%" align="right" ><b>'.number_format($per1_netto,2).'</b></TD>
						    </TR>';	
						break;
						case 53:
                        
                            $nilai_silpa = $nilai_surplus + $nilai_netto;
                            $per1_silpa  = ($nilai_silpa!=0)?($total_pemkot / $nilai_silpa ) * 100:0;                 
                        
							$cRet .='<TR>
							<TD width="5" align="left" ><b>'.$kode_2.'</b></TD>
							<TD width="32%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="19%" align="right" ><b>'.number_format($nilai_silpa,2).'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD> 
							<TD width="18%" align="right" ><b>'.number_format($sel,2).'</b></TD>                            
							<TD width="5%" align="right" ><b>'.number_format($per1_silpa,2).'</b></TD>
						</TR>';	
						break;						
						default:
						$cRet .='<TR>
							<TD width="5" align="left" ><b>'.$kode_2.'</b></TD>
							<TD width="32%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="19%" align="right" ><b>'.number_format($nilai_ang,2).'</b></TD>
							<TD width="18%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD> 
							<TD width="18%" align="right" ><b>'.number_format($sel,2).'</b></TD>                              
							<TD width="5%" align="right" ><b>'.number_format($per1,2).'</b></TD>
						</TR>';
					}
                    			
				}else{ 
				$cRet .='<TR>
							<TD width="5" align="left" >'.$kode_2.'</TD>
							<TD width="32%" align="left" ><br/></TD>
							<TD width="19%" align="right" ><br/></TD>
							<TD width="18%" align="right" ><br/></TD>
							<TD width="18%" align="right" ><br/></TD>                            
							<TD width="5%" align="right" ><br/></TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';	
            
            
            if($ttd=="1"){
                
                $sqlsc="SELECT tgl_rka,provinsi,kab_kota,daerah,thn_ang FROM sclient where kd_skpd='4.02.01.00'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $kab     = $rowsc->kab_kota;
                    $daerah  = $rowsc->daerah;
                   
                }
                
                $sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab,pangkat FROM ms_ttd where nip='$ttd1' and kode in ('wk','agr')";
                 $sqlttd=$this->db->query($sqlttd1);
                 foreach ($sqlttd->result() as $rowttd)
                {
                    $nip=$rowttd->nip;                    
                    $nama= $rowttd->nm;
                    $jabatan  = $rowttd->jab;
                    $pangkat  = $rowttd->pangkat;
                }
                	
                    if($ttd1!='1'){
                    $xx="<u>";
                    $xy="</u>";
                    $nipxx=$nip;
				    $nipx="NIP. ";
                }else{
                    $xx="";
                    $xy="";
                    $nipxx="";
				    $nipx="";
                }		
		$cRet .='<TABLE style="border-collapse:collapse; font-size:16px" width="100%" border="0" cellspacing="0" cellpadding="0" align=center>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$daerah.', '.$this->tanggal_format_indonesia($tanggal_ttd).'</TD>
					</TR>
					
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$jabatan.'</b></TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
					<TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
					</TR>                    
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" ><b>'.$xx.''.$nama.''.$xy.'</b></TD>
					</TR>
                    <TR>
						<TD width="50%" align="center" ><b>&nbsp;</TD>
						<TD align="center" >'.$nipx.''.$nipxx.'</TD>
					</TR>
					</TABLE><br/>';
            }
            
            	 
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            //$data['prev'] = $cRet;
				//echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	} 
  

function cetak_lra_gab_skpd13($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" ><b>PEMERINTAH KABUPATEN SANGGAU</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>LAPORAN REALISASI ANGGARAN (GABUNGAN)</b></TD>
					</TR>
					<TR>
						<TD align="center" ><b>PER '.$arraybulan[$bulanctk].' '.$thi.'</b></TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC" ><b>NO</b></TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC" ><b>URAIAN</b></TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC" ><b>PPKD</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" ><b>SKPD</b></TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" ><b>PEMKOT</b></TD>						
					 </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.kode_1,b.kode_2,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_07_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                     FROM map_lra_konsol13_$bulanctk b order by cast(seq as int)");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
				//$seq=$res['seq'];
				//$parent=$res['parent'];
				$bold=$res->bold;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;											
				
                $total_ppkd=$nl20;
                $total_skpd=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
                $total_pemkot = $total_ppkd + $total_skpd;
				//kode1				
			/*	$kode_1=trim($res->kode_1);				
				if ($kode_1=="") $kode_1="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par = explode(",",$kode_1);				
				$leftpar = strlen($par[0]);
				$leftpar1= $leftpar-2;												
				
				//kode2
				$kode_2=trim($res->kode_2);				
				if ($kode_2=="") $kode_2="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par2 = explode(",",$kode_2);				
				$leftpar2 = strlen($par2[0]);
				$leftpar12= $leftpar2-2;												
				*/
                
               	if($bold=='1'){
				$cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
						</TR>';
				}else if($bold=='2'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							</TR>';
				}else if($bold=='3'){ 				
					
                    switch($no){
						case 59:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
						    </TR>';	
						break;
						case 77:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							</TR>';	
						break;
						case 79:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_ppkd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_skpd,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
						</TR>';	
						break;						
						default:
						$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" >'.number_format($total_ppkd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_skpd,2).'</TD>
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
						</TR>';
					}
                    			
				}else{ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$no.'</TD>
							<TD width="50%" align="left" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            //$data['prev'] = $cRet;
				//echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}
 

    function cetak_lra_gab_konsol13($bulanctk='',$cetak=''){
	        
			$thi=$this->session->userdata('pcThang');
			//$thl=$thi-1;
            
            $cRet='';
        
	 $modtahun= $thi%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);

            
			$cRet ='<TABLE width="100%">
					<TR>
						<TD align="center" >PEMERINTAH KABUPATEN SANGGAU</TD>
					</TR>
					<TR>
						<TD align="center" >LAPORAN REALISASI ANGGARAN (GABUNGAN) PER SKPD</TD>
					</TR>
					<TR>
						<TD align="center" >PER '.$arraybulan[$bulanctk].' '.$thi.'</TD>
					</TR>
					</TABLE><br>';


			$cRet .='<TABLE border="1" cellspacing="0" cellpadding="0" width="100%" >
					 <TR>
						<TD width="5%" align="center" bgcolor="#CCCCCC" >NO</TD>
						<TD width="50%" align="center" bgcolor="#CCCCCC" >URAIAN</TD>						
						<TD width="15%" align="center" bgcolor="#CCCCCC" >PEMKOT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENDIDIKAN DAN KEBUDAYAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KESEHATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PEKERJAAN UMUM DAN PENATAAN RUANG</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERUMAHAN RAKYAT DAN KAWASAN PEMUKIMAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SATUAN POLISI PAMONG PRAJA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANGGULANGAN KEBAKARAN DAN BENCANA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KANTOR KESATUAN BANGSA DAN SOSIAL POLITIK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS SOSIAL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENGENDALIAN PENDUDUK, KB, PEMBERDAYAAN PEREMPUAN DAN PERLINDUNGAN ANAK</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PANGAN, PERTANIAN DAN PERIKANAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS LINGKUNGAN HIDUP</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPENDUDUKAN DAN PENCATATAN SIPIL</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERHUBUNGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOMUNIKASI INFORMATIKA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KOPERASI, USAHA MIKRO DAN PERDAGANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PENANAMAN MODAL, TENAGA KERJA DAN PELAYANAN TERPADU SATU PINTU</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS KEPEMUDAAN, OLAHRAGA DAN PARIWISATA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DINAS PERPUSTAKAAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN PERENCANAAN PEMBANGUNAN DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >PPKD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEUANGAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >BADAN KEPEGAWAIAN DAN PENGEMBANGAN SUMBER DAYA MANUSIA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >DEWAN PERWAKILAN RAKYAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DPRD</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEPALA DAERAH DAN WAKIL KEPALA DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >SEKRETARIAT DAERAH</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >INSPEKTORAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TENGGARA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK SELATAN</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK TIMUR</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK KOTA</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK BARAT</TD>
						<TD width="15%" align="center" bgcolor="#CCCCCC" >KEC. PTK UTARA</TD>
					 </TR>';
						
			$idx=0;			
			$query = $this->db->query(" SELECT b.nor,b.uraian,b.kode_1,b.kode_2,b.bold,
                    b.a1_01_01_00,b.a1_02_01_00,b.a1_03_01_00
                    ,b.a1_04_01_00,b.a1_05_01_00,b.a1_05_02_00,b.a1_05_03_00,b.a1_06_01_00,b.a2_02_01_00
                    ,b.a2_03_01_00,b.a2_05_01_00,b.a2_06_01_00,b.a2_09_01_00,b.a2_10_01_00,b.a2_11_01_00
                    ,b.a2_12_01_00,b.a2_13_01_00,b.a2_17_01_00,b.a4_01_01_00,b.a4_02_01_00,b.a4_07_01_00
                    ,b.a4_02_02_00,b.a4_03_01_00,b.a4_05_01_00,b.a4_05_02_00,b.a4_06_01_00,b.a4_06_02_00
                    ,b.a4_08_01_00,b.a4_08_02_00,b.a4_08_03_00,b.a4_08_04_00,b.a4_08_05_00,b.a4_08_06_00
                     FROM map_lra_konsol13_$bulanctk b order by cast(seq as int)");  
			foreach($query->result() as $res){			 
				$idx++;
				$no=$res->nor;
				$uraian=$res->uraian;
				//$seq=$res['seq'];
				//$parent=$res['parent'];
				$bold=$res->bold;
                $nl1=$res->a1_01_01_00;$nl2=$res->a1_02_01_00;$nl3=$res->a1_03_01_00;
                $nl4=$res->a1_04_01_00;$nl5=$res->a1_05_01_00;$nl6=$res->a1_05_02_00;
                $nl7=$res->a1_05_03_00;$nl8=$res->a1_06_01_00;$nl9=$res->a2_02_01_00;
                $nl10=$res->a2_03_01_00;$nl11=$res->a2_05_01_00;$nl12=$res->a2_06_01_00;
                $nl13=$res->a2_09_01_00;$nl14=$res->a2_10_01_00;$nl15=$res->a2_11_01_00;
                $nl16=$res->a2_12_01_00;$nl17=$res->a2_13_01_00;$nl18=$res->a2_17_01_00;
                $nl19=$res->a4_01_01_00;$nl20=$res->a4_02_01_00;$nl21=$res->a4_02_02_00;
                $nl22=$res->a4_03_01_00;$nl23=$res->a4_05_01_00;$nl24=$res->a4_05_02_00;
                $nl25=$res->a4_06_01_00;$nl26=$res->a4_06_02_00;$nl27=$res->a4_07_01_00;
                $nl28=$res->a4_08_01_00;$nl29=$res->a4_08_02_00;$nl30=$res->a4_08_03_00;
                $nl31=$res->a4_08_04_00;$nl32=$res->a4_08_05_00;$nl33=$res->a4_08_06_00;															
				
                $total_pemkot=$nl1+$nl2+$nl3+$nl4+$nl5+$nl6+$nl7+$nl8+$nl9+$nl10+$nl11+$nl12+$nl13+$nl14+$nl15+$nl16+$nl17+$nl18+$nl19+$nl20+$nl21+$nl22+$nl23+$nl24+$nl25+$nl26+$nl27+$nl28+$nl29+$nl30+$nl31+$nl32+$nl33;
                
				//kode1				
				$kode_1=trim($res->kode_1);				
				if ($kode_1=="") $kode_1="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par = explode(",",$kode_1);				
				$leftpar = strlen($par[0]);
				$leftpar1= $leftpar-2;												
				
				//kode2
				$kode_2=trim($res->kode_2);				
				if ($kode_2=="") $kode_2="'xxx'";				
				//$kode1 = str_replace("'","",$kode_1);	
				
				$par2 = explode(",",$kode_2);				
				$leftpar2 = strlen($par2[0]);
				$leftpar12= $leftpar2-2;												
				
				if($bold=='1'){
				$cRet .='<TR>
						    <TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;'.$uraian.'</TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl1,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl2,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl3,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl4,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl5,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl6,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl7,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl8,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl9,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl10,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl11,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl12,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl13,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl14,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl15,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl16,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl17,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl18,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl19,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl20,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl21,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl22,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl23,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl24,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl25,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl26,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl27,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl28,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl29,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl30,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl31,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl32,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl33,2).'</TD>
						 </TR>';
				}else if($bold=='2'){ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><b>'.$uraian.'</b></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
							<TD width="15%" align="right" ></TD>
						 </TR>';
				}else if($bold=='3'){ 				
					
                    switch($no){
						case 59:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33,2).'</b></TD>
						 </TR>';	
						break;
						case 77:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33,2).'</b></TD>
						 </TR>';	
						break;
						case 79:
							$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" ><b>'.number_format($total_pemkot,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl1,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl2,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl3,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl4,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl5,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl6,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl7,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl8,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl9,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl10,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl11,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl12,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl13,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl14,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl15,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl16,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl17,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl18,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl19,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl20,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl21,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl22,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl23,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl24,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl25,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl26,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl27,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl28,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl29,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl30,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl31,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl32,2).'</b></TD>
							<TD width="15%" align="right" ><b>'.number_format($nl33,2).'</b></TD>
						 </TR>';	
						break;						
						default:
						$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" >&nbsp;&nbsp;&nbsp;&nbsp;<b>'.$uraian.'</b></TD>							
							<TD width="15%" align="right" >'.number_format($total_pemkot,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl1,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl2,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl3,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl4,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl5,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl6,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl7,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl8,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl9,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl10,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl11,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl12,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl13,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl14,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl15,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl16,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl17,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl18,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl19,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl20,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl21,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl22,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl23,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl24,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl25,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl26,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl27,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl28,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl29,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl30,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl31,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl32,2).'</TD>
							<TD width="15%" align="right" >'.number_format($nl33,2).'</TD>
						 </TR>';
					}
                    			
				}else{ 
				$cRet .='<TR>
							<TD width="5" align="center" >'.$idx.'</TD>
							<TD width="50%" align="left" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
							<TD width="15%" align="right" ><br/></TD>
						 </TR>';
				}
			}
			
			$cRet .='</TABLE>';		 
			if($cetak=='1'){
				//$this->tukd_model->_mpdf('',$cRet,10,5,10,'0');	
   	            $data['prev'] = $cRet;
				echo $cRet;	
			}else{
				$data['prev'] = $cRet;
				echo $cRet;
			}	    
	}

    function cetak_lra_lo_skpd($cbulan="", $kdskpd="",$pilih=1){
        //$id = $skpd;
        $cetak='2';//$ctk;
   	    $id = $kdskpd;
        //$id  = $this->uri->segment(4);	
        //$id     = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $thn_ang_1= $thn_ang-1;  
        //$laporan=$lap; 
       
       // if ($cetak == '1') {
//           $skpd = '';
//           $skpd1 = '';           
//       } else {             
           $skpd = "AND kd_skpd='$id'";
           $skpd1 = "AND b.kd_skpd='$id'"; 
       //}  

       $y123=")";
	   $x123="(";       
	    $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $nmskpd     = $rowsc->nm_skpd;
                } 
		$nm_skpd = strtoupper($nmskpd);		
	   // INSERT DATA
	   
       $sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
     
// created by henri_tb
			
		$sqllo1="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('81','82','83') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo1= $this->db->query($sqllo1);
                    $penlo = $querylo1->row();
                    $pen_lo = $penlo->nilai;
                    $pen_lo1= number_format($penlo->nilai,"2",",",".");
        
		$sqllo2="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo2= $this->db->query($sqllo2);
                    $penlo2 = $querylo2->row();
                    $pen_lo_lalu = $penlo2->nilai;
                    $pen_lo_lalu1= number_format($penlo2->nilai,"2",",",".");
		
		$sqllo3="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('91','92') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo3= $this->db->query($sqllo3);
                    $bello = $querylo3->row();
                    $bel_lo = $bello->nilai;
                    $bel_lo1= number_format($bello->nilai,"2",",",".");
        
		$sqllo4="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo4= $this->db->query($sqllo4);
                    $bello2 = $querylo4->row();
                    $bel_lo_lalu = $bello2->nilai;
                    $bel_lo_lalu1= number_format($bello2->nilai,"2",",",".");		

					$surplus_lo = $pen_lo - $bel_lo;
                    if ($surplus_lo < 0){
                    	$lo1="("; $surplus_lox=$surplus_lo*-1; $lo2=")";}
                    else {
                    	$lo1=""; $surplus_lox=$surplus_lo; $lo2="";}		
                    $surplus_lo1 = number_format($surplus_lox,"2",",",".");
                    
					$surplus_lo_lalu = $pen_lo_lalu - $bel_lo_lalu;
                    if ($surplus_lo_lalu < 0){
                    	$lo3="("; $surplus_lo_lalux=$surplus_lo_lalu*-1; $lo4=")";}
                    else {
                    	$lo3=""; $surplus_lo_lalux=$surplus_lo_lalu; $lo4="";}						
                    $surplus_lo_lalu1 = number_format($surplus_lo_lalux,"2",",",".");

					$selisih_surplus_lo = $surplus_lo - $surplus_lo_lalu;
                    if ($selisih_surplus_lo < 0){
                    	$lo5="("; $selisih_surplus_lox=$selisih_surplus_lo*-1; $lo6=")";}
                    else {
                    	$lo5=""; $selisih_surplus_lox=$selisih_surplus_lo; $lo6="";}
                    $selisih_surplus_lo1 = number_format($selisih_surplus_lox,"2",",",".");
                    
					if( $surplus_lo_lalu=='' or $surplus_lo_lalu==0){
					$persen2 = '0,00';
					}else{
					$persen2 = ($surplus_lo/$surplus_lo_lalu)*100;
					$persen2 = number_format($persen2,"2",",",".");
					}
					
		$sqllo5="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('84') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo5= $this->db->query($sqllo5);
                    $penlo3 = $querylo5->row();
                    $pen_lo3 = $penlo3->nilai;
                    $pen_lo31= number_format($penlo3->nilai,"2",",",".");
        
		$sqllo6="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('84') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo6= $this->db->query($sqllo6);
                    $penlo4 = $querylo6->row();
                    $pen_lo_lalu4 = $penlo4->nilai;
                    $pen_lo_lalu41= number_format($penlo4->nilai,"2",",",".");
		
		$sqllo7="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('93') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo7= $this->db->query($sqllo7);
                    $bello5 = $querylo7->row();
                    $bel_lo5 = $bello5->nilai;
                    $bel_lo51= number_format($bello5->nilai,"2",",",".");
		
		$sqllo8="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('93') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo8= $this->db->query($sqllo8);
                    $bello6 = $querylo8->row();
                    $bel_lo_lalu6 = $bello6->nilai;
                    $bel_lo_lalu61= number_format($bello6->nilai,"2",",",".");		

					$surplus_lo2 = $pen_lo3 - $bel_lo5;
                    if ($surplus_lo2 < 0){
                    	$lo7="("; $surplus_lo2x=$surplus_lo2*-1; $lo8=")";}
                    else {
                    	$lo7=""; $surplus_lo2x=$surplus_lo2; $lo8="";}		
                    $surplus_lo21 = number_format($surplus_lo2x,"2",",",".");
                    
					$surplus_lo_lalu2 = $pen_lo_lalu4 - $bel_lo_lalu6;
                    if ($surplus_lo_lalu2 < 0){
                    	$lo9="("; $surplus_lo_lalu2x=$surplus_lo_lalu2*-1; $lo10=")";}
                    else {
                    	$lo9=""; $surplus_lo_lalu2x=$surplus_lo_lalu2; $lo10="";}						
                    $surplus_lo_lalu21 = number_format($surplus_lo_lalu2x,"2",",",".");

					$selisih_surplus_lo2 = $surplus_lo2 - $surplus_lo_lalu2;
                    if ($selisih_surplus_lo2 < 0){
                    	$lo11="("; $selisih_surplus_lo2x=$selisih_surplus_lo2*-1; $lo12=")";}
                    else {
                    	$lo11=""; $selisih_surplus_lo2x=$selisih_surplus_lo2; $lo12="";}
                    $selisih_surplus_lo21 = number_format($selisih_surplus_lo2x,"2",",",".");
                    
					if( $surplus_lo_lalu2=='' or $surplus_lo_lalu2==0){
					$persen3 = '0,00';
					}else{
					$persen3 = ($surplus_lo2/$surplus_lo_lalu2)*100;
					$persen3 = number_format($persen3,"2",",",".");
					}
		
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('8') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('9') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3x=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $surplus_lo3x=$surplus_lo3; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3x,"2",",",".");
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3x=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $surplus_lo_lalu3x=$surplus_lo_lalu3; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3x,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3x=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $selisih_surplus_lo3x=$selisih_surplus_lo3; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3x,"2",",",".");
                    
					if( $surplus_lo_lalu3=='' or $surplus_lo_lalu3==0){
					$persen4 = '0,00';
					}else{
					$persen4 = ($surplus_lo3/$surplus_lo_lalu3)*100;
					$persen4 = number_format($persen4,"2",",",".");
					}
	 
	 $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
        $cRet='';
        
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong> $nm_skpd</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN OPERASIONAL </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>&nbsp;</strong></td>
                    </tr>
                  </table>";   
     
		$cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
                            <td width=\"8%\" align=\"center\" style=\"border:none;\"></td> 
                            <td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td colspan =\"5\" bgcolor=\"#CCCCCC\" width=\"27%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\" ><b>Kenaikan<br/>(Penurunan)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border:none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td colspan =\"5\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr>
                            <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td colspan =\"5\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"27%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";

        $sqlmaplo="SELECT seq, nor, uraian, bold, isnull(kode_1,'-') as kode_1, isnull(cetak,'debet-debet') as cetak FROM map_lo_skpd 
				   GROUP BY seq, nor, uraian, bold, isnull(kode_1,'-'), isnull(cetak,'debet-debet') ORDER BY seq";
				   
                $querymaplo = $this->db->query($sqlmaplo);
                $no     = 0;                                  
               
                foreach ($querymaplo->result() as $loquery)
                {
                    
                    $nama      = $loquery->uraian;   
                    $n         = $loquery->kode_1;
					$n		   = ($n=="-"?"'-'":$n);
					$normal    = $loquery->cetak;
					$bold      = $loquery->bold;
					
		$quelo01   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $quelo02 = $this->db->query($quelo01);
                    $quelo03 = $quelo02->row();
                    $nil     = $quelo03->nilai;
                    $nilai    = number_format($quelo03->nilai,"2",",",".");
					
		$quelo04   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang_1 and left(b.kd_skpd,7)=left('$id',7)";
                    $quelo05 = $this->db->query($quelo04);
                    $quelo06 = $quelo05->row();
                    $nil_lalu     = $quelo06->nilai;
                    $nilai_lalu    = number_format($quelo06->nilai,"2",",",".");
					
                    $real_nilai = $nil - $nil_lalu;
                    if ($real_nilai < 0){
                    	$lo0="("; $real_nilaix=$real_nilai*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai; $lo00="";}
                    $real_nilai1 = number_format($real_nilaix,"2",",",".");
                    
					if( $nil_lalu=='' or $nil_lalu==0){
					$persen1 = '0,00';
					}else{
					$persen1 = ($nil/$nil_lalu)*100;
					$persen1 = number_format($persen1,"2",",",".");
					}
                    $no       = $no + 1;
                    switch ($loquery->bold) {
                    case 0:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no</b></td>                                     
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 1:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no</b></td>                                     
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no</b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"4\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no</b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai_lalu</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo0$real_nilai1$lo00</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen1</b></td>
                                 </tr>";
                        break;
					case 5:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no</b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo1$surplus_lo1$lo2</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo3$surplus_lo_lalu1$lo4</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo5$selisih_surplus_lo1$lo6</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen2</b></td>
                                 </tr>";
                        break;
					case 6:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no</b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo7$surplus_lo21$lo8</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo9$surplus_lo_lalu21$lo10</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo11$selisih_surplus_lo21$lo12</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen3</b></td>
                                 </tr>";
                        break;
					case 7:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no</b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"3%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo13$surplus_lo31$lo14</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo15$surplus_lo_lalu31$lo16</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo17$selisih_surplus_lo31$lo18</b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen4</td>
                                 </tr>";
                        break;	
				}
                              
                    
                }

/*        
        $cRet .=       " </table>";
        
        	$sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PA' and nip='$ttd1'";
            $sqlttd=$this->db->query($sqlttd1);
            foreach ($sqlttd->result() as $rowttd)
			
                {
                    $nip=$rowttd->nip;                    
                    $oioi= $rowttd->nm;
                    $jabatan = $rowttd->jab;
                }	
            
            $sqlttd12="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PPK' and nip='$ttd2'";
            $sqlttd2=$this->db->query($sqlttd12);
            foreach ($sqlttd2->result() as $rowttd)
			
                {
                    $nip2=$rowttd->nip;                    
                    $oioi2= $rowttd->nm;
                    $jabatan2 = $rowttd->jab;
                }	

            
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> Mengetahui,</td>
		 <td align=\"center\" width=\"50%\"> Sanggau, $ctgl_ttd</td>
		 </tr>		
		 <tr>
		 <td align=\"center\" width=\"50%\"> $jabatan </td>
		 <td align=\"center\" width=\"50%\"> $jabatan2 </td>
		 </tr>	
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		  <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> $oioi</td>
		 <td align=\"center\" width=\"50%\"> $oioi2 </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> NIP :$nip</td>
		 <td align=\"center\" width=\"50%\"> NIP :$nip2 </td>
		 </tr>
         </table>
		 ";
*/
        
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LO SKPD $id / $cbulan");
        $this->template->set('title', 'LO SKPD $id / $cbulan');        
        switch($pilih) {       
        case 1;
			echo ("<title>LO SKPD $cbulan</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
         case 0;
              $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
         break;
        } 
        
                 
    }

	function cetak_lra_lo_obyek($cbulan="", $kdskpd="",$pilih=1){
        //$id = $skpd;
        $cetak='2';//$ctk;
       	$id = $kdskpd;
        //$id     = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $thn_ang_1= $thn_ang-1;
        //$laporan=$lap; 
       
       // if ($cetak == '1') {
//           $skpd = '';
//           $skpd1 = '';           
//       } else {             
           $skpd = "AND kd_skpd='$id'";
           $skpd1 = "AND b.kd_skpd='$id'"; 
       //}  

       $y123=")";
	   $x123="(";       
	    $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $nmskpd     = $rowsc->nm_skpd;
                } 
		$nm_skpd = strtoupper($nmskpd);		
	   // INSERT DATA
	   
       $sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
     
// created by henri_tb
			
		$sqllo1="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('81','82','83') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo1= $this->db->query($sqllo1);
                    $penlo = $querylo1->row();
                    $pen_lo = $penlo->nilai;
                    $pen_lo1= number_format($penlo->nilai,"2",",",".");
        
		$sqllo2="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo2= $this->db->query($sqllo2);
                    $penlo2 = $querylo2->row();
                    $pen_lo_lalu = $penlo2->nilai;
                    $pen_lo_lalu1= number_format($penlo2->nilai,"2",",",".");
		
		$sqllo3="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('91','92') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo3= $this->db->query($sqllo3);
                    $bello = $querylo3->row();
                    $bel_lo = $bello->nilai;
                    $bel_lo1= number_format($bello->nilai,"2",",",".");
        
		$sqllo4="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo4= $this->db->query($sqllo4);
                    $bello2 = $querylo4->row();
                    $bel_lo_lalu = $bello2->nilai;
                    $bel_lo_lalu1= number_format($bello2->nilai,"2",",",".");		

					$surplus_lo = $pen_lo - $bel_lo;
                    if ($surplus_lo < 0){
                    	$lo1="("; $surplus_lox=$surplus_lo*-1; $lo2=")";}
                    else {
                    	$lo1=""; $surplus_lox=$surplus_lo; $lo2="";}		
                    $surplus_lo1 = number_format($surplus_lox,"2",",",".");
                    
					$surplus_lo_lalu = $pen_lo_lalu - $bel_lo_lalu;
                    if ($surplus_lo_lalu < 0){
                    	$lo3="("; $surplus_lo_lalux=$surplus_lo_lalu*-1; $lo4=")";}
                    else {
                    	$lo3=""; $surplus_lo_lalux=$surplus_lo_lalu; $lo4="";}						
                    $surplus_lo_lalu1 = number_format($surplus_lo_lalux,"2",",",".");

					$selisih_surplus_lo = $surplus_lo - $surplus_lo_lalu;
                    if ($selisih_surplus_lo < 0){
                    	$lo5="("; $selisih_surplus_lox=$selisih_surplus_lo*-1; $lo6=")";}
                    else {
                    	$lo5=""; $selisih_surplus_lox=$selisih_surplus_lo; $lo6="";}
                    $selisih_surplus_lo1 = number_format($selisih_surplus_lox,"2",",",".");
                    
					if( $surplus_lo_lalu=='' or $surplus_lo_lalu==0){
					$persen2 = '0,00';
					}else{
					$persen2 = ($surplus_lo/$surplus_lo_lalu)*100;
					$persen2 = number_format($persen2,"2",",",".");
					}
					
		$sqllo5="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('84') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo5= $this->db->query($sqllo5);
                    $penlo3 = $querylo5->row();
                    $pen_lo3 = $penlo3->nilai;
                    $pen_lo31= number_format($penlo3->nilai,"2",",",".");
        
		$sqllo6="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('84') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo6= $this->db->query($sqllo6);
                    $penlo4 = $querylo6->row();
                    $pen_lo_lalu4 = $penlo4->nilai;
                    $pen_lo_lalu41= number_format($penlo4->nilai,"2",",",".");
		
		$sqllo7="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('93') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo7= $this->db->query($sqllo7);
                    $bello5 = $querylo7->row();
                    $bel_lo5 = $bello5->nilai;
                    $bel_lo51= number_format($bello5->nilai,"2",",",".");
		
		$sqllo8="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('93') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo8= $this->db->query($sqllo8);
                    $bello6 = $querylo8->row();
                    $bel_lo_lalu6 = $bello6->nilai;
                    $bel_lo_lalu61= number_format($bello6->nilai,"2",",",".");		

					$surplus_lo2 = $pen_lo3 - $bel_lo5;
                    if ($surplus_lo2 < 0){
                    	$lo7="("; $surplus_lo2x=$surplus_lo2*-1; $lo8=")";}
                    else {
                    	$lo7=""; $surplus_lo2x=$surplus_lo2; $lo8="";}		
                    $surplus_lo21 = number_format($surplus_lo2x,"2",",",".");
                    
					$surplus_lo_lalu2 = $pen_lo_lalu4 - $bel_lo_lalu6;
                    if ($surplus_lo_lalu2 < 0){
                    	$lo9="("; $surplus_lo_lalu2x=$surplus_lo_lalu2*-1; $lo10=")";}
                    else {
                    	$lo9=""; $surplus_lo_lalu2x=$surplus_lo_lalu2; $lo10="";}						
                    $surplus_lo_lalu21 = number_format($surplus_lo_lalu2x,"2",",",".");

					$selisih_surplus_lo2 = $surplus_lo2 - $surplus_lo_lalu2;
                    if ($selisih_surplus_lo2 < 0){
                    	$lo11="("; $selisih_surplus_lo2x=$selisih_surplus_lo2*-1; $lo12=")";}
                    else {
                    	$lo11=""; $selisih_surplus_lo2x=$selisih_surplus_lo2; $lo12="";}
                    $selisih_surplus_lo21 = number_format($selisih_surplus_lo2x,"2",",",".");
                    
					if( $surplus_lo_lalu2=='' or $surplus_lo_lalu2==0){
					$persen3 = '0,00';
					}else{
					$persen3 = ($surplus_lo2/$surplus_lo_lalu2)*100;
					$persen3 = number_format($persen3,"2",",",".");
					}
		
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('8') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('9') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3x=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $surplus_lo3x=$surplus_lo3; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3x,"2",",",".");
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3x=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $surplus_lo_lalu3x=$surplus_lo_lalu3; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3x,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3x=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $selisih_surplus_lo3x=$selisih_surplus_lo3; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3x,"2",",",".");
                    
					if( $surplus_lo_lalu3=='' or $surplus_lo_lalu3==0){
					$persen4 = '0,00';
					}else{
					$persen4 = ($surplus_lo3/$surplus_lo_lalu3)*100;
					$persen4 = number_format($persen4,"2",",",".");
					}
	 
	 $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
        $cRet='';
        
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong> $nm_skpd</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN OPERASIONAL </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>&nbsp;</strong></td>
                    </tr>
                  </table>";   
     
		$cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr><td width=\"8%\" align=\"center\" style=\"border:none;\"></td> 
                            <td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td colspan =\"6\" bgcolor=\"#CCCCCC\" width=\"27%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\" ><b>Kenaikan<br/>(Penurunan)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border:none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td colspan =\"6\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>                   
                     <tr>   
                            <td width=\"8%\" align=\"center\" style=\"border:none;\"></td> 
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td colspan =\"6\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"27%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";

        $sqlmaplo="	select '1' bold, '8' kode, 'PENDAPATAN' nm_rek, 0 nilai, 0 nilai_l 
					union all
					select '2' bold, '81' kode, 'PENDAPATAN ASLI DAERAH' nm_rek, 0 nilai, 0 nilai_l 
					union all
					select '3' bold, '811' kode, 'Pendapatan Pajak Daerah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('811')
					union all
					select '3' bold, '812' kode, 'Pendapatan Retribusi Daerah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('812')
					union all
					select '3' bold, '813' kode, 'Pendapatan Hasil Pengelolaan Kekayaan Daerah yang Dipisahkan' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('813')
					union all
					select '3' bold, '814' kode, 'Lain-lain PAD Yang Sah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('814')
					union all
					select '5' bold, '81499' kode, 'Jumlah Pendapatan Asli Daerah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('811','812','813','814')
					union all
					select '0' bold, '814999' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '2' bold, '83' kode, 'LAIN-LAIN PENDAPATAN DAERAH YANG SAH' nm_rek, 0 nilai, 0 nilai_l  
					union all
					select '3' bold, '833' kode, 'Pendapatan Lainnya' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('833','831')
					union all
					select '5' bold, '83399' kode, 'Jumlah Pendapatan Lainnya' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('833','831')
					union all
					select '0' bold, '833999' kode, '' nm_rek, 0 nilai, 0 nilai_l 
					union all
					select '4' bold, LEFT(kd_rek5,5) kode, c.nm_rek4_64 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek4_64 c on left(a.kd_rek5,5)=c.kd_rek4_64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('811','812','813','814','833')
					group by LEFT(kd_rek5,5), c.nm_rek4_64
					union all
					select '1' bold, '9' kode, 'BEBAN' nm_rek, 0 nilai, 0 nilai_l 
					union all
					select '2' bold, '91' kode, 'BEBAN OPERASI' nm_rek, 0 nilai, 0 nilai_l
					union all 
					select '3' bold, '911' kode, 'Beban Pegawai' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('911')
					union all
					select '3' bold, '912' kode, 'Beban Barang dan Jasa' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('912')
					union all
					select '3' bold, '913' kode, 'Beban Bunga' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('913')
					union all
					select '3' bold, '914' kode, 'Beban Subsidi' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('914')
					union all
					select '3' bold, '915' kode, 'Beban Hibah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('915')
					union all
					select '3' bold, '916' kode, 'Beban Bantuan Sosial' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('916')
					union all
					select '3' bold, '917' kode, 'Beban Penyusutan' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('917')
					union all
					select '3' bold, '918' kode, 'Beban Penyisihan Piutang' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('918')
					union all
					select '3' bold, '919' kode, 'Beban Lain-lain' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('919')
					union all
					select '4' bold, LEFT(kd_rek5,5) kode, c.nm_rek4_64 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek4_64 c on left(a.kd_rek5,5)=c.kd_rek4_64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('91')
					group by LEFT(kd_rek5,5), c.nm_rek4_64 
					union all
					select '5' bold, '9199' kode, 'Jumlah Beban Operasi' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('91')
					union all
					select '0' bold, '91999' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '6' bold, '919999' kode, 'JUMLAH SURPLUS/DEFISIT DARI OPERASI' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '0' bold, '9199999' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '2' bold, '984' kode, 'SURPLUS NON OPERASIONAL' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '3' bold, '9841' kode, 'Surplus Penjualan Aset Non Lancar' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('841')
					union all
					select '3' bold, '9842' kode, 'Surplus Penyelesaian Kewajiban Jangka Panjang' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('842')
					union all
					select '3' bold, '9843' kode, 'Surplus dari Kegiatan Non Operasional Lainnya' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('843')
					union all
					select '5' bold, '9844' kode, 'Jumlah Surplus Non Operasional' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('84')
					union all
					select '4' bold, '9'+LEFT(kd_rek5,5) kode, c.nm_rek4_64 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek4_64 c on left(a.kd_rek5,5)=c.kd_rek4_64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('84')
					group by LEFT(kd_rek5,5), c.nm_rek4_64
					union all
					select '0' bold, '98444' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '2' bold, '993' kode, 'DEFISIT NON OPERASIONAL' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '3' bold, '9931' kode, 'Defisit Penjualan Aset Non Lancar' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('931')
					union all
					select '3' bold, '9932' kode, 'Defisit Penyelesaian Kewajiban Jangka Panjang' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('932')
					union all
					select '3' bold, '9933' kode, 'Defisit dari Kegiatan Non Operasional Lainnya' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('933')
					union all
					select '5' bold, '993333' kode, 'Jumlah Defisit Non Operasioanl' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('93')
					union all
					select '4' bold, '9'+LEFT(kd_rek5,5) kode, c.nm_rek4_64 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek4_64 c on left(a.kd_rek5,5)=c.kd_rek4_64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('93')
					group by LEFT(kd_rek5,5), c.nm_rek4_64 
					union all
					select '0' bold, '9933333' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '7' bold, '99333333' kode, 'JUMLAH SURPLUS / DEFISIT DARI KEGIATAN NON OPERASIONAL' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '0' bold, '993333333' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '8' bold, '9933333333' kode, 'SURPLUS / DEFISIT - LO' nm_rek, 0 nilai, 0 nilai_l
					order by kode";
				   
                $querymaplo = $this->db->query($sqlmaplo);
                $no     = 0;                                  
               
                foreach ($querymaplo->result() as $loquery)
                {
                    $bold      	= $loquery->bold;
					$kode    	= $loquery->kode;
                    $nama     	= $loquery->nm_rek;   
                //  $n        	= $loquery->kode_1;
				//	$n		  	= ($n=="-"?"'-'":$n);
					$nil      	= $loquery->nilai;
					$nil_lalu  = $loquery->nilai_l;
					$nilai   	= number_format($nil,"2",",",".");
					$nilai_lalu = number_format($nil_lalu,"2",",",".");
					
		/*$quelo01   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $quelo02 = $this->db->query($quelo01);
                    $quelo03 = $quelo02->row();
                    $nil     = $quelo03->nilai;
                    $nilai    = number_format($quelo03->nilai,"2",",",".");
					
		$quelo04   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang_1 and left(b.kd_skpd,7)=left('$id',7)";
                    $quelo05 = $this->db->query($quelo04);
                    $quelo06 = $quelo05->row();
                    $nil_lalu     = $quelo06->nilai;
                    $nilai_lalu    = number_format($quelo06->nilai,"2",",",".");*/
					
                    $real_nilai = $nil - $nil_lalu;
                    if ($real_nilai < 0){
                    	$lo0="("; $real_nilaix=$real_nilai*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai; $lo00="";}
                    $real_nilai1 = number_format($real_nilaix,"2",",",".");
                    
					if( $nil_lalu=='' or $nil_lalu==0){
					$persen1 = '0,00';
					}else{
					$persen1 = ($nil/$nil_lalu)*100;
					$persen1 = number_format($persen1,"2",",",".");
					}
                    $no       = $no + 1;
                    switch ($loquery->bold) {
                    case 0:
                         $cRet    .= "<tr>   
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td> 
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 1:
                         $cRet    .= "<tr>   
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr>   
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr>   
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td colspan =\"4\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai_lalu<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo0$real_nilai1$lo00<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen1<b></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr>   
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;	
					case 5:
                         $cRet    .= "<tr>   
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai_lalu<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo0$real_nilai1$lo00<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen1<b></td>
                                 </tr>";
                        break;
					case 6:
                         $cRet    .= "<tr>   
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo1$surplus_lo1$lo2<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo3$surplus_lo_lalu1$lo4<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo5$selisih_surplus_lo1$lo6<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen2<b></td>
                                 </tr>";
                        break;
					case 7:
                         $cRet    .= "<tr>   
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo7$surplus_lo21$lo8<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo9$surplus_lo_lalu21$lo10<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo11$selisih_surplus_lo21$lo12<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen3<b></td>
                                 </tr>";
                        break;
					case 8:
                         $cRet    .= "<tr>   
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo13$surplus_lo31$lo14<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo15$surplus_lo_lalu31$lo16<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo17$selisih_surplus_lo31$lo18<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen4<b></td>
                                 </tr>";
                        break;	
				}
                              
                    
                }
				
       // $cRet         .= "</table>";
//        $data['prev']  = $cRet;
//        $data['sikap'] = 'preview';
//        
//        
//        
//        $this->template->set('title', 'LAPORAN OPERASIONAL'); 
//        $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
        //$this->template->load('template','anggaran/rka/perkadaII',$data); 
/*        
        $cRet .=       " </table>";
        
        	$sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PA' and nip='$ttd1'";
            $sqlttd=$this->db->query($sqlttd1);
            foreach ($sqlttd->result() as $rowttd)
			
                {
                    $nip=$rowttd->nip;                    
                    $oioi= $rowttd->nm;
                    $jabatan = $rowttd->jab;
                }	
            
            $sqlttd12="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PPK' and nip='$ttd2'";
            $sqlttd2=$this->db->query($sqlttd12);
            foreach ($sqlttd2->result() as $rowttd)
			
                {
                    $nip2=$rowttd->nip;                    
                    $oioi2= $rowttd->nm;
                    $jabatan2 = $rowttd->jab;
                }	

            
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> Mengetahui,</td>
		 <td align=\"center\" width=\"50%\"> Sanggau, $ctgl_ttd </td>
		 </tr>		
		 <tr>
		 <td align=\"center\" width=\"50%\"> $jabatan </td>
		 <td align=\"center\" width=\"50%\"> $jabatan2 </td>
		 </tr>	
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		  <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> $oioi</td>
		 <td align=\"center\" width=\"50%\"> $oioi2 </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> NIP :$nip</td>
		 <td align=\"center\" width=\"50%\"> NIP :$nip2 </td>
		 </tr>
         </table>
		 ";
 */       
 
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LO OBYEK SKPD $id / $cbulan");
        $this->template->set('title', 'LO OBYEK SKPD $id / $cbulan');        
        switch($pilih) {       
        case 1;
			echo ("<title>LO OBYEK SKPD $cbulan</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
         case 0;
              $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
         break;
        } 
        
                 
    }

    function cetak_lra_lo_rincian($cbulan="", $kdskpd="",$pilih=1){
        $id = $kdskpd;
        $cetak='2';//$ctk;
        //$id     = $this->session->userdata('kdskpd');
        $thn_ang = $this->session->userdata('pcThang');
        $thn_ang_1= $thn_ang-1; 

        //$laporan=$lap; 
       
       // if ($cetak == '1') {
//           $skpd = '';
//           $skpd1 = '';           
//       } else {             
           $skpd = "AND kd_skpd='$id'";
           $skpd1 = "AND b.kd_skpd='$id'"; 
       //}  

       $y123=")";
	   $x123="(";       
	    $sqlsc="SELECT nm_skpd FROM ms_skpd where kd_skpd='$id'";
                 $sqlsclient=$this->db->query($sqlsc);
                 foreach ($sqlsclient->result() as $rowsc)
                {
                    $nmskpd     = $rowsc->nm_skpd;
                } 
		$nm_skpd = strtoupper($nmskpd);		
	   // INSERT DATA
	   
       $sqldns="SELECT a.kd_urusan as kd_u,b.nm_urusan as nm_u,a.kd_skpd as kd_sk,a.nm_skpd as nm_sk FROM ms_skpd a INNER JOIN ms_urusan b ON a.kd_urusan=b.kd_urusan WHERE kd_skpd='$id'";
                 $sqlskpd=$this->db->query($sqldns);
                 foreach ($sqlskpd->result() as $rowdns)
                {
                    $kd_urusan=$rowdns->kd_u;                    
                    $nm_urusan= $rowdns->nm_u;
                    $kd_skpd  = $rowdns->kd_sk;
                    $nm_skpd  = $rowdns->nm_sk;
                } 
     
// created by henri_tb
			
		$sqllo1="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('81','82','83') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo1= $this->db->query($sqllo1);
                    $penlo = $querylo1->row();
                    $pen_lo = $penlo->nilai;
                    $pen_lo1= number_format($penlo->nilai,"2",",",".");
        
		$sqllo2="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('81','82','83') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo2= $this->db->query($sqllo2);
                    $penlo2 = $querylo2->row();
                    $pen_lo_lalu = $penlo2->nilai;
                    $pen_lo_lalu1= number_format($penlo2->nilai,"2",",",".");
		
		$sqllo3="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('91','92') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo3= $this->db->query($sqllo3);
                    $bello = $querylo3->row();
                    $bel_lo = $bello->nilai;
                    $bel_lo1= number_format($bello->nilai,"2",",",".");
        
		$sqllo4="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('91','92') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo4= $this->db->query($sqllo4);
                    $bello2 = $querylo4->row();
                    $bel_lo_lalu = $bello2->nilai;
                    $bel_lo_lalu1= number_format($bello2->nilai,"2",",",".");		

					$surplus_lo = $pen_lo - $bel_lo;
                    if ($surplus_lo < 0){
                    	$lo1="("; $surplus_lox=$surplus_lo*-1; $lo2=")";}
                    else {
                    	$lo1=""; $surplus_lox=$surplus_lo; $lo2="";}		
                    $surplus_lo1 = number_format($surplus_lox,"2",",",".");
                    
					$surplus_lo_lalu = $pen_lo_lalu - $bel_lo_lalu;
                    if ($surplus_lo_lalu < 0){
                    	$lo3="("; $surplus_lo_lalux=$surplus_lo_lalu*-1; $lo4=")";}
                    else {
                    	$lo3=""; $surplus_lo_lalux=$surplus_lo_lalu; $lo4="";}						
                    $surplus_lo_lalu1 = number_format($surplus_lo_lalux,"2",",",".");

					$selisih_surplus_lo = $surplus_lo - $surplus_lo_lalu;
                    if ($selisih_surplus_lo < 0){
                    	$lo5="("; $selisih_surplus_lox=$selisih_surplus_lo*-1; $lo6=")";}
                    else {
                    	$lo5=""; $selisih_surplus_lox=$selisih_surplus_lo; $lo6="";}
                    $selisih_surplus_lo1 = number_format($selisih_surplus_lox,"2",",",".");
                    
					if( $surplus_lo_lalu=='' or $surplus_lo_lalu==0){
					$persen2 = '0,00';
					}else{
					$persen2 = ($surplus_lo/$surplus_lo_lalu)*100;
					$persen2 = number_format($persen2,"2",",",".");
					}
					
		$sqllo5="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('84') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo5= $this->db->query($sqllo5);
                    $penlo3 = $querylo5->row();
                    $pen_lo3 = $penlo3->nilai;
                    $pen_lo31= number_format($penlo3->nilai,"2",",",".");
        
		$sqllo6="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('84') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo6= $this->db->query($sqllo6);
                    $penlo4 = $querylo6->row();
                    $pen_lo_lalu4 = $penlo4->nilai;
                    $pen_lo_lalu41= number_format($penlo4->nilai,"2",",",".");
		
		$sqllo7="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,2) in ('93') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo7= $this->db->query($sqllo7);
                    $bello5 = $querylo7->row();
                    $bel_lo5 = $bello5->nilai;
                    $bel_lo51= number_format($bello5->nilai,"2",",",".");
		
		$sqllo8="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,2) in ('93') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo8= $this->db->query($sqllo8);
                    $bello6 = $querylo8->row();
                    $bel_lo_lalu6 = $bello6->nilai;
                    $bel_lo_lalu61= number_format($bello6->nilai,"2",",",".");		

					$surplus_lo2 = $pen_lo3 - $bel_lo5;
                    if ($surplus_lo2 < 0){
                    	$lo7="("; $surplus_lo2x=$surplus_lo2*-1; $lo8=")";}
                    else {
                    	$lo7=""; $surplus_lo2x=$surplus_lo2; $lo8="";}		
                    $surplus_lo21 = number_format($surplus_lo2x,"2",",",".");
                    
					$surplus_lo_lalu2 = $pen_lo_lalu4 - $bel_lo_lalu6;
                    if ($surplus_lo_lalu2 < 0){
                    	$lo9="("; $surplus_lo_lalu2x=$surplus_lo_lalu2*-1; $lo10=")";}
                    else {
                    	$lo9=""; $surplus_lo_lalu2x=$surplus_lo_lalu2; $lo10="";}						
                    $surplus_lo_lalu21 = number_format($surplus_lo_lalu2x,"2",",",".");

					$selisih_surplus_lo2 = $surplus_lo2 - $surplus_lo_lalu2;
                    if ($selisih_surplus_lo2 < 0){
                    	$lo11="("; $selisih_surplus_lo2x=$selisih_surplus_lo2*-1; $lo12=")";}
                    else {
                    	$lo11=""; $selisih_surplus_lo2x=$selisih_surplus_lo2; $lo12="";}
                    $selisih_surplus_lo21 = number_format($selisih_surplus_lo2x,"2",",",".");
                    
					if( $surplus_lo_lalu2=='' or $surplus_lo_lalu2==0){
					$persen3 = '0,00';
					}else{
					$persen3 = ($surplus_lo2/$surplus_lo_lalu2)*100;
					$persen3 = number_format($persen3,"2",",",".");
					}
		
		$sqllo9="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('8') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo9= $this->db->query($sqllo9);
                    $penlo7 = $querylo9->row();
                    $pen_lo7 = $penlo7->nilai;
                    $pen_lo71= number_format($penlo7->nilai,"2",",",".");
        
		$sqllo10="select sum(kredit-debet) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('8') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo10= $this->db->query($sqllo10);
                    $penlo8 = $querylo10->row();
                    $pen_lo_lalu8 = $penlo8->nilai;
                    $pen_lo_lalu81= number_format($penlo8->nilai,"2",",",".");
		
		$sqllo11="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang and left(kd_rek5,1) in ('9') and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo11= $this->db->query($sqllo11);
                    $bello9 = $querylo11->row();
                    $bel_lo9 = $bello9->nilai;
                    $bel_lo91= number_format($bello9->nilai,"2",",",".");
		
		$sqllo12="select sum(debet-kredit) as nilai from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd where year(tgl_voucher)=$thn_ang_1 and left(kd_rek5,1) in ('9') and left(b.kd_skpd,7)=left('$id',7)";
                    $querylo12= $this->db->query($sqllo12);
                    $bello10 = $querylo12->row();
                    $bel_lo_lalu10 = $bello10->nilai;
                    $bel_lo_lalu101= number_format($bello10->nilai,"2",",",".");		

					$surplus_lo3 = $pen_lo7 - $bel_lo9;
                    if ($surplus_lo3 < 0){
                    	$lo13="("; $surplus_lo3x=$surplus_lo3*-1; $lo14=")";}
                    else {
                    	$lo13=""; $surplus_lo3x=$surplus_lo3; $lo14="";}		
                    $surplus_lo31 = number_format($surplus_lo3x,"2",",",".");
                    
					$surplus_lo_lalu3 = $pen_lo_lalu8 - $bel_lo_lalu10;
                    if ($surplus_lo_lalu3 < 0){
                    	$lo15="("; $surplus_lo_lalu3x=$surplus_lo_lalu3*-1; $lo16=")";}
                    else {
                    	$lo15=""; $surplus_lo_lalu3x=$surplus_lo_lalu3; $lo16="";}						
                    $surplus_lo_lalu31 = number_format($surplus_lo_lalu3x,"2",",",".");

					$selisih_surplus_lo3 = $surplus_lo3 - $surplus_lo_lalu3;
                    if ($selisih_surplus_lo3 < 0){
                    	$lo17="("; $selisih_surplus_lo3x=$selisih_surplus_lo3*-1; $lo18=")";}
                    else {
                    	$lo17=""; $selisih_surplus_lo3x=$selisih_surplus_lo3; $lo18="";}
                    $selisih_surplus_lo31 = number_format($selisih_surplus_lo3x,"2",",",".");
                    
					if( $surplus_lo_lalu3=='' or $surplus_lo_lalu3==0){
					$persen4 = '0,00';
					}else{
					$persen4 = ($surplus_lo3/$surplus_lo_lalu3)*100;
					$persen4 = number_format($persen4,"2",",",".");
					}
	 
	 $modtahun= $thn_ang%4;
	 
	 if ($modtahun = 0){
        $nilaibulan=".31 JANUARI.29 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
            else {
        $nilaibulan=".31 JANUARI.28 FEBRUARI.31 MARET.30 APRIL.31 MEI.30 JUNI.31 JULI.31 AGUSTUS.30 SEPTEMBER.31 OKTOBER.30 NOVEMBER.31 DESEMBER";}
	 
	 $arraybulan=explode(".",$nilaibulan);
        $cRet='';
        
       
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\">
                    <tr>
                         <td align=\"center\"><strong>PEMERINTAH KABUPATEN SANGGAU</strong></td>                         
                    </tr>
					<tr>
                         <td align=\"center\"><strong> $nm_skpd</strong></td>
                    </tr>
                    <tr>
                         <td align=\"center\"><strong>LAPORAN OPERASIONAL </strong></td>
                    </tr>                    
                    <tr>
                         <td align=\"center\"><strong>UNTUK TAHUN YANG BERAKHIR SAMPAI DENGAN $arraybulan[$cbulan] $thn_ang DAN $thn_ang_1</strong></td>
                    </tr>
					<tr>
                         <td align=\"center\"><strong>&nbsp;</strong></td>
                    </tr>
                  </table>";   
     
		$cRet .= "<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"1\" cellspacing=\"0\" cellpadding=\"4\">
                     <thead>                       
                        <tr>
                            <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                            <td bgcolor=\"#CCCCCC\" width=\"5%\" align=\"center\"><b>NO</b></td>                            
                            <td colspan =\"6\" bgcolor=\"#CCCCCC\" width=\"27%\" align=\"center\"><b>URAIAN</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang</b></td>
                            <td bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\"><b>$thn_ang_1</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"20%\" align=\"center\" ><b>Kenaikan<br/>(Penurunan)</b></td>
                            <td  bgcolor=\"#CCCCCC\" width=\"10%\" align=\"center\" ><b>%</b></td>   
                        </tr>
                        
                     </thead>
                     <tfoot>
                        <tr>
                            <td style=\"border:none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td colspan =\"6\" style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>
                            <td style=\"border-top: none;\"></td>                           
                         </tr>
                     </tfoot>
                   
                     <tr>
                            <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"5%\" align=\"center\">&nbsp;</td>                            
                            <td colspan =\"6\" style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"27%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"20%\">&nbsp;</td>
                            <td style=\"vertical-align:top;border-top: none;border-bottom: none;\" width=\"10%\">&nbsp;</td>
                        </tr>";

        $sqlmaplo="	select '1' bold, '8' kode, 'PENDAPATAN' nm_rek, 0 nilai, 0 nilai_l 
					union all
					select '2' bold, '81' kode, 'PENDAPATAN ASLI DAERAH' nm_rek, 0 nilai, 0 nilai_l 
					union all
					select '3' bold, '811' kode, 'Pendapatan Pajak Daerah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('811')                    
					union all
					select '3' bold, '812' kode, 'Pendapatan Retribusi Daerah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('812')
                    union all
					select '3' bold, '813' kode, 'Pendapatan Hasil Pengelolaan Kekayaan Daerah yang Dipisahkan' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('813')
					union all
					select '3' bold, '814' kode, 'Lain-lain PAD Yang Sah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('814')
					union all
					select '5' bold, '814999999' kode, 'Jumlah Pendapatan Asli Daerah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('811','812','813','814')
					union all
					select '0' bold, '8149999999' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '2' bold, '83' kode, 'LAIN-LAIN PENDAPATAN DAERAH YANG SAH' nm_rek, 0 nilai, 0 nilai_l  
					union all
					select '3' bold, '833' kode, 'Pendapatan Lainnya' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('833','831')
					union all
					select '5' bold, '833999999' kode, 'Jumlah Pendapatan Lainnya' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('833','831')
					union all
					select '0' bold, '8339999999' kode, '' nm_rek, 0 nilai, 0 nilai_l 
					union all
					select '4' bold, LEFT(kd_rek5,5) kode, c.nm_rek4_64 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek4_64 c on left(a.kd_rek5,5)=c.kd_rek4_64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('811','812','813','814','833')
					group by LEFT(kd_rek5,5), c.nm_rek4_64
					union all
					select '41' bold, LEFT(c.kd_rek64,7) kode, c.nm_rek5 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek5 c on left(a.kd_rek5,7)=c.kd_rek64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('811','812','813','814','833')
					group by LEFT(c.kd_rek64,7), c.nm_rek5
					union all					
                    select '1' bold, '9' kode, 'BEBAN' nm_rek, 0 nilai, 0 nilai_l 
					union all
					select '2' bold, '91' kode, 'BEBAN OPERASI' nm_rek, 0 nilai, 0 nilai_l
					union all 
					select '3' bold, '911' kode, 'Beban Pegawai' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('911')
					union all
					select '3' bold, '912' kode, 'Beban Barang dan Jasa' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('912')
					union all
					select '3' bold, '913' kode, 'Beban Bunga' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('913')
					union all
					select '3' bold, '914' kode, 'Beban Subsidi' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('914')
					union all
					select '3' bold, '915' kode, 'Beban Hibah' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('915')
					union all
					select '3' bold, '916' kode, 'Beban Bantuan Sosial' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('916')
					union all
					select '3' bold, '917' kode, 'Beban Penyusutan' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('917')
					union all
					select '3' bold, '918' kode, 'Beban Penyisihan Piutang' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('918')
					union all
					select '3' bold, '919' kode, 'Beban Lain-lain' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('919')
					union all
					select '4' bold, LEFT(kd_rek5,5) kode, c.nm_rek4_64 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek4_64 c on left(a.kd_rek5,5)=c.kd_rek4_64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('91')
					group by LEFT(kd_rek5,5), c.nm_rek4_64 
					union all
					select '41' bold, LEFT(kd_rek64,7) kode, c.nm_rek5 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek5 c on left(a.kd_rek5,7)=c.kd_rek64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('91')
					group by LEFT(kd_rek64,7), c.nm_rek5 					
                    union all
					select '5' bold, '91999999' kode, 'Jumlah Beban Operasi' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('91')
					union all
					select '0' bold, '919999999' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '6' bold, '9199999999' kode, 'JUMLAH SURPLUS/DEFISIT DARI OPERASI' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '0' bold, '91999999999' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '2' bold, '984' kode, 'SURPLUS NON OPERASIONAL' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '3' bold, '9841' kode, 'Surplus Penjualan Aset Non Lancar' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('841')
					union all
					select '3' bold, '9842' kode, 'Surplus Penyelesaian Kewajiban Jangka Panjang' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('842')
					union all
					select '3' bold, '9843' kode, 'Surplus dari Kegiatan Non Operasional Lainnya' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('843')
					union all
					select '5' bold, '9844' kode, 'Jumlah Surplus Non Operasional' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('84')
					union all
					select '4' bold, '9'+LEFT(kd_rek5,5) kode, c.nm_rek4_64 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek4_64 c on left(a.kd_rek5,5)=c.kd_rek4_64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('84')
					group by LEFT(kd_rek5,5), c.nm_rek4_64
					union all
					select '41' bold, '9'+LEFT(kd_rek64,7) kode, c.nm_rek5 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then kredit-debet else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then kredit-debet else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek5 c on left(a.kd_rek5,7)=c.kd_rek64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('84')
					group by LEFT(kd_rek64,7), c.nm_rek5					
                    union all
					select '0' bold, '984444444' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '2' bold, '993' kode, 'DEFISIT NON OPERASIONAL' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '3' bold, '9931' kode, 'Defisit Penjualan Aset Non Lancar' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('931')
					union all
					select '3' bold, '9932' kode, 'Defisit Penyelesaian Kewajiban Jangka Panjang' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('932')
					union all
					select '3' bold, '9933' kode, 'Defisit dari Kegiatan Non Operasional Lainnya' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,3) in ('933')
					union all
					select '5' bold, '9933333333' kode, 'Jumlah Defisit Non Operasioanl' nm_rek,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('93')
					union all
					select '4' bold, '9'+LEFT(kd_rek5,5) kode, c.nm_rek4_64 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek4_64 c on left(a.kd_rek5,5)=c.kd_rek4_64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('93')
					group by LEFT(kd_rek5,5), c.nm_rek4_64 
					union all
					select '41' bold, '9'+LEFT(kd_rek64,7) kode, c.nm_rek5 nm_rek, 
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang' and month(tgl_voucher)<='$cbulan' then debet-kredit else 0 end),0) nilai,
					isnull(sum(case when YEAR(tgl_voucher)='$thn_ang_1' then debet-kredit else 0 end),0) nilai_l 
					from trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd
					left join ms_rek5 c on left(a.kd_rek5,7)=c.kd_rek64
					where left(a.kd_unit,7)=left('$id',7) and LEFT(a.kd_rek5,2) in ('93')
					group by LEFT(kd_rek64,7), c.nm_rek5 					
                    union all
					select '0' bold, '99333333333' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '7' bold, '993333333333' kode, 'JUMLAH SURPLUS / DEFISIT DARI KEGIATAN NON OPERASIONAL' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '0' bold, '9933333333333' kode, '' nm_rek, 0 nilai, 0 nilai_l
					union all
					select '8' bold, '99333333333333' kode, 'SURPLUS / DEFISIT - LO' nm_rek, 0 nilai, 0 nilai_l
					order by kode";
				   
                $querymaplo = $this->db->query($sqlmaplo);
                $no     = 0;                                  
               
                foreach ($querymaplo->result() as $loquery)
                {
                    $bold      	= $loquery->bold;
					$kode    	= $loquery->kode;
                    $nama     	= $loquery->nm_rek;   
                //  $n        	= $loquery->kode_1;
				//	$n		  	= ($n=="-"?"'-'":$n);
					$nil      	= $loquery->nilai;
					$nil_lalu  = $loquery->nilai_l;
					$nilai   	= number_format($nil,"2",",",".");
					$nilai_lalu = number_format($nil_lalu,"2",",",".");
					
		/*$quelo01   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang and month(b.tgl_voucher)<=$cbulan and left(b.kd_skpd,7)=left('$id',7)";
                    $quelo02 = $this->db->query($quelo01);
                    $quelo03 = $quelo02->row();
                    $nil     = $quelo03->nilai;
                    $nilai    = number_format($quelo03->nilai,"2",",",".");
					
		$quelo04   = "SELECT SUM($normal) as nilai FROM trdju_pkd a inner join trhju_pkd b on a.no_voucher=b.no_voucher and a.kd_unit=b.kd_skpd WHERE left(kd_rek5,3) in ($n) and year(tgl_voucher)=$thn_ang_1 and left(b.kd_skpd,7)=left('$id',7)";
                    $quelo05 = $this->db->query($quelo04);
                    $quelo06 = $quelo05->row();
                    $nil_lalu     = $quelo06->nilai;
                    $nilai_lalu    = number_format($quelo06->nilai,"2",",",".");*/
					
                    $real_nilai = $nil - $nil_lalu;
                    if ($real_nilai < 0){
                    	$lo0="("; $real_nilaix=$real_nilai*-1; $lo00=")";}
                    else {
                    	$lo0=""; $real_nilaix=$real_nilai; $lo00="";}
                    $real_nilai1 = number_format($real_nilaix,"2",",",".");
                    
					if( $nil_lalu=='' or $nil_lalu==0){
					$persen1 = '0,00';
					}else{
					$persen1 = ($nil/$nil_lalu)*100;
					$persen1 = number_format($persen1,"2",",",".");
					}
                    $no       = $no + 1;
                    switch ($loquery->bold) {
                    case 0:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 1:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td colspan =\"6\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 2:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td colspan =\"5\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"></td>
                                 </tr>";
                        break;
					case 3:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td colspan =\"4\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai_lalu<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo0$real_nilai1$lo00<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen1<b></td>
                                 </tr>";
                        break;
					case 4:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\">$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;	
					case 41:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\">$no</td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td colspan =\"3\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\">&nbsp;&nbsp;&nbsp;&nbsp;$nama</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$nilai_lalu</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\">$lo0$real_nilai1$lo00</td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\">$persen1</td>
                                 </tr>";
                        break;					
                    case 5:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td colspan =\"2\" style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$nilai_lalu<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo0$real_nilai1$lo00<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen1<b></td>
                                 </tr>";
                        break;
					case 6:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo1$surplus_lo1$lo2<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo3$surplus_lo_lalu1$lo4<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo5$selisih_surplus_lo1$lo6<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen2<b></td>
                                 </tr>";
                        break;
					case 7:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo7$surplus_lo21$lo8<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo9$surplus_lo_lalu21$lo10<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo11$selisih_surplus_lo21$lo12<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen3<b></td>
                                 </tr>";
                        break;
					case 8:
                         $cRet    .= "<tr>
                                     <td width=\"8%\" align=\"center\" style=\"border:none;\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"5%\" align=\"center\"><b>$no<b></td>                                     
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"2%\"></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;border-left: none;border-right: none;\" width=\"27%\"><b>$nama<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo13$surplus_lo31$lo14<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo15$surplus_lo_lalu31$lo16<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"20%\" align=\"right\"><b>$lo17$selisih_surplus_lo31$lo18<b></td>
                                     <td style=\"vertical-align:top;border-top: solid 1px black;border-bottom: none;\" width=\"10%\" align=\"right\"><b>$persen4<b></td>
                                 </tr>";
                        break;	
				}
                              
                    
                }
				
       // $cRet         .= "</table>";
//        $data['prev']  = $cRet;
//        $data['sikap'] = 'preview';
//        
//        
//        
//        $this->template->set('title', 'LAPORAN OPERASIONAL'); 
//        $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
        //$this->template->load('template','anggaran/rka/perkadaII',$data); 
/*        
        $cRet .=       " </table>";
        
        	$sqlttd1="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PA' and nip='$ttd1'";
            $sqlttd=$this->db->query($sqlttd1);
            foreach ($sqlttd->result() as $rowttd)
			
                {
                    $nip=$rowttd->nip;                    
                    $oioi= $rowttd->nm;
                    $jabatan = $rowttd->jab;
                }	
            
            $sqlttd12="SELECT nama as nm,nip as nip,jabatan as jab FROM ms_ttd where kd_skpd='$id' and kode='PPK' and nip='$ttd2'";
            $sqlttd2=$this->db->query($sqlttd12);
            foreach ($sqlttd2->result() as $rowttd)
			
                {
                    $nip2=$rowttd->nip;                    
                    $oioi2= $rowttd->nm;
                    $jabatan2 = $rowttd->jab;
                }	

            
        $cRet .="<table style=\"border-collapse:collapse;\" width=\"100%\" align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> Mengetahui,</td>
		 <td align=\"center\" width=\"50%\"> Sanggau, $ctgl_ttd </td>
		 </tr>		
		 <tr>
		 <td align=\"center\" width=\"50%\"> $jabatan </td>
		 <td align=\"center\" width=\"50%\"> $jabatan2 </td>
		 </tr>	
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		  <tr>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 <td align=\"center\" width=\"50%\"> &nbsp; </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> $oioi</td>
		 <td align=\"center\" width=\"50%\"> $oioi2 </td>
		 </tr>
		 <tr>
		 <td align=\"center\" width=\"50%\"> NIP :$nip</td>
		 <td align=\"center\" width=\"50%\"> NIP :$nip2 </td>
		 </tr>
         </table>
		 ";
*/        
        $cRet .=       " </table>";
        $data['prev']= $cRet;
        $data['sikap'] = 'preview';
        $judul  = ("LO RINCIAN SKPD $id / $cbulan");
        $this->template->set('title', 'LO RINCIAN SKPD $id / $cbulan');        
        switch($pilih) {       
        case 1;
			echo ("<title>LO RINCIAN SKPD $cbulan</title>");
			 echo $cRet;
        break;
        case 2;        
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-excel");
            header("Content-Disposition: attachment; filename= $judul.xls");
            
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
        case 3;     
            header("Cache-Control: no-cache, no-store, must-revalidate");
            header("Content-Type: application/vnd.ms-word");
            header("Content-Disposition: attachment; filename= $judul.doc");
            $this->load->view('anggaran/rka/perkadaII', $data);
        break;
         case 0;
              $this->tukd_model->_mpdf('',$cRet,10,10,10,'0');
         break;
        
        } 
                 
    }

}